/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={7088:(e,t,n)=>{"use strict";n.d(t,{Iv:()=>Yt});var i=n(6900),r=n(4376),s=n(4212);function o(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var a=n(392);const c=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},l=new i.UR("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),u=new s.YJ("@firebase/auth");function h(e,...t){u.logLevel<=s.Ge.ERROR&&u.error(`Auth (${r.Sg}): ${e}`,...t)}function d(e,...t){throw p(e,...t)}function f(e,...t){return p(e,...t)}function p(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return l.create(e,...t)}function g(e,t,...n){if(!e)throw p(t,...n)}function m(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function y(e,t){e||m(t)}function v(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function E(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class w{constructor(e,t){this.shortDelay=e,this.longDelay=t,y(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.AV)()||(0,i.AL)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===E()||"https:"===E()||(0,i.Cc)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function _(e,t){y(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class b{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void m("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void m("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void m("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const T={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},S=new w(3e4,6e4);function A(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function I(e,t,n,r,s={}){return C(e,s,(async()=>{let s={},o={};r&&("GET"===t?o=r:s={body:JSON.stringify(r)});const a=(0,i.ik)(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),b.fetch()(x(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},s))}))}async function C(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},T),t);try{const t=new N(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw L(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const t=s.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw L(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw L(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw L(e,"user-disabled",o);const l=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw function(e,t,n){const r=Object.assign(Object.assign({},c()),{[t]:n});return new i.UR("auth","Firebase",r).create(t,{appName:e.name})}(e,l,a);d(e,l)}}catch(t){if(t instanceof i.kx)throw t;d(e,"network-request-failed",{message:String(t)})}}async function k(e,t,n,i,r={}){const s=await I(e,t,n,i,r);return"mfaPendingCredential"in s&&d(e,"multi-factor-auth-required",{_serverResponse:s}),s}function x(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?_(e.config,r):`${e.config.apiScheme}://${r}`}function D(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class N{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(f(this.auth,"network-request-failed"))),S.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function L(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=f(e,t,i);return r.customData._tokenResponse=n,r}function R(e){return void 0!==e&&void 0!==e.enterprise}class O{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return D(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}function U(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function P(e){return 1e3*Number(e)}function M(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.WW)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(e){return h("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function F(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof i.kx&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class j{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class B{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=U(this.lastLoginAt),this.creationTime=U(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function V(e){var t;const n=e.auth,i=await e.getIdToken(),r=await F(e,async function(e,t){return I(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));g(null==r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=(l=e.providerData,u=a,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const h=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==c?void 0:c.length)),f=!!h&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new B(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(e,p)}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){g(e.idToken,"internal-error"),g(void 0!==e.idToken,"internal-error"),g(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=M(e);return g(t,"internal-error"),g(void 0!==t.exp,"internal-error"),g(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return g(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await C(e,{},(async()=>{const n=(0,i.ik)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=x(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",b.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new q;return n&&(g("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(g("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(g("number"==typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return m("not implemented")}}function H(e,t){g("string"==typeof e||void 0===e,"internal-error",{appName:t})}class z{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new j(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new B(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await F(this,this.stsTokenManager.getToken(this.auth,e));return g(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=(0,i.Yj)(e),r=await n.getIdToken(t),s=M(r);g(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:U(P(s.auth_time)),issuedAtTime:U(P(s.iat)),expirationTime:U(P(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,i.Yj)(e);await V(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(g(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new z(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){g(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await V(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await F(this,async function(e,t){return I(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,y=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:E,emailVerified:w,isAnonymous:_,providerData:b,stsTokenManager:T}=t;g(E&&T,e,"internal-error");const S=q.fromJSON(this.name,T);g("string"==typeof E,e,"internal-error"),H(u,e.name),H(h,e.name),g("boolean"==typeof w,e,"internal-error"),g("boolean"==typeof _,e,"internal-error"),H(d,e.name),H(f,e.name),H(p,e.name),H(m,e.name),H(y,e.name),H(v,e.name);const A=new z({uid:E,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:y,lastLoginAt:v});return b&&Array.isArray(b)&&(A.providerData=b.map((e=>Object.assign({},e)))),m&&(A._redirectEventId=m),A}static async _fromIdTokenResponse(e,t,n=!1){const i=new q;i.updateFromServerResponse(t);const r=new z({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await V(r),r}}const $=new Map;function W(e){y(e instanceof Function,"Expected a class definition");let t=$.get(e);return t?(y(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,$.set(e,t),t)}class G{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}G.type="NONE";const K=G;function Y(e,t,n){return`firebase:${e}:${t}:${n}`}class X{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Y(this.userKey,i.apiKey,r),this.fullPersistenceKey=Y("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?z._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new X(W(K),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||W(K);const s=Y(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const i=z._fromJSON(e,t);n!==r&&(o=i),r=n;break}}catch(e){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(e){}}))),new X(r,e,n)):new X(r,e,n)}}function Q(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(te(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(J(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ie(t))return"Blackberry";if(re(t))return"Webos";if(Z(t))return"Safari";if((t.includes("chrome/")||ee(t))&&!t.includes("edge/"))return"Chrome";if(ne(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function J(e=(0,i.Su)()){return/firefox\//i.test(e)}function Z(e=(0,i.Su)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ee(e=(0,i.Su)()){return/crios\//i.test(e)}function te(e=(0,i.Su)()){return/iemobile/i.test(e)}function ne(e=(0,i.Su)()){return/android/i.test(e)}function ie(e=(0,i.Su)()){return/blackberry/i.test(e)}function re(e=(0,i.Su)()){return/webos/i.test(e)}function se(e=(0,i.Su)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function oe(e=(0,i.Su)()){return se(e)||ne(e)||re(e)||ie(e)||/windows phone/i.test(e)||te(e)}function ae(e,t=[]){let n;switch(e){case"Browser":n=Q((0,i.Su)());break;case"Worker":n=`${Q((0,i.Su)())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${r.Sg}/${s}`}class ce{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(e){i(e)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class le{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class ue{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new de(this),this.idTokenSubscription=new de(this),this.beforeStateQueue=new ce(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=W(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await X.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(e){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return g(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await V(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,i.Yj)(e):null;return t&&g(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&g(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(W(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return I(e,"GET","/v2/passwordPolicy",A(e,t))}(this),t=new le(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new i.UR("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return I(e,"POST","/v2/accounts:revokeToken",A(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&W(e)||this._popupRedirectResolver;g(t,this,"argument-error"),this.redirectPersistenceManager=await X.create(this,[W(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(g(o,this,"internal-error"),o.then((()=>{s||r(this.currentUser)})),"function"==typeof t){const r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return g(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){u.logLevel<=s.Ge.WARN&&u.warn(`Auth (${r.Sg}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function he(e){return(0,i.Yj)(e)}class de{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.my)((e=>this.observer=e))}get next(){return g(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fe={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pe(e){return fe.loadJS(e)}function ge(e){return`__${e}${Math.floor(1e6*Math.random())}`}class me{constructor(e){this.type="recaptcha-enterprise",this.auth=he(e)}async verify(e="verify",t=!1){function n(t,n,i){const r=window.grecaptcha;R(r)?r.enterprise.ready((()=>{r.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return I(e,"GET","/v2/recaptchaConfig",A(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new O(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((r=>{if(!t&&R(window.grecaptcha))n(r,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=fe.recaptchaEnterpriseScript;0!==t.length&&(t+=r),pe(t).then((()=>{n(r,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function ye(e,t,n,i=!1){const r=new me(e);let s;try{s=await r.verify(n)}catch(e){s=await r.verify(n,!0)}const o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ve(e,t,n,i){var r;if(null===(r=e._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await ye(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch((async r=>{if("auth/missing-recaptcha-token"===r.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const r=await ye(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)}))}function Ee(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function we(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class _e{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return m("not implemented")}_getIdTokenResponse(e){return m("not implemented")}_linkToIdToken(e,t){return m("not implemented")}_getReauthenticationResolver(e){return m("not implemented")}}async function be(e,t){return I(e,"POST","/v1/accounts:signUp",t)}async function Te(e,t){return k(e,"POST","/v1/accounts:signInWithPassword",A(e,t))}class Se extends _e{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Se(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Se(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ve(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Te);case"emailLink":return async function(e,t){return k(e,"POST","/v1/accounts:signInWithEmailLink",A(e,t))}(e,{email:this._email,oobCode:this._password});default:d(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ve(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",be);case"emailLink":return async function(e,t){return k(e,"POST","/v1/accounts:signInWithEmailLink",A(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:d(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ae(e,t){return k(e,"POST","/v1/accounts:signInWithIdp",A(e,t))}class Ie extends _e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ie(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):d("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=o(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Ie(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return Ae(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ae(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ae(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.ik)(t)}return e}}const Ce={USER_NOT_FOUND:"user-not-found"};class ke extends _e{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ke({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ke({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return k(e,"POST","/v1/accounts:signInWithPhoneNumber",A(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await k(e,"POST","/v1/accounts:signInWithPhoneNumber",A(e,t));if(n.temporaryProof)throw L(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return k(e,"POST","/v1/accounts:signInWithPhoneNumber",A(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ce)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new ke({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class xe{constructor(e){var t,n,r,s,o,a;const c=(0,i.aw)((0,i.kF)(e)),l=null!==(t=c.apiKey)&&void 0!==t?t:null,u=null!==(n=c.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=c.mode)&&void 0!==r?r:null);g(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,i.aw)((0,i.kF)(e)).link,n=t?(0,i.aw)((0,i.kF)(t)).deep_link_id:null,r=(0,i.aw)((0,i.kF)(e)).deep_link_id;return(r?(0,i.aw)((0,i.kF)(r)).link:null)||r||n||t||e}(e);try{return new xe(t)}catch(e){return null}}}class De{constructor(){this.providerId=De.PROVIDER_ID}static credential(e,t){return Se._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=xe.parseLink(t);return g(n,"argument-error"),Se._fromEmailAndCode(e,n.code,n.tenantId)}}De.PROVIDER_ID="password",De.EMAIL_PASSWORD_SIGN_IN_METHOD="password",De.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ne{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Le extends Ne{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Re extends Le{constructor(){super("facebook.com")}static credential(e){return Ie._fromParams({providerId:Re.PROVIDER_ID,signInMethod:Re.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Re.credentialFromTaggedObject(e)}static credentialFromError(e){return Re.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Re.credential(e.oauthAccessToken)}catch(e){return null}}}Re.FACEBOOK_SIGN_IN_METHOD="facebook.com",Re.PROVIDER_ID="facebook.com";class Oe extends Le{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ie._fromParams({providerId:Oe.PROVIDER_ID,signInMethod:Oe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Oe.credentialFromTaggedObject(e)}static credentialFromError(e){return Oe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Oe.credential(t,n)}catch(e){return null}}}Oe.GOOGLE_SIGN_IN_METHOD="google.com",Oe.PROVIDER_ID="google.com";class Ue extends Le{constructor(){super("github.com")}static credential(e){return Ie._fromParams({providerId:Ue.PROVIDER_ID,signInMethod:Ue.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ue.credentialFromTaggedObject(e)}static credentialFromError(e){return Ue.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ue.credential(e.oauthAccessToken)}catch(e){return null}}}Ue.GITHUB_SIGN_IN_METHOD="github.com",Ue.PROVIDER_ID="github.com";class Pe extends Le{constructor(){super("twitter.com")}static credential(e,t){return Ie._fromParams({providerId:Pe.PROVIDER_ID,signInMethod:Pe.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Pe.credentialFromTaggedObject(e)}static credentialFromError(e){return Pe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Pe.credential(t,n)}catch(e){return null}}}Pe.TWITTER_SIGN_IN_METHOD="twitter.com",Pe.PROVIDER_ID="twitter.com";class Me{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const r=await z._fromIdTokenResponse(e,n,i),s=Fe(n);return new Me({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Fe(n);return new Me({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Fe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class je extends i.kx{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,je.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new je(e,t,n,i)}}function Be(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw je._fromErrorAndOperation(e,n,t,i);throw n}))}new WeakMap;const Ve="__sak";class qe{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ve,"1"),this.storage.removeItem(Ve),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class He extends qe{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,i.Su)();return Z(e)||se(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=oe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,i.Uv)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}He.type="LOCAL";const ze=He;class $e extends qe{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$e.type="SESSION";const We=$e;class Ge{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ge(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async e=>e(t.origin,r))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ke(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Ge.receivers=[];class Ye{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const c=Ke("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(l),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Xe(){return window}function Qe(){return void 0!==Xe().WorkerGlobalScope&&"function"==typeof Xe().importScripts}const Je="firebaseLocalStorageDb",Ze="firebaseLocalStorage",et="fbase_key";class tt{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function nt(e,t){return e.transaction([Ze],t?"readwrite":"readonly").objectStore(Ze)}function it(){const e=indexedDB.open(Je,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ze,{keyPath:et})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ze)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Je);return new tt(e).toPromise()}(),t(await it()))}))}))}async function rt(e,t,n){const i=nt(e,!0).put({[et]:t,value:n});return new tt(i).toPromise()}function st(e,t){const n=nt(e,!0).delete(t);return new tt(n).toPromise()}class ot{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await it()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ge._getInstance(Qe()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ye(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await it();return await rt(e,Ve,"1"),await st(e,Ve),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>rt(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=nt(e,!1).get(t),i=await new tt(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>st(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=nt(e,!1).getAll();return new tt(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ot.type="LOCAL";const at=ot;ge("rcb"),new w(3e4,6e4);class ct{constructor(e){this.providerId=ct.PROVIDER_ID,this.auth=he(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var i;const r=await n.verify();try{let s;if(g("string"==typeof r,e,"argument-error"),g("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){g("enroll"===t.type,e,"internal-error");const n=await function(e,t){return I(e,"POST","/v2/accounts/mfaEnrollment:start",A(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{g("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;g(n,e,"missing-multi-factor-info");const o=await function(e,t){return I(e,"POST","/v2/accounts/mfaSignIn:start",A(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return I(e,"POST","/v1/accounts:sendVerificationCode",A(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}(this.auth,e,(0,i.Yj)(t))}static credential(e,t){return ke._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ct.credentialFromTaggedObject(t)}static credentialFromError(e){return ct.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ke._fromTokenResponse(t,n):null}}ct.PROVIDER_ID="phone",ct.PHONE_SIGN_IN_METHOD="phone";class lt extends _e{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ae(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ae(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ae(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ut(e){return async function(e,t,n=!1){const i="signIn",r=await Be(e,i,t),s=await Me._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}(e.auth,new lt(e),e.bypassAuthState)}function ht(e){const{auth:t,user:n}=e;return g(n,t,"internal-error"),async function(e,t,n=!1){const{auth:i}=e,r="reauthenticate";try{const s=await F(e,Be(i,r,t,e),n);g(s.idToken,i,"internal-error");const o=M(s.idToken);g(o,i,"internal-error");const{sub:a}=o;return g(e.uid===a,i,"user-mismatch"),Me._forOperation(e,r,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&d(i,"user-mismatch"),e}}(n,new lt(e),e.bypassAuthState)}async function dt(e){const{auth:t,user:n}=e;return g(n,t,"internal-error"),async function(e,t,n=!1){const i=await F(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Me._forOperation(e,"link",i)}(n,new lt(e),e.bypassAuthState)}class ft{constructor(e,t,n,i,r=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ut;case"linkViaPopup":case"linkViaRedirect":return dt;case"reauthViaPopup":case"reauthViaRedirect":return ht;default:d(this.auth,"internal-error")}}resolve(e){y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pt=new w(2e3,1e4);class gt extends ft{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,gt.currentPopupAction&&gt.currentPopupAction.cancel(),gt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return g(e,this.auth,"internal-error"),e}async onExecution(){y(1===this.filter.length,"Popup operations only handle one event");const e=Ke();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(f(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(f(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,pt.get())};e()}}gt.currentPopupAction=null;const mt="pendingRedirect",yt=new Map;class vt extends ft{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=yt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Y(mt,e.config.apiKey,e.name)}(t),i=function(e){return W(e._redirectPersistence)}(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}yt.set(this.auth._key(),e)}return this.bypassAuthState||yt.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Et(e,t){yt.set(e._key(),t)}async function wt(e,t,n=!1){const i=he(e),r=function(e,t){return t?W(t):(g(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(i,t),s=new vt(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class _t{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tt(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Tt(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(f(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bt(e))}saveEventToCache(e){this.cachedEventUids.add(bt(e)),this.lastProcessedEventTime=Date.now()}}function bt(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Tt({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const St=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,At=/^https?/;function It(e){const t=v(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!At.test(n))return!1;if(St.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Ct=new w(3e4,6e4);function kt(){const e=Xe().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function xt(e){return new Promise(((t,n)=>{var i,r,s;function o(){kt(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{kt(),n(f(e,"network-request-failed"))},timeout:Ct.get()})}if(null===(r=null===(i=Xe().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Xe().gapi)||void 0===s?void 0:s.load)){const t=ge("iframefcb");return Xe()[t]=()=>{gapi.load?o():n(f(e,"network-request-failed"))},pe(`${fe.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Dt=null,e}))}let Dt=null;const Nt=new w(5e3,15e3),Lt="__/auth/iframe",Rt="emulator/auth/iframe",Ot={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ut=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pt(e){const t=e.config;g(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_(t,Rt):`https://${e.config.authDomain}/${Lt}`,s={apiKey:t.apiKey,appName:e.name,v:r.Sg},o=Ut.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,i.ik)(s).slice(1)}`}const Mt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ft{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const jt=encodeURIComponent("fac");async function Bt(e,t,n,s,o,a){g(e.config.authDomain,e,"auth-domain-config-required"),g(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:r.Sg,eventId:o};if(t instanceof Ne){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",(0,i.t7)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(t instanceof Le){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const l=c;for(const e of Object.keys(l))void 0===l[e]&&delete l[e];const u=await e._getAppCheckToken(),h=u?`#${jt}=${encodeURIComponent(u)}`:"";return`${function({config:e}){return e.emulator?_(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,i.ik)(l).slice(1)}${h}`}const Vt="webStorageSupport",qt=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=We,this._completeRedirectFn=wt,this._overrideRedirectResult=Et}async _openPopup(e,t,n,r){var s;return y(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=Object.assign(Object.assign({},Mt),{width:r.toString(),height:s.toString(),top:o,left:a}),u=(0,i.Su)().toLowerCase();n&&(c=ee(u)?"_blank":n),J(u)&&(t=t||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=(0,i.Su)()){var t;return se(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",c),new Ft(null);const d=window.open(t||"",c,h);g(d,e,"popup-blocked");try{d.focus()}catch(e){}return new Ft(d)}(e,await Bt(e,t,n,v(),r),Ke())}async _openRedirect(e,t,n,i){return await this._originValidation(e),r=await Bt(e,t,n,v(),i),Xe().location.href=r,new Promise((()=>{}));var r}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(y(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await function(e){return Dt=Dt||xt(e),Dt}(e),n=Xe().gapi;return g(n,e,"internal-error"),t.open({where:document.body,url:Pt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ot,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=f(e,"network-request-failed"),s=Xe().setTimeout((()=>{i(r)}),Nt.get());function o(){Xe().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{i(r)}))}))))}(e),n=new _t(e);return t.register("authEvent",(t=>(g(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vt,{type:Vt},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i[Vt];void 0!==r&&t(!!r),d(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return I(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(It(e))return}catch(e){}d(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oe()||Z()||se()}};var Ht="@firebase/auth",zt="1.6.0";class $t{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){g(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Wt=(0,i.sX)("authIdTokenMaxAge")||300;let Gt=null;const Kt=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Wt)return;const r=null==n?void 0:n.token;Gt!==r&&(Gt=r,await fetch(e,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Yt(e=(0,r.WE)()){const t=(0,r.U5)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.U5)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,i.IN)(r,null!=t?t:{}))return e;d(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:qt,persistence:[at,ze,We]}),s=(0,i.sX)("authTokenSyncURL");if(s){const e=Kt(s);!function(e,t,n){(0,i.Yj)(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(t,n,r,s){(0,i.Yj)(t).onIdTokenChanged((t=>e(t)),void 0,void 0)}(n)}const o=(0,i.EB)("auth");return o&&function(e,t,n){const i=he(e);g(i._canInitEmulator,i,"emulator-config-failed"),g(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=Ee(t),{host:o,port:a}=function(e){const t=Ee(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:we(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:we(t)}}}(t),c=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${o}`),n}var Xt;fe={loadJS:e=>new Promise(((t,n)=>{const i=document.createElement("script");var r,s;i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=f("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",(null!==(s=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==s?s:document).appendChild(i)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Xt="Browser",(0,r.q4)(new a.Yl("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;g(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:Xt,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ae(Xt)},c=new ue(n,i,r,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(W);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(c,t),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,r.q4)(new a.Yl("auth-internal",(e=>{return t=he(e.getProvider("auth").getImmediate()),new $t(t);var t}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.Kk)(Ht,zt,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Xt)),(0,r.Kk)(Ht,zt,"esm2017")},4112:(e,t,n)=>{"use strict";n.d(t,{kR:()=>Zi,oV:()=>du,UN:()=>fu,ET:()=>Tu,QL:()=>vh,i4:()=>fh,uY:()=>gh,gZ:()=>mu,Yf:()=>nh,k$:()=>eh,kt:()=>Yu,Sm:()=>mh,A9:()=>Qu,sv:()=>_h});var i,r=n(4376),s=n(392),o=n(4212),a=n(6900),c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l={},u=u||{},h=c||self;function d(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var p="closure_uid_"+(1e9*Math.random()>>>0),g=0;function m(e,t,n){return e.call.apply(e.bind,arguments)}function y(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function v(e,t,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:y).apply(null,arguments)}function E(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function _(){this.s=this.s,this.o=this.o}_.prototype.s=!1,_.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,p)&&e[p]||(e[p]=++g))},_.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const b=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function T(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function S(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(d(n)){const t=e.length||0,i=n.length||0;e.length=t+i;for(let r=0;r<i;r++)e[t+r]=n[r]}else e.push(n)}}function A(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};h.addEventListener("test",e,t),h.removeEventListener("test",e,t)}catch(e){}return e}();function C(e){return/^[\s\xa0]*$/.test(e)}function k(){var e=h.navigator;return e&&(e=e.userAgent)?e:""}function x(e){return-1!=k().indexOf(e)}function D(e){return D[" "](e),e}D[" "]=function(){};var N,L,R,O=x("Opera"),U=x("Trident")||x("MSIE"),P=x("Edge"),M=P||U,F=x("Gecko")&&!(-1!=k().toLowerCase().indexOf("webkit")&&!x("Edge"))&&!(x("Trident")||x("MSIE"))&&!x("Edge"),j=-1!=k().toLowerCase().indexOf("webkit")&&!x("Edge");function B(){var e=h.document;return e?e.documentMode:void 0}e:{var V="",q=(L=k(),F?/rv:([^\);]+)(\)|;)/.exec(L):P?/Edge\/([\d\.]+)/.exec(L):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(L):j?/WebKit\/(\S+)/.exec(L):O?/(?:Version)[ \/]?(\S+)/.exec(L):void 0);if(q&&(V=q?q[1]:""),U){var H=B();if(null!=H&&H>parseFloat(V)){N=String(H);break e}}N=V}h.document&&U?R=B()||parseInt(N,10)||void 0:R=void 0;var z=R;function $(e,t){if(A.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(F){e:{try{D(t.nodeName);var r=!0;break e}catch(e){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:W[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$.$.h.call(this)}}w($,A);var W={2:"touch",3:"pen",4:"mouse"};$.prototype.h=function(){$.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),K=0;function Y(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.la=r,this.key=++K,this.fa=this.ia=!1}function X(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Q(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function J(e){const t={};for(const n in e)t[n]=e[n];return t}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(e,t){let n,i;for(let t=1;t<arguments.length;t++){for(n in i=arguments[t],i)e[n]=i[n];for(let t=0;t<Z.length;t++)n=Z[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function te(e){this.src=e,this.g={},this.h=0}function ne(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=b(r,t);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(X(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ie(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==i)return r}return-1}te.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ie(e,t,i,r);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Y(t,this.src,s,!!i,r)).ia=n,e.push(t)),t};var re="closure_lm_"+(1e6*Math.random()|0),se={};function oe(e,t,n,i,r){if(i&&i.once)return ce(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)oe(e,t[s],n,i,r);return null}return n=ge(n),e&&e[G]?e.O(t,n,f(i)?!!i.capture:!!i,r):ae(e,t,n,!1,i,r)}function ae(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=f(r)?!!r.capture:!!r,a=fe(e);if(a||(e[re]=a=new te(e)),(n=a.add(t,n,i,o,s)).proxy)return n;if(i=function(){const e=de;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)I||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(he(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function ce(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ce(e,t[s],n,i,r);return null}return n=ge(n),e&&e[G]?e.P(t,n,f(i)?!!i.capture:!!i,r):ae(e,t,n,!0,i,r)}function le(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)le(e,t[s],n,i,r);else i=f(i)?!!i.capture:!!i,n=ge(n),e&&e[G]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=ie(s=e.g[t],n,i,r))&&(X(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=fe(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ie(t,n,i,r)),(n=-1<e?t[e]:null)&&ue(n))}function ue(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[G])ne(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(he(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=fe(t))?(ne(n,e),0==n.h&&(n.src=null,t[re]=null)):X(e)}}}function he(e){return e in se?se[e]:se[e]="on"+e}function de(e,t){if(e.fa)e=!0;else{t=new $(t,this);var n=e.listener,i=e.la||e.src;e.ia&&ue(e),e=n.call(i,t)}return e}function fe(e){return(e=e[re])instanceof te?e:null}var pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ge(e){return"function"==typeof e?e:(e[pe]||(e[pe]=function(t){return e.handleEvent(t)}),e[pe])}function me(){_.call(this),this.i=new te(this),this.S=this,this.J=null}function ye(e,t){var n,i=e.J;if(i)for(n=[];i;i=i.J)n.push(i);if(e=e.S,i=t.type||t,"string"==typeof t)t=new A(t,e);else if(t instanceof A)t.target=t.target||e;else{var r=t;ee(t=new A(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=ve(o,i,!0,t)&&r}if(r=ve(o=t.g=e,i,!0,t)&&r,r=ve(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=ve(o=t.g=n[s],i,!1,t)&&r}function ve(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ne(e.i,o),r=!1!==a.call(c,i)&&r}}return r&&!i.defaultPrevented}w(me,_),me.prototype[G]=!0,me.prototype.removeEventListener=function(e,t,n,i){le(this,e,t,n,i)},me.prototype.N=function(){if(me.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)X(n[i]);delete t.g[e],t.h--}}this.J=null},me.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},me.prototype.P=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var Ee=h.JSON.stringify;function we(){var e=Ce;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _e=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new be),(e=>e.reset()));class be{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Te(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Se(e){h.setTimeout((()=>{throw e}),0)}let Ae,Ie=!1,Ce=new class{constructor(){this.h=this.g=null}add(e,t){const n=_e.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},ke=()=>{const e=h.Promise.resolve(void 0);Ae=()=>{e.then(xe)}};var xe=()=>{for(var e;e=we();){try{e.h.call(e.g)}catch(e){Se(e)}var t=_e;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ie=!1};function De(e,t){me.call(this),this.h=e||1,this.g=t||h,this.j=v(this.qb,this),this.l=Date.now()}function Ne(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Le(e,t,n){if("function"==typeof e)n&&(e=v(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=v(e.handleEvent,e)}return 2147483647<Number(t)?-1:h.setTimeout(e,t||0)}function Re(e){e.g=Le((()=>{e.g=null,e.i&&(e.i=!1,Re(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}w(De,me),(i=De.prototype).ga=!1,i.T=null,i.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ye(this,"tick"),this.ga&&(Ne(this),this.start()))}},i.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},i.N=function(){De.$.N.call(this),Ne(this),delete this.g};class Oe extends _{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Re(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ue(e){_.call(this),this.h=e,this.g={}}w(Ue,_);var Pe=[];function Me(e,t,n,i){Array.isArray(n)||(n&&(Pe[0]=n.toString()),n=Pe);for(var r=0;r<n.length;r++){var s=oe(t,n[r],i||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Fe(e){Q(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ue(e)}),e),e.g={}}function je(){this.g=!0}function Be(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Ee(n)}catch(e){return t}}(e,n)+(i?" "+i:"")}))}Ue.prototype.N=function(){Ue.$.N.call(this),Fe(this)},Ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},je.prototype.Ea=function(){this.g=!1},je.prototype.info=function(){};var Ve={},qe=null;function He(){return qe=qe||new me}function ze(e){A.call(this,Ve.Ta,e)}function $e(e){const t=He();ye(t,new ze(t))}function We(e,t){A.call(this,Ve.STAT_EVENT,e),this.stat=t}function Ge(e){const t=He();ye(t,new We(t,e))}function Ke(e,t){A.call(this,Ve.Ua,e),this.size=t}function Ye(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){e()}),t)}Ve.Ta="serverreachability",w(ze,A),Ve.STAT_EVENT="statevent",w(We,A),Ve.Ua="timingevent",w(Ke,A);var Xe={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qe={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Je(){}function Ze(e){return e.h||(e.h=e.i())}function et(){}Je.prototype.h=null;var tt,nt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function it(){A.call(this,"d")}function rt(){A.call(this,"c")}function st(){}function ot(e,t,n,i){this.l=e,this.j=t,this.m=n,this.W=i||1,this.U=new Ue(this),this.P=ct,e=M?125:void 0,this.V=new De(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new at}function at(){this.i=null,this.g="",this.h=!1}w(it,A),w(rt,A),w(st,Je),st.prototype.g=function(){return new XMLHttpRequest},st.prototype.i=function(){return{}},tt=new st;var ct=45e3,lt={},ut={};function ht(e,t,n){e.L=1,e.A=Dt(At(t)),e.u=n,e.S=!0,dt(e,null)}function dt(e,t){e.G=Date.now(),mt(e),e.B=At(e.A);var n=e.B,i=e.W;Array.isArray(i)||(i=[String(i)]),Ht(n.i,"t",i),e.o=0,n=e.l.J,e.h=new at,e.g=zn(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Oe(v(e.Pa,e,e.g),e.O)),Me(e.U,e.g,"readystatechange",e.nb),t=e.I?J(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),$e(),function(e,t,n,i,r,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ft(e){return!!e.g&&"GET"==e.v&&2!=e.L&&e.l.Ha}function pt(e,t,n){let i,r=!0;for(;!e.J&&e.o<n.length;){if(i=gt(e,n),i==ut){4==t&&(e.s=4,Ge(14),r=!1),Be(e.j,e.m,null,"[Incomplete Response]");break}if(i==lt){e.s=4,Ge(15),Be(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}Be(e.j,e.m,i,null),_t(e,i)}ft(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Ge(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pn(t),t.M=!0,Ge(11))):(Be(e.j,e.m,n,"[Invalid Chunked Response]"),wt(e),Et(e))}function gt(e,t){var n=e.o,i=t.indexOf("\n",n);return-1==i?ut:(n=Number(t.substring(n,i)),isNaN(n)?lt:(i+=1)+n>t.length?ut:(t=t.slice(i,i+n),e.o=i+n,t))}function mt(e){e.Y=Date.now()+e.P,yt(e,e.P)}function yt(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Ye(v(e.lb,e),t)}function vt(e){e.C&&(h.clearTimeout(e.C),e.C=null)}function Et(e){0==e.l.H||e.J||jn(e.l,e)}function wt(e){vt(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ne(e.V),Fe(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function _t(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Xt(n.i,e)))if(!e.K&&Xt(n.i,e)&&3==n.H){try{var i=n.Ja.g.parse(t)}catch(e){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Fn(n),kn(n)}Un(n),Ge(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ye(v(n.ib,n),6e3));if(1>=Yt(n.i)&&n.oa){try{n.oa()}catch(e){}n.oa=void 0}}else Vn(n,11)}else if((e.K||n.g==e)&&Fn(n),!C(t))for(r=n.Ja.g.parse(t),t=0;t<r.length;t++){let l=r[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const r=l[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Qt(s,s.h),s.h=null))}if(i.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.Da=e,xt(i.I,i.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((i=n).wa=Hn(i,i.J?i.pa:null,i.Y),o.K){Jt(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(vt(a),mt(a)),i.g=o}else On(i);0<n.j.length&&Dn(n)}else"stop"!=l[0]&&"close"!=l[0]||Vn(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Vn(n,7):Cn(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}$e()}catch(e){}}function bt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(d(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(d(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(d(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],n&&n[s],e)}(i=ot.prototype).setTimeout=function(e){this.P=e},i.nb=function(e){e=e.target;const t=this.M;t&&3==_n(e)?t.l():this.Pa(e)},i.Pa=function(e){try{if(e==this.g)e:{const u=_n(this.g);var t=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||M||this.g&&(this.h.h||this.g.ja()||bn(this.g)))){this.J||4!=u||7==t||$e(),vt(this);var n=this.g.da();this.ca=n;t:if(ft(this)){var i=bn(this.g);e="";var r=i.length,s=4==_n(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){wt(this),Et(this);var o="";break t}this.h.i=new h.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,i,r,s,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Ge(12),wt(this),Et(this);break e}Be(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_t(this,n)}this.S?(pt(this,u,o),M&&this.i&&3==u&&(Me(this.U,this.V,"tick",this.mb),this.V.start())):(Be(this.j,this.m,o,null),_t(this,o)),4==u&&wt(this),this.i&&!this.J&&(4==u?jn(this.l,this):(this.i=!1,mt(this)))}else(function(e){const t={};e=(e.g&&2<=_n(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(C(e[i]))continue;var n=Te(e[i]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),wt(this),Et(this)}}}catch(e){}},i.mb=function(){if(this.g){var e=_n(this.g),t=this.g.ja();this.o<t.length&&(vt(this),pt(this,e,t),this.i&&4!=e&&mt(this))}},i.cancel=function(){this.J=!0,wt(this)},i.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&($e(),Ge(17)),wt(this),this.s=2,Et(this)):yt(this,this.Y-e)};var Tt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function St(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof St){this.h=e.h,It(this,e.j),this.s=e.s,this.g=e.g,Ct(this,e.m),this.l=e.l;var t=e.i,n=new jt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),kt(this,n),this.o=e.o}else e&&(t=String(e).match(Tt))?(this.h=!1,It(this,t[1]||"",!0),this.s=Nt(t[2]||""),this.g=Nt(t[3]||"",!0),Ct(this,t[4]),this.l=Nt(t[5]||"",!0),kt(this,t[6]||"",!0),this.o=Nt(t[7]||"")):(this.h=!1,this.i=new jt(null,this.h))}function At(e){return new St(e)}function It(e,t,n){e.j=n?Nt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ct(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function kt(e,t,n){t instanceof jt?(e.i=t,function(e,t){t&&!e.j&&(Bt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Vt(this,t),Ht(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Lt(t,Mt)),e.i=new jt(t,e.h))}function xt(e,t,n){e.i.set(t,n)}function Dt(e){return xt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Nt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Lt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Rt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Rt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}St.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Lt(t,Ot,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Lt(t,Ot,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Lt(n,"/"==n.charAt(0)?Pt:Ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Lt(n,Ft)),e.join("")};var Ot=/[#\/\?@]/g,Ut=/[#\?:]/g,Pt=/[#\?]/g,Mt=/[#\?@]/g,Ft=/#/g;function jt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Bt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Vt(e,t){Bt(e),t=zt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function qt(e,t){return Bt(e),t=zt(e,t),e.g.has(t)}function Ht(e,t,n){Vt(e,t),0<n.length&&(e.i=null,e.g.set(zt(e,t),T(n)),e.h+=n.length)}function zt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(i=jt.prototype).add=function(e,t){Bt(this),this.i=null,e=zt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},i.forEach=function(e,t){Bt(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},i.ta=function(){Bt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},i.Z=function(e){Bt(this);let t=[];if("string"==typeof e)qt(this,e)&&(t=t.concat(this.g.get(zt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},i.set=function(e,t){return Bt(this),this.i=null,qt(this,e=zt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},i.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),e.push(r)}}return this.i=e.join("&")};var $t=class{constructor(e,t){this.g=e,this.map=t}};function Wt(e){this.l=e||Gt,e=h.PerformanceNavigationTiming?0<(e=h.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(h.g&&h.g.Ka&&h.g.Ka()&&h.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Gt=10;function Kt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Yt(e){return e.h?1:e.g?e.g.size:0}function Xt(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qt(e,t){e.g?e.g.add(t):e.h=t}function Jt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Zt(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return T(e.i)}Wt.prototype.cancel=function(){if(this.i=Zt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var en=class{stringify(e){return h.JSON.stringify(e,void 0)}parse(e){return h.JSON.parse(e,void 0)}};function tn(){this.g=new en}function nn(e,t,n){const i=n||"";try{bt(e,(function(e,n){let r=e;f(e)&&(r=Ee(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(e){throw t.push(i+"type="+encodeURIComponent("_badmap")),e}}function rn(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(e){}}function sn(e){this.l=e.ec||null,this.j=e.ob||!1}function on(e,t){me.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=an,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}w(sn,Je),sn.prototype.g=function(){return new on(this.l,this.j)},sn.prototype.i=function(e){return function(){return e}}({}),w(on,me);var an=0;function cn(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ln(e){e.readyState=4,e.l=null,e.j=null,e.A=null,un(e)}function un(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(i=on.prototype).open=function(e,t){if(this.readyState!=an)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,un(this)},i.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||h).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},i.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ln(this)),this.readyState=an},i.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,un(this)),this.g&&(this.readyState=3,un(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==h.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cn(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},i.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ln(this):un(this),3==this.readyState&&cn(this)}},i.Za=function(e){this.g&&(this.response=this.responseText=e,ln(this))},i.Ya=function(e){this.g&&(this.response=e,ln(this))},i.ka=function(){this.g&&ln(this)},i.setRequestHeader=function(e,t){this.v.append(e,t)},i.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(on.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var hn=h.JSON.parse;function dn(e){me.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=fn,this.L=this.M=!1}w(dn,me);var fn="",pn=/^https?$/i,gn=["POST","PUT"];function mn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,yn(e),En(e)}function yn(e){e.F||(e.F=!0,ye(e,"complete"),ye(e,"error"))}function vn(e){if(e.h&&void 0!==u&&(!e.C[1]||4!=_n(e)||2!=e.da()))if(e.v&&4==_n(e))Le(e.La,0,e);else if(ye(e,"readystatechange"),4==_n(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===o){var r=String(e.I).match(Tt)[1]||null;!r&&h.self&&h.self.location&&(r=h.self.location.protocol.slice(0,-1)),i=!pn.test(r?r.toLowerCase():"")}n=i}if(n)ye(e,"complete"),ye(e,"success");else{e.m=6;try{var s=2<_n(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.da()+"]",yn(e)}}finally{En(e)}}}function En(e,t){if(e.g){wn(e);const n=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ye(e,"ready");try{n.onreadystatechange=i}catch(e){}}}function wn(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(h.clearTimeout(e.A),e.A=null)}function _n(e){return e.g?e.g.readyState:0}function bn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case fn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Tn(e){let t="";return Q(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Sn(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Tn(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):xt(e,t,n))}function An(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function In(e){this.Ga=0,this.j=[],this.l=new je,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=An("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=An("baseRetryDelayMs",5e3,e),this.hb=An("retryDelaySeedMs",1e4,e),this.eb=An("forwardChannelMaxRetries",2,e),this.xa=An("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Wt(e&&e.concurrentRequestLimit),this.Ja=new tn,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Cn(e){if(xn(e),3==e.H){var t=e.W++,n=At(e.I);if(xt(n,"SID",e.K),xt(n,"RID",t),xt(n,"TYPE","terminate"),Ln(e,n),(t=new ot(e,e.l,t)).L=2,t.A=Dt(At(n)),n=!1,h.navigator&&h.navigator.sendBeacon)try{n=h.navigator.sendBeacon(t.A.toString(),"")}catch(e){}!n&&h.Image&&((new Image).src=t.A,n=!0),n||(t.g=zn(t.l,null),t.g.ha(t.A)),t.G=Date.now(),mt(t)}qn(e)}function kn(e){e.g&&(Pn(e),e.g.cancel(),e.g=null)}function xn(e){kn(e),e.u&&(h.clearTimeout(e.u),e.u=null),Fn(e),e.i.cancel(),e.m&&("number"==typeof e.m&&h.clearTimeout(e.m),e.m=null)}function Dn(e){if(!Kt(e.i)&&!e.m){e.m=!0;var t=e.Na;Ae||ke(),Ie||(Ae(),Ie=!0),Ce.add(t,e),e.C=0}}function Nn(e,t){var n;n=t?t.m:e.W++;const i=At(e.I);xt(i,"SID",e.K),xt(i,"RID",n),xt(i,"AID",e.V),Ln(e,i),e.o&&e.s&&Sn(i,e.o,e.s),n=new ot(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Rn(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Qt(e.i,n),ht(n,i,t)}function Ln(e,t){e.na&&Q(e.na,(function(e,n){xt(t,n,e)})),e.h&&bt({},(function(e,n){xt(t,n,e)}))}function Rn(e,t,n){n=Math.min(e.j.length,n);var i=e.h?v(e.h.Va,e.h,e):null;e:{var r=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=t,0>n)t=Math.max(0,r[o].g-100),s=!1;else try{nn(a,e,"req"+n+"_")}catch(e){i&&i(a)}}if(s){i=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,i}function On(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ae||ke(),Ie||(Ae(),Ie=!0),Ce.add(t,e),e.A=0}}function Un(e){return!(e.g||e.u||3<=e.A||(e.ba++,e.u=Ye(v(e.Ma,e),Bn(e,e.A)),e.A++,0))}function Pn(e){null!=e.B&&(h.clearTimeout(e.B),e.B=null)}function Mn(e){e.g=new ot(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=At(e.wa);xt(t,"RID","rpc"),xt(t,"SID",e.K),xt(t,"AID",e.V),xt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&xt(t,"TO",e.qa),xt(t,"TYPE","xmlhttp"),Ln(e,t),e.o&&e.s&&Sn(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Dt(At(t)),n.u=null,n.S=!0,dt(n,e)}function Fn(e){null!=e.v&&(h.clearTimeout(e.v),e.v=null)}function jn(e,t){var n=null;if(e.g==t){Fn(e),Pn(e),e.g=null;var i=2}else{if(!Xt(e.i,t))return;n=t.F,Jt(e.i,t),i=1}if(0!=e.H)if(t.i)if(1==i){n=t.u?t.u.length:0,t=Date.now()-t.G;var r=e.C;ye(i=He(),new Ke(i,n)),Dn(e)}else On(e);else if(3==(r=t.s)||0==r&&0<t.ca||!(1==i&&function(e,t){return!(Yt(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=Ye(v(e.Na,e,t),Bn(e,e.C)),e.C++,0)))}(e,t)||2==i&&Un(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:Vn(e,5);break;case 4:Vn(e,10);break;case 3:Vn(e,6);break;default:Vn(e,2)}}function Bn(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Vn(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var i=v(e.pb,e);n||(n=new St("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||It(n,"https"),Dt(n)),function(e,t){const n=new je;if(h.Image){const i=new Image;i.onload=E(rn,n,i,"TestLoadImage: loaded",!0,t),i.onerror=E(rn,n,i,"TestLoadImage: error",!1,t),i.onabort=E(rn,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=E(rn,n,i,"TestLoadImage: timeout",!1,t),h.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else Ge(2);e.H=0,e.h&&e.h.za(t),qn(e),xn(e)}function qn(e){if(e.H=0,e.ma=[],e.h){const t=Zt(e.i);0==t.length&&0==e.j.length||(S(e.ma,t),S(e.ma,e.j),e.i.i.length=0,T(e.j),e.j.length=0),e.h.ya()}}function Hn(e,t,n){var i=n instanceof St?At(n):new St(n);if(""!=i.g)t&&(i.g=t+"."+i.g),Ct(i,i.m);else{var r=h.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new St(null);i&&It(s,i),t&&(s.g=t),r&&Ct(s,r),n&&(s.l=n),i=s}return n=e.F,t=e.Da,n&&t&&xt(i,n,t),xt(i,"VER",e.ra),Ln(e,i),i}function zn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new dn(new sn({ob:n})):new dn(e.va)).Oa(e.J),t}function $n(){}function Wn(){if(U&&!(10<=Number(z)))throw Error("Environmental error: no available transport.")}function Gn(e,t){me.call(this),this.g=new In(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!C(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!C(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Xn(this)}function Kn(e){it.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Yn(){rt.call(this),this.status=1}function Xn(e){this.g=e}function Qn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Jn(e,t,n){n||(n=0);var i=Array(16);if("string"==typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],o=t+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(t^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function Zn(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}(i=dn.prototype).Oa=function(e){this.M=e},i.ha=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():tt.g(),this.C=this.u?Ze(this.u):Ze(tt),this.g.onreadystatechange=v(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(e){return void mn(this,e)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),r=h.FormData&&e instanceof h.FormData,!(0<=b(gn,t))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wn(this),0<this.B&&((this.L=function(e){return U&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=v(this.ua,this)):this.A=Le(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){mn(this,e)}},i.ua=function(){void 0!==u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ye(this,"timeout"),this.abort(8))},i.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ye(this,"complete"),ye(this,"abort"),En(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),En(this,!0)),dn.$.N.call(this)},i.La=function(){this.s||(this.G||this.v||this.l?vn(this):this.kb())},i.kb=function(){vn(this)},i.isActive=function(){return!!this.g},i.da=function(){try{return 2<_n(this)?this.g.status:-1}catch(e){return-1}},i.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},i.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),hn(t)}},i.Ia=function(){return this.m},i.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(i=In.prototype).ra=8,i.H=1,i.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const r=new ot(this,this.l,e);let s=this.s;if(this.U&&(s?(s=J(s),ee(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Rn(this,r,t),xt(n=At(this.I),"RID",e),xt(n,"CVER",22),this.F&&xt(n,"X-HTTP-Session-Id",this.F),Ln(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Tn(s)))+"&"+t:this.o&&Sn(n,this.o,s)),Qt(this.i,r),this.bb&&xt(n,"TYPE","init"),this.P?(xt(n,"$req",t),xt(n,"SID","null"),r.aa=!0,ht(r,n,null)):ht(r,n,t),this.H=2}}else 3==this.H&&(e?Nn(this,e):0==this.j.length||Kt(this.i)||Nn(this))},i.Ma=function(){if(this.u=null,Mn(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ye(v(this.jb,this),e)}},i.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ge(10),kn(this),Mn(this))},i.ib=function(){null!=this.v&&(this.v=null,kn(this),Un(this),Ge(19))},i.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ge(2)):(this.l.info("Failed to ping google.com"),Ge(1))},i.isActive=function(){return!!this.h&&this.h.isActive(this)},(i=$n.prototype).Ba=function(){},i.Aa=function(){},i.za=function(){},i.ya=function(){},i.isActive=function(){return!0},i.Va=function(){},Wn.prototype.g=function(e,t){return new Gn(e,t)},w(Gn,me),Gn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ge(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Hn(e,null,e.Y),Dn(e)},Gn.prototype.close=function(){Cn(this.g)},Gn.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ee(e),e=n);t.j.push(new $t(t.fb++,e)),3==t.H&&Dn(t)},Gn.prototype.N=function(){this.g.h=null,delete this.j,Cn(this.g),delete this.g,Gn.$.N.call(this)},w(Kn,it),w(Yn,rt),w(Xn,$n),Xn.prototype.Ba=function(){ye(this.g,"a")},Xn.prototype.Aa=function(e){ye(this.g,new Kn(e))},Xn.prototype.za=function(e){ye(this.g,new Yn)},Xn.prototype.ya=function(){ye(this.g,"b")},w(Qn,(function(){this.blockSize=-1})),Qn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Qn.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(0==r)for(;s<=n;)Jn(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(i[r++]=e.charCodeAt(s++),r==this.blockSize){Jn(this,i),r=0;break}}else for(;s<t;)if(i[r++]=e[s++],r==this.blockSize){Jn(this,i),r=0;break}}this.h=r,this.i+=t},Qn.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var ei={};function ti(e){return-128<=e&&128>e?function(e,t){var n=ei;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=function(e){return new Zn([0|e],0>e?-1:0)}(e)}(e):new Zn([0|e],0>e?-1:0)}function ni(e){if(isNaN(e)||!isFinite(e))return ri;if(0>e)return li(ni(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=ii;return new Zn(t,0)}var ii=4294967296,ri=ti(0),si=ti(1),oi=ti(16777216);function ai(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ci(e){return-1==e.h}function li(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new Zn(n,~e.h).add(si)}function ui(e,t){return e.add(li(t))}function hi(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function di(e,t){this.g=e,this.h=t}function fi(e,t){if(ai(t))throw Error("division by zero");if(ai(e))return new di(ri,ri);if(ci(e))return t=fi(li(e),t),new di(li(t.g),li(t.h));if(ci(t))return t=fi(e,li(t)),new di(li(t.g),t.h);if(30<e.g.length){if(ci(e)||ci(t))throw Error("slowDivide_ only works with positive integers.");for(var n=si,i=t;0>=i.X(e);)n=pi(n),i=pi(i);var r=gi(n,1),s=gi(i,1);for(i=gi(i,2),n=gi(n,2);!ai(i);){var o=s.add(i);0>=o.X(e)&&(r=r.add(n),s=o),i=gi(i,1),n=gi(n,1)}return t=ui(e,r.R(t)),new di(r,t)}for(r=ri;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=ni(n)).R(t);ci(o)||0<o.X(e);)o=(s=ni(n-=i)).R(t);ai(s)&&(s=si),r=r.add(s),e=ui(e,o)}return new di(r,e)}function pi(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.D(i)<<1|e.D(i-1)>>>31;return new Zn(n,e.h)}function gi(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,r=[],s=0;s<i;s++)r[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Zn(r,e.h)}(i=Zn.prototype).ea=function(){if(ci(this))return-li(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.D(n);e+=(0<=i?i:ii+i)*t,t*=ii}return e},i.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ai(this))return"0";if(ci(this))return"-"+li(this).toString(e);for(var t=ni(Math.pow(e,6)),n=this,i="";;){var r=fi(n,t).g,s=((0<(n=ui(n,r.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ai(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},i.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},i.X=function(e){return ci(e=ui(this,e))?-1:ai(e)?0:1},i.abs=function(){return ci(this)?li(this):this},i.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,r=0;r<=t;r++){var s=i+(65535&this.D(r))+(65535&e.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Zn(n,-2147483648&n[n.length-1]?-1:0)},i.R=function(e){if(ai(this)||ai(e))return ri;if(ci(this))return ci(e)?li(this).R(li(e)):li(li(this).R(e));if(ci(e))return li(this.R(li(e)));if(0>this.X(oi)&&0>e.X(oi))return ni(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<e.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=e.D(r)>>>16,c=65535&e.D(r);n[2*i+2*r]+=o*c,hi(n,2*i+2*r),n[2*i+2*r+1]+=s*c,hi(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,hi(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,hi(n,2*i+2*r+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new Zn(n,0)},i.gb=function(e){return fi(this,e).h},i.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)&e.D(i);return new Zn(n,this.h&e.h)},i.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)|e.D(i);return new Zn(n,this.h|e.h)},i.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)^e.D(i);return new Zn(n,this.h^e.h)},Wn.prototype.createWebChannel=Wn.prototype.g,Gn.prototype.send=Gn.prototype.u,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,Xe.NO_ERROR=0,Xe.TIMEOUT=8,Xe.HTTP_ERROR=6,Qe.COMPLETE="complete",et.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",me.prototype.listen=me.prototype.O,dn.prototype.listenOnce=dn.prototype.P,dn.prototype.getLastError=dn.prototype.Sa,dn.prototype.getLastErrorCode=dn.prototype.Ia,dn.prototype.getStatus=dn.prototype.da,dn.prototype.getResponseJson=dn.prototype.Wa,dn.prototype.getResponseText=dn.prototype.ja,dn.prototype.send=dn.prototype.ha,dn.prototype.setWithCredentials=dn.prototype.Oa,Qn.prototype.digest=Qn.prototype.l,Qn.prototype.reset=Qn.prototype.reset,Qn.prototype.update=Qn.prototype.j,Zn.prototype.add=Zn.prototype.add,Zn.prototype.multiply=Zn.prototype.R,Zn.prototype.modulo=Zn.prototype.gb,Zn.prototype.compare=Zn.prototype.X,Zn.prototype.toNumber=Zn.prototype.ea,Zn.prototype.toString=Zn.prototype.toString,Zn.prototype.getBits=Zn.prototype.D,Zn.fromNumber=ni,Zn.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return li(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=ni(Math.pow(n,8)),r=ri,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=ni(Math.pow(n,o)),r=r.R(o).add(ni(a))):r=(r=r.R(i)).add(ni(a))}return r};var mi=l.createWebChannelTransport=function(){return new Wn},yi=l.getStatEventTarget=function(){return He()},vi=l.ErrorCode=Xe,Ei=l.EventType=Qe,wi=l.Event=Ve,_i=l.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},bi=(l.FetchXmlHttpFactory=sn,l.WebChannel=et),Ti=l.XhrIo=dn,Si=l.Md5=Qn,Ai=l.Integer=Zn;const Ii="@firebase/firestore";class Ci{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ci.UNAUTHENTICATED=new Ci(null),Ci.GOOGLE_CREDENTIALS=new Ci("google-credentials-uid"),Ci.FIRST_PARTY=new Ci("first-party-uid"),Ci.MOCK_USER=new Ci("mock-user");let ki="10.8.0";const xi=new o.YJ("@firebase/firestore");function Di(){return xi.logLevel}function Ni(e,...t){if(xi.logLevel<=o.Ge.DEBUG){const n=t.map(Oi);xi.debug(`Firestore (${ki}): ${e}`,...n)}}function Li(e,...t){if(xi.logLevel<=o.Ge.ERROR){const n=t.map(Oi);xi.error(`Firestore (${ki}): ${e}`,...n)}}function Ri(e,...t){if(xi.logLevel<=o.Ge.WARN){const n=t.map(Oi);xi.warn(`Firestore (${ki}): ${e}`,...n)}}function Oi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ui(e="Unexpected state"){const t=`FIRESTORE (${ki}) INTERNAL ASSERTION FAILED: `+e;throw Li(t),new Error(t)}function Pi(e,t){e||Ui()}function Mi(e,t){return e}const Fi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ji extends a.kx{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vi{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ci.UNAUTHENTICATED)))}shutdown(){}}class Hi{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class zi{constructor(e){this.t=e,this.currentUser=Ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Bi,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{Ni("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ni("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Bi)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ni("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Pi("string"==typeof t.accessToken),new Vi(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pi(null===e||"string"==typeof e),new Ci(e)}}class $i{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ci.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Wi{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new $i(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ci.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ki{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Ni("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Ni("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{Ni("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?i(e):Ni("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Pi("string"==typeof e.token),this.R=e.token,new Gi(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Yi(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class Xi{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Yi(40);for(let i=0;i<n.length;++i)t.length<20&&n[i]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return t}}function Qi(e,t){return e<t?-1:e>t?1:0}function Ji(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}class Zi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ji(Fi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ji(Fi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ji(Fi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ji(Fi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zi.fromMillis(Date.now())}static fromDate(e){return Zi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Zi(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qi(this.nanoseconds,e.nanoseconds):Qi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class er{constructor(e){this.timestamp=e}static fromTimestamp(e){return new er(e)}static min(){return new er(new Zi(0,0))}static max(){return new er(new Zi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class tr{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ui(),void 0===n?n=e.length-t:n>e.length-t&&Ui(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===tr.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tr?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nr extends tr{construct(e,t,n){return new nr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ji(Fi.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new nr(t)}static emptyPath(){return new nr([])}}const ir=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends tr{construct(e,t,n){return new rr(e,t,n)}static isValidIdentifier(e){return ir.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new ji(Fi.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new ji(Fi.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ji(Fi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new ji(Fi.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class sr{constructor(e){this.path=e}static fromPath(e){return new sr(nr.fromString(e))}static fromName(e){return new sr(nr.fromString(e).popFirst(5))}static empty(){return new sr(nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new sr(new nr(e.slice()))}}function or(e){return new ar(e.readTime,e.key,-1)}class ar{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ar(er.min(),sr.empty(),-1)}static max(){return new ar(er.max(),sr.empty(),-1)}}function cr(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=sr.comparator(e.documentKey,t.documentKey),0!==n?n:Qi(e.largestBatchId,t.largestBatchId))}const lr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ur{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function hr(e){if(e.code!==Fi.FAILED_PRECONDITION||e.message!==lr)throw e;Ni("LocalStore","Unexpectedly lost primary lease")}class dr{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ui(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new dr(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof dr?t:dr.resolve(t)}catch(e){return dr.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):dr.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):dr.reject(t)}static resolve(e){return new dr(((t,n)=>{t(e)}))}static reject(e){return new dr(((t,n)=>{n(e)}))}static waitFor(e){return new dr(((t,n)=>{let i=0,r=0,s=!1;e.forEach((e=>{++i,e.next((()=>{++r,s&&r===i&&t()}),(e=>n(e)))})),s=!0,r===i&&t()}))}static or(e){let t=dr.resolve(!1);for(const n of e)t=t.next((e=>e?dr.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new dr(((n,i)=>{const r=e.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===r&&n(s)}),(e=>i(e)))}}))}static doWhile(e,t){return new dr(((n,i)=>{const r=()=>{!0===e()?t().next((()=>{r()}),i):n()};r()}))}}class fr{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Bi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new mr(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=_r(t.target.error);this.V.reject(new mr(e,n))}}static open(e,t,n,i){try{return new fr(t,e.transaction(i,n))}catch(e){throw new mr(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ni("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vr(t)}}class pr{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===pr.S((0,a.Su)())&&Li("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ni("SimpleDb","Removing database:",e),Er(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,a.yy)())return!1;if(pr.C())return!0;const e=(0,a.Su)(),t=pr.S(e),n=0<t&&t<10,i=pr.v(e),r=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||r)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Ni("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=e=>{const n=e.target.result;t(n)},i.onblocked=()=>{n(new mr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const i=t.target.error;"VersionError"===i.name?n(new ji(Fi.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new ji(Fi.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new mr(e,i))},i.onupgradeneeded=e=>{Ni("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,i.transaction,e.oldVersion,this.version).next((()=>{Ni("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const r="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=fr.open(this.db,e,r?"readonly":"readwrite",n),s=i(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),dr.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Ni("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class gr{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Er(this.k.delete())}}class mr extends ji{constructor(e,t){super(Fi.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yr(e){return"IndexedDbTransactionError"===e.name}class vr{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ni("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ni("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Er(n)}add(e){return Ni("SimpleDb","ADD",this.store.name,e,e),Er(this.store.add(e))}get(e){return Er(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ni("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ni("SimpleDb","DELETE",this.store.name,e),Er(this.store.delete(e))}count(){return Ni("SimpleDb","COUNT",this.store.name),Er(this.store.count())}W(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if("function"==typeof i.getAll){const e=i.getAll(n.range);return new dr(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new dr(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Ni("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const i=this.cursor(n);return this.G(i,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.G(i,t)}Z(e){const t=this.cursor({});return new dr(((n,i)=>{t.onerror=e=>{const t=_r(e.target.error);i(t)},t.onsuccess=t=>{const i=t.target.result;i?e(i.primaryKey,i.value).next((e=>{e?i.continue():n()})):n()}}))}G(e,t){const n=[];return new dr(((i,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{const r=e.target.result;if(!r)return void i();const s=new gr(r),o=t(r.primaryKey,r.value,s);if(o instanceof dr){const e=o.catch((e=>(s.done(),dr.reject(e))));n.push(e)}s.isDone?i():null===s.$?r.continue():r.continue(s.$)}})).next((()=>dr.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Er(e){return new dr(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=_r(e.target.error);n(t)}}))}let wr=!1;function _r(e){const t=pr.S((0,a.Su)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new ji("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wr||(wr=!0,setTimeout((()=>{throw e}),0)),e}}return e}class br{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Tr(e){return null==e}function Sr(e){return 0===e&&1/e==-1/0}br._e=-1;function Ar(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ir(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Cr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class kr{constructor(e,t){this.comparator=e,this.root=t||Dr.EMPTY}insert(e,t){return new kr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dr.BLACK,null,null))}remove(e){return new kr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xr(this.root,e,this.comparator,!1)}getReverseIterator(){return new xr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xr(this.root,e,this.comparator,!0)}}class xr{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dr{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:Dr.RED,this.left=null!=i?i:Dr.EMPTY,this.right=null!=r?r:Dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new Dr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Dr.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ui();if(this.right.isRed())throw Ui();const e=this.left.check();if(e!==this.right.check())throw Ui();return e+(this.isRed()?0:1)}}Dr.EMPTY=null,Dr.RED=!0,Dr.BLACK=!1,Dr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ui()}get value(){throw Ui()}get color(){throw Ui()}get left(){throw Ui()}get right(){throw Ui()}copy(e,t,n,i,r){return this}insert(e,t,n){return new Dr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nr{constructor(e){this.comparator=e,this.data=new kr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lr(this.data.getIterator())}getIteratorFrom(e){return new Lr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Nr))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Nr(this.comparator);return t.data=e,t}}class Lr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Rr{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new Rr([])}unionWith(e){let t=new Nr(rr.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ji(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Or extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Or("Invalid base64 string: "+e):e}}(e);return new Ur(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ur.EMPTY_BYTE_STRING=new Ur("");const Pr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mr(e){if(Pi(!!e),"string"==typeof e){let t=0;const n=Pr.exec(e);if(Pi(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Fr(e.seconds),nanos:Fr(e.nanos)}}function Fr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function jr(e){return"string"==typeof e?Ur.fromBase64String(e):Ur.fromUint8Array(e)}function Br(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vr(e){const t=e.mapValue.fields.__previous_value__;return Br(t)?Vr(t):t}function qr(e){const t=Mr(e.mapValue.fields.__local_write_time__.timestampValue);return new Zi(t.seconds,t.nanos)}class Hr{constructor(e,t,n,i,r,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class zr{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new zr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof zr&&e.projectId===this.projectId&&e.database===this.database}}const $r={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Wr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Br(e)?4:os(e)?9007199254740991:10:Ui()}function Gr(e,t){if(e===t)return!0;const n=Wr(e);if(n!==Wr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qr(e).isEqual(qr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Mr(e.timestampValue),i=Mr(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return jr(e.bytesValue).isEqual(jr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Fr(e.geoPointValue.latitude)===Fr(t.geoPointValue.latitude)&&Fr(e.geoPointValue.longitude)===Fr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Fr(e.integerValue)===Fr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Fr(e.doubleValue),i=Fr(t.doubleValue);return n===i?Sr(n)===Sr(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Ji(e.arrayValue.values||[],t.arrayValue.values||[],Gr);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(Ar(n)!==Ar(i))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===i[e]||!Gr(n[e],i[e])))return!1;return!0}(e,t);default:return Ui()}}function Kr(e,t){return void 0!==(e.values||[]).find((e=>Gr(e,t)))}function Yr(e,t){if(e===t)return 0;const n=Wr(e),i=Wr(t);if(n!==i)return Qi(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qi(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Fr(e.integerValue||e.doubleValue),i=Fr(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return Xr(e.timestampValue,t.timestampValue);case 4:return Xr(qr(e),qr(t));case 5:return Qi(e.stringValue,t.stringValue);case 6:return function(e,t){const n=jr(e),i=jr(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let e=0;e<n.length&&e<i.length;e++){const t=Qi(n[e],i[e]);if(0!==t)return t}return Qi(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Qi(Fr(e.latitude),Fr(t.latitude));return 0!==n?n:Qi(Fr(e.longitude),Fr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let e=0;e<n.length&&e<i.length;++e){const t=Yr(n[e],i[e]);if(t)return t}return Qi(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===$r.mapValue&&t===$r.mapValue)return 0;if(e===$r.mapValue)return 1;if(t===$r.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let e=0;e<i.length&&e<s.length;++e){const t=Qi(i[e],s[e]);if(0!==t)return t;const o=Yr(n[i[e]],r[s[e]]);if(0!==o)return o}return Qi(i.length,s.length)}(e.mapValue,t.mapValue);default:throw Ui()}}function Xr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qi(e,t);const n=Mr(e),i=Mr(t),r=Qi(n.seconds,i.seconds);return 0!==r?r:Qi(n.nanos,i.nanos)}function Qr(e){return Jr(e)}function Jr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Mr(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return jr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return sr.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=Jr(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+=`${r}:${Jr(e.fields[r])}`;return n+"}"}(e.mapValue):Ui()}function Zr(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function es(e){return!!e&&"integerValue"in e}function ts(e){return!!e&&"arrayValue"in e}function ns(e){return!!e&&"nullValue"in e}function is(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function rs(e){return!!e&&"mapValue"in e}function ss(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ir(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ss(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ss(e.arrayValue.values[n]);return t}return Object.assign({},e)}function os(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class as{constructor(e){this.value=e}static empty(){return new as({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!rs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ss(t)}setAll(e){let t=rr.emptyPath(),n={},i=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=ss(e):i.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());rs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];rs(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Ir(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new as(ss(this.value))}}function cs(e){const t=[];return Ir(e.fields,((e,n)=>{const i=new rr([e]);if(rs(n)){const e=cs(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new Rr(t)}class ls{constructor(e,t,n,i,r,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ls(e,0,er.min(),er.min(),er.min(),as.empty(),0)}static newFoundDocument(e,t,n,i){return new ls(e,1,t,er.min(),n,i,0)}static newNoDocument(e,t){return new ls(e,2,t,er.min(),er.min(),as.empty(),0)}static newUnknownDocument(e,t){return new ls(e,3,t,er.min(),er.min(),as.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(er.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=as.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=as.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=er.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ls&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ls(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class us{constructor(e,t){this.position=e,this.inclusive=t}}function hs(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(i=s.field.isKeyField()?sr.comparator(sr.fromName(o.referenceValue),n.key):Yr(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function ds(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Gr(e.position[n],t.position[n]))return!1;return!0}class fs{constructor(e,t="asc"){this.field=e,this.dir=t}}function ps(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class gs{}class ms extends gs{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ts(e,t,n):"array-contains"===t?new Cs(e,n):"in"===t?new ks(e,n):"not-in"===t?new xs(e,n):"array-contains-any"===t?new Ds(e,n):new ms(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ss(e,n):new As(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Yr(t,this.value)):null!==t&&Wr(this.value)===Wr(t)&&this.matchesComparison(Yr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ui()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ys extends gs{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new ys(e,t)}matches(e){return vs(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function vs(e){return"and"===e.op}function Es(e){return function(e){for(const t of e.filters)if(t instanceof ys)return!1;return!0}(e)&&vs(e)}function ws(e){if(e instanceof ms)return e.field.canonicalString()+e.op.toString()+Qr(e.value);if(Es(e))return e.filters.map((e=>ws(e))).join(",");{const t=e.filters.map((e=>ws(e))).join(",");return`${e.op}(${t})`}}function _s(e,t){return e instanceof ms?function(e,t){return t instanceof ms&&e.op===t.op&&e.field.isEqual(t.field)&&Gr(e.value,t.value)}(e,t):e instanceof ys?function(e,t){return t instanceof ys&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,i)=>e&&_s(n,t.filters[i])),!0)}(e,t):void Ui()}function bs(e){return e instanceof ms?function(e){return`${e.field.canonicalString()} ${e.op} ${Qr(e.value)}`}(e):e instanceof ys?function(e){return e.op.toString()+" {"+e.getFilters().map(bs).join(" ,")+"}"}(e):"Filter"}class Ts extends ms{constructor(e,t,n){super(e,t,n),this.key=sr.fromName(n.referenceValue)}matches(e){const t=sr.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ss extends ms{constructor(e,t){super(e,"in",t),this.keys=Is(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class As extends ms{constructor(e,t){super(e,"not-in",t),this.keys=Is(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Is(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>sr.fromName(e.referenceValue)))}class Cs extends ms{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ts(t)&&Kr(t.arrayValue,this.value)}}class ks extends ms{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Kr(this.value.arrayValue,t)}}class xs extends ms{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Kr(this.value.arrayValue,t)}}class Ds extends ms{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ts(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Kr(this.value.arrayValue,e)))}}class Ns{constructor(e,t=null,n=[],i=[],r=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function Ls(e,t=null,n=[],i=[],r=null,s=null,o=null){return new Ns(e,t,n,i,r,s,o)}function Rs(e){const t=Mi(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ws(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Tr(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Qr(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Qr(e))).join(",")),t.ce=e}return t.ce}function Os(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ps(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!_s(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ds(e.startAt,t.startAt)&&ds(e.endAt,t.endAt)}function Us(e){return sr.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ps{constructor(e,t=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Ms(e){return new Ps(e)}function Fs(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function js(e){return null!==e.collectionGroup}function Bs(e){const t=Mi(e);if(null===t.le){t.le=[];const e=new Set;for(const n of t.explicitOrderBy)t.le.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",i=function(e){let t=new Nr(rr.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);i.forEach((i=>{e.has(i.canonicalString())||i.isKeyField()||t.le.push(new fs(i,n))})),e.has(rr.keyField().canonicalString())||t.le.push(new fs(rr.keyField(),n))}return t.le}function Vs(e){const t=Mi(e);return t.he||(t.he=qs(t,Bs(e))),t.he}function qs(e,t){if("F"===e.limitType)return Ls(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new fs(e.field,t)}));const n=e.endAt?new us(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new us(e.startAt.position,e.startAt.inclusive):null;return Ls(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Hs(e,t){const n=e.filters.concat([t]);return new Ps(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zs(e,t,n){return new Ps(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $s(e,t){return Os(Vs(e),Vs(t))&&e.limitType===t.limitType}function Ws(e){return`${Rs(Vs(e))}|lt:${e.limitType}`}function Gs(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>bs(e))).join(", ")}]`),Tr(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Qr(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Qr(e))).join(",")),`Target(${t})`}(Vs(e))}; limitType=${e.limitType})`}function Ks(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):sr.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Bs(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=hs(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,Bs(e),t)||e.endAt&&!function(e,t,n){const i=hs(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,Bs(e),t))}(e,t)}function Ys(e){return(t,n)=>{let i=!1;for(const r of Bs(e)){const e=Xs(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function Xs(e,t,n){const i=e.field.isKeyField()?sr.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?Yr(i,r):Ui()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Ui()}}class Qs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,i]of n)if(this.equalsFn(t,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],e))return void(i[n]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ir(this.inner,((t,n)=>{for(const[t,i]of n)e(t,i)}))}isEmpty(){return Cr(this.inner)}size(){return this.innerSize}}const Js=new kr(sr.comparator);function Zs(){return Js}const eo=new kr(sr.comparator);function to(...e){let t=eo;for(const n of e)t=t.insert(n.key,n);return t}function no(e){let t=eo;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function io(){return so()}function ro(){return so()}function so(){return new Qs((e=>e.toString()),((e,t)=>e.isEqual(t)))}const oo=new kr(sr.comparator),ao=new Nr(sr.comparator);function co(...e){let t=ao;for(const n of e)t=t.add(n);return t}const lo=new Nr(Qi);function uo(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sr(t)?"-0":t}}function ho(e){return{integerValue:""+e}}function fo(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Sr(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?ho(t):uo(e,t)}class po{constructor(){this._=void 0}}function go(e,t,n){return e instanceof vo?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Br(t)&&(t=Vr(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Eo?wo(e,t):e instanceof _o?bo(e,t):function(e,t){const n=yo(e,t),i=So(n)+So(e.Ie);return es(n)&&es(e.Ie)?ho(i):uo(e.serializer,i)}(e,t)}function mo(e,t,n){return e instanceof Eo?wo(e,t):e instanceof _o?bo(e,t):n}function yo(e,t){return e instanceof To?function(e){return es(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class vo extends po{}class Eo extends po{constructor(e){super(),this.elements=e}}function wo(e,t){const n=Ao(t);for(const t of e.elements)n.some((e=>Gr(e,t)))||n.push(t);return{arrayValue:{values:n}}}class _o extends po{constructor(e){super(),this.elements=e}}function bo(e,t){let n=Ao(t);for(const t of e.elements)n=n.filter((e=>!Gr(e,t)));return{arrayValue:{values:n}}}class To extends po{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function So(e){return Fr(e.integerValue||e.doubleValue)}function Ao(e){return ts(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Io{constructor(e,t){this.version=e,this.transformResults=t}}class Co{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Co}static exists(e){return new Co(void 0,e)}static updateTime(e){return new Co(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ko(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class xo{}function Do(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Bo(e.key,Co.none()):new Uo(e.key,e.data,Co.none());{const n=e.data,i=as.empty();let r=new Nr(rr.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new Po(e.key,i,new Rr(r.toArray()),Co.none())}}function No(e,t,n){e instanceof Uo?function(e,t,n){const i=e.value.clone(),r=Fo(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof Po?function(e,t,n){if(!ko(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=Fo(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Mo(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Lo(e,t,n,i){return e instanceof Uo?function(e,t,n,i){if(!ko(e.precondition,t))return n;const r=e.value.clone(),s=jo(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof Po?function(e,t,n,i){if(!ko(e.precondition,t))return n;const r=jo(e.fieldTransforms,i,t),s=t.data;return s.setAll(Mo(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):function(e,t,n){return ko(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ro(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=yo(i.transform,e||null);null!=r&&(null===n&&(n=as.empty()),n.set(i.field,r))}return n||null}function Oo(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ji(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Eo&&t instanceof Eo||e instanceof _o&&t instanceof _o?Ji(e.elements,t.elements,Gr):e instanceof To&&t instanceof To?Gr(e.Ie,t.Ie):e instanceof vo&&t instanceof vo}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Uo extends xo{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Po extends xo{constructor(e,t,n,i,r=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Mo(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function Fo(e,t,n){const i=new Map;Pi(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,mo(o,a,n[r]))}return i}function jo(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,go(e,s,t))}return i}class Bo extends xo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vo extends xo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qo{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const i=this.mutations[t];i.key.isEqual(e.key)&&No(i,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Lo(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Lo(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ro();return this.mutations.forEach((i=>{const r=e.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=t.has(i.key)?null:o;const a=Do(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(er.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),co())}isEqual(e){return this.batchId===e.batchId&&Ji(this.mutations,e.mutations,((e,t)=>Oo(e,t)))&&Ji(this.baseMutations,e.baseMutations,((e,t)=>Oo(e,t)))}}class Ho{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Pi(e.mutations.length===n.length);let i=oo;const r=e.mutations;for(let e=0;e<r.length;e++)i=i.insert(r[e].key,n[e].version);return new Ho(e,t,n,i)}}class zo{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $o{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class Wo{constructor(e,t){this.count=e,this.unchangedNames=t}}var Go,Ko;function Yo(e){if(void 0===e)return Li("GRPC error has no .code"),Fi.UNKNOWN;switch(e){case Go.OK:return Fi.OK;case Go.CANCELLED:return Fi.CANCELLED;case Go.UNKNOWN:return Fi.UNKNOWN;case Go.DEADLINE_EXCEEDED:return Fi.DEADLINE_EXCEEDED;case Go.RESOURCE_EXHAUSTED:return Fi.RESOURCE_EXHAUSTED;case Go.INTERNAL:return Fi.INTERNAL;case Go.UNAVAILABLE:return Fi.UNAVAILABLE;case Go.UNAUTHENTICATED:return Fi.UNAUTHENTICATED;case Go.INVALID_ARGUMENT:return Fi.INVALID_ARGUMENT;case Go.NOT_FOUND:return Fi.NOT_FOUND;case Go.ALREADY_EXISTS:return Fi.ALREADY_EXISTS;case Go.PERMISSION_DENIED:return Fi.PERMISSION_DENIED;case Go.FAILED_PRECONDITION:return Fi.FAILED_PRECONDITION;case Go.ABORTED:return Fi.ABORTED;case Go.OUT_OF_RANGE:return Fi.OUT_OF_RANGE;case Go.UNIMPLEMENTED:return Fi.UNIMPLEMENTED;case Go.DATA_LOSS:return Fi.DATA_LOSS;default:return Ui()}}(Ko=Go||(Go={}))[Ko.OK=0]="OK",Ko[Ko.CANCELLED=1]="CANCELLED",Ko[Ko.UNKNOWN=2]="UNKNOWN",Ko[Ko.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ko[Ko.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ko[Ko.NOT_FOUND=5]="NOT_FOUND",Ko[Ko.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ko[Ko.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ko[Ko.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ko[Ko.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ko[Ko.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ko[Ko.ABORTED=10]="ABORTED",Ko[Ko.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ko[Ko.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ko[Ko.INTERNAL=13]="INTERNAL",Ko[Ko.UNAVAILABLE=14]="UNAVAILABLE",Ko[Ko.DATA_LOSS=15]="DATA_LOSS";const Xo=new Ai([4294967295,4294967295],0);function Qo(e){const t=(new TextEncoder).encode(e),n=new Si;return n.update(t),new Uint8Array(n.digest())}function Jo(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ai([n,i],0),new Ai([r,s],0)]}class Zo{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ea(`Invalid padding: ${t}`);if(n<0)throw new ea(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ea(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ea(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Ai.fromNumber(this.Te)}de(e,t,n){let i=e.add(t.multiply(Ai.fromNumber(n)));return 1===i.compare(Xo)&&(i=new Ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Qo(e),[n,i]=Jo(t);for(let e=0;e<this.hashCount;e++){const t=this.de(n,i,e);if(!this.Ae(t))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),s=new Zo(r,i,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Qo(e),[n,i]=Jo(t);for(let e=0;e<this.hashCount;e++){const t=this.de(n,i,e);this.Re(t)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ta{constructor(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,na.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ta(er.min(),i,new kr(Qi),Zs(),co())}}class na{constructor(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new na(n,t,co(),co(),co())}}class ia{constructor(e,t,n,i){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=i}}class ra{constructor(e,t){this.targetId=e,this.fe=t}}class sa{constructor(e,t,n=Ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class oa{constructor(){this.ge=0,this.pe=la(),this.ye=Ur.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=co(),t=co(),n=co();return this.pe.forEach(((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Ui()}})),new na(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=la()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Pi(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class aa{constructor(e){this.Le=e,this.ke=new Map,this.qe=Zs(),this.Qe=ca(),this.Ke=new kr(Qi)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Ui()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,i=this.Ye(t);if(i){const r=i.target;if(Us(r))if(0===n){const e=new sr(r.path);this.We(t,e,ls.newNoDocument(e,er.min()))}else Pi(1===n);else{const i=this.Ze(t);if(i!==n){const n=this.Xe(e),r=n?this.et(n,e,i):1;if(0!==r){this.He(t);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=t;let s,o;try{s=jr(n).toUint8Array()}catch(e){if(e instanceof Or)return Ri("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Zo(s,i,r)}catch(e){return Ri(e instanceof ea?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let i=0;return n.forEach((n=>{const r=this.Le.nt(),s=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.We(t,n,null),i++)})),i}it(e){const t=new Map;this.ke.forEach(((n,i)=>{const r=this.Ye(i);if(r){if(n.current&&Us(r.target)){const t=new sr(r.target.path);null!==this.qe.get(t)||this.st(i,t)||this.We(i,t,ls.newNoDocument(t,e))}n.De&&(t.set(i,n.ve()),n.Fe())}}));let n=co();this.Qe.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const i=new ta(e,t,this.Ke,this.qe,n);return this.qe=Zs(),this.Qe=ca(),this.Ke=new kr(Qi),i}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new oa,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Nr(Qi),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Ni("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new oa),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ca(){return new kr(sr.comparator)}function la(){return new kr(sr.comparator)}const ua={asc:"ASCENDING",desc:"DESCENDING"},ha={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},da={and:"AND",or:"OR"};class fa{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pa(e,t){return e.useProto3Json||Tr(t)?t:{value:t}}function ga(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ma(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ya(e,t){return ga(e,t.toTimestamp())}function va(e){return Pi(!!e),er.fromTimestamp(function(e){const t=Mr(e);return new Zi(t.seconds,t.nanos)}(e))}function Ea(e,t){return wa(e,t).canonicalString()}function wa(e,t){const n=function(e){return new nr(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function _a(e){const t=nr.fromString(e);return Pi(ja(t)),t}function ba(e,t){return Ea(e.databaseId,t.path)}function Ta(e,t){const n=_a(t);if(n.get(1)!==e.databaseId.projectId)throw new ji(Fi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ji(Fi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new sr(Ia(n))}function Sa(e,t){return Ea(e.databaseId,t)}function Aa(e){return new nr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ia(e){return Pi(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ca(e,t,n){return{name:ba(e,t),fields:n.value.mapValue.fields}}function ka(e,t){return{documents:[Sa(e,t.path)]}}function xa(e,t){const n={structuredQuery:{}},i=t.path;let r;null!==t.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Sa(e,r);const s=function(e){if(0!==e.length)return Ma(ys.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ua(e.field),direction:La(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=pa(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:r}}function Da(e){let t=function(e){const t=_a(e);return 4===t.length?nr.emptyPath():Ia(t)}(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Pi(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Na(e);return t instanceof ys&&Es(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new fs(Pa(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Tr(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new us(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new us(n,t)}(n.endAt)),function(e,t,n,i,r,s,o,a){return new Ps(e,t,n,i,r,s,o,a)}(t,r,o,s,a,"F",c,l)}function Na(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Pa(e.unaryFilter.field);return ms.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Pa(e.unaryFilter.field);return ms.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Pa(e.unaryFilter.field);return ms.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Pa(e.unaryFilter.field);return ms.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Ui()}}(e):void 0!==e.fieldFilter?function(e){return ms.create(Pa(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ui()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ys.create(e.compositeFilter.filters.map((e=>Na(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ui()}}(e.compositeFilter.op))}(e):Ui()}function La(e){return ua[e]}function Ra(e){return ha[e]}function Oa(e){return da[e]}function Ua(e){return{fieldPath:e.canonicalString()}}function Pa(e){return rr.fromServerFormat(e.fieldPath)}function Ma(e){return e instanceof ms?function(e){if("=="===e.op){if(is(e.value))return{unaryFilter:{field:Ua(e.field),op:"IS_NAN"}};if(ns(e.value))return{unaryFilter:{field:Ua(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(is(e.value))return{unaryFilter:{field:Ua(e.field),op:"IS_NOT_NAN"}};if(ns(e.value))return{unaryFilter:{field:Ua(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ua(e.field),op:Ra(e.op),value:e.value}}}(e):e instanceof ys?function(e){const t=e.getFilters().map((e=>Ma(e)));return 1===t.length?t[0]:{compositeFilter:{op:Oa(e.op),filters:t}}}(e):Ui()}function Fa(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ja(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ba{constructor(e,t,n,i,r=er.min(),s=er.min(),o=Ur.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Ba(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Va{constructor(e){this.ct=e}}function qa(e){const t=Da({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?zs(t,t.limit,"L"):t}class Ha{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Fr(e.integerValue));else if("doubleValue"in e){const n=Fr(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Sr(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At(`${n.seconds||""}`),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(jr(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?os(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ui()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const e of Object.keys(n))this.Rt(e,t),this.It(n[e],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const e of n)this.It(e,t)}gt(e,t){this.Et(t,37),sr.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}Ha.bt=new Ha;class za{constructor(){this._n=new $a}addToCollectionParentIndex(e,t){return this._n.add(t),dr.resolve()}getCollectionParents(e,t){return dr.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return dr.resolve()}deleteFieldIndex(e,t){return dr.resolve()}deleteAllFieldIndexes(e){return dr.resolve()}createTargetIndexes(e,t){return dr.resolve()}getDocumentsMatchingTarget(e,t){return dr.resolve(null)}getIndexType(e,t){return dr.resolve(0)}getFieldIndexes(e,t){return dr.resolve([])}getNextCollectionGroupToUpdate(e){return dr.resolve(null)}getMinOffset(e,t){return dr.resolve(ar.min())}getMinOffsetFromCollectionGroup(e,t){return dr.resolve(ar.min())}updateCollectionGroup(e,t,n){return dr.resolve()}updateIndexEntries(e,t){return dr.resolve()}}class $a{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Nr(nr.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Nr(nr.comparator)).toArray()}}new Uint8Array(0);class Wa{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Wa(e,Wa.DEFAULT_COLLECTION_PERCENTILE,Wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Wa.DEFAULT_COLLECTION_PERCENTILE=10,Wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wa.DEFAULT=new Wa(41943040,Wa.DEFAULT_COLLECTION_PERCENTILE,Wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wa.DISABLED=new Wa(-1,0,0);class Ga{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ga(0)}static Bn(){return new Ga(-1)}}class Ka{constructor(){this.changes=new Qs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ls.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?dr.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ya{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Xa{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Lo(n.mutation,e,Rr.empty(),Zi.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,co()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=co()){const i=io();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=to();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=io();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,co())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let r=Zs();const s=so(),o=so();return t.forEach(((e,t)=>{const o=n.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof Po)?r=r.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Lo(o.mutation,t,o.mutation.getFieldMask(),Zi.now())):s.set(t.key,Rr.empty())})),this.recalculateAndSaveOverlays(e,r).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Ya(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=so();let i=new kr(((e,t)=>e-t)),r=co();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const r of e)r.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Rr.empty();o=r.applyToLocalView(s,o),n.set(e,o);const a=(i.get(r.batchId)||co()).add(e);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=ro();c.forEach((e=>{if(!r.has(e)){const i=Do(t.get(e),n.get(e));null!==i&&l.set(e,i),r=r.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return dr.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,i){return function(e){return sr.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):js(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):dr.resolve(io());let o=-1,a=r;return s.next((t=>dr.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(t)?dr.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,r))).next((()=>this.computeViews(e,a,t,co()))).next((e=>({batchId:o,changes:no(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new sr(t)).next((e=>{let t=to();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const r=t.collectionGroup;let s=to();return this.indexManager.getCollectionParents(e,r).next((o=>dr.forEach(o,(o=>{const a=function(e,t){return new Ps(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n,i).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,i)))).next((e=>{r.forEach(((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,ls.newInvalidDocument(i)))}));let n=to();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&Lo(s.mutation,i,Rr.empty(),Zi.now()),Ks(t,i)&&(n=n.insert(e,i))})),n}))}}class Qa{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return dr.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:va(e.createTime)}}(t)),dr.resolve()}getNamedQuery(e,t){return dr.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:qa(e.bundledQuery),readTime:va(e.readTime)}}(t)),dr.resolve()}}class Ja{constructor(){this.overlays=new kr(sr.comparator),this.hr=new Map}getOverlay(e,t){return dr.resolve(this.overlays.get(t))}getOverlays(e,t){const n=io();return dr.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.ht(e,t,i)})),dr.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),dr.resolve()}getOverlaysForCollection(e,t,n){const i=io(),r=t.length+1,s=new sr(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return dr.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new kr(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=io(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=io(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=i)););return dr.resolve(o)}ht(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new zo(t,n));let r=this.hr.get(t);void 0===r&&(r=co(),this.hr.set(t,r)),this.hr.set(t,r.add(n.key))}}class Za{constructor(){this.Pr=new Nr(ec.Ir),this.Tr=new Nr(ec.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new ec(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new ec(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new sr(new nr([])),n=new ec(t,e),i=new ec(t,e+1),r=[];return this.Tr.forEachInRange([n,i],(e=>{this.Ar(e),r.push(e.key)})),r}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new sr(new nr([])),n=new ec(t,e),i=new ec(t,e+1);let r=co();return this.Tr.forEachInRange([n,i],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new ec(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ec{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return sr.comparator(e.key,t.key)||Qi(e.pr,t.pr)}static Er(e,t){return Qi(e.pr,t.pr)||sr.comparator(e.key,t.key)}}class tc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Nr(ec.Ir)}checkEmpty(e){return dr.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new qo(r,t,n,i);this.mutationQueue.push(s);for(const t of i)this.wr=this.wr.add(new ec(t.key,r)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return dr.resolve(s)}lookupMutationBatch(e,t){return dr.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.br(n),r=i<0?0:i;return dr.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return dr.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return dr.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ec(t,0),i=new ec(t,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(e=>{const t=this.Sr(e.pr);r.push(t)})),dr.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Nr(Qi);return t.forEach((e=>{const t=new ec(e,0),i=new ec(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,i],(e=>{n=n.add(e.pr)}))})),dr.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;sr.isDocumentKey(r)||(r=r.child(""));const s=new ec(new sr(r),0);let o=new Nr(Qi);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.pr)),!0)}),s),dr.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Pi(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return dr.forEach(t.mutations,(i=>{const r=new ec(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new ec(t,0),i=this.wr.firstAfterOrEqual(n);return dr.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,dr.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nc{constructor(e){this.vr=e,this.docs=new kr(sr.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return dr.resolve(n?n.document.mutableCopy():ls.newInvalidDocument(t))}getEntries(e,t){let n=Zs();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ls.newInvalidDocument(e))})),dr.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=Zs();const s=t.path,o=new sr(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||cr(or(o),n)<=0||(i.has(o.key)||Ks(t,o))&&(r=r.insert(o.key,o.mutableCopy()))}return dr.resolve(r)}getAllFromCollectionGroup(e,t,n,i){Ui()}Fr(e,t){return dr.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ic(this)}getSize(e){return dr.resolve(this.size)}}class ic extends Ka{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(n)})),dr.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class rc{constructor(e){this.persistence=e,this.Mr=new Qs((e=>Rs(e)),Os),this.lastRemoteSnapshotVersion=er.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Za,this.targetCount=0,this.Br=Ga.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),dr.resolve()}getLastRemoteSnapshotVersion(e){return dr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return dr.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),dr.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),dr.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Ga(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,dr.resolve()}updateTargetData(e,t){return this.qn(t),dr.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,dr.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),dr.waitFor(r).next((()=>i))}getTargetCount(e){return dr.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return dr.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),dr.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((t=>{r.push(i.markPotentiallyOrphaned(e,t))})),dr.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),dr.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return dr.resolve(n)}containsKey(e,t){return dr.resolve(this.Nr.containsKey(t))}}class sc{constructor(e,t){this.Lr={},this.overlays={},this.kr=new br(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new rc(this),this.indexManager=new za,this.remoteDocumentCache=function(e){return new nc(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Va(t),this.$r=new Qa(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ja,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new tc(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Ni("MemoryPersistence","Starting transaction:",e);const i=new oc(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((e=>this.referenceDelegate.Wr(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Gr(e,t){return dr.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class oc extends ur{constructor(e){super(),this.currentSequenceNumber=e}}class ac{constructor(e){this.persistence=e,this.zr=new Za,this.jr=null}static Hr(e){return new ac(e)}get Jr(){if(this.jr)return this.jr;throw Ui()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),dr.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),dr.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),dr.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dr.forEach(this.Jr,(n=>{const i=sr.fromPath(n);return this.Yr(e,i).next((e=>{e||t.removeEntry(i,er.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return dr.or([()=>dr.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class cc{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=i}static Ki(e,t){let n=co(),i=co();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new cc(e,t.fromCache,n,i)}}class lc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class uc{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,a.qk)()?8:pr.v((0,a.Su)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,i){const r={result:null};return this.ji(e,t).next((e=>{r.result=e})).next((()=>{if(!r.result)return this.Hi(e,t,i,n).next((e=>{r.result=e}))})).next((()=>{if(r.result)return;const n=new lc;return this.Ji(e,t,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(e,t,n,i.size)}))})).next((()=>r.result))}Yi(e,t,n,i){return n.documentReadCount<this.Wi?(Di()<=o.Ge.DEBUG&&Ni("QueryEngine","SDK will not create cache indexes for query:",Gs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),dr.resolve()):(Di()<=o.Ge.DEBUG&&Ni("QueryEngine","Query:",Gs(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(Di()<=o.Ge.DEBUG&&Ni("QueryEngine","The SDK decides to create cache indexes for query:",Gs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vs(t))):dr.resolve())}ji(e,t){if(Fs(t))return dr.resolve(null);let n=Vs(t);return this.indexManager.getIndexType(e,n).next((i=>0===i?null:(null!==t.limit&&1===i&&(t=zs(t,null,"F"),n=Vs(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const r=co(...i);return this.zi.getDocuments(e,r).next((i=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,i);return this.Xi(t,s,r,n.readTime)?this.ji(e,zs(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,i){return Fs(t)||i.isEqual(er.min())?dr.resolve(null):this.zi.getDocuments(e,n).next((r=>{const s=this.Zi(t,r);return this.Xi(t,s,n,i)?dr.resolve(null):(Di()<=o.Ge.DEBUG&&Ni("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gs(t)),this.es(e,s,t,function(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=er.fromTimestamp(1e9===i?new Zi(n+1,0):new Zi(n,i));return new ar(r,sr.empty(),t)}(i,-1)).next((e=>e)))}))}Zi(e,t){let n=new Nr(Ys(e));return t.forEach(((t,i)=>{Ks(e,i)&&(n=n.add(i))})),n}Xi(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(e,t,n){return Di()<=o.Ge.DEBUG&&Ni("QueryEngine","Using full collection scan to execute query:",Gs(t)),this.zi.getDocumentsMatchingQuery(e,t,ar.min(),n)}es(e,t,n,i){return this.zi.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class hc{constructor(e,t,n,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new kr(Qi),this.rs=new Qs((e=>Rs(e)),Os),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xa(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}async function dc(e,t){const n=Mi(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((r=>(i=r,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const r=[],s=[];let o=co();for(const e of i){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:r,addedBatchIds:s})))}))}))}function fc(e){const t=Mi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function pc(e,t){const n=Mi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function gc(e,t,n){const i=Mi(e),r=i.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(e=>i.persistence.referenceDelegate.removeTarget(e,r)))}catch(e){if(!yr(e))throw e;Ni("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}i.ns=i.ns.remove(t),i.rs.delete(r.target)}function mc(e,t,n){const i=Mi(e);let r=er.min(),s=co();return i.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const i=Mi(e),r=i.rs.get(n);return void 0!==r?dr.resolve(i.ns.get(r)):i.Qr.getTargetData(t,n)}(i,e,Vs(t)).next((t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>i.ts.getDocumentsMatchingQuery(e,t,n?r:er.min(),n?s:co()))).next((e=>(function(e,t,n){let i=e.ss.get(t)||er.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.ss.set(t,i)}(i,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,hs:s})))))}class yc{constructor(){this.activeTargetIds=lo}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vc{constructor(){this.no=new yc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new yc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ec{io(e){}shutdown(){}}class wc{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ni("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ni("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _c=null;function bc(){return null===_c?_c=268435456+Math.round(2147483648*Math.random()):_c++,"0x"+_c.toString(16)}const Tc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sc{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Ac="WebChannelConnection";class Ic extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po=`projects/${n}/databases/${i}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get wo(){return!1}So(e,t,n,i,r){const s=bc(),o=this.bo(e,t.toUriEncodedString());Ni("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,i,r),this.Co(e,o,a,n).then((t=>(Ni("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Ri("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}vo(e,t,n,i,r,s){return this.So(e,t,n,i,r)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ki,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Tc[e];return`${this.fo}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,i){const r=bc();return new Promise(((s,o)=>{const a=new Ti;a.setWithCredentials(!0),a.listenOnce(Ei.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case vi.NO_ERROR:const t=a.getResponseJson();Ni(Ac,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(t)),s(t);break;case vi.TIMEOUT:Ni(Ac,`RPC '${e}' ${r} timed out`),o(new ji(Fi.DEADLINE_EXCEEDED,"Request time out"));break;case vi.HTTP_ERROR:const n=a.getStatus();if(Ni(Ac,`RPC '${e}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Fi).indexOf(t)>=0?t:Fi.UNKNOWN}(t.status);o(new ji(e,t.message))}else o(new ji(Fi.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ji(Fi.UNAVAILABLE,"Connection failed."));break;default:Ui()}}finally{Ni(Ac,`RPC '${e}' ${r} completed.`)}}));const c=JSON.stringify(i);Ni(Ac,`RPC '${e}' ${r} sending request:`,i),a.send(t,"POST",c,n,15)}))}Fo(e,t,n){const i=bc(),r=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=mi(),o=yi(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=r.join("");Ni(Ac,`Creating RPC '${e}' stream ${i}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new Sc({lo:t=>{d?Ni(Ac,`Not sending because RPC '${e}' stream ${i} is closed:`,t):(h||(Ni(Ac,`Opening RPC '${e}' stream ${i} transport.`),u.open(),h=!0),Ni(Ac,`RPC '${e}' stream ${i} sending:`,t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,bi.EventType.OPEN,(()=>{d||Ni(Ac,`RPC '${e}' stream ${i} transport opened.`)})),p(u,bi.EventType.CLOSE,(()=>{d||(d=!0,Ni(Ac,`RPC '${e}' stream ${i} transport closed`),f.Vo())})),p(u,bi.EventType.ERROR,(t=>{d||(d=!0,Ri(Ac,`RPC '${e}' stream ${i} transport errored:`,t),f.Vo(new ji(Fi.UNAVAILABLE,"The operation could not be completed")))})),p(u,bi.EventType.MESSAGE,(t=>{var n;if(!d){const r=t.data[0];Pi(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ni(Ac,`RPC '${e}' stream ${i} received error:`,o);const t=o.status;let n=function(e){const t=Go[e];if(void 0!==t)return Yo(t)}(t),r=o.message;void 0===n&&(n=Fi.INTERNAL,r="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new ji(n,r)),u.close()}else Ni(Ac,`RPC '${e}' stream ${i} received:`,r),f.mo(r)}})),p(o,wi.STAT_EVENT,(t=>{t.stat===_i.PROXY?Ni(Ac,`RPC '${e}' stream ${i} detected buffering proxy`):t.stat===_i.NOPROXY&&Ni(Ac,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{f.Ro()}),0),f}}function Cc(){return"undefined"!=typeof document?document:null}function kc(e){return new fa(e,!0)}class xc{constructor(e,t,n=1e3,i=1.5,r=6e4){this.oi=e,this.timerId=t,this.Mo=n,this.xo=i,this.Oo=r,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),i=Math.max(0,t-n);i>0&&Ni("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Dc{constructor(e,t,n,i,r,s,o,a){this.oi=e,this.$o=n,this.Uo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new xc(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Fi.RESOURCE_EXHAUSTED?(Li(t.toString()),Li("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Fi.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Wo===t&&this.o_(e,n)}),(t=>{e((()=>{const e=new ji(Fi.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Ni("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Ni("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Nc extends Dc{constructor(e,t,n,i,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ui()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Pi(void 0===t||"string"==typeof t),Ur.fromBase64String(t||"")):(Pi(void 0===t||t instanceof Uint8Array),Ur.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Fi.UNKNOWN:Yo(e.code);return new ji(t,e.message||"")}(o);n=new sa(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ta(e,i.document.name),s=va(i.document.updateTime),o=i.document.createTime?va(i.document.createTime):er.min(),a=new as({mapValue:{fields:i.document.fields}}),c=ls.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new ia(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Ta(e,i.document),s=i.readTime?va(i.readTime):er.min(),o=ls.newNoDocument(r,s),a=i.removedTargetIds||[];n=new ia([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Ta(e,i.document),s=i.removedTargetIds||[];n=new ia([],s,r,null)}else{if(!("filter"in t))return Ui();{t.filter;const e=t.filter;e.targetId;const{count:i=0,unchangedNames:r}=e,s=new Wo(i,r),o=e.targetId;n=new ra(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return er.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?er.min():t.readTime?va(t.readTime):er.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Aa(this.serializer),t.addTarget=function(e,t){let n;const i=t.target;if(n=Us(i)?{documents:ka(e,i)}:{query:xa(e,i).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ma(e,t.resumeToken);const i=pa(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(er.min())>0){n.readTime=ga(e,t.snapshotVersion.toTimestamp());const i=pa(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ui()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Aa(this.serializer),t.removeTarget=e,this.t_(t)}}class Lc extends Dc{constructor(e,t,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Pi(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Pi(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?va(e.updateTime):va(t);return n.isEqual(er.min())&&(n=va(t)),new Io(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=va(e.commitTime);return this.listener.T_(n,t)}return Pi(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Aa(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof Uo)n={update:Ca(e,t.key,t.value)};else if(t instanceof Bo)n={delete:ba(e,t.key)};else if(t instanceof Po)n={update:Ca(e,t.key,t.data),updateMask:Fa(t.fieldMask)};else{if(!(t instanceof Vo))return Ui();n={verify:ba(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof vo)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Eo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _o)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof To)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Ui()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ya(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ui()}(e,t.precondition)),n}(this.serializer,e)))};this.t_(t)}}class Rc extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new ji(Fi.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.So(e,wa(t,n),i,r,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Fi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ji(Fi.UNKNOWN,e.toString())}))}vo(e,t,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.vo(e,wa(t,n),i,s,o,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Fi.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ji(Fi.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Oc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Li(t),this.g_=!1):Ni("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Uc{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io((e=>{n.enqueueAndForget((async()=>{zc(this)&&(Ni("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Mi(e);t.v_.add(4),await Mc(t),t.x_.set("Unknown"),t.v_.delete(4),await Pc(t)}(this))}))})),this.x_=new Oc(n,i)}}async function Pc(e){if(zc(e))for(const t of e.F_)await t(!0)}async function Mc(e){for(const t of e.F_)await t(!1)}function Fc(e,t){const n=Mi(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Hc(n)?qc(n):al(n).Jo()&&Bc(n,t))}function jc(e,t){const n=Mi(e),i=al(n);n.C_.delete(t),i.Jo()&&Vc(n,t),0===n.C_.size&&(i.Jo()?i.Xo():zc(n)&&n.x_.set("Unknown"))}function Bc(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(er.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}al(e).c_(t)}function Vc(e,t){e.O_.Oe(t),al(e).l_(t)}function qc(e){e.O_=new aa({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),al(e).start(),e.x_.p_()}function Hc(e){return zc(e)&&!al(e).Ho()&&e.C_.size>0}function zc(e){return 0===Mi(e).v_.size}function $c(e){e.O_=void 0}async function Wc(e){e.C_.forEach(((t,n)=>{Bc(e,t)}))}async function Gc(e,t){$c(e),Hc(e)?(e.x_.S_(t),qc(e)):e.x_.set("Unknown")}async function Kc(e,t,n){if(e.x_.set("Online"),t instanceof sa&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.C_.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.C_.delete(i),e.O_.removeTarget(i))}(e,t)}catch(n){Ni("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Yc(e,n)}else if(t instanceof ia?e.O_.$e(t):t instanceof ra?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(er.min()))try{const t=await fc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.C_.get(i);r&&e.C_.set(i,r.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const i=e.C_.get(t);if(!i)return;e.C_.set(t,i.withResumeToken(Ur.EMPTY_BYTE_STRING,i.snapshotVersion)),Vc(e,t);const r=new Ba(i.target,t,n,i.sequenceNumber);Bc(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ni("RemoteStore","Failed to raise snapshot:",t),await Yc(e,t)}}async function Yc(e,t,n){if(!yr(t))throw t;e.v_.add(1),await Mc(e),e.x_.set("Offline"),n||(n=()=>fc(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ni("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Pc(e)}))}function Xc(e,t){return t().catch((n=>Yc(e,n,t)))}async function Qc(e){const t=Mi(e),n=cl(t);let i=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Jc(t);)try{const e=await pc(t.localStore,i);if(null===e){0===t.D_.length&&n.Xo();break}i=e.batchId,Zc(t,e)}catch(e){await Yc(t,e)}el(t)&&tl(t)}function Jc(e){return zc(e)&&e.D_.length<10}function Zc(e,t){e.D_.push(t);const n=cl(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function el(e){return zc(e)&&!cl(e).Ho()&&e.D_.length>0}function tl(e){cl(e).start()}async function nl(e){cl(e).d_()}async function il(e){const t=cl(e);for(const n of e.D_)t.I_(n.mutations)}async function rl(e,t,n){const i=e.D_.shift(),r=Ho.from(i,t,n);await Xc(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await Qc(e)}async function sl(e,t){t&&cl(e).P_&&await async function(e,t){if(function(e){return function(e){switch(e){default:return Ui();case Fi.CANCELLED:case Fi.UNKNOWN:case Fi.DEADLINE_EXCEEDED:case Fi.RESOURCE_EXHAUSTED:case Fi.INTERNAL:case Fi.UNAVAILABLE:case Fi.UNAUTHENTICATED:return!1;case Fi.INVALID_ARGUMENT:case Fi.NOT_FOUND:case Fi.ALREADY_EXISTS:case Fi.PERMISSION_DENIED:case Fi.FAILED_PRECONDITION:case Fi.ABORTED:case Fi.OUT_OF_RANGE:case Fi.UNIMPLEMENTED:case Fi.DATA_LOSS:return!0}}(e)&&e!==Fi.ABORTED}(t.code)){const n=e.D_.shift();cl(e).Zo(),await Xc(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Qc(e)}}(e,t),el(e)&&tl(e)}async function ol(e,t){const n=Mi(e);n.asyncQueue.verifyOperationInProgress(),Ni("RemoteStore","RemoteStore received new credentials");const i=zc(n);n.v_.add(3),await Mc(n),i&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Pc(n)}function al(e){return e.N_||(e.N_=function(e,t,n){const i=Mi(e);return i.R_(),new Nc(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Po:Wc.bind(null,e),To:Gc.bind(null,e),u_:Kc.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),Hc(e)?qc(e):e.x_.set("Unknown")):(await e.N_.stop(),$c(e))}))),e.N_}function cl(e){return e.B_||(e.B_=function(e,t,n){const i=Mi(e);return i.R_(),new Lc(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Po:nl.bind(null,e),To:sl.bind(null,e),E_:il.bind(null,e),T_:rl.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await Qc(e)):(await e.B_.stop(),e.D_.length>0&&(Ni("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))}))),e.B_}class ll{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new ll(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ji(Fi.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ul(e,t){if(Li("AsyncQueue",`${t}: ${e}`),yr(e))return new ji(Fi.UNAVAILABLE,`${t}: ${e}`);throw e}class hl{constructor(e){this.comparator=e?(t,n)=>e(t,n)||sr.comparator(t.key,n.key):(e,t)=>sr.comparator(e.key,t.key),this.keyedMap=to(),this.sortedSet=new kr(this.comparator)}static emptySet(e){return new hl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hl))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new hl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class dl{constructor(){this.L_=new kr(sr.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Ui():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class fl{constructor(e,t,n,i,r,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,i,r){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new fl(e,t,hl.emptySet(t),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$s(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class pl{constructor(){this.q_=void 0,this.Q_=[]}}class gl{constructor(){this.queries=new Qs((e=>Ws(e)),$s),this.onlineState="Unknown",this.K_=new Set}}async function ml(e,t){const n=Mi(e),i=t.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new pl),r)try{s.q_=await n.onListen(i)}catch(e){const n=ul(e,`Initialization of query '${Gs(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&wl(n)}async function yl(e,t){const n=Mi(e),i=t.query;let r=!1;const s=n.queries.get(i);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),r=0===s.Q_.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function vl(e,t){const n=Mi(e);let i=!1;for(const e of t){const t=e.query,r=n.queries.get(t);if(r){for(const t of r.Q_)t.W_(e)&&(i=!0);r.q_=e}}i&&wl(n)}function El(e,t,n){const i=Mi(e),r=i.queries.get(t);if(r)for(const e of r.Q_)e.onError(n);i.queries.delete(t)}function wl(e){e.K_.forEach((e=>{e.next()}))}class _l{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new fl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class bl{constructor(e){this.key=e}}class Tl{constructor(e){this.key=e}}class Sl{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=co(),this.mutatedKeys=co(),this.ua=Ys(e),this.ca=new hl(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new dl,i=t?t.ca:this.ca;let r=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const l=i.get(e),u=Ks(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||c&&this.ua(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),r=d?r.add(e):r.delete(e)):(s=s.delete(e),r=r.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:r}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const r=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ui()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),i=null!=i&&i;const o=t&&!i?this.Ea():[],a=0===this.aa.size&&this.current&&!i?1:0,c=a!==this._a;return this._a=a,0!==s.length||c?{snapshot:new fl(this.query,e.ca,r,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new dl,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=co(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new Tl(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new bl(n))})),t}Ra(e){this.oa=e.hs,this.aa=co();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return fl.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Al{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Il{constructor(e){this.key=e,this.ma=!1}}class Cl{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Qs((e=>Ws(e)),$s),this.pa=new Map,this.ya=new Set,this.wa=new kr(sr.comparator),this.Sa=new Map,this.ba=new Za,this.Da={},this.Ca=new Map,this.va=Ga.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function kl(e,t){const n=function(e){const t=Mi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dl.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zl.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ll.bind(null,t),t.fa.u_=vl.bind(null,t.eventManager),t.fa.xa=El.bind(null,t.eventManager),t}(e);let i,r;const s=n.ga.get(t);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Va();else{const e=await function(e,t){const n=Mi(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.Qr.getTargetData(e,t).next((r=>r?(i=r,dr.resolve(i)):n.Qr.allocateTargetId(e).next((r=>(i=new Ba(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.ns.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}(n.localStore,Vs(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);i=e.targetId,r=await async function(e,t,n,i,r){e.Ma=(t,n,i)=>async function(e,t,n,i){let r=t.view.ha(n);r.Xi&&(r=await mc(e.localStore,t.query,!1).then((({documents:e})=>t.view.ha(e,r))));const s=i&&i.targetChanges.get(t.targetId),o=i&&null!=i.targetMismatches.get(t.targetId),a=t.view.applyChanges(r,e.isPrimaryClient,s,o);return jl(e,t.targetId,a.da),a.snapshot}(e,t,n,i);const s=await mc(e.localStore,t,!0),o=new Sl(t,s.hs),a=o.ha(s.documents),c=na.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState,r),l=o.applyChanges(a,e.isPrimaryClient,c);jl(e,n,l.da);const u=new Al(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),l.snapshot}(n,t,i,"current"===s,e.resumeToken),n.isPrimaryClient&&Fc(n.remoteStore,e)}return r}async function xl(e,t){const n=Mi(e),i=n.ga.get(t),r=n.pa.get(i.targetId);if(r.length>1)return n.pa.set(i.targetId,r.filter((e=>!$s(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await gc(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),jc(n.remoteStore,i.targetId),Ml(n,i.targetId)})).catch(hr)):(Ml(n,i.targetId),await gc(n.localStore,i.targetId,!0))}async function Dl(e,t){const n=Mi(e);try{const e=await function(e,t){const n=Mi(e),i=t.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=r.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Ur.EMPTY_BYTE_STRING,er.min()).withLastLimboFreeSnapshotVersion(er.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,i)),r=r.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(e,l))}));let a=Zs(),c=co();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),o.push(function(e,t,n){let i=co(),r=co();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=Zs();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(er.min())?(t.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),i=i.insert(n,s)):Ni("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:i,ls:r}}))}(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!i.isEqual(er.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,i)));o.push(t)}return dr.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=r,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.Sa.get(t);i&&(Pi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.ma=!0:e.modifiedDocuments.size>0?Pi(i.ma):e.removedDocuments.size>0&&(Pi(i.ma),i.ma=!1))})),await ql(n,e,t)}catch(e){await hr(e)}}function Nl(e,t,n){const i=Mi(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.ga.forEach(((n,i)=>{const r=i.view.U_(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const n=Mi(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const e of n.Q_)e.U_(t)&&(i=!0)})),i&&wl(n)}(i.eventManager,t),e.length&&i.fa.u_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Ll(e,t,n){const i=Mi(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Sa.get(t),s=r&&r.key;if(s){let e=new kr(sr.comparator);e=e.insert(s,ls.newNoDocument(s,er.min()));const n=co().add(s),r=new ta(er.min(),new Map,new kr(Qi),e,n);await Dl(i,r),i.wa=i.wa.remove(s),i.Sa.delete(t),Vl(i)}else await gc(i.localStore,t,!1).then((()=>Ml(i,t,n))).catch(hr)}async function Rl(e,t){const n=Mi(e),i=t.batch.batchId;try{const e=await function(e,t){const n=Mi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,s=r.keys();let o=dr.resolve();return s.forEach((e=>{o=o.next((()=>i.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Pi(null!==s),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,r)))}(n,e,t,r).next((()=>r.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=co();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(n.localStore,t);Pl(n,i,null),Ul(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ql(n,e)}catch(e){await hr(e)}}async function Ol(e,t,n){const i=Mi(e);try{const e=await function(e,t){const n=Mi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Pi(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);Pl(i,t,n),Ul(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await ql(i,e)}catch(n){await hr(n)}}function Ul(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function Pl(e,t,n){const i=Mi(e);let r=i.Da[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.Da[i.currentUser.toKey()]=r}}function Ml(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.pa.get(t))e.ga.delete(i),n&&e.fa.xa(i,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||Fl(e,t)}))}function Fl(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(jc(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Vl(e))}function jl(e,t,n){for(const i of n)i instanceof bl?(e.ba.addReference(i.key,t),Bl(e,i)):i instanceof Tl?(Ni("SyncEngine","Document no longer in limbo: "+i.key),e.ba.removeReference(i.key,t),e.ba.containsKey(i.key)||Fl(e,i.key)):Ui()}function Bl(e,t){const n=t.key,i=n.path.canonicalString();e.wa.get(n)||e.ya.has(i)||(Ni("SyncEngine","New document in limbo: "+n),e.ya.add(i),Vl(e))}function Vl(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new sr(nr.fromString(t)),i=e.va.next();e.Sa.set(i,new Il(n)),e.wa=e.wa.insert(n,i),Fc(e.remoteStore,new Ba(Vs(Ms(n.path)),i,"TargetPurposeLimboResolution",br._e))}}async function ql(e,t,n){const i=Mi(e),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach(((e,a)=>{o.push(i.Ma(a,t,n).then((e=>{if((e||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){r.push(e);const t=cc.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),i.fa.u_(r),await async function(e,t){const n=Mi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>dr.forEach(t,(t=>dr.forEach(t.qi,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>dr.forEach(t.Qi,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!yr(e))throw e;Ni("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.ns.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(t,r)}}}(i.localStore,s))}async function Hl(e,t){const n=Mi(e);if(!n.currentUser.isEqual(t)){Ni("SyncEngine","User change. New user:",t.toKey());const e=await dc(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new ji(Fi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ca.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ql(n,e.us)}}function zl(e,t){const n=Mi(e),i=n.Sa.get(t);if(i&&i.ma)return co().add(i.key);{let e=co();const i=n.pa.get(t);if(!i)return e;for(const t of i){const i=n.ga.get(t);e=e.unionWith(i.view.la)}return e}}function $l(e){const t=Mi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Rl.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ol.bind(null,t),t}class Wl{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=kc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,i){return new hc(e,t,n,i)}(this.persistence,new uc,e.initialUser,this.serializer)}createPersistence(e){return new sc(ac.Hr,this.serializer)}createSharedClientState(e){return new vc}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Gl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Nl(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hl.bind(null,this.syncEngine),await async function(e,t){const n=Mi(e);t?(n.v_.delete(2),await Pc(n)):t||(n.v_.add(2),await Mc(n),n.x_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new gl}createDatastore(e){const t=kc(e.databaseInfo.databaseId),n=function(e){return new Ic(e)}(e.databaseInfo);return function(e,t,n,i){return new Rc(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,r){return new Uc(e,t,n,i,r)}(this.localStore,this.datastore,e.asyncQueue,(e=>Nl(this.syncEngine,e,0)),wc.D()?new wc:new Ec)}createSyncEngine(e,t){return function(e,t,n,i,r,s,o){const a=new Cl(e,t,n,i,r,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Mi(e);Ni("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Mc(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class Kl{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Li("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Yl{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Ci.UNAUTHENTICATED,this.clientId=Xi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ni("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ni("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ji(Fi.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ul(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Xl(e,t){e.asyncQueue.verifyOperationInProgress(),Ni("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await dc(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Ql(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ni("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xl(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Fi.FAILED_PRECONDITION||e.code===Fi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ri("Error using user provided cache. Falling back to memory cache: "+n),await Xl(e,new Wl)}}else Ni("FirestoreClient","Using default OfflineComponentProvider"),await Xl(e,new Wl);return e._offlineComponents}(e);Ni("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>ol(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ol(t.remoteStore,n))),e._onlineComponents=t}async function Jl(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ni("FirestoreClient","Using user provided OnlineComponentProvider"),await Ql(e,e._uninitializedComponentsProvider._online)):(Ni("FirestoreClient","Using default OnlineComponentProvider"),await Ql(e,new Gl))),e._onlineComponents}async function Zl(e){const t=await Jl(e),n=t.eventManager;return n.onListen=kl.bind(null,t.syncEngine),n.onUnlisten=xl.bind(null,t.syncEngine),n}function eu(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const tu=new Map;function nu(e,t,n){if(!n)throw new ji(Fi.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function iu(e){if(!sr.isDocumentKey(e))throw new ji(Fi.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ru(e){if(sr.isDocumentKey(e))throw new ji(Fi.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function su(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ui()}function ou(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ji(Fi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=su(e);throw new ji(Fi.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class au{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ji(Fi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ji(Fi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new ji(Fi.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eu(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ji(Fi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ji(Fi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ji(Fi.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cu{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new au({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ji(Fi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ji(Fi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new au(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new qi;switch(e.type){case"firstParty":return new Wi(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ji(Fi.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=tu.get(e);t&&(Ni("ComponentProvider","Removing Datastore"),tu.delete(e),t.terminate())}(this),Promise.resolve()}}class lu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new lu(this.firestore,e,this._query)}}class uu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new uu(this.firestore,e,this._key)}}class hu extends lu{constructor(e,t,n){super(e,t,Ms(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new uu(this.firestore,null,new sr(e))}withConverter(e){return new hu(this.firestore,e,this._path)}}function du(e,t,...n){if(e=(0,a.Yj)(e),nu("collection","path",t),e instanceof cu){const i=nr.fromString(t,...n);return ru(i),new hu(e,null,i)}{if(!(e instanceof uu||e instanceof hu))throw new ji(Fi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(nr.fromString(t,...n));return ru(i),new hu(e.firestore,null,i)}}function fu(e,t,...n){if(e=(0,a.Yj)(e),1===arguments.length&&(t=Xi.newId()),nu("doc","path",t),e instanceof cu){const i=nr.fromString(t,...n);return iu(i),new uu(e,null,new sr(i))}{if(!(e instanceof uu||e instanceof hu))throw new ji(Fi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(nr.fromString(t,...n));return iu(i),new uu(e.firestore,e instanceof hu?e.converter:null,new sr(i))}}class pu{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new xc(this,"async_queue_retry"),this._u=()=>{const e=Cc();e&&Ni("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=Cc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Cc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new Bi;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!yr(e))throw e;Ni("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Li("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const i=ll.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(i),i}au(){this.ru&&Ui()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}class gu extends cu{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new pu,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vu(this),this._firestoreClient.terminate()}}function mu(e,t){const n="object"==typeof e?e:(0,r.WE)(),i="string"==typeof e?e:t||"(default)",s=(0,r.U5)(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const e=(0,a.on)("firestore");e&&function(e,t,n,i={}){var r;const s=(e=ou(e,cu))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=Ci.MOCK_USER;else{t=(0,a.YD)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new ji(Fi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ci(s)}e._authCredentials=new Hi(new Vi(t,n))}}(s,...e)}return s}function yu(e){return e._firestoreClient||vu(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function vu(e){var t,n,i;const r=e._freezeSettings(),s=function(e,t,n,i){return new Hr(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,eu(i.experimentalLongPollingOptions),i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new Yl(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}class Eu{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class wu{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class _u{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _u(Ur.fromBase64String(e))}catch(e){throw new ji(Fi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new _u(Ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ji(Fi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Tu(){return new bu("__name__")}class Su{constructor(e){this._methodName=e}}class Au{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ji(Fi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ji(Fi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qi(this._lat,e._lat)||Qi(this._long,e._long)}}const Iu=/^__.*__$/;class Cu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Po(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uo(e,this.data,t,this.fieldTransforms)}}class ku{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Po(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ui()}}class Du{constructor(e,t,n,i,r,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Eu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Du(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:n,Vu:!1});return i.mu(e),i}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:n,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return qu(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(xu(this.du)&&Iu.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Nu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||kc(e)}Su(e,t,n,i=!1){return new Du({du:e,methodName:t,wu:n,path:rr.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lu(e){const t=e._freezeSettings(),n=kc(e._databaseId);return new Nu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ru(e,t,n,i,r,s={}){const o=e.Su(s.merge||s.mergeFields?2:0,t,n,r);Fu("Data must be an object, but it was:",o,i);const a=Pu(i,o);let c,l;if(s.merge)c=new Rr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const i of s.mergeFields){const r=ju(t,i,n);if(!o.contains(r))throw new ji(Fi.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Hu(e,r)||e.push(r)}c=new Rr(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Cu(new as(a),c,l)}class Ou extends Su{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ou}}function Uu(e,t){if(Mu(e=(0,a.Yj)(e)))return Fu("Unsupported field value:",t,e),Pu(e,t);if(e instanceof Su)return function(e,t){if(!xu(t.du))throw t.pu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.pu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=Uu(r,t.gu(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,a.Yj)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fo(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Zi.fromDate(e);return{timestampValue:ga(t.serializer,n)}}if(e instanceof Zi){const n=new Zi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ga(t.serializer,n)}}if(e instanceof Au)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _u)return{bytesValue:ma(t.serializer,e._byteString)};if(e instanceof uu){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.pu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ea(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu(`Unsupported field value: ${su(e)}`)}(e,t)}function Pu(e,t){const n={};return Cr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ir(e,((e,i)=>{const r=Uu(i,t.Ru(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function Mu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Zi||e instanceof Au||e instanceof _u||e instanceof uu||e instanceof Su)}function Fu(e,t,n){if(!Mu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=su(n);throw"an object"===i?t.pu(e+" a custom object"):t.pu(e+" "+i)}}function ju(e,t,n){if((t=(0,a.Yj)(t))instanceof bu)return t._internalPath;if("string"==typeof t)return Vu(e,t);throw qu("Field path arguments must be of type string or ",e,!1,void 0,n)}const Bu=new RegExp("[~\\*/\\[\\]]");function Vu(e,t,n){if(t.search(Bu)>=0)throw qu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new bu(...t.split("."))._internalPath}catch(i){throw qu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function qu(e,t,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new ji(Fi.INVALID_ARGUMENT,a+e+c)}function Hu(e,t){return e.some((e=>e.isEqual(t)))}class zu{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new uu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $u(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $u extends zu{data(){return super.data()}}function Wu(e,t){return"string"==typeof t?Vu(e,t):t instanceof bu?t._internalPath:t._delegate._internalPath}class Gu{}class Ku extends Gu{}function Yu(e,t,...n){let i=[];t instanceof Gu&&i.push(t),i=i.concat(n),function(e){const t=e.filter((e=>e instanceof Ju)).length,n=e.filter((e=>e instanceof Xu)).length;if(t>1||t>0&&n>0)throw new ji(Fi.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const t of i)e=t._apply(e);return e}class Xu extends Ku{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Xu(e,t,n)}_apply(e){const t=this._parse(e);return sh(e._query,t),new lu(e.firestore,e.converter,Hs(e._query,t))}_parse(e){const t=Lu(e.firestore),n=function(e,t,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ji(Fi.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){rh(o,s);const t=[];for(const n of o)t.push(ih(i,e,n));a={arrayValue:{values:t}}}else a=ih(i,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||rh(o,s),a=function(e,t,n,i=!1){return Uu(n,e.Su(i?4:3,t))}(n,"where",o,"in"===s||"not-in"===s);return ms.create(r,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Qu(e,t,n){const i=t,r=Wu("where",e);return Xu._create(r,i,n)}class Ju extends Gu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ju(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ys.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const i=t.getFlattenedFilters();for(const e of i)sh(n,e),n=Hs(n,e)}(e._query,t),new lu(e.firestore,e.converter,Hs(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Zu extends Ku{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zu(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ji(Fi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ji(Fi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fs(t,n)}(e._query,this._field,this._direction);return new lu(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ps(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function eh(e,t="asc"){const n=t,i=Wu("orderBy",e);return Zu._create(i,n)}class th extends Ku{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new th(e,t,n)}_apply(e){return new lu(e.firestore,e.converter,zs(e._query,this._limit,this._limitType))}}function nh(e){return function(e,t){if(t<=0)throw new ji(Fi.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}("limit",e),th._create("limit",e,"F")}function ih(e,t,n){if("string"==typeof(n=(0,a.Yj)(n))){if(""===n)throw new ji(Fi.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!js(t)&&-1!==n.indexOf("/"))throw new ji(Fi.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(nr.fromString(n));if(!sr.isDocumentKey(i))throw new ji(Fi.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Zr(e,new sr(i))}if(n instanceof uu)return Zr(e,n._key);throw new ji(Fi.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${su(n)}.`)}function rh(e,t){if(!Array.isArray(e)||0===e.length)throw new ji(Fi.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function sh(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ji(Fi.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ji(Fi.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class oh{convertValue(e,t="none"){switch(Wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ui()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ir(e,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertGeoPoint(e){return new Au(Fr(e.latitude),Fr(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Vr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(qr(e));default:return null}}convertTimestamp(e){const t=Mr(e);return new Zi(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=nr.fromString(e);Pi(ja(n));const i=new zr(n.get(1),n.get(3)),r=new sr(n.popFirst(5));return i.isEqual(t)||Li(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}function ah(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class ch{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lh extends zu{constructor(e,t,n,i,r,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Wu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class uh extends lh{data(e={}){return super.data(e)}}class hh{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ch(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new uh(this._firestore,this._userDataWriter,n.key,n,new ch(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ji(Fi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const i=new uh(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ch(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const i=new uh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ch(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,s=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:dh(t.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dh(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ui()}}function fh(e){e=ou(e,uu);const t=ou(e.firestore,gu);return function(e,t,n={}){const i=new Bi;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new Kl({next:s=>{t.enqueueAndForget((()=>yl(e,o)));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new ji(Fi.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new ji(Fi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:e=>r.reject(e)}),o=new _l(Ms(n.path),s,{includeMetadataChanges:!0,Z_:!0});return ml(e,o)}(await Zl(e),e.asyncQueue,t,n,i))),i.promise}(yu(t),e._key).then((n=>function(e,t,n){const i=n.docs.get(t._key),r=new ph(e);return new lh(e,r,t._key,i,new ch(n.hasPendingWrites,n.fromCache),t.converter)}(t,e,n)))}class ph extends oh{constructor(e){super(),this.firestore=e}convertBytes(e){return new _u(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new uu(this.firestore,null,t)}}function gh(e){e=ou(e,lu);const t=ou(e.firestore,gu),n=yu(t),i=new ph(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ji(Fi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),function(e,t,n={}){const i=new Bi;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new Kl({next:n=>{t.enqueueAndForget((()=>yl(e,o))),n.fromCache&&"server"===i.source?r.reject(new ji(Fi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),o=new _l(n,s,{includeMetadataChanges:!0,Z_:!0});return ml(e,o)}(await Zl(e),e.asyncQueue,t,n,i))),i.promise}(n,e._query).then((n=>new hh(t,i,e,n)))}function mh(e,t,n){e=ou(e,uu);const i=ou(e.firestore,gu),r=ah(e.converter,t,n);return yh(i,[Ru(Lu(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,Co.none())])}function yh(e,t){return function(e,t){const n=new Bi;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=$l(e);try{const e=await function(e,t){const n=Mi(e),i=Zi.now(),r=t.reduce(((e,t)=>e.add(t.key)),co());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Zs(),c=co();return n.os.getEntries(e,r).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((r=>{s=r;const o=[];for(const e of t){const t=Ro(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Po(e.key,t,cs(t.value.mapValue),Co.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,o,t)})).next((t=>{o=t;const i=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:no(s)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.Da[e.currentUser.toKey()];i||(i=new kr(Qi)),i=i.insert(t,n),e.Da[e.currentUser.toKey()]=i}(i,e.batchId,n),await ql(i,e.changes),await Qc(i.remoteStore)}catch(e){const t=ul(e,"Failed to persist write");n.reject(t)}}(await function(e){return Jl(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(yu(e),t)}function vh(e){return function(e,t){const n=ou(e.firestore,gu),i=yu(n),r=function(e,t){const n=[];for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.push(t(e[i],i));return n}(t,((e,t)=>new $o(t,e.aggregateType,e._internalFieldPath)));return function(e,t,n){const i=new Bi;return e.asyncQueue.enqueueAndForget((async()=>{try{const r=await function(e){return Jl(e).then((e=>e.datastore))}(e);i.resolve(async function(e,t,n){var i;const r=Mi(e),{request:s,V_:o,parent:a}=function(e,t,n){const{ut:i,parent:r}=xa(e,t),s={},o=[];let a=0;return n.forEach((e=>{const t="aggregate_"+a++;s[t]=e.alias,"count"===e.aggregateType?o.push({alias:t,count:{}}):"avg"===e.aggregateType?o.push({alias:t,avg:{field:Ua(e.fieldPath)}}):"sum"===e.aggregateType&&o.push({alias:t,sum:{field:Ua(e.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},V_:s,parent:r}}(r.serializer,function(e){const t=Mi(e);return t.Pe||(t.Pe=qs(t,e.explicitOrderBy)),t.Pe}(t),n);r.connection.wo||delete s.parent;const c=(await r.vo("RunAggregationQuery",r.serializer.databaseId,a,s,1)).filter((e=>!!e.result));Pi(1===c.length);const l=null===(i=c[0].result)||void 0===i?void 0:i.aggregateFields;return Object.keys(l).reduce(((e,t)=>(e[o[t]]=l[t],e)),{})}(r,t,n))}catch(e){i.reject(e)}})),i.promise}(i,e._query,r).then((t=>function(e,t,n){const i=new ph(e);return new wu(t,i,n)}(n,e,t)))}(e,{count:new Eu("count")})}class Eh{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Lu(e)}set(e,t,n){this._verifyNotCommitted();const i=wh(e,this._firestore),r=ah(i.converter,t,n),s=Ru(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(s.toMutation(i._key,Co.none())),this}update(e,t,n,...i){this._verifyNotCommitted();const r=wh(e,this._firestore);let s;return s="string"==typeof(t=(0,a.Yj)(t))||t instanceof bu?function(e,t,n,i,r,s){const o=e.Su(1,t,n),c=[ju(t,i,n)],l=[r];if(s.length%2!=0)throw new ji(Fi.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)c.push(ju(t,s[e])),l.push(s[e+1]);const u=[],h=as.empty();for(let e=c.length-1;e>=0;--e)if(!Hu(u,c[e])){const t=c[e];let n=l[e];n=(0,a.Yj)(n);const i=o.fu(t);if(n instanceof Ou)u.push(t);else{const e=Uu(n,i);null!=e&&(u.push(t),h.set(t,e))}}const d=new Rr(u);return new ku(h,d,o.fieldTransforms)}(this._dataReader,"WriteBatch.update",r._key,t,n,i):function(e,t,n,i){const r=e.Su(1,t,n);Fu("Data must be an object, but it was:",r,i);const s=[],o=as.empty();Ir(i,((e,i)=>{const c=Vu(t,e,n);i=(0,a.Yj)(i);const l=r.fu(c);if(i instanceof Ou)s.push(c);else{const e=Uu(i,l);null!=e&&(s.push(c),o.set(c,e))}}));const c=new Rr(s);return new ku(o,c,r.fieldTransforms)}(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(s.toMutation(r._key,Co.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wh(e,this._firestore);return this._mutations=this._mutations.concat(new Bo(t._key,Co.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ji(Fi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wh(e,t){if((e=(0,a.Yj)(e)).firestore!==t)throw new ji(Fi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function _h(e){return yu(e=ou(e,gu)),new Eh(e,(t=>yh(e,t)))}new WeakMap,function(e,t=!0){!function(e){ki=e}(r.Sg),(0,r.q4)(new s.Yl("firestore",((e,{instanceIdentifier:n,options:i})=>{const r=e.getProvider("app").getImmediate(),s=new gu(new zi(e.getProvider("auth-internal")),new Ki(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ji(Fi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zr(e.options.projectId,t)}(r,n),r);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),(0,r.Kk)(Ii,"4.4.2",e),(0,r.Kk)(Ii,"4.4.2","esm2017")}()},4296:(e,t,n)=>{"use strict";n.d(t,{Gf:()=>m,Kq:()=>le,GO:()=>ae,wv:()=>he,kN:()=>ce,IL:()=>ue});var i=n(4376);const r=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=r>>2,u=(3&r)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==s||null==a||null==c)throw new o;const l=r<<2|s>>4;if(i.push(l),64!==a){const e=s<<4&240|a>>2;if(i.push(e),64!==c){const e=a<<6&192|c;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return s.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},l=e=>{const t=(e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]};class u extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,h.prototype.create)}}class h{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(d,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new u(i,o,n)}}const d=/\{\$([^}]+)}/g;function f(e){return e&&e._delegate?e._delegate:e}const p="firebasestorage.googleapis.com",g="storageBucket";class m extends u{constructor(e,t,n=0){super(E(e),`Firebase Storage: ${t} (${E(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,m.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return E(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var y,v;function E(e){return"storage/"+e}function w(){return new m(y.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function _(e){return new m(y.INVALID_ARGUMENT,e)}function b(){return new m(y.APP_DELETED,"The Firebase app was deleted.")}function T(e){throw new m(y.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(y||(y={}));class S{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=S.makeFromUrl(e,t)}catch(t){return new S(e,"")}if(""===n.path)return n;throw i=e,new m(y.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===p?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let t=0;t<a.length;t++){const i=a[t],r=i.regex.exec(e);if(r){const e=r[i.indices.bucket];let t=r[i.indices.path];t||(t=""),n=new S(e,t),i.postModify(n);break}}if(null==n)throw function(e){return new m(y.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class A{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function I(e){return"string"==typeof e||e instanceof String}function C(e,t,n,i){if(i<t)throw _(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw _(`Invalid value for '${e}'. Expected ${n} or less.`)}function k(e,t,n){let i=t;return null==n&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function x(e){const t=encodeURIComponent;let n="?";for(const i in e)e.hasOwnProperty(i)&&(n=n+(t(i)+"=")+t(e[i])+"&");return n=n.slice(0,-1),n}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(v||(v={}));class D{constructor(e,t,n,i,r,s,o,a,c,l,u,h=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{const n=this.resolve_,i=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());void 0!==e?n(e):n()}catch(e){i(e)}else if(null!==r){const e=w();e.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,e)):i(e)}else t.canceled?i(this.appDelete_?b():new m(y.CANCELED,"User canceled the upload/download.")):i(new m(y.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new N(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(...e){l||(l=!0,t.apply(null,e))}function h(t){r=setTimeout((()=>{r=null,e(f,c())}),t)}function d(){s&&clearTimeout(s)}function f(e,...t){if(l)return void d();if(e)return d(),void u.call(null,e,...t);if(c()||o)return d(),void u.call(null,e,...t);let n;i<64&&(i*=2),1===a?(a=2,n=0):n=1e3*(i+Math.random()),h(n)}let p=!1;function g(e){p||(p=!0,d(),l||(null!==r?(e||(a=2),clearTimeout(r),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(((e,t)=>{if(t)return void e(!1,new N(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===v.NO_ERROR,r=n.getStatus();if(!t||function(e,t){const n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return n||i||r}(r,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===v.ABORT;return void e(!1,new N(!1,null,t))}const s=-1!==this.successCodes_.indexOf(r);e(!0,new N(s,n))}))}),e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class N{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function L(e){let t;try{t=JSON.parse(e)}catch(e){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t;var n}function R(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function O(e,t){return t}class U{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||O}}let P=null;function M(){if(P)return P;const e=[];e.push(new U("bucket")),e.push(new U("generation")),e.push(new U("metageneration")),e.push(new U("name","fullPath",!0));const t=new U("name");t.xform=function(e,t){return function(e){return!I(e)||e.length<2?e:R(e)}(t)},e.push(t);const n=new U("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new U("timeCreated")),e.push(new U("updated")),e.push(new U("md5Hash",null,!0)),e.push(new U("cacheControl",null,!0)),e.push(new U("contentDisposition",null,!0)),e.push(new U("contentEncoding",null,!0)),e.push(new U("contentLanguage",null,!0)),e.push(new U("contentType",null,!0)),e.push(new U("metadata","customMetadata",!0)),P=e,P}function F(e,t,n){const i=L(t);return null===i?null:function(e,t,n){const i={type:"file"},r=n.length;for(let e=0;e<r;e++){const r=n[e];i[r.local]=r.xform(i,t[r.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,i=e.fullPath,r=new S(n,i);return t._makeStorageReference(r)}})}(i,e),i}(e,i,n)}const j="prefixes",B="items";class V{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function q(e){if(!e)throw w()}function H(e){return function(t,n){let i;var r,s;return 401===t.getStatus()?i=t.getErrorText().includes("Firebase App Check token is invalid")?new m(y.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new m(y.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,i=new m(y.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=e.path,i=new m(y.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}}function z(e){const t=H(e);return function(n,i){let r=t(n,i);var s;return 404===n.getStatus()&&(s=e.path,r=new m(y.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),r.serverResponse=i.serverResponse,r}}function $(e,t,n){const i=k(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new V(i,"GET",function(e,t){return function(n,i){const r=F(e,i,t);return q(null!==r),r}}(e,n),r);return s.errorHandler=z(t),s}function W(e,t,n,i,r){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),i&&(s.pageToken=i),r&&(s.maxResults=r);const o=k(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,c=new V(o,"GET",function(e,t){return function(n,i){const r=function(e,t,n){const i=L(n);return null===i?null:function(e,t,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[j])for(const r of n[j]){const n=r.replace(/\/$/,""),s=e._makeStorageReference(new S(t,n));i.prefixes.push(s)}if(n[B])for(const r of n[B]){const n=e._makeStorageReference(new S(t,r.name));i.items.push(n)}return i}(e,t,i)}(e,t,i);return q(null!==r),r}}(e,t.bucket),a);return c.urlParams=s,c.errorHandler=H(t),c}let G=null;class K{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=v.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=v.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=v.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,i){if(this.sent_)throw T("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const e in i)i.hasOwnProperty(e)&&this.xhr_.setRequestHeader(e,i[e].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw T("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw T("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw T("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw T("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Y extends K{initXhr(){this.xhr_.responseType="text"}}function X(){return G?G():new Y}class Q{constructor(e,t){this._service=e,this._location=t instanceof S?t:S.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Q(e,t)}get root(){const e=new S(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return R(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new S(this._location.bucket,e);return new Q(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new m(y.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function J(e){const t={prefixes:[],items:[]};return Z(e,t).then((()=>t))}async function Z(e,t,n){const i={pageToken:n},r=await function(e,t){null!=t&&"number"==typeof t.maxResults&&C("options.maxResults",1,1e3,t.maxResults);const n=t||{},i=W(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(i,X)}(e,i);t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&await Z(e,t,r.nextPageToken)}function ee(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const i=k(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new V(i,"GET",function(e,t){return function(n,i){const r=F(e,i,t);return q(null!==r),function(e,t,n,i){const r=L(t);if(null===r)return null;if(!I(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const r=e.bucket,s=e.fullPath;return k("/b/"+o(r)+"/o/"+o(s),n,i)+x({alt:"media",token:t})}))[0]}(r,i,e.host,e._protocol)}}(e,n),r);return s.errorHandler=z(t),s}(e.storage,e._location,M());return e.storage.makeRequestWithTokens(t,X).then((e=>{if(null===e)throw new m(y.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function te(e,t){if(e instanceof ie){const n=e;if(null==n._bucket)throw new m(y.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+g+"' property when initializing the app?");const i=new Q(n,n._bucket);return null!=t?te(i,t):i}return void 0!==t?function(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),i=new S(e._location.bucket,n);return new Q(e.storage,i)}(e,t):e}function ne(e,t){const n=null==t?void 0:t[g];return null==n?null:S.makeFromBucketSpec(n,e)}class ie{constructor(e,t,n,i,r){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=p,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?S.makeFromBucketSpec(i,this._host):ne(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=S.makeFromBucketSpec(this._url,e):this._bucket=ne(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){C("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){C("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Q(this,e)}_makeRequest(e,t,n,i,r=!0){if(this._deleted)return new A(b());{const s=function(e,t,n,i,r,s,o=!0){const a=x(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,i),new D(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}(e,this._appId,n,i,t,this._firebaseVersion,r);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const re="@firebase/storage",se="0.11.2",oe="storage";function ae(e){return function(e){e._throwIfRoot("getMetadata");const t=$(e.storage,e._location,M());return e.storage.makeRequestWithTokens(t,X)}(e=f(e))}function ce(e){return J(e=f(e))}function le(e){return ee(e=f(e))}function ue(e,t){return function(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof ie)return new Q(e,t);throw _("To use ref(service, url), the first argument must be a Storage instance.")}return te(e,t)}(e=f(e),t)}function he(e=(0,i.WE)(),t){e=f(e);const n=(0,i.U5)(e,oe).getImmediate({identifier:t}),r=l("storage");return r&&function(e,t,n,i={}){!function(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken="string"==typeof r?r:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}(r,e.app.options.projectId))}(e,t,n,i)}(n,...r),n}(0,i.q4)(new class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}(oe,(function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new ie(n,r,s,t,i.Sg)}),"PUBLIC").setMultipleInstances(!0)),(0,i.Kk)(re,se,""),(0,i.Kk)(re,se,"esm2017")},6900:(e,t,n)=>{"use strict";n.d(t,{A3:()=>b,AL:()=>v,AV:()=>m,Cc:()=>y,EB:()=>l,IN:()=>C,Su:()=>g,UR:()=>S,Uv:()=>E,WW:()=>a,Wg:()=>o,YD:()=>p,Yd:()=>h,Yj:()=>U,aw:()=>D,ik:()=>x,kF:()=>N,kx:()=>T,my:()=>L,o9:()=>f,on:()=>u,qk:()=>w,sX:()=>d,t7:()=>I,yy:()=>_});const i=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},r={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const r=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=r>>2,u=(3&r)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const r=n[e.charAt(t++)],o=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==r||null==o||null==a||null==c)throw new s;const l=r<<2|o>>4;if(i.push(l),64!==a){const e=o<<4&240|a>>2;if(i.push(e),64!==c){const e=a<<6&192|c;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=i(e);return r.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return r.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},c=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},l=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},u=e=>{const t=l(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},d=e=>{var t;return null===(t=c())||void 0===t?void 0:t[`_${e}`]};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function y(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function E(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function w(){return!function(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _(){try{return"object"==typeof indexedDB}catch(e){return!1}}function b(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class T extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S.prototype.create)}}class S{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(A,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new T(i,o,n)}}const A=/\{\$([^}]+)}/g;function I(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function C(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(k(n)&&k(s)){if(!C(n,s))return!1}else if(n!==s)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function k(e){return null!==e&&"object"==typeof e}function x(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function D(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function N(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function L(e,t){const n=new R(e,t);return n.subscribe.bind(n)}class R{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=O),void 0===i.error&&(i.error=O),void 0===i.complete&&(i.complete=O);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function O(){}function U(e){return e&&e._delegate?e._delegate:e}},7588:function(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(i,r){"use strict";var s=[],o=Object.getPrototypeOf,a=s.slice,c=s.flat?function(e){return s.flat.call(e)}:function(e){return s.concat.apply([],e)},l=s.push,u=s.indexOf,h={},d=h.toString,f=h.hasOwnProperty,p=f.toString,g=p.call(Object),m={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},v=function(e){return null!=e&&e===e.window},E=i.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function _(e,t,n){var i,r,s=(n=n||E).createElement("script");if(s.text=e,t)for(i in w)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&s.setAttribute(i,r);n.head.appendChild(s).parentNode.removeChild(s)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[d.call(e)]||"object":typeof e}var T="3.7.1",S=/HTML$/i,A=function(e,t){return new A.fn.init(e,t)};function I(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!y(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function C(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}A.fn=A.prototype={jquery:T,constructor:A,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=A.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return A.each(this,e)},map:function(e){return this.pushStack(A.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(A.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(A.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:s.sort,splice:s.splice},A.extend=A.fn.extend=function(){var e,t,n,i,r,s,o=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||y(o)||(o={}),a===c&&(o=this,a--);a<c;a++)if(null!=(e=arguments[a]))for(t in e)i=e[t],"__proto__"!==t&&o!==i&&(l&&i&&(A.isPlainObject(i)||(r=Array.isArray(i)))?(n=o[t],s=r&&!Array.isArray(n)?[]:r||A.isPlainObject(n)?n:{},r=!1,o[t]=A.extend(l,s,i)):void 0!==i&&(o[t]=i));return o},A.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e)||(t=o(e))&&("function"!=typeof(n=f.call(t,"constructor")&&t.constructor)||p.call(n)!==g))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){_(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(I(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},text:function(e){var t,n="",i=0,r=e.nodeType;if(!r)for(;t=e[i++];)n+=A.text(t);return 1===r||11===r?e.textContent:9===r?e.documentElement.textContent:3===r||4===r?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(I(Object(e))?A.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!S.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,s=e.length,o=!n;r<s;r++)!t(e[r],r)!==o&&i.push(e[r]);return i},map:function(e,t,n){var i,r,s=0,o=[];if(I(e))for(i=e.length;s<i;s++)null!=(r=t(e[s],s,n))&&o.push(r);else for(s in e)null!=(r=t(e[s],s,n))&&o.push(r);return c(o)},guid:1,support:m}),"function"==typeof Symbol&&(A.fn[Symbol.iterator]=s[Symbol.iterator]),A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var k=s.pop,x=s.sort,D=s.splice,N="[\\x20\\t\\r\\n\\f]",L=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g");A.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var R=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function O(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}A.escapeSelector=function(e){return(e+"").replace(R,O)};var U=E,P=l;!function(){var e,t,n,r,o,c,l,h,d,p,g=P,y=A.expando,v=0,E=0,w=ee(),_=ee(),b=ee(),T=ee(),S=function(e,t){return e===t&&(o=!0),0},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="(?:\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",O="\\["+N+"*("+R+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+N+"*\\]",M=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",F=new RegExp(N+"+","g"),j=new RegExp("^"+N+"*,"+N+"*"),B=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),V=new RegExp(N+"|>"),q=new RegExp(M),H=new RegExp("^"+R+"$"),z={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+M),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},$=/^(?:input|select|textarea|button)$/i,W=/^h\d$/i,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Y=new RegExp("\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\([^\\r\\n\\f])","g"),X=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Q=function(){ce()},J=de((function(e){return!0===e.disabled&&C(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{g.apply(s=a.call(U.childNodes),U.childNodes),s[U.childNodes.length].nodeType}catch(e){g={apply:function(e,t){P.apply(e,a.call(t))},call:function(e){P.apply(e,a.call(arguments,1))}}}function Z(e,t,n,i){var r,s,o,a,l,u,f,p=t&&t.ownerDocument,v=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==v&&9!==v&&11!==v)return n;if(!i&&(ce(t),t=t||c,h)){if(11!==v&&(l=G.exec(e)))if(r=l[1]){if(9===v){if(!(o=t.getElementById(r)))return n;if(o.id===r)return g.call(n,o),n}else if(p&&(o=p.getElementById(r))&&Z.contains(t,o)&&o.id===r)return g.call(n,o),n}else{if(l[2])return g.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&t.getElementsByClassName)return g.apply(n,t.getElementsByClassName(r)),n}if(!(T[e+" "]||d&&d.test(e))){if(f=e,p=t,1===v&&(V.test(e)||B.test(e))){for((p=K.test(e)&&ae(t.parentNode)||t)==t&&m.scope||((a=t.getAttribute("id"))?a=A.escapeSelector(a):t.setAttribute("id",a=y)),s=(u=ue(e)).length;s--;)u[s]=(a?"#"+a:":scope")+" "+he(u[s]);f=u.join(",")}try{return g.apply(n,p.querySelectorAll(f)),n}catch(t){T(e,!0)}finally{a===y&&t.removeAttribute("id")}}}return ve(e.replace(L,"$1"),t,n,i)}function ee(){var e=[];return function n(i,r){return e.push(i+" ")>t.cacheLength&&delete n[e.shift()],n[i+" "]=r}}function te(e){return e[y]=!0,e}function ne(e){var t=c.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ie(e){return function(t){return C(t,"input")&&t.type===e}}function re(e){return function(t){return(C(t,"input")||C(t,"button"))&&t.type===e}}function se(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&J(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function oe(e){return te((function(t){return t=+t,te((function(n,i){for(var r,s=e([],n.length,t),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))}))}))}function ae(e){return e&&void 0!==e.getElementsByTagName&&e}function ce(e){var n,i=e?e.ownerDocument||e:U;return i!=c&&9===i.nodeType&&i.documentElement?(l=(c=i).documentElement,h=!A.isXMLDoc(c),p=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,l.msMatchesSelector&&U!=c&&(n=c.defaultView)&&n.top!==n&&n.addEventListener("unload",Q),m.getById=ne((function(e){return l.appendChild(e).id=A.expando,!c.getElementsByName||!c.getElementsByName(A.expando).length})),m.disconnectedMatch=ne((function(e){return p.call(e,"*")})),m.scope=ne((function(){return c.querySelectorAll(":scope")})),m.cssHas=ne((function(){try{return c.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),m.getById?(t.filter.ID=function(e){var t=e.replace(Y,X);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(Y,X);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n,i,r,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(r=t.getElementsByName(e),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),t.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(e)},d=[],ne((function(e){var t;l.appendChild(e).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+N+"*(?:value|"+I+")"),e.querySelectorAll("[id~="+y+"-]").length||d.push("~="),e.querySelectorAll("a#"+y+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=c.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),l.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=c.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+N+"*name"+N+"*="+N+"*(?:''|\"\")")})),m.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),S=function(e,t){if(e===t)return o=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!m.sortDetached&&t.compareDocumentPosition(e)===n?e===c||e.ownerDocument==U&&Z.contains(U,e)?-1:t===c||t.ownerDocument==U&&Z.contains(U,t)?1:r?u.call(r,e)-u.call(r,t):0:4&n?-1:1)},c):c}for(e in Z.matches=function(e,t){return Z(e,null,null,t)},Z.matchesSelector=function(e,t){if(ce(e),h&&!T[t+" "]&&(!d||!d.test(t)))try{var n=p.call(e,t);if(n||m.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){T(t,!0)}return Z(t,c,null,[e]).length>0},Z.contains=function(e,t){return(e.ownerDocument||e)!=c&&ce(e),A.contains(e,t)},Z.attr=function(e,n){(e.ownerDocument||e)!=c&&ce(e);var i=t.attrHandle[n.toLowerCase()],r=i&&f.call(t.attrHandle,n.toLowerCase())?i(e,n,!h):void 0;return void 0!==r?r:e.getAttribute(n)},Z.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},A.uniqueSort=function(e){var t,n=[],i=0,s=0;if(o=!m.sortStable,r=!m.sortStable&&a.call(e,0),x.call(e,S),o){for(;t=e[s++];)t===e[s]&&(i=n.push(s));for(;i--;)D.call(e,n[i],1)}return r=null,e},A.fn.uniqueSort=function(){return this.pushStack(A.uniqueSort(a.apply(this)))},t=A.expr={cacheLength:50,createPseudo:te,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Y,X),e[3]=(e[3]||e[4]||e[5]||"").replace(Y,X),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Z.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Z.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return z.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=ue(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Y,X).toLowerCase();return"*"===e?function(){return!0}:function(e){return C(e,t)}},CLASS:function(e){var t=w[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&w(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var r=Z.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,c){var l,u,h,d,f,p=s!==o?"nextSibling":"previousSibling",g=t.parentNode,m=a&&t.nodeName.toLowerCase(),E=!c&&!a,w=!1;if(g){if(s){for(;p;){for(h=t;h=h[p];)if(a?C(h,m):1===h.nodeType)return!1;f=p="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&E){for(w=(d=(l=(u=g[y]||(g[y]={}))[e]||[])[0]===v&&l[1])&&l[2],h=d&&g.childNodes[d];h=++d&&h&&h[p]||(w=d=0)||f.pop();)if(1===h.nodeType&&++w&&h===t){u[e]=[v,d,w];break}}else if(E&&(w=d=(l=(u=t[y]||(t[y]={}))[e]||[])[0]===v&&l[1]),!1===w)for(;(h=++d&&h&&h[p]||(w=d=0)||f.pop())&&(!(a?C(h,m):1===h.nodeType)||!++w||(E&&((u=h[y]||(h[y]={}))[e]=[v,w]),h!==t)););return(w-=r)===i||w%i==0&&w/i>=0}}},PSEUDO:function(e,n){var i,r=t.pseudos[e]||t.setFilters[e.toLowerCase()]||Z.error("unsupported pseudo: "+e);return r[y]?r(n):r.length>1?(i=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var i,s=r(e,n),o=s.length;o--;)e[i=u.call(e,s[o])]=!(t[i]=s[o])})):function(e){return r(e,0,i)}):r}},pseudos:{not:te((function(e){var t=[],n=[],i=ye(e.replace(L,"$1"));return i[y]?te((function(e,t,n,r){for(var s,o=i(e,null,r,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))})):function(e,r,s){return t[0]=e,i(t,null,s,n),t[0]=null,!n.pop()}})),has:te((function(e){return function(t){return Z(e,t).length>0}})),contains:te((function(e){return e=e.replace(Y,X),function(t){return(t.textContent||A.text(t)).indexOf(e)>-1}})),lang:te((function(e){return H.test(e||"")||Z.error("unsupported lang: "+e),e=e.replace(Y,X).toLowerCase(),function(t){var n;do{if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===l},focus:function(e){return e===function(){try{return c.activeElement}catch(e){}}()&&c.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:se(!1),disabled:se(!0),checked:function(e){return C(e,"input")&&!!e.checked||C(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return W.test(e.nodeName)},input:function(e){return $.test(e.nodeName)},button:function(e){return C(e,"input")&&"button"===e.type||C(e,"button")},text:function(e){var t;return C(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:oe((function(){return[0]})),last:oe((function(e,t){return[t-1]})),eq:oe((function(e,t,n){return[n<0?n+t:n]})),even:oe((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:oe((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:oe((function(e,t,n){var i;for(i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e})),gt:oe((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=ie(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=re(e);function le(){}function ue(e,n){var i,r,s,o,a,c,l,u=_[e+" "];if(u)return n?0:u.slice(0);for(a=e,c=[],l=t.preFilter;a;){for(o in i&&!(r=j.exec(a))||(r&&(a=a.slice(r[0].length)||a),c.push(s=[])),i=!1,(r=B.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(L," ")}),a=a.slice(i.length)),t.filter)!(r=z[o].exec(a))||l[o]&&!(r=l[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?Z.error(e):_(e,c).slice(0)}function he(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function de(e,t,n){var i=t.dir,r=t.next,s=r||i,o=n&&"parentNode"===s,a=E++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r);return!1}:function(t,n,c){var l,u,h=[v,a];if(c){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,c))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(u=t[y]||(t[y]={}),r&&C(t,r))t=t[i]||t;else{if((l=u[s])&&l[0]===v&&l[1]===a)return h[2]=l[2];if(u[s]=h,h[2]=e(t,n,c))return!0}return!1}}function fe(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function pe(e,t,n,i,r){for(var s,o=[],a=0,c=e.length,l=null!=t;a<c;a++)(s=e[a])&&(n&&!n(s,i,r)||(o.push(s),l&&t.push(a)));return o}function ge(e,t,n,i,r,s){return i&&!i[y]&&(i=ge(i)),r&&!r[y]&&(r=ge(r,s)),te((function(s,o,a,c){var l,h,d,f,p=[],m=[],y=o.length,v=s||function(e,t,n){for(var i=0,r=t.length;i<r;i++)Z(e,t[i],n);return n}(t||"*",a.nodeType?[a]:a,[]),E=!e||!s&&t?v:pe(v,p,e,a,c);if(n?n(E,f=r||(s?e:y||i)?[]:o,a,c):f=E,i)for(l=pe(f,m),i(l,[],a,c),h=l.length;h--;)(d=l[h])&&(f[m[h]]=!(E[m[h]]=d));if(s){if(r||e){if(r){for(l=[],h=f.length;h--;)(d=f[h])&&l.push(E[h]=d);r(null,f=[],l,c)}for(h=f.length;h--;)(d=f[h])&&(l=r?u.call(s,d):p[h])>-1&&(s[l]=!(o[l]=d))}}else f=pe(f===o?f.splice(y,f.length):f),r?r(null,o,f,c):g.apply(o,f)}))}function me(e){for(var i,r,s,o=e.length,a=t.relative[e[0].type],c=a||t.relative[" "],l=a?1:0,h=de((function(e){return e===i}),c,!0),d=de((function(e){return u.call(i,e)>-1}),c,!0),f=[function(e,t,r){var s=!a&&(r||t!=n)||((i=t).nodeType?h(e,t,r):d(e,t,r));return i=null,s}];l<o;l++)if(r=t.relative[e[l].type])f=[de(fe(f),r)];else{if((r=t.filter[e[l].type].apply(null,e[l].matches))[y]){for(s=++l;s<o&&!t.relative[e[s].type];s++);return ge(l>1&&fe(f),l>1&&he(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(L,"$1"),r,l<s&&me(e.slice(l,s)),s<o&&me(e=e.slice(s)),s<o&&he(e))}f.push(r)}return fe(f)}function ye(e,i){var r,s=[],o=[],a=b[e+" "];if(!a){for(i||(i=ue(e)),r=i.length;r--;)(a=me(i[r]))[y]?s.push(a):o.push(a);a=b(e,function(e,i){var r=i.length>0,s=e.length>0,o=function(o,a,l,u,d){var f,p,m,y=0,E="0",w=o&&[],_=[],b=n,T=o||s&&t.find.TAG("*",d),S=v+=null==b?1:Math.random()||.1,I=T.length;for(d&&(n=a==c||a||d);E!==I&&null!=(f=T[E]);E++){if(s&&f){for(p=0,a||f.ownerDocument==c||(ce(f),l=!h);m=e[p++];)if(m(f,a||c,l)){g.call(u,f);break}d&&(v=S)}r&&((f=!m&&f)&&y--,o&&w.push(f))}if(y+=E,r&&E!==y){for(p=0;m=i[p++];)m(w,_,a,l);if(o){if(y>0)for(;E--;)w[E]||_[E]||(_[E]=k.call(u));_=pe(_)}g.apply(u,_),d&&!o&&_.length>0&&y+i.length>1&&A.uniqueSort(u)}return d&&(v=S,n=b),w};return r?te(o):o}(o,s)),a.selector=e}return a}function ve(e,n,i,r){var s,o,a,c,l,u="function"==typeof e&&e,d=!r&&ue(e=u.selector||e);if(i=i||[],1===d.length){if((o=d[0]=d[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===n.nodeType&&h&&t.relative[o[1].type]){if(!(n=(t.find.ID(a.matches[0].replace(Y,X),n)||[])[0]))return i;u&&(n=n.parentNode),e=e.slice(o.shift().value.length)}for(s=z.needsContext.test(e)?0:o.length;s--&&(a=o[s],!t.relative[c=a.type]);)if((l=t.find[c])&&(r=l(a.matches[0].replace(Y,X),K.test(o[0].type)&&ae(n.parentNode)||n))){if(o.splice(s,1),!(e=r.length&&he(o)))return g.apply(i,r),i;break}}return(u||ye(e,d))(r,n,!h,i,!n||K.test(e)&&ae(n.parentNode)||n),i}le.prototype=t.filters=t.pseudos,t.setFilters=new le,m.sortStable=y.split("").sort(S).join("")===y,ce(),m.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(c.createElement("fieldset"))})),A.find=Z,A.expr[":"]=A.expr.pseudos,A.unique=A.uniqueSort,Z.compile=ye,Z.select=ve,Z.setDocument=ce,Z.tokenize=ue,Z.escape=A.escapeSelector,Z.getText=A.text,Z.isXML=A.isXMLDoc,Z.selectors=A.expr,Z.support=A.support,Z.uniqueSort=A.uniqueSort}();var M=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&A(e).is(n))break;i.push(e)}return i},F=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},j=A.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function V(e,t,n){return y(t)?A.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?A.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?A.grep(e,(function(e){return u.call(t,e)>-1!==n})):A.filter(t,e,n)}A.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?A.find.matchesSelector(i,e)?[i]:[]:A.find.matches(e,A.grep(t,(function(e){return 1===e.nodeType})))},A.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(A(e).filter((function(){for(t=0;t<i;t++)if(A.contains(r[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)A.find(e,r[t],n);return i>1?A.uniqueSort(n):n},filter:function(e){return this.pushStack(V(this,e||[],!1))},not:function(e){return this.pushStack(V(this,e||[],!0))},is:function(e){return!!V(this,"string"==typeof e&&j.test(e)?A(e):e||[],!1).length}});var q,H=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(A.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:H.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof A?t[0]:t,A.merge(this,A.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),B.test(i[1])&&A.isPlainObject(t))for(i in t)y(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=E.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(A):A.makeArray(e,this)}).prototype=A.fn,q=A(E);var z=/^(?:parents|prev(?:Until|All))/,$={children:!0,contents:!0,next:!0,prev:!0};function W(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}A.fn.extend({has:function(e){var t=A(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(A.contains(this,t[e]))return!0}))},closest:function(e,t){var n,i=0,r=this.length,s=[],o="string"!=typeof e&&A(e);if(!j.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&A.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?A.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?u.call(A(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(A.uniqueSort(A.merge(this.get(),A(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),A.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return M(e,"parentNode")},parentsUntil:function(e,t,n){return M(e,"parentNode",n)},next:function(e){return W(e,"nextSibling")},prev:function(e){return W(e,"previousSibling")},nextAll:function(e){return M(e,"nextSibling")},prevAll:function(e){return M(e,"previousSibling")},nextUntil:function(e,t,n){return M(e,"nextSibling",n)},prevUntil:function(e,t,n){return M(e,"previousSibling",n)},siblings:function(e){return F((e.parentNode||{}).firstChild,e)},children:function(e){return F(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(C(e,"template")&&(e=e.content||e),A.merge([],e.childNodes))}},(function(e,t){A.fn[e]=function(n,i){var r=A.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=A.filter(i,r)),this.length>1&&($[e]||A.uniqueSort(r),z.test(e)&&r.reverse()),this.pushStack(r)}}));var G=/[^\x20\t\r\n\f]+/g;function K(e){return e}function Y(e){throw e}function X(e,t,n,i){var r;try{e&&y(r=e.promise)?r.call(e).done(t).fail(n):e&&y(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}A.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return A.each(e.match(G)||[],(function(e,n){t[n]=!0})),t}(e):A.extend({},e);var t,n,i,r,s=[],o=[],a=-1,c=function(){for(r=r||e.once,i=t=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=s.length,n=!1);e.memory||(n=!1),t=!1,r&&(s=n?[]:"")},l={add:function(){return s&&(n&&!t&&(a=s.length-1,o.push(n)),function t(n){A.each(n,(function(n,i){y(i)?e.unique&&l.has(i)||s.push(i):i&&i.length&&"string"!==b(i)&&t(i)}))}(arguments),n&&!t&&c()),this},remove:function(){return A.each(arguments,(function(e,t){for(var n;(n=A.inArray(t,s,n))>-1;)s.splice(n,1),n<=a&&a--})),this},has:function(e){return e?A.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=o=[],n||t||(s=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},A.extend({Deferred:function(e){var t=[["notify","progress",A.Callbacks("memory"),A.Callbacks("memory"),2],["resolve","done",A.Callbacks("once memory"),A.Callbacks("once memory"),0,"resolved"],["reject","fail",A.Callbacks("once memory"),A.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return A.Deferred((function(n){A.each(t,(function(t,i){var r=y(e[i[4]])&&e[i[4]];s[i[1]]((function(){var e=r&&r.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,r){var s=0;function o(e,t,n,r){return function(){var a=this,c=arguments,l=function(){var i,l;if(!(e<s)){if((i=n.apply(a,c))===t.promise())throw new TypeError("Thenable self-resolution");l=i&&("object"==typeof i||"function"==typeof i)&&i.then,y(l)?r?l.call(i,o(s,t,K,r),o(s,t,Y,r)):(s++,l.call(i,o(s,t,K,r),o(s,t,Y,r),o(s,t,K,t.notifyWith))):(n!==K&&(a=void 0,c=[i]),(r||t.resolveWith)(a,c))}},u=r?l:function(){try{l()}catch(i){A.Deferred.exceptionHook&&A.Deferred.exceptionHook(i,u.error),e+1>=s&&(n!==Y&&(a=void 0,c=[i]),t.rejectWith(a,c))}};e?u():(A.Deferred.getErrorHook?u.error=A.Deferred.getErrorHook():A.Deferred.getStackHook&&(u.error=A.Deferred.getStackHook()),i.setTimeout(u))}}return A.Deferred((function(i){t[0][3].add(o(0,i,y(r)?r:K,i.notifyWith)),t[1][3].add(o(0,i,y(e)?e:K)),t[2][3].add(o(0,i,y(n)?n:Y))})).promise()},promise:function(e){return null!=e?A.extend(e,r):r}},s={};return A.each(t,(function(e,i){var o=i[2],a=i[5];r[i[1]]=o.add,a&&o.add((function(){n=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(i[3].fire),s[i[0]]=function(){return s[i[0]+"With"](this===s?void 0:this,arguments),this},s[i[0]+"With"]=o.fireWith})),r.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,n=t,i=Array(n),r=a.call(arguments),s=A.Deferred(),o=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?a.call(arguments):n,--t||s.resolveWith(i,r)}};if(t<=1&&(X(e,s.done(o(n)).resolve,s.reject,!t),"pending"===s.state()||y(r[n]&&r[n].then)))return s.then();for(;n--;)X(r[n],o(n),s.reject);return s.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;A.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&Q.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},A.readyException=function(e){i.setTimeout((function(){throw e}))};var J=A.Deferred();function Z(){E.removeEventListener("DOMContentLoaded",Z),i.removeEventListener("load",Z),A.ready()}A.fn.ready=function(e){return J.then(e).catch((function(e){A.readyException(e)})),this},A.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--A.readyWait:A.isReady)||(A.isReady=!0,!0!==e&&--A.readyWait>0||J.resolveWith(E,[A]))}}),A.ready.then=J.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?i.setTimeout(A.ready):(E.addEventListener("DOMContentLoaded",Z),i.addEventListener("load",Z));var ee=function(e,t,n,i,r,s,o){var a=0,c=e.length,l=null==n;if("object"===b(n))for(a in r=!0,n)ee(e,t,a,n[a],!0,s,o);else if(void 0!==i&&(r=!0,y(i)||(o=!0),l&&(o?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(A(e),n)})),t))for(;a<c;a++)t(e[a],n,o?i:i.call(e[a],a,t(e[a],n)));return r?e:l?t.call(e):c?t(e[0],n):s},te=/^-ms-/,ne=/-([a-z])/g;function ie(e,t){return t.toUpperCase()}function re(e){return e.replace(te,"ms-").replace(ne,ie)}var se=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function oe(){this.expando=A.expando+oe.uid++}oe.uid=1,oe.prototype={cache:function(e){var t=e[this.expando];return t||(t={},se(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[re(t)]=n;else for(i in t)r[re(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][re(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(re):(t=re(t))in i?[t]:t.match(G)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||A.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!A.isEmptyObject(t)}};var ae=new oe,ce=new oe,le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ue=/[A-Z]/g;function he(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(ue,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:le.test(e)?JSON.parse(e):e)}(n)}catch(e){}ce.set(e,t,n)}else n=void 0;return n}A.extend({hasData:function(e){return ce.hasData(e)||ae.hasData(e)},data:function(e,t,n){return ce.access(e,t,n)},removeData:function(e,t){ce.remove(e,t)},_data:function(e,t,n){return ae.access(e,t,n)},_removeData:function(e,t){ae.remove(e,t)}}),A.fn.extend({data:function(e,t){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(r=ce.get(s),1===s.nodeType&&!ae.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=re(i.slice(5)),he(s,i,r[i]));ae.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each((function(){ce.set(this,e)})):ee(this,(function(t){var n;if(s&&void 0===t)return void 0!==(n=ce.get(s,e))||void 0!==(n=he(s,e))?n:void 0;this.each((function(){ce.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ce.remove(this,e)}))}}),A.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=ae.get(e,t),n&&(!i||Array.isArray(n)?i=ae.access(e,t,A.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=A.queue(e,t),i=n.length,r=n.shift(),s=A._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete s.stop,r.call(e,(function(){A.dequeue(e,t)}),s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ae.get(e,n)||ae.access(e,n,{empty:A.Callbacks("once memory").add((function(){ae.remove(e,[t+"queue",n])}))})}}),A.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?A.queue(this[0],e):void 0===t?this:this.each((function(){var n=A.queue(this,e,t);A._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&A.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){A.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=A.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=ae.get(s[o],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fe=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),pe=["Top","Right","Bottom","Left"],ge=E.documentElement,me=function(e){return A.contains(e.ownerDocument,e)},ye={composed:!0};ge.getRootNode&&(me=function(e){return A.contains(e.ownerDocument,e)||e.getRootNode(ye)===e.ownerDocument});var ve=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&me(e)&&"none"===A.css(e,"display")};function Ee(e,t,n,i){var r,s,o=20,a=i?function(){return i.cur()}:function(){return A.css(e,t,"")},c=a(),l=n&&n[3]||(A.cssNumber[t]?"":"px"),u=e.nodeType&&(A.cssNumber[t]||"px"!==l&&+c)&&fe.exec(A.css(e,t));if(u&&u[3]!==l){for(c/=2,l=l||u[3],u=+c||1;o--;)A.style(e,t,u+l),(1-s)*(1-(s=a()/c||.5))<=0&&(o=0),u/=s;u*=2,A.style(e,t,u+l),n=n||[]}return n&&(u=+u||+c||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=u,i.end=r)),r}var we={};function _e(e){var t,n=e.ownerDocument,i=e.nodeName,r=we[i];return r||(t=n.body.appendChild(n.createElement(i)),r=A.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),we[i]=r,r)}function be(e,t){for(var n,i,r=[],s=0,o=e.length;s<o;s++)(i=e[s]).style&&(n=i.style.display,t?("none"===n&&(r[s]=ae.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&ve(i)&&(r[s]=_e(i))):"none"!==n&&(r[s]="none",ae.set(i,"display",n)));for(s=0;s<o;s++)null!=r[s]&&(e[s].style.display=r[s]);return e}A.fn.extend({show:function(){return be(this,!0)},hide:function(){return be(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ve(this)?A(this).show():A(this).hide()}))}});var Te,Se,Ae=/^(?:checkbox|radio)$/i,Ie=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;Te=E.createDocumentFragment().appendChild(E.createElement("div")),(Se=E.createElement("input")).setAttribute("type","radio"),Se.setAttribute("checked","checked"),Se.setAttribute("name","t"),Te.appendChild(Se),m.checkClone=Te.cloneNode(!0).cloneNode(!0).lastChild.checked,Te.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!Te.cloneNode(!0).lastChild.defaultValue,Te.innerHTML="<option></option>",m.option=!!Te.lastChild;var ke={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function xe(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&C(e,t)?A.merge([e],n):n}function De(e,t){for(var n=0,i=e.length;n<i;n++)ae.set(e[n],"globalEval",!t||ae.get(t[n],"globalEval"))}ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,m.option||(ke.optgroup=ke.option=[1,"<select multiple='multiple'>","</select>"]);var Ne=/<|&#?\w+;/;function Le(e,t,n,i,r){for(var s,o,a,c,l,u,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((s=e[f])||0===s)if("object"===b(s))A.merge(d,s.nodeType?[s]:s);else if(Ne.test(s)){for(o=o||h.appendChild(t.createElement("div")),a=(Ie.exec(s)||["",""])[1].toLowerCase(),c=ke[a]||ke._default,o.innerHTML=c[1]+A.htmlPrefilter(s)+c[2],u=c[0];u--;)o=o.lastChild;A.merge(d,o.childNodes),(o=h.firstChild).textContent=""}else d.push(t.createTextNode(s));for(h.textContent="",f=0;s=d[f++];)if(i&&A.inArray(s,i)>-1)r&&r.push(s);else if(l=me(s),o=xe(h.appendChild(s),"script"),l&&De(o),n)for(u=0;s=o[u++];)Ce.test(s.type||"")&&n.push(s);return h}var Re=/^([^.]*)(?:\.(.+)|)/;function Oe(){return!0}function Ue(){return!1}function Pe(e,t,n,i,r,s){var o,a;if("object"==typeof t){for(a in"string"!=typeof n&&(i=i||n,n=void 0),t)Pe(e,a,n,i,t[a],s);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Ue;else if(!r)return e;return 1===s&&(o=r,r=function(e){return A().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=A.guid++)),e.each((function(){A.event.add(this,t,r,i,n)}))}function Me(e,t,n){n?(ae.set(e,t,!1),A.event.add(e,t,{namespace:!1,handler:function(e){var n,i=ae.get(this,t);if(1&e.isTrigger&&this[t]){if(i)(A.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=a.call(arguments),ae.set(this,t,i),this[t](),n=ae.get(this,t),ae.set(this,t,!1),i!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else i&&(ae.set(this,t,A.event.trigger(i[0],i.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Oe)}})):void 0===ae.get(e,t)&&A.event.add(e,t,Oe)}A.event={global:{},add:function(e,t,n,i,r){var s,o,a,c,l,u,h,d,f,p,g,m=ae.get(e);if(se(e))for(n.handler&&(n=(s=n).handler,r=s.selector),r&&A.find.matchesSelector(ge,r),n.guid||(n.guid=A.guid++),(c=m.events)||(c=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return void 0!==A&&A.event.triggered!==t.type?A.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(G)||[""]).length;l--;)f=g=(a=Re.exec(t[l])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=A.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=A.event.special[f]||{},u=A.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&A.expr.match.needsContext.test(r),namespace:p.join(".")},s),(d=c[f])||((d=c[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,p,o)||e.addEventListener&&e.addEventListener(f,o)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),A.event.global[f]=!0)},remove:function(e,t,n,i,r){var s,o,a,c,l,u,h,d,f,p,g,m=ae.hasData(e)&&ae.get(e);if(m&&(c=m.events)){for(l=(t=(t||"").match(G)||[""]).length;l--;)if(f=g=(a=Re.exec(t[l])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=A.event.special[f]||{},d=c[f=(i?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)u=d[s],!r&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(s,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,m.handle)||A.removeEvent(e,f,m.handle),delete c[f])}else for(f in c)A.event.remove(e,f+t[l],n,i,!0);A.isEmptyObject(c)&&ae.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,s,o,a=new Array(arguments.length),c=A.event.fix(e),l=(ae.get(this,"events")||Object.create(null))[c.type]||[],u=A.event.special[c.type]||{};for(a[0]=c,t=1;t<arguments.length;t++)a[t]=arguments[t];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(o=A.event.handlers.call(this,c,l),t=0;(r=o[t++])&&!c.isPropagationStopped();)for(c.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==s.namespace&&!c.rnamespace.test(s.namespace)||(c.handleObj=s,c.data=s.data,void 0!==(i=((A.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a))&&!1===(c.result=i)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,i,r,s,o,a=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(s=[],o={},n=0;n<c;n++)void 0===o[r=(i=t[n]).selector+" "]&&(o[r]=i.needsContext?A(r,this).index(l)>-1:A.find(r,this,null,[l]).length),o[r]&&s.push(i);s.length&&a.push({elem:l,handlers:s})}return l=this,c<t.length&&a.push({elem:l,handlers:t.slice(c)}),a},addProp:function(e,t){Object.defineProperty(A.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[A.expando]?e:new A.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Ae.test(t.type)&&t.click&&C(t,"input")&&Me(t,"click",!0),!1},trigger:function(e){var t=this||e;return Ae.test(t.type)&&t.click&&C(t,"input")&&Me(t,"click"),!0},_default:function(e){var t=e.target;return Ae.test(t.type)&&t.click&&C(t,"input")&&ae.get(t,"click")||C(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},A.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},A.Event=function(e,t){if(!(this instanceof A.Event))return new A.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Oe:Ue,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&A.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[A.expando]=!0},A.Event.prototype={constructor:A.Event,isDefaultPrevented:Ue,isPropagationStopped:Ue,isImmediatePropagationStopped:Ue,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},A.event.addProp),A.each({focus:"focusin",blur:"focusout"},(function(e,t){function n(e){if(E.documentMode){var n=ae.get(this,"handle"),i=A.event.fix(e);i.type="focusin"===e.type?"focus":"blur",i.isSimulated=!0,n(e),i.target===i.currentTarget&&n(i)}else A.event.simulate(t,e.target,A.event.fix(e))}A.event.special[e]={setup:function(){var i;if(Me(this,e,!0),!E.documentMode)return!1;(i=ae.get(this,t))||this.addEventListener(t,n),ae.set(this,t,(i||0)+1)},trigger:function(){return Me(this,e),!0},teardown:function(){var e;if(!E.documentMode)return!1;(e=ae.get(this,t)-1)?ae.set(this,t,e):(this.removeEventListener(t,n),ae.remove(this,t))},_default:function(t){return ae.get(t.target,e)},delegateType:t},A.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,r=E.documentMode?this:i,s=ae.get(r,t);s||(E.documentMode?this.addEventListener(t,n):i.addEventListener(e,n,!0)),ae.set(r,t,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=E.documentMode?this:i,s=ae.get(r,t)-1;s?ae.set(r,t,s):(E.documentMode?this.removeEventListener(t,n):i.removeEventListener(e,n,!0),ae.remove(r,t))}}})),A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){A.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,r=e.handleObj;return i&&(i===this||A.contains(this,i))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}})),A.fn.extend({on:function(e,t,n,i){return Pe(this,e,t,n,i)},one:function(e,t,n,i){return Pe(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,A(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ue),this.each((function(){A.event.remove(this,e,n,t)}))}});var Fe=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,Be=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ve(e,t){return C(e,"table")&&C(11!==t.nodeType?t:t.firstChild,"tr")&&A(e).children("tbody")[0]||e}function qe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function He(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function ze(e,t){var n,i,r,s,o,a;if(1===t.nodeType){if(ae.hasData(e)&&(a=ae.get(e).events))for(r in ae.remove(t,"handle events"),a)for(n=0,i=a[r].length;n<i;n++)A.event.add(t,r,a[r][n]);ce.hasData(e)&&(s=ce.access(e),o=A.extend({},s),ce.set(t,o))}}function $e(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ae.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function We(e,t,n,i){t=c(t);var r,s,o,a,l,u,h=0,d=e.length,f=d-1,p=t[0],g=y(p);if(g||d>1&&"string"==typeof p&&!m.checkClone&&je.test(p))return e.each((function(r){var s=e.eq(r);g&&(t[0]=p.call(this,r,s.html())),We(s,t,n,i)}));if(d&&(s=(r=Le(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=s),s||i)){for(a=(o=A.map(xe(r,"script"),qe)).length;h<d;h++)l=r,h!==f&&(l=A.clone(l,!0,!0),a&&A.merge(o,xe(l,"script"))),n.call(e[h],l,h);if(a)for(u=o[o.length-1].ownerDocument,A.map(o,He),h=0;h<a;h++)l=o[h],Ce.test(l.type||"")&&!ae.access(l,"globalEval")&&A.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?A._evalUrl&&!l.noModule&&A._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):_(l.textContent.replace(Be,""),l,u))}return e}function Ge(e,t,n){for(var i,r=t?A.filter(t,e):e,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||A.cleanData(xe(i)),i.parentNode&&(n&&me(i)&&De(xe(i,"script")),i.parentNode.removeChild(i));return e}A.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,r,s,o,a=e.cloneNode(!0),c=me(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||A.isXMLDoc(e)))for(o=xe(a),i=0,r=(s=xe(e)).length;i<r;i++)$e(s[i],o[i]);if(t)if(n)for(s=s||xe(e),o=o||xe(a),i=0,r=s.length;i<r;i++)ze(s[i],o[i]);else ze(e,a);return(o=xe(a,"script")).length>0&&De(o,!c&&xe(e,"script")),a},cleanData:function(e){for(var t,n,i,r=A.event.special,s=0;void 0!==(n=e[s]);s++)if(se(n)){if(t=n[ae.expando]){if(t.events)for(i in t.events)r[i]?A.event.remove(n,i):A.removeEvent(n,i,t.handle);n[ae.expando]=void 0}n[ce.expando]&&(n[ce.expando]=void 0)}}}),A.fn.extend({detach:function(e){return Ge(this,e,!0)},remove:function(e){return Ge(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?A.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return We(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ve(this,e).appendChild(e)}))},prepend:function(){return We(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ve(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(A.cleanData(xe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return A.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Fe.test(e)&&!ke[(Ie.exec(e)||["",""])[1].toLowerCase()]){e=A.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(A.cleanData(xe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return We(this,arguments,(function(t){var n=this.parentNode;A.inArray(this,e)<0&&(A.cleanData(xe(this)),n&&n.replaceChild(t,this))}),e)}}),A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){A.fn[e]=function(e){for(var n,i=[],r=A(e),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),A(r[o])[t](n),l.apply(i,n.get());return this.pushStack(i)}}));var Ke=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),Ye=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},Qe=function(e,t,n){var i,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];for(r in i=n.call(e),t)e.style[r]=s[r];return i},Je=new RegExp(pe.join("|"),"i");function Ze(e,t,n){var i,r,s,o,a=Ye.test(t),c=e.style;return(n=n||Xe(e))&&(o=n.getPropertyValue(t)||n[t],a&&o&&(o=o.replace(L,"$1")||void 0),""!==o||me(e)||(o=A.style(e,t)),!m.pixelBoxStyles()&&Ke.test(o)&&Je.test(t)&&(i=c.width,r=c.minWidth,s=c.maxWidth,c.minWidth=c.maxWidth=c.width=o,o=n.width,c.width=i,c.minWidth=r,c.maxWidth=s)),void 0!==o?o+"":o}function et(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ge.appendChild(l).appendChild(u);var e=i.getComputedStyle(u);n="1%"!==e.top,c=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),r=36===t(e.width),u.style.position="absolute",s=12===t(u.offsetWidth/3),ge.removeChild(l),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,s,o,a,c,l=E.createElement("div"),u=E.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,A.extend(m,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),s},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",ge.appendChild(e).appendChild(t).appendChild(n),r=i.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,ge.removeChild(e)),a}}))}();var tt=["Webkit","Moz","ms"],nt=E.createElement("div").style,it={};function rt(e){return A.cssProps[e]||it[e]||(e in nt?e:it[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=tt.length;n--;)if((e=tt[n]+t)in nt)return e}(e)||e)}var st=/^(none|table(?!-c[ea]).+)/,ot={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function ct(e,t,n){var i=fe.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function lt(e,t,n,i,r,s){var o="width"===t?1:0,a=0,c=0,l=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=A.css(e,n+pe[o],!0,r)),i?("content"===n&&(c-=A.css(e,"padding"+pe[o],!0,r)),"margin"!==n&&(c-=A.css(e,"border"+pe[o]+"Width",!0,r))):(c+=A.css(e,"padding"+pe[o],!0,r),"padding"!==n?c+=A.css(e,"border"+pe[o]+"Width",!0,r):a+=A.css(e,"border"+pe[o]+"Width",!0,r));return!i&&s>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-c-a-.5))||0),c+l}function ut(e,t,n){var i=Xe(e),r=(!m.boxSizingReliable()||n)&&"border-box"===A.css(e,"boxSizing",!1,i),s=r,o=Ze(e,t,i),a="offset"+t[0].toUpperCase()+t.slice(1);if(Ke.test(o)){if(!n)return o;o="auto"}return(!m.boxSizingReliable()&&r||!m.reliableTrDimensions()&&C(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===A.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===A.css(e,"boxSizing",!1,i),(s=a in e)&&(o=e[a])),(o=parseFloat(o)||0)+lt(e,t,n||(r?"border":"content"),s,i,o)+"px"}function ht(e,t,n,i,r){return new ht.prototype.init(e,t,n,i,r)}A.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,o,a=re(t),c=Ye.test(t),l=e.style;if(c||(t=rt(a)),o=A.cssHooks[t]||A.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(e,!1,i))?r:l[t];"string"==(s=typeof n)&&(r=fe.exec(n))&&r[1]&&(n=Ee(e,t,r),s="number"),null!=n&&n==n&&("number"!==s||c||(n+=r&&r[3]||(A.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,i))||(c?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,i){var r,s,o,a=re(t);return Ye.test(t)||(t=rt(a)),(o=A.cssHooks[t]||A.cssHooks[a])&&"get"in o&&(r=o.get(e,!0,n)),void 0===r&&(r=Ze(e,t,i)),"normal"===r&&t in at&&(r=at[t]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),A.each(["height","width"],(function(e,t){A.cssHooks[t]={get:function(e,n,i){if(n)return!st.test(A.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ut(e,t,i):Qe(e,ot,(function(){return ut(e,t,i)}))},set:function(e,n,i){var r,s=Xe(e),o=!m.scrollboxSize()&&"absolute"===s.position,a=(o||i)&&"border-box"===A.css(e,"boxSizing",!1,s),c=i?lt(e,t,i,a,s):0;return a&&o&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-lt(e,t,"border",!1,s)-.5)),c&&(r=fe.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=A.css(e,t)),ct(0,n,c)}}})),A.cssHooks.marginLeft=et(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ze(e,"marginLeft"))||e.getBoundingClientRect().left-Qe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),A.each({margin:"",padding:"",border:"Width"},(function(e,t){A.cssHooks[e+t]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+pe[i]+t]=s[i]||s[i-2]||s[0];return r}},"margin"!==e&&(A.cssHooks[e+t].set=ct)})),A.fn.extend({css:function(e,t){return ee(this,(function(e,t,n){var i,r,s={},o=0;if(Array.isArray(t)){for(i=Xe(e),r=t.length;o<r;o++)s[t[o]]=A.css(e,t[o],!1,i);return s}return void 0!==n?A.style(e,t,n):A.css(e,t)}),e,t,arguments.length>1)}}),A.Tween=ht,ht.prototype={constructor:ht,init:function(e,t,n,i,r,s){this.elem=e,this.prop=n,this.easing=r||A.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(A.cssNumber[n]?"":"px")},cur:function(){var e=ht.propHooks[this.prop];return e&&e.get?e.get(this):ht.propHooks._default.get(this)},run:function(e){var t,n=ht.propHooks[this.prop];return this.options.duration?this.pos=t=A.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ht.propHooks._default.set(this),this}},ht.prototype.init.prototype=ht.prototype,ht.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=A.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){A.fx.step[e.prop]?A.fx.step[e.prop](e):1!==e.elem.nodeType||!A.cssHooks[e.prop]&&null==e.elem.style[rt(e.prop)]?e.elem[e.prop]=e.now:A.style(e.elem,e.prop,e.now+e.unit)}}},ht.propHooks.scrollTop=ht.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},A.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},A.fx=ht.prototype.init,A.fx.step={};var dt,ft,pt=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;function mt(){ft&&(!1===E.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(mt):i.setTimeout(mt,A.fx.interval),A.fx.tick())}function yt(){return i.setTimeout((function(){dt=void 0})),dt=Date.now()}function vt(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=pe[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function Et(e,t,n){for(var i,r=(wt.tweeners[t]||[]).concat(wt.tweeners["*"]),s=0,o=r.length;s<o;s++)if(i=r[s].call(n,t,e))return i}function wt(e,t,n){var i,r,s=0,o=wt.prefilters.length,a=A.Deferred().always((function(){delete c.elem})),c=function(){if(r)return!1;for(var t=dt||yt(),n=Math.max(0,l.startTime+l.duration-t),i=1-(n/l.duration||0),s=0,o=l.tweens.length;s<o;s++)l.tweens[s].run(i);return a.notifyWith(e,[l,i,n]),i<1&&o?n:(o||a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:A.extend({},t),opts:A.extend(!0,{specialEasing:{},easing:A.easing._default},n),originalProperties:t,originalOptions:n,startTime:dt||yt(),duration:n.duration,tweens:[],createTween:function(t,n){var i=A.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)l.tweens[n].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),u=l.props;for(function(e,t){var n,i,r,s,o;for(n in e)if(r=t[i=re(n)],s=e[n],Array.isArray(s)&&(r=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),(o=A.cssHooks[i])&&"expand"in o)for(n in s=o.expand(s),delete e[i],s)n in e||(e[n]=s[n],t[n]=r);else t[i]=r}(u,l.opts.specialEasing);s<o;s++)if(i=wt.prefilters[s].call(l,e,u,l.opts))return y(i.stop)&&(A._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return A.map(u,Et,l),y(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),A.fx.timer(A.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l}A.Animation=A.extend(wt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return Ee(n.elem,e,fe.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(G);for(var n,i=0,r=e.length;i<r;i++)n=e[i],wt.tweeners[n]=wt.tweeners[n]||[],wt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,s,o,a,c,l,u,h="width"in t||"height"in t,d=this,f={},p=e.style,g=e.nodeType&&ve(e),m=ae.get(e,"fxshow");for(i in n.queue||(null==(o=A._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,A.queue(e,"fx").length||o.empty.fire()}))}))),t)if(r=t[i],pt.test(r)){if(delete t[i],s=s||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}f[i]=m&&m[i]||A.style(e,i)}if((c=!A.isEmptyObject(t))||!A.isEmptyObject(f))for(i in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=m&&m.display)&&(l=ae.get(e,"display")),"none"===(u=A.css(e,"display"))&&(l?u=l:(be([e],!0),l=e.style.display||l,u=A.css(e,"display"),be([e]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===A.css(e,"float")&&(c||(d.done((function(){p.display=l})),null==l&&(u=p.display,l="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),c=!1,f)c||(m?"hidden"in m&&(g=m.hidden):m=ae.access(e,"fxshow",{display:l}),s&&(m.hidden=!g),g&&be([e],!0),d.done((function(){for(i in g||be([e]),ae.remove(e,"fxshow"),f)A.style(e,i,f[i])}))),c=Et(g?m[i]:0,i,d),i in m||(m[i]=c.start,g&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?wt.prefilters.unshift(e):wt.prefilters.push(e)}}),A.speed=function(e,t,n){var i=e&&"object"==typeof e?A.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return A.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in A.fx.speeds?i.duration=A.fx.speeds[i.duration]:i.duration=A.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&A.dequeue(this,i.queue)},i},A.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ve).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=A.isEmptyObject(e),s=A.speed(t,n,i),o=function(){var t=wt(this,A.extend({},e),s);(r||ae.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,r=null!=e&&e+"queueHooks",s=A.timers,o=ae.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&gt.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(n),t=!1,s.splice(r,1));!t&&n||A.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=ae.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],s=A.timers,o=i?i.length:0;for(n.finish=!0,A.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),A.each(["toggle","show","hide"],(function(e,t){var n=A.fn[t];A.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(vt(t,!0),e,i,r)}})),A.each({slideDown:vt("show"),slideUp:vt("hide"),slideToggle:vt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){A.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),A.timers=[],A.fx.tick=function(){var e,t=0,n=A.timers;for(dt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||A.fx.stop(),dt=void 0},A.fx.timer=function(e){A.timers.push(e),A.fx.start()},A.fx.interval=13,A.fx.start=function(){ft||(ft=!0,mt())},A.fx.stop=function(){ft=null},A.fx.speeds={slow:600,fast:200,_default:400},A.fn.delay=function(e,t){return e=A.fx&&A.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var r=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(r)}}))},function(){var e=E.createElement("input"),t=E.createElement("select").appendChild(E.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=E.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var _t,bt=A.expr.attrHandle;A.fn.extend({attr:function(e,t){return ee(this,A.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){A.removeAttr(this,e)}))}}),A.extend({attr:function(e,t,n){var i,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?A.prop(e,t,n):(1===s&&A.isXMLDoc(e)||(r=A.attrHooks[t.toLowerCase()]||(A.expr.match.bool.test(t)?_t:void 0)),void 0!==n?null===n?void A.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=A.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&C(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(G);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),_t={set:function(e,t,n){return!1===t?A.removeAttr(e,n):e.setAttribute(n,n),n}},A.each(A.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=bt[t]||A.find.attr;bt[t]=function(e,t,i){var r,s,o=t.toLowerCase();return i||(s=bt[o],bt[o]=r,r=null!=n(e,t,i)?o:null,bt[o]=s),r}}));var Tt=/^(?:input|select|textarea|button)$/i,St=/^(?:a|area)$/i;function At(e){return(e.match(G)||[]).join(" ")}function It(e){return e.getAttribute&&e.getAttribute("class")||""}function Ct(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(G)||[]}A.fn.extend({prop:function(e,t){return ee(this,A.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[A.propFix[e]||e]}))}}),A.extend({prop:function(e,t,n){var i,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&A.isXMLDoc(e)||(t=A.propFix[t]||t,r=A.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=A.find.attr(e,"tabindex");return t?parseInt(t,10):Tt.test(e.nodeName)||St.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(A.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),A.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){A.propFix[this.toLowerCase()]=this})),A.fn.extend({addClass:function(e){var t,n,i,r,s,o;return y(e)?this.each((function(t){A(this).addClass(e.call(this,t,It(this)))})):(t=Ct(e)).length?this.each((function(){if(i=It(this),n=1===this.nodeType&&" "+At(i)+" "){for(s=0;s<t.length;s++)r=t[s],n.indexOf(" "+r+" ")<0&&(n+=r+" ");o=At(n),i!==o&&this.setAttribute("class",o)}})):this},removeClass:function(e){var t,n,i,r,s,o;return y(e)?this.each((function(t){A(this).removeClass(e.call(this,t,It(this)))})):arguments.length?(t=Ct(e)).length?this.each((function(){if(i=It(this),n=1===this.nodeType&&" "+At(i)+" "){for(s=0;s<t.length;s++)for(r=t[s];n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");o=At(n),i!==o&&this.setAttribute("class",o)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,i,r,s,o=typeof e,a="string"===o||Array.isArray(e);return y(e)?this.each((function(n){A(this).toggleClass(e.call(this,n,It(this),t),t)})):"boolean"==typeof t&&a?t?this.addClass(e):this.removeClass(e):(n=Ct(e),this.each((function(){if(a)for(s=A(this),r=0;r<n.length;r++)i=n[r],s.hasClass(i)?s.removeClass(i):s.addClass(i);else void 0!==e&&"boolean"!==o||((i=It(this))&&ae.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===e?"":ae.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+At(It(n))+" ").indexOf(t)>-1)return!0;return!1}});var kt=/\r/g;A.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=y(e),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,A(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=A.map(r,(function(e){return null==e?"":e+""}))),(t=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=A.valHooks[r.type]||A.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(kt,""):null==n?"":n:void 0}}),A.extend({valHooks:{option:{get:function(e){var t=A.find.attr(e,"value");return null!=t?t:At(A.text(e))}},select:{get:function(e){var t,n,i,r=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],c=o?s+1:r.length;for(i=s<0?c:o?s:0;i<c;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!C(n.parentNode,"optgroup"))){if(t=A(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,s=A.makeArray(t),o=r.length;o--;)((i=r[o]).selected=A.inArray(A.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),A.each(["radio","checkbox"],(function(){A.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=A.inArray(A(e).val(),t)>-1}},m.checkOn||(A.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var xt=i.location,Dt={guid:Date.now()},Nt=/\?/;A.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||A.error("Invalid XML: "+(n?A.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Lt=/^(?:focusinfocus|focusoutblur)$/,Rt=function(e){e.stopPropagation()};A.extend(A.event,{trigger:function(e,t,n,r){var s,o,a,c,l,u,h,d,p=[n||E],g=f.call(e,"type")?e.type:e,m=f.call(e,"namespace")?e.namespace.split("."):[];if(o=d=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!Lt.test(g+A.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),l=g.indexOf(":")<0&&"on"+g,(e=e[A.expando]?e:new A.Event(g,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:A.makeArray(t,[e]),h=A.event.special[g]||{},r||!h.trigger||!1!==h.trigger.apply(n,t))){if(!r&&!h.noBubble&&!v(n)){for(c=h.delegateType||g,Lt.test(c+g)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||i)}for(s=0;(o=p[s++])&&!e.isPropagationStopped();)d=o,e.type=s>1?c:h.bindType||g,(u=(ae.get(o,"events")||Object.create(null))[e.type]&&ae.get(o,"handle"))&&u.apply(o,t),(u=l&&o[l])&&u.apply&&se(o)&&(e.result=u.apply(o,t),!1===e.result&&e.preventDefault());return e.type=g,r||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!se(n)||l&&y(n[g])&&!v(n)&&((a=n[l])&&(n[l]=null),A.event.triggered=g,e.isPropagationStopped()&&d.addEventListener(g,Rt),n[g](),e.isPropagationStopped()&&d.removeEventListener(g,Rt),A.event.triggered=void 0,a&&(n[l]=a)),e.result}},simulate:function(e,t,n){var i=A.extend(new A.Event,n,{type:e,isSimulated:!0});A.event.trigger(i,null,t)}}),A.fn.extend({trigger:function(e,t){return this.each((function(){A.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return A.event.trigger(e,t,n,!0)}});var Ot=/\[\]$/,Ut=/\r?\n/g,Pt=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;function Ft(e,t,n,i){var r;if(Array.isArray(t))A.each(t,(function(t,r){n||Ot.test(e)?i(e,r):Ft(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)}));else if(n||"object"!==b(t))i(e,t);else for(r in t)Ft(e+"["+r+"]",t[r],n,i)}A.param=function(e,t){var n,i=[],r=function(e,t){var n=y(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!A.isPlainObject(e))A.each(e,(function(){r(this.name,this.value)}));else for(n in e)Ft(n,e[n],t,r);return i.join("&")},A.fn.extend({serialize:function(){return A.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=A.prop(this,"elements");return e?A.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!A(this).is(":disabled")&&Mt.test(this.nodeName)&&!Pt.test(e)&&(this.checked||!Ae.test(e))})).map((function(e,t){var n=A(this).val();return null==n?null:Array.isArray(n)?A.map(n,(function(e){return{name:t.name,value:e.replace(Ut,"\r\n")}})):{name:t.name,value:n.replace(Ut,"\r\n")}})).get()}});var jt=/%20/g,Bt=/#.*$/,Vt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:GET|HEAD)$/,zt=/^\/\//,$t={},Wt={},Gt="*/".concat("*"),Kt=E.createElement("a");function Yt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,s=t.toLowerCase().match(G)||[];if(y(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Xt(e,t,n,i){var r={},s=e===Wt;function o(a){var c;return r[a]=!0,A.each(e[a]||[],(function(e,a){var l=a(t,n,i);return"string"!=typeof l||s||r[l]?s?!(c=l):void 0:(t.dataTypes.unshift(l),o(l),!1)})),c}return o(t.dataTypes[0])||!r["*"]&&o("*")}function Qt(e,t){var n,i,r=A.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&A.extend(!0,e,i),e}Kt.href=xt.href,A.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":A.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Qt(Qt(e,A.ajaxSettings),t):Qt(A.ajaxSettings,e)},ajaxPrefilter:Yt($t),ajaxTransport:Yt(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,s,o,a,c,l,u,h,d,f=A.ajaxSetup({},t),p=f.context||f,g=f.context&&(p.nodeType||p.jquery)?A(p):A.event,m=A.Deferred(),y=A.Callbacks("once memory"),v=f.statusCode||{},w={},_={},b="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(l){if(!o)for(o={};t=qt.exec(s);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(e,t){return null==l&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==l&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)T.always(e[T.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||b;return n&&n.abort(t),S(0,t),this}};if(m.promise(T),f.url=((e||f.url||xt.href)+"").replace(zt,xt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(G)||[""],null==f.crossDomain){c=E.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Kt.protocol+"//"+Kt.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=A.param(f.data,f.traditional)),Xt($t,f,t,T),l)return T;for(h in(u=A.event&&f.global)&&0==A.active++&&A.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ht.test(f.type),r=f.url.replace(Bt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(jt,"+")):(d=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(Nt.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(Vt,"$1"),d=(Nt.test(r)?"&":"?")+"_="+Dt.guid+++d),f.url=r+d),f.ifModified&&(A.lastModified[r]&&T.setRequestHeader("If-Modified-Since",A.lastModified[r]),A.etag[r]&&T.setRequestHeader("If-None-Match",A.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Gt+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,T,f)||l))return T.abort();if(b="abort",y.add(f.complete),T.done(f.success),T.fail(f.error),n=Xt(Wt,f,t,T)){if(T.readyState=1,u&&g.trigger("ajaxSend",[T,f]),l)return T;f.async&&f.timeout>0&&(a=i.setTimeout((function(){T.abort("timeout")}),f.timeout));try{l=!1,n.send(w,S)}catch(e){if(l)throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,t,o,c){var h,d,E,w,_,b=t;l||(l=!0,a&&i.clearTimeout(a),n=void 0,s=c||"",T.readyState=e>0?4:0,h=e>=200&&e<300||304===e,o&&(w=function(e,t,n){for(var i,r,s,o,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){c.unshift(r);break}if(c[0]in n)s=c[0];else{for(r in n){if(!c[0]||e.converters[r+" "+c[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==c[0]&&c.unshift(s),n[s]}(f,T,o)),!h&&A.inArray("script",f.dataTypes)>-1&&A.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),w=function(e,t,n,i){var r,s,o,a,c,l={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o];for(s=u.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=s,s=u.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(!(o=l[c+" "+s]||l["* "+s]))for(r in l)if((a=r.split(" "))[1]===s&&(o=l[c+" "+a[0]]||l["* "+a[0]])){!0===o?o=l[r]:!0!==l[r]&&(s=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+c+" to "+s}}}return{state:"success",data:t}}(f,w,T,h),h?(f.ifModified&&((_=T.getResponseHeader("Last-Modified"))&&(A.lastModified[r]=_),(_=T.getResponseHeader("etag"))&&(A.etag[r]=_)),204===e||"HEAD"===f.type?b="nocontent":304===e?b="notmodified":(b=w.state,d=w.data,h=!(E=w.error))):(E=b,!e&&b||(b="error",e<0&&(e=0))),T.status=e,T.statusText=(t||b)+"",h?m.resolveWith(p,[d,b,T]):m.rejectWith(p,[T,b,E]),T.statusCode(v),v=void 0,u&&g.trigger(h?"ajaxSuccess":"ajaxError",[T,f,h?d:E]),y.fireWith(p,[T,b]),u&&(g.trigger("ajaxComplete",[T,f]),--A.active||A.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return A.get(e,t,n,"json")},getScript:function(e,t){return A.get(e,void 0,t,"script")}}),A.each(["get","post"],(function(e,t){A[t]=function(e,n,i,r){return y(n)&&(r=r||i,i=n,n=void 0),A.ajax(A.extend({url:e,type:t,dataType:r,data:n,success:i},A.isPlainObject(e)&&e))}})),A.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),A._evalUrl=function(e,t,n){return A.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){A.globalEval(e,t,n)}})},A.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=A(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){A(this).wrapInner(e.call(this,t))})):this.each((function(){var t=A(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(n){A(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){A(this).replaceWith(this.childNodes)})),this}}),A.expr.pseudos.hidden=function(e){return!A.expr.pseudos.visible(e)},A.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},A.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Jt={0:200,1223:204},Zt=A.ajaxSettings.xhr();m.cors=!!Zt&&"withCredentials"in Zt,m.ajax=Zt=!!Zt,A.ajaxTransport((function(e){var t,n;if(m.cors||Zt&&!e.crossDomain)return{send:function(r,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(o,r[o]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Jt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){t&&n()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),A.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return A.globalEval(e),e}}}),A.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),A.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,r){t=A("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),E.head.appendChild(t[0])},abort:function(){n&&n()}}}));var en,tn=[],nn=/(=)\?(?=&|$)|\?\?/;A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tn.pop()||A.expando+"_"+Dt.guid++;return this[e]=!0,e}}),A.ajaxPrefilter("json jsonp",(function(e,t,n){var r,s,o,a=!1!==e.jsonp&&(nn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(nn,"$1"+r):!1!==e.jsonp&&(e.url+=(Nt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||A.error(r+" was not called"),o[0]},e.dataTypes[0]="json",s=i[r],i[r]=function(){o=arguments},n.always((function(){void 0===s?A(i).removeProp(r):i[r]=s,e[r]&&(e.jsonpCallback=t.jsonpCallback,tn.push(r)),o&&y(s)&&s(o[0]),o=s=void 0})),"script"})),m.createHTMLDocument=((en=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===en.childNodes.length),A.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((i=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(i)):t=E),s=!n&&[],(r=B.exec(e))?[t.createElement(r[1])]:(r=Le([e],t,s),s&&s.length&&A(s).remove(),A.merge([],r.childNodes)));var i,r,s},A.fn.load=function(e,t,n){var i,r,s,o=this,a=e.indexOf(" ");return a>-1&&(i=At(e.slice(a)),e=e.slice(0,a)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),o.length>0&&A.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){s=arguments,o.html(i?A("<div>").append(A.parseHTML(e)).find(i):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,s||[e.responseText,t,e])}))}),this},A.expr.pseudos.animated=function(e){return A.grep(A.timers,(function(t){return e===t.elem})).length},A.offset={setOffset:function(e,t,n){var i,r,s,o,a,c,l=A.css(e,"position"),u=A(e),h={};"static"===l&&(e.style.position="relative"),a=u.offset(),s=A.css(e,"top"),c=A.css(e,"left"),("absolute"===l||"fixed"===l)&&(s+c).indexOf("auto")>-1?(o=(i=u.position()).top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(c)||0),y(t)&&(t=t.call(e,n,A.extend({},a))),null!=t.top&&(h.top=t.top-a.top+o),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):u.css(h)}},A.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){A.offset.setOffset(this,e,t)}));var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===A.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===A.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=A(e).offset()).top+=A.css(e,"borderTopWidth",!0),r.left+=A.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-A.css(i,"marginTop",!0),left:t.left-r.left-A.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===A.css(e,"position");)e=e.offsetParent;return e||ge}))}}),A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;A.fn[e]=function(i){return ee(this,(function(e,i,r){var s;if(v(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===r)return s?s[t]:e[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):e[i]=r}),e,i,arguments.length)}})),A.each(["top","left"],(function(e,t){A.cssHooks[t]=et(m.pixelPosition,(function(e,n){if(n)return n=Ze(e,t),Ke.test(n)?A(e).position()[t]+"px":n}))})),A.each({Height:"height",Width:"width"},(function(e,t){A.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){A.fn[i]=function(r,s){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===s?"margin":"border");return ee(this,(function(t,n,r){var s;return v(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===r?A.css(t,n,a):A.style(t,n,r,a)}),t,o?r:void 0,o)}}))})),A.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){A.fn[t]=function(e){return this.on(t,e)}})),A.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){A.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;A.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return i=a.call(arguments,2),r=function(){return e.apply(t||this,i.concat(a.call(arguments)))},r.guid=e.guid=e.guid||A.guid++,r},A.holdReady=function(e){e?A.readyWait++:A.ready(!0)},A.isArray=Array.isArray,A.parseJSON=JSON.parse,A.nodeName=C,A.isFunction=y,A.isWindow=v,A.camelCase=re,A.type=b,A.now=Date.now,A.isNumeric=function(e){var t=A.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},A.trim=function(e){return null==e?"":(e+"").replace(rn,"$1")},void 0===(n=function(){return A}.apply(t,[]))||(e.exports=n);var sn=i.jQuery,on=i.$;return A.noConflict=function(e){return i.$===A&&(i.$=on),e&&i.jQuery===A&&(i.jQuery=sn),A},void 0===r&&(i.jQuery=i.$=A),A}))},9928:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});const i=new Date(2025,1,2);0===localStorage.length&&localStorage.setItem("last-cleared",Date.now().toString()),(null===localStorage.getItem("last-cleared")?0:Number.parseInt(localStorage.getItem("last-cleared")))<=i.getTime()&&(localStorage.clear(),localStorage.setItem("last-cleared",Date.now().toString()),location.reload());class r{static has(e){return null!==this.get(e)}static get(e,t=!1){if(null===localStorage.getItem(e))return null;{const n=JSON.parse(localStorage.getItem(e)),i=Date.now()>n[1];return i&&localStorage.removeItem(e),!i||t?n[0]:null}}static getAndRefresh(e,t,n=216e5){const i=this.get(e,!0);return null===i?t.then((t=>(this.set(e,t,Date.now()+n),t))):(this.has(e)||t.then((t=>this.set(e,t,Date.now()+n))).catch(console.error),Promise.resolve(i))}static set(e,t,n=r.MAX_VALID_TIMESTAMP){const i=this.get(e),s=[t,n instanceof Date?n.getTime():n];return localStorage.setItem(e,JSON.stringify(s)),i}static remove(e){const t=this.get(e);return localStorage.removeItem(e),t}}r.MAX_VALID_TIMESTAMP=864e13;const s=r},908:(e,t,n)=>{"use strict";n.d(t,{c:()=>c});var i,r,s=n(9928);function o(e){let t,n=3,i=e%19+1,r=1+~~(e/100),s=~~(3*r/4)-12,o=(11*i+20+~~((8*r+5)/25)-5-s)%30;return o<0&&(o+=30),(25==o&&i>11||24==o)&&o++,(t=44-o)<21&&(t+=30),(t+=7-(~~(5*e/4)-s-10+t)%7)>31&&(t-=31,n=4),[e,n,t]}!function(e){let t;!function(e){e.evaluate=function(e,t=new Date){switch(e[0]){case"date is":return t.getMonth()+1===e[1]&&t.getDate()===e[2];case"is Easter Sunday":const n=o(t.getFullYear());return t.getMonth()+1===n[1]&&t.getDate()===n[2];case"is Easter Monday":const i=o(t.getFullYear()),r=new Date(i[0],i[1]-1,i[2]+1);return t.getMonth()===r.getMonth()&&t.getDate()===r.getDate()}}}(t=e.Condition||(e.Condition={}))}(r||(r={}));class a{static getSequence(e=new Date){const t=this.EMOJI_CONFIG.filter((({condition:t})=>r.Condition.evaluate(t,e))),n=0===t.length?this.DEFAULT_SEQUENCES:t.reduce(((e,t)=>({...e,...t.sequences})),{}),i=Object.values(n).reduce(((e,t)=>e+t),0);let s=Math.random()*i;for(const e in n){const t=n[e];if(s<=t)return e;s-=t}return Object.keys(n).at(-1)}static showLoadingScreen(e,t=!1){Array.from(this.loadingScreen.childNodes).forEach((e=>{e instanceof HTMLParagraphElement&&e.remove()})),this.onDOMContentLoaded().then((()=>document.body.toggleAttribute("loading",!0))),this.loadingScreen.classList.remove("fading");for(const t of new Intl.Segmenter("en-US",{granularity:"grapheme"}).segment(e)){const e=document.createElement("p");e.textContent=t.segment,this.loadingScreen.appendChild(e)}if(t)setTimeout((()=>{this.loadingScreen.classList.add("fading"),document.body.removeAttribute("loading")}),3e3);else{const e=Date.now(),t=setInterval((()=>{if(0===this.numLoading){document.body.removeAttribute("loading");const n=document.getElementById("split-view");n&&(n.style.opacity="1"),Array.from(document.getElementsByClassName("content")).forEach((e=>{e instanceof HTMLElement&&(e.style.opacity="1")})),this.loadingScreen.classList.add("fading"),clearInterval(t),console.log(`Loading done: ${Date.now()-e}ms`)}else console.info(`${this.numLoading} things still loading...`)}),50)}}static get numLoading(){return this.currentlyLoading.length}static markLoadStart(e){this.currentlyLoading.push(e)}static markLoadEnd(e){const t=this.currentlyLoading.lastIndexOf(e);-1!==t&&this.currentlyLoading.splice(t,1)}static getElementsById(e){const t={};for(const n in e){const i=document.getElementById(n);if(null===i)throw new Error(`no element with id "${n}" found`);if(!(i instanceof e[n]))throw new Error(`element with id "${n}" exists, but is ${i}, not ${e[n].name}`);t[n]=i}return t}static onDOMContentLoaded(e={}){return this.DOMContentLoaded?Promise.resolve(this.getElementsById(e)):new Promise((t=>window.addEventListener("DOMContentLoaded",(()=>t(this.getElementsById(e))))))}static useDynamicContent(e,t,n=(e=>console.error(e))){this.markLoadStart(e),Promise.all([e,this.onDOMContentLoaded]).then((([n,i])=>{t(n),this.markLoadEnd(e)})).catch((e=>n(e)))}}i=a,a.DEFAULT_SEQUENCES={"":1},a.EMOJI_CONFIG=s.c.get("loading-screen-config-fixed",!0)??[],s.c.has("loading-screen-config-fixed")||Promise.resolve().then(n.bind(n,8860)).then((e=>{(new e.default).getLoadingScreenConfig().then((e=>s.c.set("loading-screen-config-fixed",e,Date.now()+36e5)))})),a.loadingScreen=document.createElement("div"),(()=>{i.loadingScreen.id="loading-screen";const e=document.createElement("style");e.innerHTML='@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.0.woff2") format("woff2");unicode-range:U+1f1e6-1f1ff}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.1.woff2") format("woff2");unicode-range:U+200d,U+2620,U+26a7,U+fe0f,U+1f308,U+1f38c,U+1f3c1,U+1f3f3-1f3f4,U+1f6a9,U+e0062-e0063,U+e0065,U+e0067,U+e006c,U+e006e,U+e0073-e0074,U+e0077,U+e007f}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.2.woff2") format("woff2");unicode-range:U+23,U+2a,U+a9,U+ae,U+200d,U+203c,U+2049,U+20e3,U+2122,U+2139,U+2194-2199,U+21a9-21aa,U+23cf,U+23e9-23ef,U+23f8-23fa,U+24c2,U+25aa-25ab,U+25b6,U+25c0,U+25fb-25fe,U+2611,U+2622-2623,U+2626,U+262a,U+262e-262f,U+2638,U+2640,U+2642,U+2648-2653,U+2660,U+2663,U+2665-2666,U+2668,U+267b,U+267e-267f,U+2695,U+269b-269c,U+26a0,U+26a7,U+26aa-26ab,U+26ce,U+26d4,U+2705,U+2714,U+2716,U+271d,U+2721,U+2733-2734,U+2747,U+274c,U+274e,U+2753-2755,U+2757,U+2764,U+2795-2797,U+27a1,U+27b0,U+27bf,U+2934-2935,U+2b05-2b07,U+2b1b-2b1c,U+2b55,U+3030,U+303d,U+3297,U+3299,U+fe0f,U+1f170-1f171,U+1f17e-1f17f,U+1f18e,U+1f191-1f19a,U+1f201-1f202,U+1f21a,U+1f22f,U+1f232-1f23a,U+1f250-1f251,U+1f310,U+1f3a6,U+1f3b5-1f3b6,U+1f3bc,U+1f3e7,U+1f441,U+1f499-1f49c,U+1f49f-1f4a0,U+1f4a2,U+1f4ac-1f4ad,U+1f4b1-1f4b2,U+1f4b9,U+1f4db,U+1f4f2-1f4f6,U+1f500-1f50a,U+1f515,U+1f518-1f524,U+1f52f-1f53d,U+1f549,U+1f54e,U+1f5a4,U+1f5e8,U+1f5ef,U+1f6ab,U+1f6ad-1f6b1,U+1f6b3,U+1f6b7-1f6bc,U+1f6be,U+1f6c2-1f6c5,U+1f6d0-1f6d1,U+1f6d7,U+1f6dc,U+1f7e0-1f7eb,U+1f7f0,U+1f90d-1f90e,U+1f9e1,U+1fa75-1fa77,U+1faaf}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.3.woff2") format("woff2");unicode-range:U+231a-231b,U+2328,U+23f0-23f3,U+2602,U+260e,U+2692,U+2694,U+2696-2697,U+2699,U+26b0-26b1,U+26cf,U+26d1,U+26d3,U+2702,U+2709,U+270f,U+2712,U+fe0f,U+1f302,U+1f321,U+1f392-1f393,U+1f3a9,U+1f3bd,U+1f3ee,U+1f3f7,U+1f3fa,U+1f451-1f462,U+1f484,U+1f489-1f48a,U+1f48c-1f48e,U+1f4a1,U+1f4a3,U+1f4b0,U+1f4b3-1f4b8,U+1f4bb-1f4da,U+1f4dc-1f4f1,U+1f4ff,U+1f50b-1f514,U+1f516-1f517,U+1f526-1f529,U+1f52c-1f52e,U+1f550-1f567,U+1f56f-1f570,U+1f576,U+1f587,U+1f58a-1f58d,U+1f5a5,U+1f5a8,U+1f5b1-1f5b2,U+1f5c2-1f5c4,U+1f5d1-1f5d3,U+1f5dc-1f5de,U+1f5e1,U+1f5f3,U+1f6aa,U+1f6ac,U+1f6bd,U+1f6bf,U+1f6c1,U+1f6cb,U+1f6cd-1f6cf,U+1f6d2,U+1f6e0-1f6e1,U+1f6f0,U+1f97b-1f97f,U+1f9af,U+1f9ba,U+1f9e2-1f9e6,U+1f9ea-1f9ec,U+1f9ee-1f9f4,U+1f9f7-1f9ff,U+1fa71-1fa74,U+1fa79-1fa7b,U+1fa86,U+1fa91-1fa93,U+1fa96,U+1fa99-1faa0,U+1faa2-1faa7,U+1faaa-1faae}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.4.woff2") format("woff2");unicode-range:U+265f,U+26bd-26be,U+26f3,U+26f8,U+fe0f,U+1f004,U+1f0cf,U+1f380-1f384,U+1f386-1f38b,U+1f38d-1f391,U+1f396-1f397,U+1f399-1f39b,U+1f39e-1f39f,U+1f3a3-1f3a5,U+1f3a7-1f3a9,U+1f3ab-1f3b4,U+1f3b7-1f3bb,U+1f3bd-1f3c0,U+1f3c5-1f3c6,U+1f3c8-1f3c9,U+1f3cf-1f3d3,U+1f3f8-1f3f9,U+1f47e,U+1f4e2,U+1f4f7-1f4fd,U+1f52b,U+1f579,U+1f58c-1f58d,U+1f5bc,U+1f6f7,U+1f6f9,U+1f6fc,U+1f93f,U+1f941,U+1f945,U+1f947-1f94f,U+1f9e7-1f9e9,U+1f9f5-1f9f6,U+1fa70-1fa71,U+1fa80-1fa81,U+1fa83-1fa85,U+1fa87-1fa88,U+1fa94-1fa95,U+1fa97-1fa98,U+1faa1,U+1faa9}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.5.woff2") format("woff2");unicode-range:U+2693,U+26e9-26ea,U+26f1-26f2,U+26f4-26f5,U+26fa,U+26fd,U+2708,U+fe0f,U+1f301,U+1f303,U+1f306-1f307,U+1f309,U+1f310,U+1f3a0-1f3a2,U+1f3aa,U+1f3cd-1f3ce,U+1f3d5,U+1f3d7-1f3db,U+1f3df-1f3e6,U+1f3e8-1f3ed,U+1f3ef-1f3f0,U+1f488,U+1f492,U+1f4ba,U+1f54b-1f54d,U+1f5fa-1f5ff,U+1f680-1f6a2,U+1f6a4-1f6a8,U+1f6b2,U+1f6d1,U+1f6d5-1f6d6,U+1f6dd-1f6df,U+1f6e2-1f6e5,U+1f6e9,U+1f6eb-1f6ec,U+1f6f3-1f6f6,U+1f6f8,U+1f6fa-1f6fb,U+1f9bc-1f9bd,U+1f9ed,U+1f9f3,U+1fa7c}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.6.woff2") format("woff2");unicode-range:U+2615,U+fe0f,U+1f32d-1f330,U+1f336,U+1f33d,U+1f345-1f37f,U+1f382,U+1f52a,U+1f942-1f944,U+1f950-1f96f,U+1f99e,U+1f9aa,U+1f9c0-1f9cb,U+1fad0-1fadb}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.7.woff2") format("woff2");unicode-range:U+200d,U+2600-2601,U+2603-2604,U+2614,U+2618,U+26a1,U+26c4-26c5,U+26c8,U+26f0,U+2728,U+2744,U+2b1b,U+2b50,U+fe0f,U+1f300,U+1f304-1f305,U+1f308,U+1f30a-1f30f,U+1f311-1f321,U+1f324-1f32c,U+1f331-1f335,U+1f337-1f33c,U+1f33e-1f344,U+1f3d4,U+1f3d6,U+1f3dc-1f3de,U+1f3f5,U+1f400-1f43f,U+1f490,U+1f4a7,U+1f4ab,U+1f4ae,U+1f525,U+1f54a,U+1f573,U+1f577-1f578,U+1f648-1f64a,U+1f940,U+1f980-1f9ae,U+1f9ba,U+1fa90,U+1faa8,U+1fab0-1fabd,U+1fabf,U+1face-1facf,U+1fae7}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.8.woff2") format("woff2");unicode-range:U+200d,U+2640,U+2642,U+2695-2696,U+26f7,U+26f9,U+2708,U+2764,U+fe0f,U+1f33e,U+1f373,U+1f37c,U+1f384-1f385,U+1f393,U+1f3a4,U+1f3a8,U+1f3c2-1f3c4,U+1f3c7,U+1f3ca-1f3cc,U+1f3eb,U+1f3ed,U+1f3fb-1f3ff,U+1f466-1f478,U+1f47c,U+1f481-1f483,U+1f486-1f487,U+1f48b,U+1f48f,U+1f491,U+1f4bb-1f4bc,U+1f527,U+1f52c,U+1f574-1f575,U+1f57a,U+1f645-1f647,U+1f64b,U+1f64d-1f64e,U+1f680,U+1f692,U+1f6a3,U+1f6b4-1f6b6,U+1f6c0,U+1f6cc,U+1f91d,U+1f926,U+1f930-1f931,U+1f934-1f93a,U+1f93c-1f93e,U+1f977,U+1f9af-1f9b3,U+1f9b8-1f9b9,U+1f9bc-1f9bd,U+1f9cc-1f9cf,U+1f9d1-1f9df,U+1fa82,U+1fac3-1fac5}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.9.woff2") format("woff2");unicode-range:U+200d,U+261d,U+2620,U+2639-263a,U+2665,U+270a-270d,U+2728,U+2763-2764,U+2b50,U+fe0f,U+1f31a-1f31f,U+1f32b,U+1f383,U+1f389,U+1f3fb-1f3ff,U+1f440-1f450,U+1f463-1f465,U+1f479-1f47b,U+1f47d-1f480,U+1f485,U+1f48b-1f48c,U+1f493-1f49f,U+1f4a4-1f4a6,U+1f4a8-1f4ab,U+1f4af,U+1f525,U+1f573,U+1f590,U+1f595-1f596,U+1f5a4,U+1f5e3,U+1f600-1f644,U+1f648-1f64a,U+1f64c,U+1f64f,U+1f90c-1f925,U+1f927-1f92f,U+1f932-1f933,U+1f970-1f976,U+1f978-1f97a,U+1f9a0,U+1f9b4-1f9b7,U+1f9bb,U+1f9be-1f9bf,U+1f9d0,U+1f9e0-1f9e1,U+1fa75-1fa79,U+1fac0-1fac2,U+1fae0-1fae6,U+1fae8,U+1faf0-1faf8}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.10.woff2") format("woff2");unicode-range:U+200d,U+2194-2195,U+2640,U+2642,U+26d3,U+27a1,U+fe0f,U+1f344,U+1f34b,U+1f3c3,U+1f3fb-1f3ff,U+1f426,U+1f468-1f469,U+1f4a5,U+1f525,U+1f642,U+1f6b6,U+1f7e9,U+1f7eb,U+1f9af,U+1f9bc-1f9bd,U+1f9ce,U+1f9d1-1f9d2}:root{--google-font-color-notocoloremoji:colrv1}#loading-screen{position:fixed;top:0px;left:0px;width:100vw;height:100vh;display:flex;flex-direction:row;justify-content:center;align-items:center;gap:1em;font-size:4em;background:#fff;background:radial-gradient(circle, rgb(255, 255, 255) 0%, rgb(255, 255, 255) 66%, rgb(226, 226, 226) 100%);user-select:none;z-index:999}#loading-screen>*{font-size:4rem;margin:0px;user-select:none;font-family:"Noto Color Emoji" !important;--anim-easing: cubic-bezier(0.445, 0.05, 0.55, 0.95)}#loading-screen>*:nth-child(3n-2){animation:jiggle 1s var(--anim-easing) 0ms infinite normal forwards}#loading-screen>*:nth-child(3n-1){animation:jiggle 1s var(--anim-easing) -333ms infinite normal forwards}#loading-screen>*:nth-child(3n){animation:jiggle 1s var(--anim-easing) -666ms infinite normal forwards}#loading-screen.fading{animation:fade-out 200ms ease-out 0ms 1 normal both}@keyframes jiggle{0%,100%{transform:translateY(-2rem)}50%{transform:translateY(2rem)}}@keyframes fade-out{0%{opacity:1}100%{opacity:0;display:none;pointer-events:none}}@media(max-aspect-ratio: 3/4){@keyframes jiggle{0%,100%{transform:translateX(-2rem)}50%{transform:translateX(2rem)}}#loading-screen{flex-direction:column}}',i.loadingScreen.appendChild(e)})(),(()=>{document.body.appendChild(i.loadingScreen);const e=new Date;i.showLoadingScreen(i.getSequence(e))})(),a.currentlyLoading=[],a.DOMContentLoaded=!1,i.markLoadStart(window),window.addEventListener("DOMContentLoaded",(()=>{i.DOMContentLoaded=!0,i.markLoadEnd(window)}));const c=a},5245:(e,t,n)=>{"use strict";n.d(t,{c:()=>l});var i=n(7588),r=n.n(i),s=n(9848),o=n(4388),a=n(6316);class c extends HTMLElement{static useClickInteraction(){return o.c.isSlimmerOrEq(o.c.Viewport.DESKTOP_SLIM)}set foldDir(e){this._foldDir=e,this.arrow.textContent="chevron_right"}set heading(e){const t=this._heading;e!==t&&(t.replaceWith(e),this._heading=e)}get heading(){return this._heading}set arrowHidden(e){e?this.arrow.setAttribute("hidden",""):this.arrow.removeAttribute("hidden")}get contents(){return this._contents}get contentsPosition(){return this._contentsPosition}set contentsPosition(e){this._contents.classList.remove("absolute","static"),this._contents.classList.add(e),this._contentsPosition=e}get isOpen(){return this.hasAttribute("open")}constructor(e,t,n,i,l,u){super(),this.style.position="relative",this.style.display="block",this._foldDir=t??(this.hasAttribute("fold-dir")?this.getAttribute("fold-dir"):null)??"right",this.closingDelay=i??a.c.getAttrAsNumber(this,"closing-delay")??0;const h=Array.from(this.children);this._heading=s.c.h4(e??this.getAttribute("heading")??"").class("heading").make(),this.arrow=s.c.h4("chevron_right").class("arrow","light-weight","icon").make(),this.topper=super.appendChild(s.c.div().class("topper","flex-columns","cross-axis-center").children(this._heading,this.arrow).make()),n??(n=a.c.getAttrAs(this,"contents-position",(e=>"absolute"===e||"static"===e))??"absolute"),this._contents=super.appendChild(s.c.div().class("contents",n).children(...h).make()),this.contentsPosition=n,l??(l=a.c.getAttrAs(this,"open-on")??"mouseenter"),u??(u=a.c.getAttrAs(this,"close-on")??"mouseleave"),r()(this._contents).hide(),l===u?this.topper.addEventListener(l,(()=>this.isOpen?this.close():this.open())):(this.topper.addEventListener(l,(()=>{c.useClickInteraction()||this.open()})),this.topper.addEventListener("click",(e=>{c.useClickInteraction()&&(this.isOpen?this.close():this.open(),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())})),this.addEventListener(l,(()=>clearTimeout(this.closingTimeout))),this.addEventListener(u,(()=>{c.useClickInteraction()||(this.closingTimeout=setTimeout((()=>this.close()),c.useClickInteraction()?0:this.closingDelay))})),document.body.addEventListener("click",(e=>{c.useClickInteraction()&&e.target instanceof Node&&!this.contains(e.target)&&(this.close(),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}))),o.c.onChange((()=>this.topper.classList.toggle("click-action",c.useClickInteraction())),!0)}appendChild(e){return this._contents.appendChild(e)}append(...e){return this._contents.append(...e)}open(){if(!this.hasAttribute("disabled")){switch(this._heading.getBoundingClientRect(),this._foldDir){case"down":this._contents.style.left="0px",this._contents.style.top=this.clientHeight+"px",this.arrow.style.rotate="90deg";break;case"right":this._contents.style.left=this.parentElement.getBoundingClientRect().right-this.getBoundingClientRect().left+"px",this._contents.style.top="0px",this.arrow.style.rotate="90deg"}if(this._contents.style.setProperty("--top",this._contents.style.top??"0px"),"absolute"===this.contentsPosition){let e=c.topFolderContentZIndex+1;e>=300&&(e=280),this.contents.style.zIndex=(c.topFolderContentZIndex=e).toString()}r()(this._contents).stop().slideDown(200,(()=>this._contents.style.height="")),this.setAttribute("open","")}}close(){r()(this._contents).stop().slideUp(200),this.arrow.style.rotate="0deg",this.removeAttribute("open")}}c.topFolderContentZIndex=280;const l=c;customElements.define("folder-element",c)},8332:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});var i=n(9848);class r extends HTMLElement{get value(){return this._value}set value(e){this._value!==e&&(this.optionElements.forEach(((t,n)=>{this.options[n][0]===e?t.setAttribute("selected",""):t.removeAttribute("selected")})),this._value=e,this.dispatchEvent(new Event("input")),this.dispatchEvent(new Event("change")))}constructor(...e){if(super(),0===e.length)this.classList.add("flex-columns","cross-axis-center"),this.options=[],this.optionElements=[],this._value=void 0;else{if(e.map((e=>e[0])).some(((e,t,n)=>n.indexOf(e)!==t)))throw new Error(`duplicate value: ${e.map((e=>e[0])).find(((e,t,n)=>n.indexOf(e)!==t))}`);this.options=e.map((e=>[e[0],e[1]])),this._value=(e.find((e=>e[3]))??e[0])[0],this.classList.add("flex-columns","cross-axis-center"),this.optionElements=e.map((e=>i.c.p(e[1]).class("icon","option","click-action").attr("selected",this._value===e[0]?"":null).tooltip(e[2]??null).on("click",(()=>this.value=e[0])).make())),this.optionElements.forEach(((e,t)=>{this.appendChild(e),t!==this.optionElements.length-1&&this.appendChild(i.c.div(void 0,"separator").make())}))}}addOption(e,t,n,r=!1){const s=e;return 0!==this.options.length&&this.append(i.c.div(void 0,"separator").make()),this.options.push([s,t]),this.optionElements.push(this.appendChild(i.c.p(t).class("icon","option","click-action").tooltip(n??null).on("click",(()=>this.value=s)).make())),r&&(this.optionElements.forEach(((e,t)=>{this.options[t][0]===s?e.setAttribute("selected",""):e.removeAttribute("selected")})),this._value=s),this}}customElements.define("icon-selector",r)},3868:(e,t,n)=>{"use strict";n.d(t,{c:()=>p});var i,r=n(4296),s=n(3935),o=n(2464),a=n(8144),c=n(8356),l=n(6316),u=n(9848),h=n(9796),d=n(908);class f extends HTMLElement{static getFileSizeString(e){let t=0,n=e;for(;n>=1e3;)[t,n]=[t+1,n/1e3];return n.toFixed(1)+this.FILE_SIZE_UNITS[t]}get origin(){return this._origin}set origin(e){e!==this._origin&&(this._origin=e,this.setAttribute("origin",e),this.refresh())}get src(){return this._src}set src(e){e!==this._src&&(this._src=e,this.setAttribute("src",e),this.refresh())}refresh(){const e="external"===this.origin?c.c.getInfo(this.src):"firebase-storage-protected"===this.origin?i.getInfoFromFirebase("beveiligd",this.src):i.getInfoFromFirebase("openbaar",this.src);return d.c.markLoadStart(this),e.then((e=>{this.classList.remove("error"),this.filetypeIcon.textContent=i.FILE_TYPE_ICONS[e.fileType],this.fileNameLabel.textContent=e.name,this.fileSizeLabel.textContent=e.size?i.getFileSizeString(e.size):"",this.downloadButton.textContent="download",this.downloadButton.title="Bestand downloaden",this.downloadButton.classList.add("click-action"),this.downloadButton.setAttribute("href",e.href),this.downloadButton.setAttribute("download",""),d.c.markLoadEnd(this)})).catch((e=>{this.classList.add("error"),this.filetypeIcon.textContent="error",this.fileNameLabel.textContent=e instanceof Error?e.message:"Er ging iets mis",this.fileSizeLabel.textContent="",this.downloadButton.textContent="file_download_off",this.downloadButton.title="",this.downloadButton.classList.remove("click-action"),this.downloadButton.removeAttribute("href"),this.downloadButton.removeAttribute("download"),d.c.markLoadEnd(this)}))}constructor(e,t){super(),this.initElement(),this._origin=e??l.c.getAttrAs(this,"origin",h.s.checkType)??"firebase-storage-public",this._src=t??this.getAttribute("src")??"",this.refresh()}initElement(){this.style.display="flex",this.classList.add("flex-columns","cross-axis-center","in-section-gap"),this.filetypeIcon=this.appendChild(u.c.p("collections_bookmark").class("icon","file-type-icon").make()),this.appendChild(u.c.div(void 0,"file-info","flex-rows").children(this.fileNameLabel=u.c.p("Bestandsnaam").class("file-name","no-margin").make(),this.fileSizeLabel=u.c.p("Bestandsgrootte").class("file-size","no-margin").make()).make()),this.downloadButton=this.appendChild(u.c.a(void 0,"download").openInNewTab(!0).tooltip("Bestand downloaden").class("icon","click-action","download-icon").on("click",((e,t)=>{if(!this.classList.contains("error")){const n=t.getAttribute("href");n&&(e.preventDefault(),window.open(n,"_blank"))}})).make())}static getInfoFromFirebase(e,...t){if("beveiligd"!==e||this.CAN_DOWNLOAD_PROTECTED_ATTACHMENTS){const n=[e,...t].join("/"),i=(0,r.IL)(a.mw,n);return Promise.all([(0,r.GO)(i),(0,r.Kq)(i)]).then((([e,t])=>({href:t,name:e.name,contentType:e.contentType??"unknown/unknown",fileType:c.O.fromContentType(e.contentType??"unknown/unknown"),size:e.size,lastModified:new Date(e.updated)}))).catch((e=>{if(!(e instanceof r.Gf))throw e;switch(e.code){case"storage/object-not-found":throw new Error("Kan bestand niet vinden",{cause:"not found"});case"storage/unauthorized":throw new Error("Geen toegang tot bestand",{cause:"missing permissions"});default:throw new Error("Er ging iets mis",{cause:"unknown"})}}))}return Promise.reject(new Error("Geen toegang tot bestand",{cause:"missing permissions"}))}}i=f,f.CAN_DOWNLOAD_PROTECTED_ATTACHMENTS=!1,(0,s.kL)(o.c.Permission.DOWNLOAD_PROTECTED_FILES,(e=>i.CAN_DOWNLOAD_PROTECTED_ATTACHMENTS=e),!0,!0),f.FILE_SIZE_UNITS=["B","kB","MB","GB","TB","PB","YB"],f.FILE_TYPE_ICONS={image:"photo_library",application:"collections_bookmark",audio:"library_music",example:"quiz",font:"font_download",model:"deployed_code",text:"library_books",video:"video_library",unknown:"quiz","compressed-folder":"folder_zip",pdf:"picture_as_pdf"};const p=f;d.c.onDOMContentLoaded().then((()=>customElements.define("multisource-attachment",f))),Error},8828:(e,t,n)=>{"use strict";n.d(t,{c:()=>f});var i,r=n(4296),s=n(3935),o=n(2464),a=n(8144),c=n(6316),l=n(9796),u=n(9848),h=n(908);class d extends HTMLElement{get origin(){return this._origin}set origin(e){e!==this._origin&&(this._origin=e,this.setAttribute("origin",e),this.refresh())}get src(){return this._src}set src(e){e!==this._src&&(this._src=e,this.setAttribute("src",e),this.refresh())}set alt(e){this.image.alt=e}showError(e){this.classList.add("error"),this.image.removeAttribute("src"),this.image.toggleAttribute("hidden",!0),this.errorMessage.lastChild.textContent=e??"Er ging iets mis.",this.errorMessage.removeAttribute("hidden")}refresh(){h.c.markLoadStart(this),("external"===this.origin?Promise.resolve(this.src):"firebase-storage-protected"===this.origin?i.getSrcFromFirebase("beveiligd",this.src):i.getSrcFromFirebase("openbaar",this.src)).then((e=>{this.classList.remove("error"),h.c.markLoadStart(this.image),this.image.addEventListener("error",(()=>{this.showError("Kan afbeelding niet vinden"),h.c.markLoadEnd(this.image)}),{once:!0}),this.image.addEventListener("load",(()=>{const t=!new URL(e).pathname.endsWith(".svg")&&(this.image.naturalWidth>this.sizeWarning||this.image.naturalHeight>this.sizeWarning);this.image.classList.toggle("flashing",t)?this.image.title="Dit bestand is waarschijnlijk te groot, het wordt geadviseerd op een kleiner formaat te gebruiken!":this.image.title="",h.c.markLoadEnd(this.image)}),{once:!0}),this.image.src=e,this.image.removeAttribute("hidden"),this.errorMessage.toggleAttribute("hidden",!0)})).catch((e=>{this.showError(e instanceof Error?e.message:"Er ging iets mis.")})).finally((()=>{h.c.markLoadEnd(this)}))}constructor(e,t,n=1/0){super(),this.initElement(),this._origin=e??c.c.getAttrAs(this,"origin",l.s.checkType)??"firebase-storage-public",this._src=t??this.getAttribute("src")??"",this.sizeWarning=n,this.refresh()}initElement(){this.style.display="flex",this.classList.add("flex-rows","main-axis-center","cross-axis-center"),this.image=this.appendChild(u.c.img().attr("hidden").make()),this.errorMessage=this.appendChild(u.c.div(void 0,"error-message","no-margin","flex-columns","main-axis-center","cross-axis-center","in-section-gap").attr("hidden").children(u.c.p("broken_image").class("icon"),u.c.p().class("no-margin").make()).make())}static getSrcFromFirebase(e,...t){if("beveiligd"!==e||this.CAN_DOWNLOAD_PROTECTED_FILES){const n=[e,...t].join("/"),i=(0,r.IL)(a.mw,n);return Promise.all([(0,r.GO)(i),(0,r.Kq)(i)]).then((([e,t])=>{if(e.contentType?.startsWith("image/"))return t;throw new Error("Bestand is geen afbeelding",{cause:"non-image file"})})).catch((e=>{if(!(e instanceof r.Gf))throw e;switch(e.code){case"storage/object-not-found":throw new Error("Kan afbeelding niet vinden",{cause:"not found"});case"storage/unauthorized":throw new Error("Geen toegang tot afbeelding",{cause:"missing permissions"});default:throw new Error("Er ging iets mis",{cause:"unknown"})}}))}return Promise.reject(new Error("Geen toegang tot afbeelding",{cause:"missing permissions"}))}}i=d,d.CAN_DOWNLOAD_PROTECTED_FILES=!1,(0,s.kL)(o.c.Permission.DOWNLOAD_PROTECTED_FILES,(e=>i.CAN_DOWNLOAD_PROTECTED_FILES=e),!0,!0);const f=d;customElements.define("multisource-image",d)},6e3:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var i=n(9848),r=n(908);class s extends HTMLElement{get type(){return this.getAttribute("type")??s.Type.CURRENT}set type(e){this.setAttribute("type",e),this.input.autocomplete=e}get value(){return this.input.value}set value(e){this.input.value=e}get name(){return this.input.name}set name(e){this.input.name=e}constructor(e=s.Type.CURRENT,t){super(),this.initElement(),this.type=e,t&&(this.input.name=t)}initElement(){this.classList.add("flex-columns","center-content","in-section-gap"),this.input=this.appendChild(i.c.input.password().style({flexGrow:"1"}).autocomplete(this.type).size(32).make()),this.button=this.appendChild(i.c.iconButton("visibility_off",((e,t)=>{this.toggleAttribute("show")?(t.textContent="visibility",t.toggleAttribute("selected",!0),this.input.type="text"):(t.textContent="visibility_off",t.toggleAttribute("selected",!1),this.input.type="password"),this.input.blur()}),"Wachtwoord tonen/verbergen").attr("can-unselect").make())}}!function(e){let t;!function(e){e.NEW="new-password",e.CURRENT="current-password"}(t=e.Type||(e.Type={}))}(s||(s={})),r.c.onDOMContentLoaded().then((()=>customElements.define("password-input",s)));const o=s},2824:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});class i extends Error{constructor(e){super(`placeholder with id "${e}" already exists`)}}class r extends HTMLElement{constructor(e){if(super(),e&&(this.id=e),!this.id)throw new Error("placeholders must have an ID");if(this.id in r.ALL_BY_ID)throw new i(this.id);r.ALL_BY_ID[this.id]=this,new MutationObserver((e=>{for(const t of e)t.target instanceof r&&(t.oldValue&&delete r.ALL_BY_ID[t.oldValue],r.ALL_BY_ID[t.target.id]=t.target)})).observe(this,{attributes:!0,attributeFilter:["id"],attributeOldValue:!0})}replaceWith(...e){super.replaceWith(...e),document.contains(this)||delete r.ALL_BY_ID[this.id]}static replaceWith(e,t){const n=r.ALL_BY_ID[e];if(n)return n.replaceWith(t),t;throw new Error(`no placeholder with id "${e}"`)}static replaceWithMultiple(e,...t){const n=r.ALL_BY_ID[e];if(!n)throw new Error(`no placeholder with id "${e}"`);n.replaceWith(...t)}}r.ALL_BY_ID={};const s=r;customElements.define("place-holder",r)},9368:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var i=n(9848),r=n(908),s=n(6316);class o extends HTMLElement{get value(){return this._value}get checked(){return this._value}set value(e){if(e!==this._value){this._value=e,e?this.setAttribute("on",""):this.removeAttribute("on"),this.indicator&&(this.indicator.textContent=e?"check":"close");for(const t of this.dependants)e!==this.inverted?s.c.enable(t):s.c.disable(t);this.dispatchEvent(new InputEvent("input",{bubbles:!0})),this.dispatchEvent(new Event("change",{bubbles:!0}))}}get disabled(){return this.hasAttribute("disabled")}set disabled(e){this.toggleAttribute("disabled",e)}constructor(e=!1,t,n=!1){super(),this.dependants=[],this.inverted=n||this.hasAttribute("inverted"),t??(t=this.getAttribute("dependants")??void 0),t&&(Array.isArray(t)||(t=[t]),t.forEach((e=>{"string"==typeof e?e.split(",").map((e=>e.trim())).forEach((e=>{const t=document.getElementById(e);t&&this.dependants.push(t)})):this.dependants.push(e)}))),e||(e=this.hasAttribute("on")),[this.value,this._value]=[e,e],this.initElement()}initElement(){this.appendChild(i.c.div(void 0,"knob","click-action").make()),this.indicator=this.appendChild(i.c.h4(this._value?"check":"close").class("icon","indicator").make()),this.addEventListener("click",(()=>this.toggle()))}toggle(){return this.value=!this.value,this.value}}r.c.onDOMContentLoaded().then((()=>customElements.define("switch-input",o)))},1176:(e,t,n)=>{"use strict";n.d(t,{c:()=>R});var i=n(9848),r=n(6316),s=n(992),o=n(9684);class a{static isInStyleTag(e,t){return null!==this.getContainingStyleTag(e,t)}static getContainingStyleTag(e,t){const n=getSelection();if(n&&0!==n.rangeCount){const i=n.getRangeAt(0);return r.c.queryAncestors(i.commonAncestorContainer,`.${e}`,!0).filter((e=>void 0===t||e.getAttribute("value")===t))[0]??null}return null}static makeTempTextNode(e,t=(()=>{}),n=(()=>{})){const r=i.c.text(""),s=()=>{if(0!==r.textContent.replace("","").length){const n=r.textContent.indexOf("");-1!==n&&r.replaceData(n,1,""),t(),e.removeEventListener("keyup",o),e.removeEventListener("focusout",o),e.removeEventListener("input",s)}};e.addEventListener("input",s);const o=t=>{if(!t.defaultPrevented){const i=0===(r.textContent??"").replace("","").length,a=getSelection(),c=null!==a&&0!==a.rangeCount&&a.getRangeAt(0).commonAncestorContainer.contains(r);!i||t instanceof KeyboardEvent&&c||(r.remove(),n(),e.removeEventListener("keyup",o),e.removeEventListener("focusout",o),e.removeEventListener("input",s))}};return e.addEventListener("keyup",o),e.addEventListener("focusout",o),r}static getStyleMap(e,t=a.DEFAULT_VALUES_BY_CLASS[e]){switch(e){case"small":case"big":case"bold":case"italic":case"underlined":case"strikethrough":default:return{};case"text-color":return{color:t};case"background-color":return{backgroundColor:t}}}static applyStyleTag(e,t,n=a.DEFAULT_VALUES_BY_CLASS[t]){let o=!1;s.c.deepReplaceAll(e,"","");const c=getSelection();if(c&&0!==c.rangeCount){const l=c.getRangeAt(0),u=l.collapsed,h=l.commonAncestorContainer,d=r.c.queryAncestors(h,`.${t}`,!0)[0],f=void 0!==d;o=f&&d.getAttribute("value")!==n;let p=Array.from(l.extractContents().childNodes);const g=[];if(f)if(r.c.isChain(d))p.toReversed().forEach((e=>l.insertNode(e))),d.replaceWith(...Array.from(d.childNodes));else{const t=r.c.getChainEnd(d),n=document.createElement("div");l.insertNode(n);const i=Array.from(t.childNodes);d.replaceWith(...Array.from(d.childNodes)),i.forEach((t=>{const i=d.cloneNode();if(u&&n.previousSibling===t){g.push(i),s.c.swap(t,i),i.appendChild(t);const n=i.parentElement.insertBefore(this.makeTempTextNode(e),i.nextSibling);l.selectNode(n),l.collapse()}else s.c.swap(t,i),i.appendChild(t)})),n.parentElement?.replaceWith(...p)}else{const r=i.c.span().class(t).attr("value",n).style(this.getStyleMap(t,n)).children(...p).make();if(l.insertNode(r),0===p.length){const t=r.appendChild(this.makeTempTextNode(e,(()=>{}),(()=>{r.remove(),e.normalize()})));l.selectNode(t),l.collapse()}else l.selectNodeContents(r)}p=p.flatMap((e=>s.c.getLeafNodes(e)));for(const t of a.STYLE_TAG_CLASSES)Array.from(e.getElementsByClassName(t)).forEach((e=>{0!==r.c.queryAncestors(e,`.${t}`).length&&e.replaceWith(...Array.from(e.childNodes))}));let m,y;u&&(m=document.createElement("div"),y=Array.from(l.extractContents().childNodes),l.insertNode(m));for(const t of a.STYLE_TAG_CLASSES)Array.from(e.getElementsByClassName(t)).forEach((e=>{if(!g.includes(e)){let n=e.nextSibling;for(;null!==n&&n.nodeType===Node.TEXT_NODE&&0===n.textContent.length;)n=n.nextSibling;n instanceof Element&&n.classList.contains(t)&&n.getAttribute("value")===e.getAttribute("value")&&(n.prepend(...Array.from(e.childNodes)),e.remove())}}));u&&(l.setStartAfter(m),l.setEndAfter(m),m.replaceWith(...y));const v=e.getElementsByTagName("span");Array.from(v).forEach((e=>{e.textContent||e.remove()})),0!==p.length&&(l.setStartBefore(p[0]),l.setEndAfter(p.at(-1))),e.normalize(),s.c.onEach(e,(e=>{if(e.nodeType===Node.TEXT_NODE&&e.textContent.length>1){const t=e,n=t.textContent.indexOf("");-1!==n&&t.deleteData(n,1)}}))}return o?this.applyStyleTag(e,t,n):this.isInStyleTag(t,n)}}!function(e){e.DEFAULT_VALUES_BY_CLASS={small:null,big:null,bold:null,italic:null,underlined:null,strikethrough:null,"text-color":"#000000","background-color":"#000000"},e.STYLE_TAG_CLASSES=o.c.keys(e.DEFAULT_VALUES_BY_CLASS)}(a||(a={}));const c=a;var l=n(8392),u=n(8440),h=n(4440),d=n(1244),f=n(3236),p=n(3868),g=n(8828),m=n(9368);class y extends HTMLElement{constructor(e){super(),this.src=this.getAttribute("src")??e,this.initElement()}initElement(){this.contents=this.appendChild(document.createElement("iframe")),this.contents.classList.add("contents"),this.contents.src=this.src,this.setAttribute("src",this.src)}}customElements.define("iframe-container",y);var v=n(908),E=n(4388),w=n(7936),_=n(3935),b=n(928),T=n(1724),S=n(2464),A=n(9560),I=n(8144),C=n(5752),k=n(8036),x=n(8356);class D extends HTMLElement{constructor(){super(),this.initElement()}initElement(){this.classList.add("boxed","flex-rows","center-content","in-section-gap"),this.appendChild(i.c.div(void 0,"flex-columns","main-axis-space-between","cross-axis-center","min-section-gap").children(i.c.p("Anonieme suggestie?").class("italic","no-margin"),this.anonymousSwitch=new m.c(!1)).make()),this.anonymousSwitch.addEventListener("input",(()=>this.feedbackText.lastElementChild.toggleAttribute("hidden",this.anonymousSwitch.value))),this.subjectInput=this.appendChild(i.c.input.text().class("subject-input").attr("invalid").placeholder("Onderwerp...").maxLength(128).make()),this.bodyInput=this.appendChild(i.c.textarea().class("message-input").attr("invalid").placeholder("Bericht...").maxLength(5096).attr("no-resize").make()),this.submitButton=this.appendChild(i.c.button().class("flex-columns","cross-axis-center","in-section-gap").attr("disabled").children(i.c.h4("Versturen"),i.c.h4("send").class("icon")).make()),this.feedbackText=this.appendChild(i.c.div(void 0,"feedback","flex-rows","center-content","in-section-gap","section-padding").attr("hidden").children(i.c.h4("Bedankt voor je suggestie!").class("no-margin"),i.c.h4("We zullen z.s.m. contact met je opnemen.").class("subtitle","no-margin")).make()),Promise.all([(0,I.iA)(),(0,_.qM)(S.c.Permission.CREATE_IDEA_BOX_SUBMISSIONS)]).then((([e,t])=>{e?t.CREATE_IDEA_BOX_SUBMISSIONS?(this.addEventListener("input",(()=>{this.submitButton.disabled=!this.subjectInput.value||!this.bodyInput.value,this.subjectInput.toggleAttribute("invalid",0===this.subjectInput.value.length),this.bodyInput.toggleAttribute("invalid",0===this.bodyInput.value.length)})),this.submitButton.addEventListener("click",(()=>{this.submitButton.disabled=!0,D.USER_DB.getById(e.uid).then((t=>{if(t){const n=new T.O(k.c.generateID(),this.anonymousSwitch.value?"anonymous":{id:e.uid,name:`${t?.first_name} ${t?.family_name}`},new Date,this.subjectInput.value,this.bodyInput.value);D.SUBMISSION_DB.write(n).then((()=>{this.childNodes.forEach((e=>{e instanceof HTMLElement&&(e.hidden=!0),this.feedbackText.hidden=!1}))})).catch((e=>{C.c.error((0,w.c)(e)),this.submitButton.disabled=!1}))}else C.c.error((0,w.c)(void 0)),this.submitButton.disabled=!1})).catch((e=>{C.c.error((0,w.c)(e)),this.submitButton.disabled=!1}))}))):(this.anonymousSwitch.disabled=this.subjectInput.disabled=this.bodyInput.disabled=!0,this.submitButton.firstChild.textContent="Versturen niet mogelijk",this.submitButton.lastChild.textContent="cancel_schedule_send"):(this.anonymousSwitch.disabled=this.subjectInput.disabled=this.bodyInput.disabled=!0,this.submitButton.firstChild.textContent="Log in om te gebruiken",this.submitButton.lastChild.textContent="login",this.submitButton.addEventListener("click",(()=>location.href=x.c.createLinkBackURL("/inloggen.html",location.href).toString())))}))}}D.SUBMISSION_DB=new b.c,D.USER_DB=new A.c;const N=D;customElements.define("idea-box",D);class L extends HTMLElement{set isCompact(e){this.toggleAttribute("compact",e)}get isCompact(){return this.hasAttribute("compact")}get value(){return f.c.serialize(this.body)}set value(e){this.selectedElement=null,s.c.empty(this.body);const t=f.c.deserialize(e);for(const e of t)e instanceof HTMLElement?this.insert(L.inferSectionName(e),e,[this.body,1/0]):e.nodeType===Node.TEXT_NODE?this.insert("paragraph",i.c.p(e.textContent).make(),[this.body,1/0]):this.body.appendChild(e)}get placeholder(){return this.style.getPropertyValue("--placeholder")}set placeholder(e){this.style.setProperty("--placeholder",`"${e}"`)}set selectedElement(e){const t=this._selectedElement;t?.removeAttribute("selected"),this._selectedElement=e,e?.toggleAttribute("selected",!0)}get selectedElement(){return this.body.contains(this._selectedElement)||(this.selectedElement=null),this._selectedElement}get insertionPosition(){if(this.selectedElement){let e=this.selectedElement;for(;e.parentNode!==this.body;)e=e.parentNode;return[this.body,s.c.getChildIndex(this.body,e)+1]}return[this.body,1/0]}insert(e,t,n){let r;if(t.setAttribute("do-serialize",""),t.setAttribute("type",e),t instanceof HTMLAnchorElement)r=i.c.div(void 0,"specialized-container","element-container","flex-rows","in-section-gap").children((()=>{const e=[t];i.c.input.url(t.getAttribute("href")??"").onValueChanged((e=>t.href=e)).placeholder("Koppeling...").onMake((t=>e.push(t))).make();const n=new m.c("_blank"===t.target);return n.addEventListener("input",(()=>{n.value?t.setAttribute("target","_blank"):t.removeAttribute("target")})),e.push(i.c.div(void 0,"flex-columns","cross-axis-center","in-section-gap").children(i.c.label("In nieuw tabblad openen?"),n).make()),e})).make();else if("MULTISOURCE-ATTACHMENT"===t.tagName||"MULTISOURCE-IMAGE"===t.tagName){const e=t;r=i.c.div(void 0,"specialized-container","element-container","flex-rows","in-section-gap").children((()=>{const n=[t];let r;i.c.div(void 0,"origin-selector","flex-columns","cross-axis-center","in-section-gap").children(i.c.label("Bron"),r=i.c.select({"firebase-storage-public":"Firebase cloud-opslag (openbaar)","firebase-storage-protected":"Firebase cloud-opslag (beveiligd)",external:"Directe link"}).value(e.getAttribute("origin")).onValueChanged((t=>{e.origin=t,o.placeholder="external"===t?"Link naar bestand...":"Bestandspad..."})).make()).onMake((e=>n.push(e))).make();const s=()=>e.src=o.value,o=i.c.input.text().class("src-input").placeholder("Bestandspad...").value(e.getAttribute("src")??"").on("input",(()=>{h.c.setDelayedCallback(s,500)})).onMake((e=>n.push(e))).make();if("MULTISOURCE-IMAGE"===t.tagName){let e;i.c.div(void 0,"width-selector","flex-columns","cross-axis-center","in-section-gap").children(e=i.c.label(`Breedte (${t.style.width||"100%"})`).make(),i.c.input.range(d.c.parse(t.style.width.slice(0,-1),100),0,100,1).onValueChanged((n=>{t.style.width=`${n}%`,e.textContent=`Breedte (${n}%)`}))).onMake((e=>n.push(e))).make()}return n})).make()}else"IDEA-BOX"===t.tagName?(t.style.pointerEvents="none",r=t):r=t;r.style.flexGrow="1";const o=i.c.div(void 0,"element-container","flex-columns","main-axis-space-between","cross-axis-center","in-section-gap").children(r,i.c.div(void 0,"controls","flex-columns","in-section-gap").children(i.c.iconButton("move_up",(()=>{o.previousElementSibling&&s.c.swap(o,o.previousElementSibling)}),"Naar boven"),i.c.iconButton("move_down",(()=>{o.nextElementSibling&&s.c.swap(o,o.nextElementSibling)}),"Naar beneden"),i.c.iconButton("remove",(()=>o.remove()),"Verwijderen"))).make();if(function(e,...t){const[n,i]=e;if(i<=0)for(const e of t)n.insertBefore(e,n.firstChild);else if(i>=n.childNodes.length)for(const e of t)n.appendChild(e);else for(const e of t)n.insertBefore(e,n.childNodes[i])}(n,o),L.ALL_TEXT.includes(e)&&(t.classList.add("text-input"),t.setAttribute("contenteditable","plaintext-only"),t.setAttribute("supports-style-tags",""),t.addEventListener("keydown",(e=>{r.textContent||"Backspace"!==e.key||o.remove()})),t.focus()),e in L.EXCLUDED_INSERTABLE_SUBSECTIONS){t.setAttribute("insertion-target","");const n=s.c.extractChildren(t);for(const e of n)e instanceof HTMLElement?this.insert(L.inferSectionName(e),e,[t,1/0]):t.appendChild(e);t.prepend(this.makeSectionTypes((()=>{if(this.selectedElement&&t.contains(this.selectedElement)){let e=this.selectedElement;for(;e.parentNode!==t;)e=e.parentNode;return[t,s.c.getChildIndex(t,e)+1]}return[t,1/0]}),L.EXCLUDED_INSERTABLE_SUBSECTIONS[e]))}}stylableElementSelected(){const e=getSelection();if(e&&0!==e.rangeCount){const t=e.getRangeAt(0);return this.body.contains(t.commonAncestorContainer)&&0!==r.c.queryAncestors(t.commonAncestorContainer,"[supports-style-tags]",!0).length}return!1}constructor(e){super(),this._selectedElement=null,this.initElement(),void 0!==e&&(this.value=e)}makeStyleTagToggle(e,t,n,r,s){const o=()=>{s&&c.isInStyleTag(s)&&c.applyStyleTag(this.body,s),c.applyStyleTag(this.body,e)},a=i.c.iconButton(t,((e,t)=>{t.hasAttribute("disabled")||o()}),n).attr("can-unselect").attr("disabled").onMake((t=>{const n=()=>{t.toggleAttribute("disabled",!this.stylableElementSelected()||!this.body.contains(document.activeElement)),t.toggleAttribute("selected",c.isInStyleTag(e)&&this.body.contains(document.activeElement))};document.addEventListener("selectionchange",n),document.addEventListener("focusout",n)})).make();return r&&this.addEventListener("keydown",(e=>{(!r[1]||"alt"===r[1]&&e.altKey||"ctrl"===r[1]&&e.ctrlKey||"shift"===r[1]&&e.shiftKey)&&e.key.toLowerCase()===r[0].toLowerCase()&&!a.hasAttribute("disabled")&&(e.preventDefault(),o())})),a}makeColorBulb(e,t){return i.c.div().class("color-bulb","click-action","center-content").attr("value",e).children(i.c.p("").class("color-bulb-indicator","no-margin").style({color:e})).on("click",(()=>t(e)))}makeColorPicker(e,t,n,r){return i.c.folderElement("down",250,!0).heading(i.c.p(t).class("icon").tooltip(n)).class("color-picker","category").attr("disabled").noFocus().canSelect(!1).children(i.c.div(void 0,"color-category","flex-columns").children(...d.c.range(L.PICKER_BASE_COLORS.length-1,0,1,!0).map((t=>this.makeColorBulb(u.c.mix("#000000","#ffffff",t/(L.PICKER_BASE_COLORS.length-1)),e)))),i.c.div(void 0,"color-category","flex-columns").children(...L.PICKER_BASE_COLORS.map((t=>this.makeColorBulb(t,e)))),...L.PICKER_SHADE_RATIOS.map((t=>i.c.div(void 0,"color-category","flex-columns").children(...L.PICKER_BASE_COLORS.map((n=>this.makeColorBulb(u.c.mix(n,"#ffffff",t),e)))))),...L.PICKER_SHADE_RATIOS.toReversed().map((t=>i.c.div(void 0,"color-category","flex-columns").children(...L.PICKER_BASE_COLORS.map((n=>this.makeColorBulb(u.c.mix(n,"#000000",t),e))))))).onMake((e=>{const t=()=>{const t=c.getContainingStyleTag(r)?.getAttribute("value")?.toLowerCase();Array.from(e.getElementsByClassName("color-bulb")).forEach((e=>{const n=e.getAttribute("value");e.toggleAttribute("selected",n===t)})),e.heading.style.color=t??"#000000",e.toggleAttribute("disabled",!this.stylableElementSelected()||!this.body.contains(document.activeElement))};document.addEventListener("selectionchange",t),document.addEventListener("focusout",t)})).make()}initElement(){let e,t;this.classList.add("boxed","flex-rows","cross-axis-center","section-gap"),this.toolbar=this.appendChild(i.c.div(void 0,"toolbar","flex-columns","main-axis-space-evenly","section-gap").canSelect(!1).children(i.c.div(void 0,"styling","flex-columns","in-section-gap").children(this.makeStyleTagToggle("small","text_decrease","Kleiner (ctrl+<)",["<","ctrl"],"big"),this.makeStyleTagToggle("big","text_increase","Groter (ctrl+>)",[">","ctrl"],"small"),this.makeStyleTagToggle("bold","format_bold","Dikgedrukt (ctrl+b)",["b","ctrl"]),this.makeStyleTagToggle("italic","format_italic","Cursief (ctrl+i)",["i","ctrl"]),this.makeStyleTagToggle("underlined","format_underlined","Onderstreept (ctrl+u)",["u","ctrl"]),this.makeStyleTagToggle("strikethrough","format_strikethrough","Doorgestreept (ctrl+s)",["s","ctrl"]),this.makeColorPicker((e=>c.applyStyleTag(this.body,"text-color",e)),"format_color_text","Tekstkleur","text-color"),this.makeColorPicker((e=>c.applyStyleTag(this.body,"background-color",e)),"format_ink_highlighter","Markeringskleur","background-color"),e=i.c.folderElement("down",250).class("category").tooltip("Tekst uitlijnen").heading(i.c.p("format_align_justify").class("icon")).children(i.c.div(void 0,"flex-columns").children(...t=[i.c.iconButton("format_align_left",(()=>{}),"Links uitlijnen").attr("selected").attr("value","align-left").make(),i.c.iconButton("format_align_center",(()=>{}),"Centreren").attr("value","align-center").make(),i.c.iconButton("format_align_right",(()=>{}),"Rechts uitlijnen").attr("value","align-right").make(),i.c.iconButton("format_align_justify",(()=>{}),"Spreiden").attr("value","align-justify").make()])).onMake((n=>{for(const n of t)n.addEventListener("click",(i=>{for(const e of t)e.toggleAttribute("selected",n===e);e.heading.textContent=n.textContent,this.selectedElement&&(this.selectedElement.classList.remove(...t.map((e=>e.getAttribute("value")))),this.selectedElement.classList.add(n.getAttribute("value")))}))})).make()),this.makeSectionTypes((()=>this.insertionPosition))).make()),this.body=this.appendChild(i.c.div(void 0,"body","rich-text","flex-rows").on("focusin",(n=>{let i=n.target;if(i instanceof HTMLElement){let n=i;for(;!n.hasAttribute("do-serialize");){const e=n.querySelector("[do-serialize]");if(e instanceof HTMLElement)n=e;else{if(!n.parentElement){n=null;break}n=n.parentElement}}if(this.selectedElement=n,this.selectedElement){for(const e of t)e.removeAttribute("selected");const n=t.find((e=>this.selectedElement.classList.contains(e.getAttribute("value"))));n?.setAttribute("selected",""),e.heading.textContent=n?.textContent??"format_align_left"}}})).on("input",(()=>{const e=this.body.getElementsByTagName("span");Array.from(e).forEach((e=>{e.textContent||e.remove()}))})).make()),document.addEventListener("focusin",(e=>{e.target instanceof Node&&!this.contains(e.target)&&(this.selectedElement=null)})),document.addEventListener("scroll",(()=>{requestAnimationFrame((()=>{const e=this.toolbar.getBoundingClientRect(),t=this.getBoundingClientRect();this.toolbar.style.top=E.c.isSlimmerOrEq(E.c.Viewport.DESKTOP_SLIM)?`clamp(var(--in-section-gap), calc(${-t.top}px + 4rem), calc(${t.height-e.height}px - var(--in-section-gap) / 2))`:`clamp(var(--in-section-gap), ${-t.top}px, calc(${t.height-e.height}px - var(--in-section-gap) / 2))`}))})),new ResizeObserver((()=>requestAnimationFrame((()=>{this.style.paddingTop=`calc(${this.toolbar.getBoundingClientRect().height}px + 2 * var(--in-section-gap))`})))).observe(document.body)}makeSectionTypes(e,t=[]){return i.c.div(void 0,"section-types","flex-columns","cross-axis-center","in-section-gap","no-bullet").canSelect(!1).children(!t.includes("shortcut")&&i.c.iconButton("add_link",(()=>{this.insert("shortcut",i.c.a().class("align-justify").style({fontSize:"16px"}).make(),e())}),"Snelkoppeling toevoegen"),!t.includes("attachment")&&i.c.iconButton("attach_file_add",(()=>{const t=new p.c;t.classList.add("align-justify"),this.insert("attachment",t,e())}),"Bijlage toevoegen"),!t.includes("image")&&i.c.iconButton("add_photo_alternate",(()=>{const t=new g.c;t.classList.add("align-center"),this.insert("image",t,e())}),"Afbeelding toevoegen"),!l.c.includesAll(t,...L.ALL_HEADERS)&&i.c.folderElement().class("category").foldDir("down").closingDelay(250).heading((n=>t.includes("title")?n.contents.firstElementChild:i.c.iconButton("title",(()=>{this.insert("title",i.c.h1().class("title","align-justify").style({fontSize:"40px"}).make(),e())}),"Titel toevoegen"))).children(!t.includes("h1")&&i.c.iconButton("format_h1",(()=>{this.insert("h1",i.c.h1().class("align-justify").style({fontSize:"32px"}).make(),e())}),"Nieuwe kop 1"),!t.includes("h2")&&i.c.iconButton("format_h2",(()=>{this.insert("h2",i.c.h2().class("align-justify").style({fontSize:"24px"}).make(),e())}),"Nieuwe kop 2"),!t.includes("h3")&&i.c.iconButton("format_h3",(()=>{this.insert("h3",i.c.h3().class("align-justify").style({fontSize:"18.5px"}).make(),e())}),"Nieuwe kop 3")).tooltip("Nieuwe kop/titel"),!t.includes("paragraph")&&i.c.iconButton("subject",(()=>{this.insert("paragraph",i.c.p().class("align-justify").style({fontSize:"16px"}).make(),e())}),"Nieuwe paragraaf"),!t.includes("list")&&i.c.iconButton("format_list_bulleted",(()=>{this.insert("list",i.c.ul().make(),e())}),"Nieuwe lijst"),!t.includes("numbered-list")&&i.c.iconButton("format_list_numbered",(()=>{this.insert("numbered-list",i.c.ol().make(),e())}),"Nieuwe genummerde lijst"),!l.c.includesAll(t,...L.ALL_WIDGETS)&&i.c.folderElement("down",250).class("category").heading(i.c.p("widgets").class("icon").tooltip("Widgets")).children(!t.includes("newspaper")&&i.c.iconButton("newspaper",(()=>{const t=new y(L.NEWSPAPER_SRC);t.classList.add("newspaper"),t.classList.add("align-center"),this.insert("newspaper",t,e())}),"Verenigingsblad toevoegen"),!t.includes("idea-box")&&i.c.iconButton("emoji_objects",(()=>{const t=new N;t.classList.add("align-center"),this.insert("idea-box",t,e())}),"Ideenbox toevoegen"))).make()}}L.PICKER_BASE_COLORS=["#FF0000","#FF8700","#FFD300","#DEFF0A","#A1FF0A","#0AFF99","#0AEFFF","#147DF5","#580AFF","#BE0AFF"],L.PICKER_SHADE_RATIOS=[.25,.5,.75],function(e){const t=["shortcut","attachment","image","title","h1","h2","h3","paragraph","list","numbered-list","newspaper","idea-box"];e.isRichTextSectionName=function(e){return t.some((t=>e===t))},e.ALL_HEADERS=["title","h1","h2","h3"],e.ALL_TEXT=[...e.ALL_HEADERS,"paragraph","shortcut"],e.ALL_WIDGETS=["newspaper","idea-box"],e.NEWSPAPER_SRC="https://www.bladnl.nl/bladen/tblaadje/pluginfull",e.EXCLUDED_INSERTABLE_SUBSECTIONS={list:["list","numbered-list"],"numbered-list":["list","numbered-list"]},e.inferSectionName=function(e){if("A"===e.tagName)return"shortcut";if("MULTISOURCE-ATTACHMENT"===e.tagName)return"attachment";if("MULTISOURCE-IMAGE"===e.tagName)return"image";if(e instanceof HTMLHeadingElement)return"H1"===e.tagName?e.classList.contains("title")?"title":"h1":"H2"===e.tagName?"h2":"h3";if(e instanceof HTMLParagraphElement)return"paragraph";if(e instanceof HTMLUListElement)return"list";if(e instanceof HTMLOListElement)return"numbered-list";if("IFRAME-CONTAINER"===e.tagName&&e.classList.contains("newspaper"))return"newspaper";if("IDEA-BOX"===e.tagName)return"idea-box";throw Error(`could not infer section type of ${e.outerHTML}`)}}(L||(L={}));const R=L;v.c.onDOMContentLoaded().then((()=>customElements.define("rich-text-input",L)))},3236:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var i=n(992),r=n(1176);const s=["onfullscreenchange","onfullscreenerror","onabort","onanimationcancel","onanimationend","onanimationiteration","onanimationstart","onauxclick","onbeforeinput","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncompositionend","oncompositionstart","oncompositionupdate","oncontextmenu","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onformdata","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectionchange","onselectstart","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel"];class o{static escape(e){for(const t in this.ESCAPE_CONFIG)e=e.replaceAll(t,this.ESCAPE_CONFIG[t]);return e}static unescape(e){for(const t in this.ESCAPE_CONFIG)e=e.replaceAll(this.ESCAPE_CONFIG[t],t);return e}static serialize(e){let t="";return e.childNodes.forEach((e=>{const n=this.finalize(e);for(const e of n)t+=e instanceof Element?e.outerHTML:e.textContent??""})),t}static getStrippedClone(e){const t=e.cloneNode();for(;0!==t.attributes.length;)t.removeAttribute(t.attributes[0].name);for(;t.firstChild;)t.firstChild.remove();return["left","center","right","justify"].forEach((n=>{e.classList.contains(`align-${n}`)&&t.classList.add(`align-${n}`)})),t}static finalize(e){if(e.nodeType===Node.TEXT_NODE)return[document.createTextNode(e.textContent??"")];if(e instanceof HTMLElement){if(e.hasAttribute("do-serialize")){const t=e.getAttribute("type"),n=this.getStrippedClone(e);if(t&&r.c.isRichTextSectionName(t)){switch(t){case"attachment":case"image":return n.setAttribute("origin",e.getAttribute("origin")??"firebase-storage-public"),n.setAttribute("src",e.getAttribute("src")??""),n.style.width=e.style.width,[n];case"title":n.classList.add("title");case"shortcut":e.hasAttribute("href")&&n.setAttribute("href",e.getAttribute("href")),"_blank"===e.getAttribute("target")&&n.setAttribute("target","_blank");case"h1":case"h2":case"h3":case"paragraph":return e.childNodes.forEach((e=>n.appendChild(e.cloneNode(!0)))),i.c.onEach(n,(e=>{e instanceof Element&&e.removeAttribute("value")})),e.style.fontSize&&(n.style.fontSize=e.style.fontSize),n.innerHTML=n.innerHTML.replaceAll("\n","<br>"),[n];case"list":case"numbered-list":return e.childNodes.forEach((e=>n.append(...this.finalize(e)))),[n];case"newspaper":return n.setAttribute("src",e.getAttribute("src")??""),n.classList.add("newspaper"),[n];case"idea-box":return[n]}throw new o.SerializationError(`no finalization implementation found for section type "${t}"`)}throw null===t?new o.SerializationError("element was marked with do-serialize attribute, but no type was provided."):new o.SerializationError(`unrecognized section type "${t}".`)}return e.classList.contains("element-container")?Array.from(e.childNodes).filter((e=>e instanceof Element&&(e.hasAttribute("do-serialize")||e.classList.contains("element-container")))).flatMap((e=>this.finalize(e))):[]}throw new o.SerializationError("given node is not a text, nor an element.")}static deserialize(e){try{const t=(new DOMParser).parseFromString(e,"text/html");return i.c.onEach(t,(e=>{e instanceof Element&&("SCRIPT"===e.tagName?e.remove():e instanceof HTMLAnchorElement&&e.addEventListener("click",(()=>{e.href&&!e.hasAttribute("download")&&("_blank"===e.target?open(e.href):location.href=e.href)})),s.forEach((t=>e.removeAttribute(t))),Array.from(e.attributes).forEach((t=>{t.value.toLowerCase().includes("javascript:")&&e.removeAttribute(t.name)})))})),Array.from(t.body.childNodes)}catch(e){throw new o.DeserializationError(e instanceof Error?e.message:"unknown cause")}}}o.ESCAPE_CONFIG={"<":"&lt;",">":"&gt;",'"':"&quot;","=":"&#61;"},function(e){class t extends Error{constructor(e){super(`failed to serialize: ${e}`)}}e.SerializationError=t;class n extends Error{constructor(e){super(`failed to deserialize: ${e}`)}}e.DeserializationError=n}(o||(o={}));const a=o},7936:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var i=n(8824);const r="Er ging iets mis, probeer het later opnieuw.",s={"auth/invalid-credential":"Onjuiste inloggegevens, check je e-mailadres en/of wachtwoord.","auth/email-already-in-use":"Er is al een account geregistreerd met dat e-mailadres, gebruik a.u.b. een andere.","auth/insufficient-permission":"Je hebt geen toestemming om dit te doen.","auth/invalid-email":"Het gegeven e-mailadres is ongeldig.","auth/too-many-requests":"Te veel inlogpogingen, probeer het later opnieuw.","already-exists":"Bestand bestaat al.",cancelled:"Geannuleerd.","not-found":"Het opgevraagde bestand bestaat niet (meer).","permission-denied":"Je bent niet gemachtigd om dit uit te voeren.",unauthenticated:"Je identiteit kon niet geverifieerd worden. Probeer (opnieuw) in te loggen.",unavailable:"Onze database is momenteel niet beschikbaar, probeer het later opnieuw.",unknown:r};function o(e){return console.log(e),e&&e instanceof i.kx?(console.log(e.code),e.code in s?s[e.code]:r):r}},3935:(e,t,n)=>{"use strict";n.d(t,{kL:()=>h,qM:()=>u});var i=n(8144),r=n(9560),s=n(9928),o=n(9684);function a(e){return Array.isArray(e)?e:[e]}n(908);const c=new r.c;function l(e,t,n){if(n){const n=s.c.get(`permissions-${t}`);return null===n?Promise.reject(new Error(`useCache is true, but permissions of user ${t} are not in the cache`)):Promise.resolve(o.c.mapToObject(e,(e=>n.includes(e))))}return c.getById(t).then((t=>{const n=t?.permissions??[];return o.c.mapToObject(e,(e=>n.includes(e)))}))}function u(e,t=!1){const n=a(e);return(0,i.iA)().then((e=>e?t?l(n,e.uid,!0).catch((()=>l(n,e.uid,!1))):l(n,e.uid,!1):o.c.mapToObject(n,(e=>!1))))}function h(e,t,n=!1,r=!0,s="all"){const c=a(e);(0,i.iA)().then((i=>{Array.isArray(e)&&0===e.length?t(!0,o.c.mapToObject(e,(()=>!1))):i?(n&&l(c,i.uid,!0).then((e=>t("all"===s?o.c.every(e,((e,t)=>t)):o.c.some(e,((e,t)=>t)),e))).catch((()=>{r||t(!1,o.c.mapToObject(c,(()=>!1)))})),n&&!r||l(c,i.uid,!1).then((e=>t("all"===s?o.c.every(e,((e,t)=>t)):o.c.some(e,((e,t)=>t)),e))).catch(console.error)):t(!1,o.c.mapToObject(c,(()=>!1)))})).catch(console.error)}},7632:(e,t,n)=>{"use strict";n.d(t,{S:()=>i,c:()=>r});class i{constructor(e,t){this.id=e,this.components=t}getComponent(e){return e instanceof i.Component?this.components.find((t=>t===e)):this.components.find((t=>t instanceof e))}hasComponent(e){return void 0!==this.getComponent(e)}satisfies(e){return!(e.id&&this.id!==e.id||e.notId&&this.id===e.notId||0===e.limit)}equals(e){return e.id===this.id}}!function(e){e.Component=class{validate(e){return this.dependencies.every((t=>e.components.some((e=>e instanceof t))))&&this.validateValues(e)}canBeRemovedFrom(e){return e.hasComponent(this.Class)&&!e.components.some((e=>e.dependencies.some((e=>this instanceof e))))}canBeAddedTo(e){return this.dependencies.every((t=>e.hasComponent(t)))&&!e.hasComponent(this.Class)}}}(i||(i={}));class r{constructor(){this.writeHandlers=[],this.deleteHandlers=[]}set onWrite(e){this.writeHandlers.push(e)}write(...e){return this.doWrite(...e).then((t=>(this.writeHandlers.forEach((t=>t(...e))),t)))}set onDelete(e){this.deleteHandlers.push(e)}delete(...e){return this.doDelete(...e).then((t=>(this.deleteHandlers.forEach((t=>t(...e))),t)))}}},2464:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var i,r=n(8392),s=n(9684);!function(e){let t;!function(e){e.UPDATE_SETTINGS="UPDATE_SETTINGS",e.READ_MEMBER_ARTICLES="READ_MEMBER_ARTICLES",e.CREATE_ARTICLES="CREATE_ARTICLES",e.UPDATE_ARTICLES="UPDATE_ARTICLES",e.DELETE_ARTICLES="DELETE_ARTICLES",e.UPLOAD_FILES="UPLOAD_FILES",e.DOWNLOAD_PROTECTED_FILES="DOWNLOAD_PROTECTED_FILES",e.CREATE_IDEA_BOX_SUBMISSIONS="CREATE_IDEA_BOX_SUBMISSIONS",e.READ_IDEA_BOX_SUBMISSIONS="READ_IDEA_BOX_SUBMISSIONS",e.CREATE_EVENTS="CREATE_EVENTS",e.UPDATE_EVENTS="UPDATE_EVENTS",e.DELETE_EVENTS="DELETE_EVENTS",e.REGISTER_FOR_EVENTS="REGISTER_FOR_EVENTS",e.DEREGISTER_FOR_EVENTS="DEREGISTER_FOR_EVENTS",e.READ_EVENT_COMMENTS="READ_EVENT_COMMENTS",e.UPDATE_OWN_USER_INFO="UPDATE_OWN_USER_INFO",e.UPDATE_OWN_PERMISSIONS="UPDATE_OWN_PERMISSIONS",e.READ_OTHER_USER_INFO="READ_OTHER_USER_INFO",e.UPDATE_OTHER_USER_INFO="UPDATE_OTHER_USER_INFO",e.UPDATE_OTHER_USER_PERMISSIONS="UPDATE_OTHER_USER_PERMISSIONS",e.VIEW_ADMIN_PANEL="VIEW_ADMIN_PANEL"}(t=e.Permission||(e.Permission={})),e.ALL=Object.values(t),Object.freeze(e.ALL);const n={[t.UPDATE_SETTINGS]:"Site-instellingen aanpassen",[t.READ_MEMBER_ARTICLES]:"Berichten voor leden lezen",[t.CREATE_ARTICLES]:"Berichten plaatsen",[t.DELETE_ARTICLES]:"Berichten verwijderen",[t.UPDATE_ARTICLES]:"Berichten bewerken",[t.UPLOAD_FILES]:"Bestanden uploaden",[t.DOWNLOAD_PROTECTED_FILES]:"Beveiligde bestanden downloaden",[t.CREATE_EVENTS]:"Activiteiten toevoegen",[t.UPDATE_EVENTS]:"Activiteit-info bewerken",[t.DELETE_EVENTS]:"Activiteiten verwijderen",[t.REGISTER_FOR_EVENTS]:"Inschrijven voor activiteiten",[t.DEREGISTER_FOR_EVENTS]:"Uitschrijven van activiteiten",[t.READ_EVENT_COMMENTS]:"Inschrijvingsdetails lezen",[t.CREATE_IDEA_BOX_SUBMISSIONS]:"Ideenbox gebruiken",[t.READ_IDEA_BOX_SUBMISSIONS]:"Ideenbox suggesties lezen",[t.UPDATE_OWN_USER_INFO]:"Account-info van henzelf bewerken",[t.UPDATE_OWN_PERMISSIONS]:"Account-machtigingen van henzelf bewerken",[t.READ_OTHER_USER_INFO]:"Account-info van anderen zien",[t.UPDATE_OTHER_USER_INFO]:"Account-info van anderen bewerken",[t.UPDATE_OTHER_USER_PERMISSIONS]:"Account-machtigingen van anderen bewerken",[t.VIEW_ADMIN_PANEL]:"Administratie-paneel zien"};Object.freeze(n),e.translate=function(e){const t=n[e];if(void 0===t)throw new Error(`unknown permission: "${e}"`);return t},e.PRESETS={Lid:[t.READ_MEMBER_ARTICLES,t.DOWNLOAD_PROTECTED_FILES,t.REGISTER_FOR_EVENTS,t.DEREGISTER_FOR_EVENTS,t.CREATE_IDEA_BOX_SUBMISSIONS],Administrateur:[t.UPDATE_SETTINGS,t.READ_MEMBER_ARTICLES,t.CREATE_ARTICLES,t.UPDATE_ARTICLES,t.DELETE_ARTICLES,t.UPLOAD_FILES,t.DOWNLOAD_PROTECTED_FILES,t.READ_IDEA_BOX_SUBMISSIONS,t.CREATE_EVENTS,t.UPDATE_EVENTS,t.DELETE_EVENTS,t.READ_EVENT_COMMENTS,t.UPDATE_OWN_USER_INFO,t.READ_OTHER_USER_INFO,t.UPDATE_OTHER_USER_INFO,t.UPDATE_OTHER_USER_PERMISSIONS,t.VIEW_ADMIN_PANEL]},s.c.deepFreeze(e.PRESETS),e.getPreset=function(t){for(const n in e.PRESETS){const i=n;if(r.c.containSame(t,e.PRESETS[i]))return i}}}(i||(i={}));const o=i},928:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var i=n(4112),r=n(8144),s=n(1724);class o extends s.c{get(e){return o.getSubmissions({...e})}count(e){return o.getSubmissions({...e},!0)}doWrite(...e){const t=(0,i.sv)(r.AZ);for(const n of e)t.set((0,i.UN)(r.AZ,"idea-box-submissions",n.id),o.COLLECTION.converter.toFirestore(n));return t.commit().then((()=>e.length))}doDelete(...e){const t=(0,i.sv)(r.AZ);for(const n of e)t.delete((0,i.UN)(r.AZ,"idea-box-submissions",n.id));return t.commit().then((()=>e.length))}getById(e){const t=(0,i.UN)(o.COLLECTION,e);return(0,i.i4)(t).then((e=>e.exists()?e.data():void 0))}static getSubmissions(e,t=!1){const n=[];e.limit&&n.push((0,i.Yf)(e.limit)),e.id&&n.push((0,i.A9)((0,i.ET)(),"==",e.id)),e.notId&&n.push((0,i.A9)((0,i.ET)(),"!=",e.notId)),e.sortByCreatedAt&&n.push((0,i.k$)("created_at","ascending"===e.sortByCreatedAt?"asc":"desc")),e.before&&n.push((0,i.A9)("created_at","<",i.kR.fromDate(e.before))),e.after&&n.push((0,i.A9)("created_at",">",i.kR.fromDate(e.after))),void 0!==e.isAnonymous&&n.push((0,i.A9)("author",e.isAnonymous?"==":"!=","anonymous"));const r=(0,i.kt)(this.COLLECTION,...n);return t?(0,i.QL)(r).then((e=>e.data().count)):(0,i.uY)(r).then((e=>{const t=[];return e.forEach((e=>t.push(e.data()))),t}))}}o.COLLECTION=(0,i.oV)(r.AZ,"idea-box-submissions").withConverter({toFirestore:e=>({author:e.author,created_at:i.kR.fromDate(e.created_at),subject:e.subject,body:e.body}),fromFirestore(e){const t=e.data();return new s.O(e.id,t.author,t.created_at.toDate(),t.subject,t.body)}});const a=o},1724:(e,t,n)=>{"use strict";n.d(t,{O:()=>s,c:()=>o});var i=n(9684),r=n(7632);class s extends r.S{constructor(e,t,n,i,r){super(e,[]),this.author=t,this.created_at=n,this.subject=i,this.body=r}copy(){return new s(this.id,"string"==typeof this.author?this.author:{...this.author},new Date(this.created_at),this.subject,this.body)}satisfies(e){return super.satisfies(e)&&void 0!==e.before&&this.created_at<e.before&&void 0!==e.after&&e.after<this.created_at&&(!0!==e.isAnonymous||"anonymous"===this.author)&&(!1!==e.isAnonymous||"anonymous"!==this.author)}equals(e){return super.equals(e)&&i.c.deepEquals(e.author,this.author)&&e.body===this.body&&e.created_at.getTime()===this.created_at.getTime()&&e.subject===this.subject}}class o extends r.c{}},8860:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var i,r=n(4112),s=n(8144),o=n(8596),a=n(9684);class c extends o.c{constructor(){super(...arguments),this.SPONSOR_LINKS_DOC=(0,r.UN)(i.COLLECTION,"sponsor-links").withConverter({toFirestore:i.ImagedLinks.to,fromFirestore:e=>i.ImagedLinks.from(e.data())}),this.SOCIAL_MEDIA_LINKS_DOC=(0,r.UN)(i.COLLECTION,"social-media-links").withConverter({toFirestore:i.ImagedLinks.to,fromFirestore:e=>i.ImagedLinks.from(e.data())}),this.DEFAULT_CATEGORY_COLORS_DOC=(0,r.UN)(i.COLLECTION,"default-category-colors"),this.LOADING_SCREEN_CONFIG_DOC=(0,r.UN)(i.COLLECTION,"loading-screen-config")}getNavbarLinks(e="/"){return(0,r.i4)(i.NAVBAR_LINKS_DOC).then((e=>{if(e.exists())return e.data();throw new i.MissingDocError("navbar-links")}))}setNavbarLinks(e){return(0,r.Sm)(i.NAVBAR_LINKS_DOC,e)}getSponsorLinks(){return(0,r.i4)(this.SPONSOR_LINKS_DOC).then((e=>{if(e.exists())return e.data();throw new i.MissingDocError("sponsor-links")}))}setSponsorLinks(e){return(0,r.Sm)(this.SPONSOR_LINKS_DOC,e)}getSocialMediaLinks(){return(0,r.i4)(this.SOCIAL_MEDIA_LINKS_DOC).then((e=>{if(e.exists())return e.data();throw new i.MissingDocError("social-media-links")}))}setSocialMediaLinks(e){return(0,r.Sm)(this.SOCIAL_MEDIA_LINKS_DOC,e)}getDefaultCategoryColors(){return(0,r.i4)(this.DEFAULT_CATEGORY_COLORS_DOC).then((e=>a.c.values(e.exists()?e.data():{}).sort()))}setDefaultCategoryColors(e){const t={};return e.forEach(((e,n)=>t[`${n}`]=e)),(0,r.Sm)(this.DEFAULT_CATEGORY_COLORS_DOC,t)}getLoadingScreenConfig(){return(0,r.i4)(this.LOADING_SCREEN_CONFIG_DOC).then((e=>a.c.values(e.exists()?e.data():{}).sort()))}setLoadingScreenConfig(e){const t={};return e.forEach(((e,n)=>t[`${n}`]=e)),(0,r.Sm)(this.LOADING_SCREEN_CONFIG_DOC,t)}}i=c,c.COLLECTION=(0,r.oV)(s.AZ,"settings"),c.NAVBAR_LINKS_DOC=(0,r.UN)(i.COLLECTION,"navbar-links").withConverter({toFirestore:e=>({links:JSON.stringify(e)}),fromFirestore:e=>JSON.parse(e.data().links)}),function(e){let t;!function(e){e.from=function(e){const t=[];for(const n in e)t.push({name:n,...e[n]});return t},e.to=function(e){const t={};for(const n of e)t[n.name]={origin:n.origin,src:n.src,href:n.href};return t}}(t=e.ImagedLinks||(e.ImagedLinks={}));class n extends Error{constructor(e){super(`setting "${e}" not found in database (missing document).`)}}e.MissingDocError=n}(c||(c={}));const l=c},8596:(e,t,n)=>{"use strict";var i;n.d(t,{C:()=>i,c:()=>r}),function(e){function t(e){const n=[];for(const i in e){const r=e[i];"string"==typeof r?n.push([i,r]):n.push(...t(r))}return n}e.search=function(e,n){return t(e).filter((e=>{const t=e[0].toLowerCase(),i=n.toLowerCase();return t.includes(i)||i.includes(t)})).sort(((e,t)=>e[0].localeCompare(t[0])))}}(i||(i={}));class r{}},9560:(e,t,n)=>{"use strict";n.d(t,{c:()=>u});var i=n(4112),r=n(5364),s=n(8144),o=n(9928),a=n(8392);const c={toFirestore:e=>({...e,joined_at:i.kR.fromDate(e.joined_at),member_until:i.kR.fromDate(e.member_until)}),fromFirestore(e){const t=e.data();return new r.K(e.id,t.joined_at.toDate(),t.member_until.toDate(),t.first_name,t.family_name,t.permissions??[])}};class l extends r.c{get(e={}){return l.getUsers({...e})}count(e){return l.getUsers({...e},!0)}getById(e){const t=(0,i.UN)(l.COLLECTION,e);return(0,i.i4)(t).then((e=>e.exists()?e.data():void 0))}getByIds(...e){if(1===e.length)return this.getById(e[0]).then((t=>{const n={};return t&&(n[e[0]]=t),n}));{const t=a.c.batch(e,l.MAX_BATCH_SIZE).map((e=>(0,i.kt)(l.COLLECTION,(0,i.A9)((0,i.ET)(),"in",e))));return Promise.all(t.map((e=>(0,i.uY)(e)))).then((e=>{const t={};for(const n of e)n.forEach((e=>{const n=e.data();t[n.id]=n}));return t}))}}doWrite(...e){const t=(0,i.sv)(s.AZ);for(const n of e)t.set((0,i.UN)(s.AZ,"users",n.id),c.toFirestore(n));return t.commit().then((()=>e.length))}doDelete(...e){const t=(0,i.sv)(s.AZ);for(const n of e)t.delete((0,i.UN)(s.AZ,"users",n.id));return t.commit().then((()=>e.length))}static getUsers(e,t=!1){const n=[];e.limit&&n.push((0,i.Yf)(e.limit)),e.id&&n.push((0,i.A9)((0,i.ET)(),"==",e.id)),e.notId&&n.push((0,i.A9)((0,i.ET)(),"!=",e.notId)),e.has_permission&&n.push((0,i.A9)("permissions","array-contains",e.has_permission)),e.is_member&&n.push((0,i.A9)("member_until",">=",i.kR.now())),e.joined_after&&n.push((0,i.A9)("joined_at",">",i.kR.fromDate(e.joined_after))),e.joined_before&&n.push((0,i.A9)("joined_at","<",i.kR.fromDate(e.joined_before)));const r=(0,i.kt)(l.COLLECTION,...n);return t?(0,i.QL)(r).then((e=>e.data().count)):(0,i.uY)(r).then((e=>{const t=[];return e.forEach((e=>t.push(e.data()))),t.forEach((e=>o.c.set(`permissions-${e.id}`,e.permissions))),t})).catch((t=>(console.log("failed to get user",e,t),t)))}}l.COLLECTION=(0,i.oV)(s.AZ,"users").withConverter(c),l.MAX_BATCH_SIZE=30;const u=l},5364:(e,t,n)=>{"use strict";n.d(t,{K:()=>s,c:()=>o});var i=n(8392),r=n(7632);class s extends r.S{constructor(e,t,n,i,r,s){super(e,[]),this.joined_at=t,this.member_until=n,this.first_name=i,this.family_name=r,this.permissions=s}get fullName(){return`${this.first_name} ${this.family_name}`}copy(){return new s(this.id,new Date(this.joined_at),new Date(this.member_until),this.first_name,this.family_name,[...this.permissions])}satisfies(e){if(!super.satisfies(e))return!1;if(e.has_permission)if(Array.isArray(e.has_permission)){if(e.has_permission.some((e=>!this.permissions.includes(e))))return!1}else if(!this.permissions.includes(e.has_permission))return!1;return!(e.is_member&&void 0===this.member_until||e.joined_after&&e.joined_after>=this.joined_at||e.joined_before&&e.joined_before<=this.joined_at)}equals(e){return super.equals(e)&&e.joined_at.getTime()===this.joined_at.getTime()&&e.first_name===this.first_name&&e.family_name===this.family_name&&i.c.containSame(e.permissions,this.permissions)}}class o extends r.c{}},8144:(e,t,n)=>{"use strict";n.d(t,{AZ:()=>u,iA:()=>d,mw:()=>p,o1:()=>f,wX:()=>h});var i=n(7088),r=n(4112),s=n(4296),o=n(8824),a=n(9928);const c={apiKey:"AIzaSyBZukBmRVOeFJPgy0u1qJlMoLeTz4TXJ0k",authDomain:"gws-website-52cf2.firebaseapp.com",projectId:"gws-website-52cf2",storageBucket:"gws-website-52cf2.appspot.com",messagingSenderId:"488447336748",appId:"1:488447336748:web:de9e194799dacf238ccc89",measurementId:"G-HX00VJ4YYY"};Object.freeze(c);const l=(0,o.mg)(c),u=(0,r.gZ)(l),h=(0,i.Iv)(l);function d(){return h.authStateReady().then((()=>h.currentUser))}function f(e,t=!1,n=!0){t&&e(!0===a.c.get("is-logged-in")),t&&!n||d().then((t=>e(null!==t)))}a.c.get("is-logged-in")||h.signOut(),h.onAuthStateChanged((e=>{null===e?(a.c.remove("is-logged-in"),a.c.remove("do-login-expiry"),a.c.remove(`permissions-${a.c.get("own-id")}`),a.c.remove("own-id")):(a.c.get("do-login-expiry")?(a.c.set("is-logged-in",!0,Date.now()+36e5),setInterval((()=>a.c.set("is-logged-in",!0,Date.now()+36e5)),3e4)):a.c.set("is-logged-in",!0),a.c.set("own-id",e.uid))}));const p=(0,s.wv)(l)},9848:(e,t,n)=>{"use strict";n.d(t,{c:()=>F});var i=n(1244),r=n(1176),s=n(6984);class o{constructor(e,t){this.elementTypeSpecific={},this._classes=new Set,this._attributes={},this._children=[],this._styleMap={},this._handlers={},this._onMakeHandlers=[],this.tagName=e,this.initElem=t}id(e){return this._id=e,this}class(...e){for(const t of e)"string"==typeof t&&this._classes.add(t);return this}attr(e,t=""){return null!==t&&(this._attributes[e]=t.toString()),this}attrs(e){for(const t in e)this._attributes[t]=e[t].toString();return this}text(e){return this._text=e,this}tooltip(e){return e&&(this._tooltip=e),this}draggable(e){return this._draggable=e,this}noFocus(e=!0){return this._noFocus=e,this}canSelect(e){return!0===e?e="all":!1===e&&(e="none"),this._canSelect=e,this}html(e){return this._html=e,this}children(...e){return this._children.push(...e.filter((e=>null!==e))),this}style(e){for(const t in e){const n=t,i=e[n];void 0===i?delete this._styleMap[n]:this._styleMap[n]=i}return this}on(e,t){return this._handlers[e]=t,this}onMake(e){return this._onMakeHandlers.push(e),this}make(){const e=this.initElem?this.initElem():document.createElement(this.tagName);void 0!==this._id&&(e.id=this._id),this._classes.size>0&&e.classList.add(...this._classes);for(const t in this._attributes)e.setAttribute(t,this._attributes[t]);this._html&&(e.innerHTML=this._html),void 0!==this._text&&(e.textContent=this._text),void 0!==this._tooltip&&(e.title=this._tooltip),this._draggable&&(e.draggable=!0),this._noFocus&&e.addEventListener("mousedown",(e=>e.preventDefault())),this._canSelect&&(e.style.userSelect=this._canSelect);for(const t of this._children)if(t)if(t instanceof Node)e.appendChild(t);else if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(t instanceof o)e.appendChild(t.make());else{let n=t(e);Array.isArray(n)||(n=[n]),e.append(...o.Child.toNodes(n))}s.c.apply(this._styleMap,e);for(const t in this.elementTypeSpecific)e[t]=this.elementTypeSpecific[t];for(const t of Object.keys(this._handlers)){const n=t,i=this._handlers[n];e.addEventListener(n,(t=>i(t,e)))}for(const t of this._onMakeHandlers)t(e);return e}static specific(e,t=[],n){const i=new o(e,n);for(const e of t)Reflect.defineProperty(i,e,{writable:!1,value:t=>(i.elementTypeSpecific[e]=t,i)});return i}}!function(e){let t;!function(t){t.toNodes=function(t){const n=[];for(const i of t)i instanceof Node?n.push(i):"string"==typeof i?n.push(document.createTextNode(i)):i instanceof e&&n.push(i.make());return n}}(t=e.Child||(e.Child={}))}(o||(o={}));const a=o;class c extends o{constructor(){super("a"),this._openInNewTab=!1}href(e){return this._href=e,this}download(e=""){return this._downloadLink=e,this}openInNewTab(e){return this._openInNewTab=e,this}make(){const e=super.make();return void 0!==this._href&&(e.href=this._href),void 0!==this._downloadLink&&(e.download=this._downloadLink),this._openInNewTab&&(e.target="_blank"),e}}class l extends o{constructor(){super("select"),this._options={}}option(e,t=e,n=!1){return this._options[e]=[t,n],this}options(e){if(Array.isArray(e))e.forEach((e=>{Array.isArray(e)?this._options[e[0]]=e:this._options[e]=[e,!1]}));else for(const t in e){const n=e[t];this._options[t]=Array.isArray(n)?n:[n,!1]}return this}value(e){return this._value=e,this}onValueChanged(e){return this._onValueChanged=e,this}make(){const e=super.make();for(const t in this._options){const n=document.createElement("option");n.value=t,n.selected=t===this._value,n.textContent=this._options[t][0],this._options[t][1]&&(n.hidden=!0),e.options.add(n)}if(window.addEventListener("change",(t=>{t.target===e&&(e.prevValue=e.value)})),this._onValueChanged){const t=this._onValueChanged;e.addEventListener("change",(()=>t(e.value,e.prevValue)))}return e}}class u extends o{constructor(){super("rich-text-input",(()=>new r.c))}value(e){return this._value=e,this}placeholder(e){return this._placeholder=e,this}compact(e=!0){return e&&super.attr("compact"),this}make(){const e=super.make();return this._value&&(e.value=this._value),this._placeholder&&(e.placeholder=this._placeholder),e}}var h=n(5245);class d extends a{constructor(){super("folder-element",(()=>new h.c))}foldDir(e){return this._foldDir=e,this}hideArrow(e=!0){return this._arrowHidden=e,this}closingDelay(e){return this._closingDelay=e,this}heading(e){return this._heading=e,this}contentPosition(e){return this._contentPosition=e,this}make(){const e=super.make();return this._foldDir&&(e.foldDir=this._foldDir),e.arrowHidden=this._arrowHidden??!1,this._closingDelay&&(e.closingDelay=this._closingDelay),this._contentPosition&&(e.contentsPosition=this._contentPosition),this._heading&&(this._heading instanceof Element||this._heading instanceof a||(this._heading=this._heading(e)),e.heading=this._heading instanceof a?this._heading.make():this._heading),e}}var f,p=n(8440),g=n(784);!function(e){const t={button:{fromString:e=>[e],toString:e=>e},checkbox:{fromString:e=>[e],toString:e=>e},color:{fromString:e=>p.c.toRGB(e),toString:(...e)=>1===e.length?e[0]:`#${e.map((e=>e.toString(16).padStart(2,"0"))).join("")}`},date:{fromString(e){const[t,n,i]=e.split("-").map(Number);return[new Date(t,n-1,i)]},toString(...e){const[t,n,i]=1===e.length?[e[0].getFullYear(),e[0].getMonth(),e[0].getDate()]:e;return`${t.toString().padStart(4,"0")}-${(n+1).toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}`}},"datetime-local":{fromString:e=>[new Date(e)],toString(...e){let t;if(1===e.length){const n=g.c.Timestamps.copy(e[0]);n.setMinutes(n.getMinutes()-n.getTimezoneOffset()),t=n.toISOString()}else t=new Date(...e).toISOString();return t.includes(".")?t.substring(0,t.lastIndexOf(".")):t}},email:{fromString:e=>[e],toString:e=>e},file:{fromString:e=>[e],toString:e=>e},hidden:{fromString:e=>[e],toString:e=>e},image:{fromString:e=>[],toString:()=>""},month:{fromString(e){const[t,n]=e.split("-").map(Number);return[t,n+1]},toString:(e,t)=>`${e.toString().padStart(4,"0")}-${(t+1).toString().padStart(2,"0")}`},number:{fromString:e=>[Number.parseFloat(e)],toString:e=>e.toString()},password:{fromString:e=>[e],toString:e=>e},radio:{fromString:e=>[e],toString:e=>e},range:{fromString:e=>[Number.parseFloat(e)],toString:e=>e.toString()},reset:{fromString:e=>[e],toString:e=>e},search:{fromString:e=>[e],toString:e=>e},submit:{fromString:e=>[e],toString:e=>e},tel:{fromString:e=>[e],toString:e=>e},text:{fromString:e=>[e],toString:e=>e},time:{fromString(e){const[t,n]=e.split(":").map(Number);return[t,n]},toString:(...e)=>e.map((e=>e.toString().padStart(2,"0"))).join(":")},url:{fromString:e=>[e],toString:e=>e},week:{fromString(e){const[t,n]=e.split("-W").map(Number);return[n,t]},toString:(e,t)=>`${e.toString().padStart(4,"0")}-W${t.toString().padStart(2,"0")}`}};e.translateValueToString=function(e,...n){return t[e].toString(...n)},e.translateStringToValue=function(e,n){return t[e].fromString(n)}}(f||(f={}));class m extends a{constructor(e){super("input"),this._autocomplete="off",this.type=e}value(...e){return this._value=e,this}name(e){return this._name=e,this}disabled(e){return this._disabled=e,this}attr(e,t){return"value"===e||"onchange"===e?this:super.attr(e,t)}attrs(e){return delete e.value,delete e.onchange,super.attrs(e)}onValueChanged(e){return this._onValueChanged=e,this}autocomplete(e){return this._autocomplete=e,this}validateValue(e){return this.validationPredicate=e,this}make(){const e=super.make();if(e.type=this.type,void 0!==this._value){const t=f.translateValueToString(this.type,...this._value);e.value=t}if(e.prevValue=e.value,window.addEventListener("input",(t=>{t.target===e&&(e.prevValue=e.value)})),this._onValueChanged){const t=this._onValueChanged;e.addEventListener("input",(()=>t(e.value,e.prevValue)))}if(e.autocomplete=this._autocomplete,this.validationPredicate){const t=this.validationPredicate,n=()=>{const n=t(...f.translateStringToValue(this.type,e.value));"string"==typeof n?e.setAttribute("invalid",n):e.toggleAttribute("invalid",!n)};e.addEventListener("input",n),e.addEventListener("change",n),n()}return void 0!==this._name&&(e.name=this._name),this._disabled&&(e.disabled=!0),e}}class y extends m{onClick(e){return this._onClick=e,this}make(){const e=super.make();if(this._onClick){const t=this._onClick;e.addEventListener("click",(()=>t(e.value)))}return e}}class v extends m{constructor(e){super(e),this._checked=!1}checked(e){return this._checked=e,this}onCheckedChanged(e){return this._onCheckedChanged=e,this}make(){const e=super.make();if(e.checked=this._checked,e.wasChecked=e.checked,window.addEventListener("input",(t=>{t.target===e&&((e.wasChecked=e.checked)?e.setAttribute("was-checked",""):e.removeAttribute("was-checked"))})),this._onCheckedChanged){const t=this._onCheckedChanged;e.addEventListener("input",(()=>t(e.checked,e.wasChecked)))}return e}}class E extends m{constructor(e){super(e),this._step=1}min(...e){return this._min=e,this}max(...e){return this._max=e,this}step(e){return this._step=e,this}make(){const e=super.make();return void 0!==this._min&&(e.min=f.translateValueToString(this.type,...this._min)),void 0!==this._max&&(e.max=f.translateValueToString(this.type,...this._max)),e.step=this._step.toString(),e}}class w extends E{make(){const e=super.make();return e.prevValueAsNumber=Number.parseFloat(e.prevValue),window.addEventListener("change",(t=>{t.target===e&&(e.prevValueAsNumber=Number.parseFloat(e.prevValue))})),e}}class _ extends E{make(){const e=super.make();return e.prevValueAsDate=new Date(e.prevValue),window.addEventListener("change",(t=>{t.target===e&&(e.prevValueAsDate=new Date(e.prevValue))})),e}}class b extends m{constructor(e){super(e)}list(e){return this._list="string"==typeof e?e:e.id,this}minLength(e){return this._minLength=Math.floor(e),this}maxLength(e){return this._maxLength=Math.floor(e),this}placeholder(e){return this._placeholder=e,this}readonly(e){return this._readonly=e,this}size(e){return this._size=Math.floor(e),this}spellcheck(e){return this._spellcheck=e,this}make(){const e=super.make();return void 0!==this._list&&e.setAttribute("list",this._list),void 0!==this._minLength&&(e.minLength=this._minLength),void 0!==this._maxLength&&(e.maxLength=this._maxLength),this._placeholder&&(e.placeholder=this._placeholder),this._readonly&&(e.readOnly=this._readonly),void 0!==this._size&&(e.size=this._size),this._spellcheck&&(e.spellcheck=this._spellcheck),e}}var T=n(3236),S=n(8332);class A extends a{constructor(){super("icon-selector",(()=>new S.c)),this._options=[]}options(...e){return this._options.push(...e),e.find((e=>e[3])),this}value(e){return this._value=e,this}make(){let e=super.make();for(const t of this._options)e=e.addOption(...t);return void 0!==this._value&&(e.value=this._value),e}}var I=n(9368);class C extends a{constructor(e,t,n){super("switch-input",(()=>new I.c(e,t,n)))}}class k extends HTMLElement{get value(){const e=this.querySelector(".bulb[selected]");return e instanceof HTMLElement?e.style.backgroundColor:"#"}set value(e){e!==this.value&&(Array.from(this.querySelectorAll(".bulb")).forEach((t=>{t instanceof HTMLElement&&t.toggleAttribute("selected",t.getAttribute("value")?.toLowerCase()===e.toLowerCase())})),this.dispatchEvent(new Event("change")))}constructor(e="#000000"){super(),this.isInitialized=!1,this.initValue=e}connectedCallback(){if(!this.isInitialized){this.classList.add("flex-columns");const e=F.div(void 0,"bulb","click-action").attr("can-unselect").on("click",((e,t)=>{e.preventDefault(),this.hasAttribute("disabled")||this.hasAttribute("selected")||(this.value=t.getAttribute("value"),this.dispatchEvent(new Event("input")))}));this.append(...k.BASE_COLORS.map(((t,n)=>F.div(void 0,"flex-rows").children(...[p.c.mix("#000000","#ffffff",n/(k.BASE_COLORS.length-1)),...k.BRIGHTNESS_MODIFIERS.map((e=>p.c.mix(t,"#ffffff",e))),t,...k.BRIGHTNESS_MODIFIERS.toReversed().map((e=>p.c.mix(t,"#000000",e)))].map((t=>e.tooltip(t).attr("value",t).style({backgroundColor:t}).make()))).make()))),this.value=this.initValue,this.isInitialized=!0}}}k.BASE_COLORS=["#FF0000","#FF8700","#FFD300","#DEFF0A","#A1FF0A","#0AFF99","#0AEFFF","#147DF5","#580AFF","#BE0AFF"],k.BRIGHTNESS_MODIFIERS=[.25,.5,.75];const x=k;customElements.define("color-picker",k);class D extends a{constructor(){super("color-picker",(()=>new x))}value(e){return this._value=e,this}make(){const e=super.make();return void 0!==this._value&&(e.value=this._value),e}}var N;class L extends HTMLElement{get value(){return{...this._value}}set value(e){e.width===this._value.width&&e.height===this._value.height||(this._value.width=e.width,this._value.height=e.height,this.cells.querySelectorAll(".cell").forEach((t=>t.toggleAttribute("highlighted",Number.parseInt(t.getAttribute("x")??"0")<=e.width&&Number.parseInt(t.getAttribute("y")??"0")<=e.height))),this.valueDisplay.textContent=`${e.width} x ${e.height}`,this.dispatchEvent(new Event("change")))}constructor(e={width:0,height:0}){super(),this.isInitialized=!1,this._value=e}initElement(){this.isInitialized||(this.classList.add("flex-rows","center-content"),this.cells=this.appendChild(F.div(void 0,"cells","flex-rows").children(...i.c.range(1,N.MAX_SIZE.height,1,!0).map((e=>F.div(void 0,"row","flex-columns").children(...i.c.range(1,N.MAX_SIZE.width,1,!0).map((t=>F.div(void 0,"cell","click-action").attrs({x:t,y:e}).on("mouseover",((n,i)=>this.value={width:t,height:e})).on("click",(n=>{this.value={width:t,height:e},this.dispatchEvent(new Event("input"))})))))))).make()),this.valueDisplay=this.appendChild(F.p("0 x 0").class("value-display","no-margin").make()),this.isInitialized=!0)}connectedCallback(){this.initElement()}}N=L,L.MAX_SIZE={width:10,height:10},Object.freeze(N.MAX_SIZE);const R=L;customElements.define("grid-size-input",L);class O extends a{constructor(){super("grid-size-input",(()=>new R))}}var U=n(6e3);class P extends a{constructor(){super("password-input",(()=>new U.c))}validateValue(e){return this.validationPredicate=e,this}type(e){return this._type=e,this}name(e){return this._name=e,this}make(){const e=super.make();if(this._type&&(e.type=this._type),this._name&&(e.name=this._name),this.validationPredicate){const t=this.validationPredicate,n=()=>{const n=t(e.value);"string"==typeof n?(e.setAttribute("invalid",n),e.input.setAttribute("invalid",n)):(e.toggleAttribute("invalid",!n),e.input.toggleAttribute("invalid",!n))};e.addEventListener("input",n),e.addEventListener("change",n),n()}return e}}class M{static header(){return new a("header")}static footer(){return new a("footer")}static div(e,...t){const n=new a("div");return"string"==typeof e&&n.id(e),n.class(...t),n}static heading(e,t){const n=this[`h${e=i.c.clamp(Math.floor(e),1,6)}`]();return t&&n.text(t),n}static h1(e){const t=new a("h1");return e?t.text(e):t}static h2(e){const t=new a("h2");return e?t.text(e):t}static h3(e){const t=new a("h3");return e?t.text(e):t}static h4(e){const t=new a("h4");return e?t.text(e):t}static h5(e){const t=new a("h5");return e?t.text(e):t}static h6(e){const t=new a("h6");return e?t.text(e):t}static p(e){const t=new a("p");return void 0===e?t:t.text(e.toString())}static richText(e){return M.div().class("rich-text").children(...T.c.deserialize(e))}static text(e){return document.createTextNode(e??"")}static span(e,...t){const n=new a("span").class(...t);return e?n.text(e):n}static a(e,t){const n=new c;return n.onMake((e=>{e.addEventListener("click",(()=>{e.href&&!e.hasAttribute("download")&&("_blank"===e.target?open(e.href):location.href=e.href)}))})),e&&n.href(e),t?n.text(t):n}static img(e,t){const n=a.specific("img",["src","alt"],(()=>document.createElement("img")));return e&&n.src(e),t?n.alt(t):n}static form(){return a.specific("form",[],(()=>document.createElement("form")))}static passwordInput(e,t){const n=new P;return e&&n.type(e),t&&n.name(t),n}static label(e,t){const n=a.specific("label",["htmlFor"],(()=>document.createElement("label")));return e&&n.text(e),t&&n.htmlFor(t),n}static button(e){const t=new a("button");return e&&t.on("click",e),t}static iconButton(e,t,n){return M.p(e).class("icon","icon-button","click-action","no-margin").tooltip(n||null).noFocus().on("click",((e,n)=>{n.hasAttribute("disabled")||t(e,n)}))}static textarea(e){const t=a.specific("textarea",["value","placeholder","minLength","maxLength","readOnly","spellcheck","rows","cols"],(()=>document.createElement("textarea")));return e&&t.value(e),t}static select(e=[]){return(new l).options(e)}static option(e,t,n){const i=a.specific("option",["value","selected","hidden"],(()=>document.createElement("option")));return void 0!==e&&i.value(e),void 0!==t&&i.selected(t),void 0!==n&&i.hidden(n),i}static optgroup(e){const t=a.specific("optgroup",["label"],(()=>document.createElement("optgroup")));return void 0!==e&&t.label(e),t}static iconSelector(...e){const t=new A;return t.options(...e),t}static hr(){return new a("hr")}static br(){return new a("br")}static ul(){return a.specific("ul",[],(()=>document.createElement("ul")))}static ol(){return a.specific("ol",[],(()=>document.createElement("ol")))}static li(e){const t=a.specific("li",[],(()=>document.createElement("li")));return e&&t.text(e),t}static table(e,t){return a.specific("table",[],(()=>document.createElement("table"))).children(a.specific("tbody",[],(()=>document.createElement("tbody"))).children(...i.c.range(0,t).map((()=>a.specific("tr",[],(()=>document.createElement("tr"))).children(...i.c.range(0,e).map((()=>document.createElement("td"))))))))}static folderElement(e,t,n){const i=new d;return e&&i.foldDir(e),"number"==typeof t&&i.closingDelay(t),n&&i.hideArrow(n),i}static colorPicker(e){const t=new D;return e&&t.value(e),t}}M.input={button(e,t){const n=new y("button");return void 0!==e&&n.value(e),t?n.onClick(t):n},checkbox:()=>new v("checkbox"),color(e){const t=new m("color");return e&&t.value(e),t},date(e,t,n,i){const r=new _("date");return e&&r.value(e.getFullYear(),e.getMonth(),e.getDate()),t&&r.min(t.getFullYear(),t.getMonth(),t.getDate()),n&&r.max(n.getFullYear(),n.getMonth(),n.getDate()),"number"==typeof i&&r.step(i),r},dateTimeLocal(e,t,n,i){const r=new _("datetime-local");return e instanceof Date&&r.value(e),t instanceof Date&&r.min(t),n instanceof Date&&r.max(n),"number"==typeof i&&r.step(i),r},email:()=>new b("email"),file:()=>new b("file"),image:()=>new m("image"),month(e,t){const n=new _("month");return void 0!==e&&void 0!==t?n.value(e,t):void 0!==e?n.value(e,(new Date).getMonth()):void 0!==t&&n.value((new Date).getFullYear(),t),n},number(e,t,n,i){const r=new w("number");return"number"==typeof e&&r.value(e),"number"==typeof t&&r.min(t),"number"==typeof n&&r.max(n),"number"==typeof i&&r.step(i),r},password:()=>new b("password"),radio:()=>new v("radio"),range(e,t,n,i){const r=new w("range");return"number"==typeof e?r.value(e):"number"==typeof t&&r.value(t),"number"==typeof t&&r.min(t),"number"==typeof n&&r.max(n),"number"==typeof i&&r.step(i),r},reset:()=>new y("reset"),search:()=>new b("search"),submit:()=>new y("submit"),switch:(e,t,n)=>new C(e,t,n),tel:()=>new b("tel"),text(e){const t=new b("text");return e&&t.value(e),t},time:()=>new E("time"),url(e){const t=new b("url");return e&&t.value(e),t},week(e,t){const n=new _("week");return void 0!==e&&void 0!==t?n.value(e,t):void 0!==e?n.value(e,1):void 0!==t&&n.value((new Date).getFullYear(),t),n},richText(e,t){const n=new u;return e&&n.value(e),void 0!==t&&n.compact(t),n},gridSize:()=>new O};const F=M},4388:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var i,r=n(9684);!function(e){let t;!function(e){e[e.DESKTOP=0]="DESKTOP",e[e.DESKTOP_SLIM=1]="DESKTOP_SLIM",e[e.SQUARE=2]="SQUARE",e[e.TABLET_PORTRAIT=3]="TABLET_PORTRAIT",e[e.MOBILE_PORTRAIT=4]="MOBILE_PORTRAIT",e[e.VERY_THIN=5]="VERY_THIN"}(t=e.Viewport||(e.Viewport={}));const n=t.DESKTOP,i={[t.DESKTOP]:{width:16,height:9},[t.DESKTOP_SLIM]:{width:4,height:3},[t.SQUARE]:{width:1,height:1},[t.TABLET_PORTRAIT]:{width:3,height:4},[t.MOBILE_PORTRAIT]:{width:10,height:16},[t.VERY_THIN]:{width:1,height:2}},s=r.c.mapToArray(i,((e,t)=>[e,matchMedia(`(max-aspect-ratio: ${t.width} / ${t.height})`)]));let o;function a(){const e=void 0!==matchMedia?s.findLast((([e,t])=>t.matches))?.[0]??n:n;if(e!==o){console.log("viewport change",o,"--\x3e",e);const t=o;o=e,c.forEach((n=>n(e,t)))}}e.getCurrent=function(){return o};const c=[];e.onChange=function(e,t=!1){c.push(e),t&&e(o,o)},e.is=function(e){return e===o},e.isAnyOf=function(...e){return e.includes(o)},e.isWiderThan=function(e){return e>o},e.isWiderOrEq=function(e){return e>=o},e.isSlimmerThan=function(e){return e<o},e.isSlimmerOrEq=function(e){return e<=o},a(),window.addEventListener("resize",(()=>a()))}(i||(i={}));const s=i},5752:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var i,r,s=n(7588),o=n.n(s),a=n(9848),c=n(9928),l=n(4388),u=n(908);!function(e){e.INFO="info",e.SUCCESS="success",e.WARNING="warning",e.ERROR="error"}(r||(r={}));class h{static get messageLimit(){return l.c.isSlimmerOrEq(l.c.Viewport.TABLET_PORTRAIT)?1:3}static createMessage(e,t,n=5e3){const i=a.c.p().text(e).class("boxed","message",t).make();return o()(i).delay(n).fadeOut(200,"swing",(function(){this.remove()})),i}static info(e,t=5e3,n){this.MESSAGE_AREA.childElementCount+1>this.messageLimit&&this.MESSAGE_AREA.lastChild?.remove(),this.MESSAGE_AREA.prepend(this.createMessage(e,i.MessageType.INFO,t)),n&&setTimeout(n,t)}static relayInfo(e,t=5e3){c.c.set("relayed-message",{type:i.MessageType.INFO,content:e,lifetime:t},Date.now()+1e4)}static success(e,t=5e3,n){this.MESSAGE_AREA.childElementCount+1>this.messageLimit&&this.MESSAGE_AREA.lastChild?.remove(),this.MESSAGE_AREA.prepend(this.createMessage(e,i.MessageType.SUCCESS,t)),n&&setTimeout(n,t)}static relaySuccess(e,t=5e3){c.c.set("relayed-message",{type:i.MessageType.SUCCESS,content:e,lifetime:t},Date.now()+1e4)}static warning(e,t=5e3,n){this.MESSAGE_AREA.childElementCount+1>this.messageLimit&&this.MESSAGE_AREA.lastChild?.remove(),this.MESSAGE_AREA.prepend(this.createMessage(e,i.MessageType.WARNING,t)),n&&setTimeout(n,t)}static relayWarning(e,t=5e3){c.c.set("relayed-message",{type:i.MessageType.WARNING,content:e,lifetime:t},Date.now()+1e4)}static error(e,t=5e3,n){this.MESSAGE_AREA.childElementCount+1>this.messageLimit&&this.MESSAGE_AREA.lastChild?.remove(),this.MESSAGE_AREA.prepend(this.createMessage(e,i.MessageType.ERROR,t)),n&&setTimeout(n,t)}static relayError(e,t=5e3){c.c.set("relayed-message",{type:i.MessageType.ERROR,content:e,lifetime:t},Date.now()+1e4)}}i=h,u.c.onDOMContentLoaded().then((()=>{i.MESSAGE_AREA=document.body.appendChild(document.createElement("div")),i.MESSAGE_AREA.id="info-messages",i.MESSAGE_AREA.classList.add("flex-rows","cross-axis-center");const e=c.c.get("relayed-message");if(e){switch(e.type){case i.MessageType.INFO:i.info(e.content,e.lifetime);break;case i.MessageType.SUCCESS:i.success(e.content,e.lifetime);break;case i.MessageType.WARNING:i.warning(e.content,e.lifetime);break;case i.MessageType.ERROR:i.error(e.content,e.lifetime)}c.c.remove("relayed-message")}})),function(e){e.MessageType=r}(h||(h={}));const d=h},8392:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});class i{static equal(e,t){return e.length===t.length&&e.every(((e,n)=>e===t[n]))}static containSame(e,t){return e.every((e=>t.includes(e)))&&t.every((t=>e.includes(t)))}static intersection(e,t){return e.filter((e=>t.includes(e)))}static union(e,t,n=!1){return n?[...e,...this.difference(t,e)]:[...e,...t]}static difference(e,t){return e.filter((e=>!t.includes(e)))}static symmetricDifference(e,t){return[...this.difference(e,t),...this.difference(t,e)]}static sortAlphabetically(e){return e.toSorted(((e,t)=>e.localeCompare(t)))}static remove(e,t,n=!1){let i=!1;if(n){let n=e.indexOf(t);for(;-1!==n;)e.splice(n,1),n=e.indexOf(t),i=!0}else{let n=e.indexOf(t);-1!==n&&(e.splice(n,1),n=e.indexOf(t),i=!0)}return i}static uniqueElements(e){const t=[...e];for(let e=0;e<t.length;e++){const n=t[e];for(let i=e+1;i<t.length;i++)for(;i<t.length&&t[i]===n;)t.splice(i,1)}return t}static batch(e,t){e=[...e];const n=[];for(;0!==e.length;)n.push(e.splice(0,t));return n}static count(e,t){let n=0;for(let i=0;i<e.length;i++)n+=t(e[i],i,e)?1:0;return n}static includesAll(e,...t){return t.every((t=>e.includes(t)))}static interlace(e,t){const n=[];for(const i of e)0!==n.length&&n.push(t),n.push(i);return n}static shuffled(e){return e.toSorted((()=>Math.random()-.5))}static pick(e){return e[Math.floor(Math.random()*e.length)]}static pickNFrom(e,t){const n=[];for(let i=0;i<e;i++)n.push(this.pick(t));return n}}},8440:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var i=n(9928),r=n(8860),s=n(1244);class o{static isHex(e){return"string"==typeof e&&e.startsWith("#")}static isRGB(e){return Array.isArray(e)&&3===e.length&&e.every((e=>0<=e&&e<=255))}static isRGBString(e){return"string"==typeof e&&e.startsWith("rgb(")&&e.endsWith(")")&&e.substring(4,e.length-1).split(", ").every(((e,t,n)=>3===n.length&&s.c.isInt(e)&&s.c.isBetween(Number.parseInt(e),0,255)))}static toRGB(e){if(this.isHex(e)){const t=Number.parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]}return this.isRGBString(e)?e.substring(4,e.length-1).split(", ").map((e=>Number.parseInt(e))):e}static toHex(e){if(this.isRGB(e)){const[t,n,i]=e;return`#${t.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`}return this.isRGBString(e)?this.toHex(this.toRGB(e)):e}static getContrast(e,t){return[e,t]=[this.toRGB(e),this.toRGB(t)],e=[.299*e[0],.587*e[1],.114*e[2]],t=[.299*t[0],.587*t[1],.114*t[2]],((e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2)**.5}static getMostContrasting(e,...t){let n=-1,i=-1/0;return t.forEach(((t,r)=>{const s=this.getContrast(e,t);s>i&&([n,i]=[r,s])})),this.toHex(t[n])}static mix(e,t,n){e=this.toRGB(e),t=this.toRGB(t);const i=1-(n=s.c.clamp(n,0,1)),r=[Math.floor(e[0]*n+t[0]*i),Math.floor(e[1]*n+t[1]*i),Math.floor(e[2]*n+t[2]*i)];return this.toHex(r)}static getStringColor(e,t){return(t?Promise.resolve(t):o.STRING_COLORS).then((t=>{if(0===t.length)return o.DEFAULT_COLOR;{let n=0;for(let t=0;t<e.length;t++)n^=e.charCodeAt(t)<<t%8;return t[Math.abs(n)%t.length]}}))}}o.DEFAULT_COLOR="#BBBBBB",o.STRING_COLORS=i.c.getAndRefresh("default-category-colors",(new r.default).getDefaultCategoryColors()),o.PALETTES={RAINBOW:["#FF0000","#FF8700","#FFD300","#DEFF0A","#A1FF0A","#0AFF99","#0AEFFF","#147DF5","#580AFF","#BE0AFF"]};const a=o},784:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var i,r=n(9684);class s{static get FIRST(){return new Date(-864e13)}static get LAST(){return new Date(864e13)}}i=s,s.Days={firstBefore(e,t){const n=i.WEEK_DAY_INDICES[t],r=new Date(e);for(;r.getDay()!==n;)r.setDate(r.getDate()-1);return r.setHours(0,0,0,0),r},firstAfter(e,t){const n=i.WEEK_DAY_INDICES[t],r=new Date(e);for(;r.getDay()!==n;)r.setDate(r.getDate()+1);return r.setHours(0,0,0,0),r},isSame:(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),isWeekend:e=>0===e.getDay()||6===e.getDay(),isBetween:(e,t,n)=>([e,t,n]=[e,t,n].map(i.Timestamps.copy),t.setHours(0,0,0,0),n.setHours(23,59,59,999),e>=t&&e<=n),earlierThan:(e,t)=>e.getFullYear()<t.getFullYear()||e.getFullYear()===t.getFullYear()&&e.getMonth()<t.getMonth()||e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()<t.getDate(),earlierOrSame(e,t){return this.isSame(e,t)||this.earlierThan(e,t)},laterThan:(e,t)=>e.getFullYear()>t.getFullYear()||e.getFullYear()===t.getFullYear()&&e.getMonth()>t.getMonth()||e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()>t.getDate(),laterOrSame(e,t){return this.isSame(e,t)||this.laterThan(e,t)},spanInDays(e,t){e>t&&([e,t]=[t,e]);const n=new Date(e);let r=1;for(;!i.Days.isSame(n,t);)r++,n.setDate(n.getDate()+1);return r},getRange(e,t){if((e=new Date(e)).setHours(0,0,0,0),"number"==typeof t){const n=t;(t=new Date(e)).setDate(t.getDate()+n)}else t=new Date(t);if(e>t)return[];const n=[];do{n.push(new Date(e)),e.setDate(e.getDate()+1)}while(!i.Days.isSame(e,t));return n}},s.Timespans={overlap:(e,t)=>t[1]>=e[0]&&t[0]<=e[1],daysOverlap:(e,t)=>i.Days.laterOrSame(t[1],e[0])&&i.Days.earlierOrSame(t[0],e[1]),areFullDays(e,t=!1){const[n,i]=e;return!(0!==n.getHours()||0!==n.getMinutes()||0!==n.getSeconds()||t&&0!==n.getMilliseconds()||23!==i.getHours()||59!==i.getMinutes()||59!==i.getSeconds()||t&&999!==i.getMilliseconds())}},s.Timestamps={earliest(...e){let t=e[0];for(let n=1;n<e.length;n++)t=e[n]<t?e[n]:t;return t},latest(...e){let t=e[0];for(let n=1;n<e.length;n++)t=e[n]>t?e[n]:t;return t},clamp:(e,t=i.FIRST,n=i.LAST)=>e<t?new Date(t):e>n?new Date(n):new Date(e),justBefore:e=>((e=new Date(e)).setMilliseconds(e.getMilliseconds()-1),e),justAfter:e=>((e=new Date(e)).setMilliseconds(e.getMilliseconds()+1),e),fromInputs(e,t){if(e instanceof HTMLInputElement){if("date"!==e.type)throw new Error(`parameter 'date' is not a date input (is "${e.type}" instead)`);e=e.value}if(t instanceof HTMLInputElement){if("time"!==t.type)throw new Error(`parameter 'time' is not a time input (is "${t.type}" instead)`);t=t.value}let[n,i,r]=e.split("-").map((e=>Number.parseInt(e))).filter((e=>!isNaN(e)));n||(n=1970),i||(i=1),i--,r||(r=1);let[s,o,a,c]=t.split(":").map((e=>Number.parseInt(e))).filter((e=>!isNaN(e)));return s||(s=0),o||(o=0),a||(a=0),c||(c=0),new Date(n,i,r,s,o,a,c)},setInputValue(e,t){if(!this.isValid(t))throw new Error("value is invalid Date object");if((t=this.copy(t)).setMinutes(t.getMinutes()-t.getTimezoneOffset()),"datetime-local"===e.type){const n=t.toISOString();return e.value=n.includes(".")?n.substring(0,n.indexOf(".")):n}if("date"===e.type){const n=`${t.getFullYear().toString().padStart(4,"0")}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`;return e.value=n}throw new Error(`invalid input type: ${e.type}`)},copy:e=>new Date(e),isValid:e=>null!==e&&(e="string"==typeof e?new Date(e):e,!isNaN(e.getTime()))},s.DATE_FORMATS={DAY:{SHORT_NO_YEAR:(e,t="nl-NL")=>e.toLocaleDateString(t,{day:"numeric",month:"short"}),SHORT:(e,t="nl-NL")=>e.toLocaleDateString(t,{day:"numeric",month:"short",year:"numeric"}),MEDIUM:(e,t="nl-NL")=>e.toLocaleDateString(t,{dateStyle:"medium"}),LONG:(e,t="nl-NL")=>e.toLocaleDateString(t,{weekday:"long",day:"numeric",month:"long"})},TIME:{SHORT:(e,t="nl-NL")=>e.toLocaleTimeString(t,{timeStyle:"short"})},DAY_AND_TIME:{SHORT_NO_YEAR:(e,t="nl-NL")=>`${i.DATE_FORMATS.DAY.SHORT_NO_YEAR(e,t)} (${i.DATE_FORMATS.TIME.SHORT(e,t)})`,SHORT:(e,t="nl-NL")=>`${i.DATE_FORMATS.DAY.SHORT(e,t)} (${i.DATE_FORMATS.TIME.SHORT(e,t)})`},DURATION:{HOURS_AND_MINUTES:(e,t)=>{let n=t.getTime()-e.getTime();const i=Math.floor(n/36e5);return n%=36e5,`${i} uur en ${Math.round(n/6e4)} minuten`}}},r.c.deepFreeze(i.Days),r.c.deepFreeze(i.Timespans),r.c.deepFreeze(i.Timestamps),r.c.deepFreeze(i.DATE_FORMATS),function(e){e.WEEK_DAY_INDICES={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:0},Object.freeze(e.WEEK_DAY_INDICES)}(s||(s={}));const o=s},6316:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});var i=n(992);class r{static getAttrAsNumber(e,t,n=!1){const i=e.hasAttribute(t)?Number.parseFloat(e.getAttribute(t)):null;return null===i||!n&&isNaN(i)?null:i}static getAttrAs(e,t,n){if(!e.hasAttribute(t))return null;const i=e.getAttribute(t);return n?n(i)?i:null:i}static queryAncestors(e,t,n=!1){if(null===e)return[];{const i=[];n&&e instanceof Element&&e.matches(t)&&i.push(e);let r=e.parentNode;for(;null!==r;)r instanceof Element&&r.matches(t)&&i.push(r),r=r.parentNode;return i}}static isChain(e){return!!i.c.isEmpty(e)||1===e.childElementCount&&this.isChain(e.firstElementChild)}static getChainEnd(e){return i.c.isEmpty(e)?e:1===e.childElementCount?this.getChainEnd(e.firstElementChild):e}static isAtScrollTop(e,t=1){return e.scrollTop<=t}static isAtScrollBottom(e,t=1){return e.scrollHeight-e.scrollTop-e.clientHeight<=t}static isReplacedElement(e){return e instanceof HTMLIFrameElement||e instanceof HTMLVideoElement||e instanceof HTMLEmbedElement||e instanceof HTMLImageElement}static disable(e){let t=Number.parseInt(e.getAttribute("disabled")??"0");return t++,e.setAttribute("disabled",t.toString()),t}static enable(e){let t=Number.parseInt(e.getAttribute("disabled")??"0");return t--,t<=0?e.removeAttribute("disabled"):e.setAttribute("disabled",t.toString()),t}}},4440:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});class i{static setDelayedCallback(e,t){const n=this.delayedCallbacks.findIndex((t=>t[0]===e));-1!==n&&(clearTimeout(this.delayedCallbacks[n][1]),this.delayedCallbacks.splice(n,1));const i=setTimeout((()=>{e();const t=this.delayedCallbacks.findIndex((t=>t[0]===e));this.delayedCallbacks.splice(t,1)}),t);this.delayedCallbacks.push([e,i])}}i.delayedCallbacks=[];const r=i},992:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});class i{static isEmpty(e){return Array.from(e.childNodes).every((e=>e.nodeType===Node.TEXT_NODE&&0===e.textContent.length))}static empty(e,t=Node){return Array.from(e.childNodes).forEach((n=>{n instanceof t&&e.removeChild(n)})),e}static limitWords(e,t){if(e.nodeType===Node.TEXT_NODE)if(t<=0)e.textContent="";else{const n=e.textContent.split(" ",isFinite(t)?t:void 0);t-=n.length,e.textContent=n.join(" ")}else e.childNodes.forEach((e=>t=this.limitWords(e,t))),e.normalize();return t}static extractChildren(e){const t=[];for(;e.firstChild;)t.push(e.removeChild(e.firstChild));return t}static swap(e,t){const[n,i]=[document.createTextNode(""),document.createTextNode("")];e.replaceWith(n),t.replaceWith(i),n.replaceWith(t),i.replaceWith(e)}static getLeafNodes(e){if(0===e.childNodes.length)return[e];{const t=[];return e.childNodes.forEach((e=>t.push(...this.getLeafNodes(e)))),t}}static getAncestors(e,t=!1){const n=t?[e]:[];let i=e.parentNode;for(;i;)n.push(i),i=i.parentNode;return n}static getChildIndex(e,t){let[n,i]=[e.firstChild,0];for(;null!==n;){if(n===t)return i;[n,i]=[n.nextSibling,i+1]}return-1}static whenInsertedIn(e,t){return new Promise(((n,i)=>{if(t.contains(e))n(e);else{const i=new MutationObserver((r=>{t.contains(e)&&(n(e),i.disconnect())}));i.observe(t,{childList:!0,subtree:!0})}}))}static onEach(e,t){e.childNodes.forEach((e=>this.onEach(e,t))),t(e)}static deepReplaceAll(e,t,n){if(e.nodeType===Node.TEXT_NODE){const i=e,r=i.textContent.indexOf(t);-1!==r&&i.replaceData(r,t.length,n)}else e.childNodes.forEach((e=>this.deepReplaceAll(e,t,n)))}}},1244:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});class i{static clamp(e,t=-1/0,n=1/0,i=!1){return i&&isNaN(e)?t:Math.max(t,Math.min(n,e))}static isBetween(e,t=-1/0,n=1/0,i=!0){return i?t<=e&&e<=n:t<e&&e<n}static randInt(e,t){return e>t&&([e,t]=[t,e]),Math.floor(e+Math.random()*(t-e))}static isNumber(e){return!isNaN(Number.parseFloat(e))}static isInt(e){return!isNaN(Number.parseInt(e))&&Number.parseInt(e)===Number.parseFloat(e)}static parse(e,t=0){const n=Number.parseFloat(e);return isNaN(n)?t:n}static range(e,t,n=1,i=!1){const r=[];if(n=Math.abs(n),e<t)if(i)for(let i=e;i<=t;i+=n)r.push(i);else for(let i=e;i<t;i+=n)r.push(i);else if(i)for(let i=e;i>=t;i-=n)r.push(i);else for(let i=e;i>t;i-=n)r.push(i);return r}static closest(e,t){if(0===t.length)throw new Error('parameter "options" must contain at least one element');let n=Math.abs(e-t[0]),i=t[0];for(let r=1;r<t.length;r++){const s=Math.abs(e-t[r]);s<n&&([n,i]=[s,t[r]])}return i}}},9684:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});class i{static sizeOf(e){let t=0;for(const n in e)t++;return t}static keys(e){return Object.keys(e)}static values(e){return Object.values(e)}static deepCopy(e){if("object"==typeof e){if(Array.isArray(e))return[...e].map((e=>this.deepCopy(e)));if(e instanceof Date)return new Date(e);{const t={};for(const n in e)t[n]=this.deepCopy(e[n]);return t}}return e}static deepFreeze(e){for(const t of Object.keys(e)){const n=e[t];"object"==typeof n&&this.deepFreeze(n)}Object.freeze(e)}static deepEquals(e,t){return e===t||typeof e==typeof t&&("object"==typeof e&&"object"==typeof t?null!==e&&null!==t&&(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(((e,n)=>this.deepEquals(e,t[n]))):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():Object.keys(e).every((n=>n in t&&this.deepEquals(e[n],t[n])))&&Object.keys(t).every((n=>n in e&&this.deepEquals(t[n],e[n])))):e===t)}static mapToObject(e,t){const n={};return e.forEach(((e,i,r)=>n[e]=t(e,i,r))),n}static mapToArray(e,t){const n=[];for(const i in e)n.push(t(i,e[i],e));return n}static some(e,t){for(const n in e)if(t(n,e[n],e))return!0;return!1}static every(e,t){for(const n in e)if(!t(n,e[n],e))return!1;return!0}static forEach(e,t){let n=0;for(const i in e)t(i,e[i],n,e),n++}}},8036:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});class i{static generateID(e=20,t=!1){let n="";if(t){const t=new Uint16Array(e);crypto.getRandomValues(t),t.forEach((e=>n+=this.ID_CHARS[e%this.ID_CHARS.length]))}else for(;n.length<e;)n+=this.ID_CHARS[Math.floor(Math.random()*this.ID_CHARS.length)];return n}static capitalize(e){return e.slice(0,1).toUpperCase()+e.slice(1)}static normalize(e){return e.normalize("NFD").replace(/\p{Diacritic}/gu,"").toLocaleLowerCase().trim()}}i.ID_CHARS="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";const r=i},6984:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});const i=class{static toKebabCase(e){let t="";for(let n=0;n<e.length;n++){const i=e[n];i===i.toUpperCase()?t+="-"+i.toLowerCase():t+=i}return t}static apply(e,t){for(const n in e){const i=e[n];t.style.setProperty(this.toKebabCase(n),i)}return t}}},8356:(e,t,n)=>{"use strict";n.d(t,{O:()=>i,c:()=>o});var i,r=n(784),s=n(1244);!function(e){const t=["application/x-freearc","application/x-bzip","application/x-bzip2","application/gzip","application/vnd.rar","application/x-tar","application/zip","application/x-7z-compressed"];e.fromContentType=function(e){return t.some((t=>e.startsWith(t)))?"compressed-folder":e.startsWith("application/pdf")?"pdf":e.substring(0,e.indexOf("/"))}}(i||(i={}));class o{static toURL(e){if(e instanceof URL)return e;try{return new URL(e)}catch{if(e){if(e.startsWith("/"))return new URL(location.origin+e);{e.startsWith("./")&&(e=e.substring(2));const t=location.href.substring(0,location.href.lastIndexOf("/"));return new URL(`${t}/${e}`)}}return new URL(location.href)}}static createLinkBackURL(e,t=location.href){return e=this.toURL(e),t=this.toURL(t),e.searchParams.append("return-to",t.toString()),e}static isLocal(e){try{return(e=this.toURL(e)).origin===location.origin}catch{return!1}}static getType(e){return this.getInfo(e).then((e=>e.fileType))}static getInfo(e){return new Promise(((t,n)=>{try{const o=this.toURL(e),a=new XMLHttpRequest;a.timeout=2500,a.onerror=e=>n(404===a.status?new Error("Kan bestand niet vinden",{cause:"not found"}):new Error("Er ging iets mis",{cause:"unknown"})),a.ontimeout=e=>n(new Error("Kan bestand niet vinden",{cause:"timeout"})),a.onload=()=>{if(200<=a.status&&a.status<300){const e={contentType:a.getResponseHeader("content-type"),contentLength:a.getResponseHeader("content-length"),lastModified:a.getResponseHeader("last-modified")},n=o.href,c=o.pathname.substring(o.pathname.lastIndexOf("/")+1),l=e.contentType??"unknown/unknown";let u=i.fromContentType(l);const h=e.contentLength&&s.c.isInt(e.contentLength)?Number.parseInt(e.contentLength):void 0,d=e.lastModified&&r.c.Timestamps.isValid(e.lastModified)?new Date(e.lastModified):void 0;t({href:n,name:c,contentType:l,fileType:u,size:h,lastModified:d})}else n(new Error("Er ging iets mis",{cause:"unknown"}))},a.open("HEAD",o,!0),a.send()}catch{n(new Error("URL is ongeldig",{cause:"invalid url"}))}}))}static getHashProperties(e=location){const t=e.hash.substring(1).split(",").filter((e=>0!==e.length)),n={};for(const e of t){const[t,i]=e.split("=");n[t]=i}return n}static setHashProperty(e,t){const n=this.getHashProperties(),i=n[e]??null;null===t?delete n[e]:n[e]=t;let r="#";for(const e in n)r+=(r.length>1?",":"")+`${e}=${n[e]}`;return history.replaceState(null,"",r),i}static getLinkIcon(e){try{const t=o.toURL(e);return o.isLocal(t)?["/","","/index"].includes(t.pathname)?"home":t.pathname.startsWith("/inloggen")?"login":t.pathname.startsWith("/artikel")?"newsmode":t.pathname.startsWith("/agenda")?t.searchParams.has("id")?"event_note":"calendar_month":t.pathname.startsWith("/administratiepaneel")?"admin_panel_settings":"link":"open_in_new"}catch{return"error"}}}},9796:(e,t,n)=>{"use strict";var i,r;n.d(t,{c:()=>i,s:()=>r}),function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e[e.FULL=3]="FULL"}(i||(i={})),function(e){e.checkType=function(t){return e.LOW<=t&&t<=e.FULL},e.toString=function(t){switch(t){case e.LOW:return"low";case e.MEDIUM:return"medium";case e.HIGH:return"high";case e.FULL:return"full"}},e.fromString=function(t){switch(t){case"low":return e.LOW;case"medium":return e.MEDIUM;case"high":return e.HIGH;case"full":return e.FULL;default:return}}}(i||(i={})),function(e){e.checkType=function(e){return"firebase-storage-public"===e||"firebase-storage-protected"===e||"external"===e}}(r||(r={}))},996:(e,t,n)=>{"use strict";var i=n(9928),r=n(908),s=n(8828),o=n(2824),a=n(3935),c=n(2464),l=n(8860),u=n(9848);const h=new l.default;var d;r.c.useDynamicContent((d=h,i.c.getAndRefresh("sponsor-links",d.getSponsorLinks()).then((e=>u.c.div("split-view").children(new o.c("split-view-content"),u.c.div("news-letters","boxed","flex-rows","cross-axis-center").children(u.c.h2("Nieuwsbrieven").class("section-name"),document.getElementsByClassName("display_archive")[0]).onMake((e=>{const t=e.lastElementChild;r.c.useDynamicContent((0,a.qM)(c.c.Permission.READ_MEMBER_ARTICLES),(n=>{n.READ_MEMBER_ARTICLES?(t.classList.add("flex-rows","in-section-gap"),t.childNodes.forEach((e=>{e.firstChild?.remove();const t=e.firstChild;t.addEventListener("click",(()=>location.href=t.href))}))):(t.remove(),e.appendChild(u.c.div(void 0,"flex-rows","center-content","in-section-gap","in-section-padding").children(u.c.p("Nieuwsbrieven zijn exclusief voor leden").class("no-margin","text-center"),u.c.iconButton("login",(()=>location.href="./inloggen.html"),"Inloggen")).style({flexGrow:"1"}).make()))}))})),u.c.div("sponsors","boxed","flex-rows").children(u.c.h2("Onze sponsoren").class("section-name"),u.c.div(void 0,"logos","flex-rows","main-axis-space-between","cross-axis-center").children(...e.sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>u.c.a(e.href).openInNewTab(!0).class("center-content").children(new s.c(e.origin,e.src)).tooltip(e.name).onMake((t=>{const n=t.firstElementChild;n.alt=e.name,n.classList.add("click-action")}))))))).make()))),(e=>{const t=document.getElementsByClassName("content")[0];if(!t)throw new Error("split-view insertion failed: no content element found");t.replaceWith(e),o.c.replaceWith("split-view-content",t)}))},4216:(e,t,n)=>{"use strict";var i=n(7588),r=n.n(i),s=n(5245),o=n(9848),a=n(4388),c=n(8144),l=n(3935),u=n(2464),h=n(9928),d=n(8860),f=n(8596),p=n(8828),g=n(908),m=n(992),y=n(8392);n(5752);const v=new d.default;function E(e,t){let n=!1;try{n=new URL(t).hostname!==window.location.hostname}catch(e){}return o.c.a(t).class("link").openInNewTab(n).children(o.c.h5(e).children(n?o.c.span(" open_in_new").class("icon"):null)).make()}function w(e,t=0){const n=[];for(const i in e){const r=e[i];if("string"==typeof r)n.push(E(i,r));else{const e=new s.c(i,0===t?"down":"right","absolute",200);e.append(...w(r,t+1)),n.push(e)}}return n}g.c.useDynamicContent(function(e){const t=new Date,n=1===t.getMonth()&&5===t.getDate();return h.c.getAndRefresh("navbar-links",e.getNavbarLinks()).then((e=>{let i,d,p,g;const v=o.c.header().class("page-header").children(o.c.div("header-container","flex-columns","main-axis-space-between","cross-axis-center").children(o.c.div().class("desc","flex-rows","main-axis-center").children(o.c.a("/").class("flex-columns","cross-axis-center","in-section-gap").children(o.c.h3("Den Geitenwollen Soc."),n&&o.c.h3(`${function(e){const t=["0","1","2","3","4","5","6","7","8","9"];return[...(e=Math.round(e)).toString()].map((e=>t[Number.parseInt(e)])).join("")}(t.getFullYear()-1993)}`)),o.c.p("Studievereniging Sociologie Nijmegen").class("subtitle")),o.c.div().class("links","flex-columns","main-axis-center","cross-axis-baseline").children(...w(e)),o.c.div().class("quick-actions","center-content","main-axis-space-between","cross-axis-center").children(i=o.c.p("search").class("search-button","icon","click-action").on("click",((e,t)=>{t.textContent="none"===d.style.display?"search_off":"search","search_off"===t.textContent&&setTimeout((()=>g.focus()),0),r()(d).stop().slideToggle(200)})).onMake((e=>{document.body.addEventListener("click",(t=>{t.target instanceof Node&&!d.contains(t.target)&&t.target!==e&&(e.textContent="search",r()(d).stop().slideUp(200))})),a.c.onChange((()=>e.hidden=a.c.isSlimmerOrEq(a.c.Viewport.MOBILE_PORTRAIT)))})).make(),o.c.p("admin_panel_settings").class("icon","click-action").tooltip("Administratie-paneel").on("click",(()=>location.href="/administratiepaneel.html")).onMake((e=>{(0,l.kL)(u.c.Permission.VIEW_ADMIN_PANEL,(t=>e.style.display=t?"":"none"),!0,!0)})),o.c.p("login").class("icon","click-action").tooltip("Inloggen").on("click",(()=>location.href="/inloggen.html")).onMake((e=>{(0,c.o1)((t=>e.style.display=t?"none":""),!0),c.wX.onAuthStateChanged((t=>e.style.display=t?"none":""))})),o.c.p("logout").class("icon","click-action").tooltip("Uitloggen").on("click",(()=>{c.wX.signOut(),h.c.remove("is-logged-in"),h.c.remove("do-login-expiry"),h.c.remove(`permissions-${h.c.get("own-id")}`),h.c.remove("own-id"),location.reload()})).onMake((e=>{(0,c.o1)((t=>e.style.display=t?"":"none"),!0),c.wX.onAuthStateChanged((t=>e.style.display=t?"":"none"))})),o.c.p("menu").id("open-menu-button").class("icon","click-action").style({display:"none"}).on("click",(()=>{b.hasAttribute("shown")?E():(r()(_).stop().fadeIn(200),b.setAttribute("shown",""),T.textContent="menu_open",document.body.classList.add("no-scroll"))}))),d=o.c.div(void 0,"search-box","flex-columns","main-axis-space-between","cross-axis-center","section-gap").style({display:"none"}).children(p=o.c.div(void 0,"results","flex-columns","cross-axis-center","in-section-gap").children(document.createElement("p")).make(),g=o.c.input.text().placeholder("Zoeken...").class("query-input").onValueChanged((t=>{if(m.c.empty(p),t=t.trim()){const n=f.C.search(e,t);p.append(...y.c.interlace(n.map((([e,t])=>o.c.a(t,e).class("subtitle").make())),""))}p.appendChild(document.createElement("p"))})).make()).make()),o.c.div("sidebar-container").children(o.c.div("sidebar","links")).on("click",((e,t)=>{e.target===t&&E()}))).make();function E(){r()(_).stop().fadeOut(200),b.removeAttribute("shown"),T.textContent="menu",document.body.classList.remove("no-scroll")}const _=v.querySelector("#sidebar-container"),b=v.querySelector("#sidebar"),T=v.querySelector("#open-menu-button"),S=v.querySelector(".links"),A=v.querySelector("#sidebar"),I=Array.from(v.querySelectorAll(".links > *"));return a.c.onChange((()=>{a.c.isSlimmerOrEq(a.c.Viewport.DESKTOP_SLIM)?(A.prepend(...I),I.forEach((e=>{e instanceof s.c&&(e.foldDir="right")}))):(S.prepend(...I),E(),I.forEach((e=>{e instanceof s.c&&(e.foldDir="down")})))}),!0),v}))}(v),(e=>document.body.prepend(e))),g.c.useDynamicContent(function e(t){return g.c.markLoadStart(e),h.c.getAndRefresh("social-media-links",t.getSocialMediaLinks()).then((e=>o.c.footer().class("page-footer","flex-rows","cross-axis-center").children(o.c.h4("Je vindt ons ook op").id("link-text"),o.c.div().class("social-media-links","flex-columns","main-axis-space-between").children(...e.map((e=>o.c.a(e.href).openInNewTab(!0).children(new p.c(e.origin,e.src)).onMake((t=>{const n=t.firstElementChild;n.alt=e.name,n.classList.add("click-action")}))))),o.c.h5(` ${(new Date).getFullYear()} Den Geitenwollen Soc.`).class("copyright-notice")).make())).finally((()=>g.c.markLoadEnd(e)))}(v),(e=>document.body.append(e)))},4376:(e,t,n)=>{"use strict";n.d(t,{kx:()=>s.kx,Sg:()=>P,U5:()=>R,q4:()=>L,WE:()=>F,mg:()=>M,Kk:()=>j});var i=n(392),r=n(4212),s=n(6900);const o=(e,t)=>t.some((t=>e instanceof t));let a,c;const l=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap;let p={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||h.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function g(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(c||(c=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(y(this),e),m(l.get(this))}:function(...e){return m(t.apply(y(this),e))}:function(e,...n){const i=t.call(y(this),e,...n);return h.set(i,e.sort?e.sort():[e]),m(i)}:(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));u.set(e,t)}(e),o(e,a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,p):e);var t}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(m(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&l.set(t,e)})).catch((()=>{})),f.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=g(e);return t!==e&&(d.set(e,t),f.set(t,e)),t}const y=e=>f.get(e),v=["get","getKey","getAll","getAllKeys","count"],E=["put","add","delete","clear"],w=new Map;function _(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=E.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!v.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),r&&s.done]))[0]};return w.set(t,s),s}var b;b=p,p={...b,get:(e,t,n)=>_(e,t)||b.get(e,t,n),has:(e,t)=>!!_(e,t)||b.has(e,t)};class T{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const S="@firebase/app",A="0.9.27",I=new r.YJ("@firebase/app"),C="[DEFAULT]",k={[S]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},x=new Map,D=new Map;function N(e,t){try{e.container.addComponent(t)}catch(n){I.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function L(e){const t=e.name;if(D.has(t))return I.debug(`There were multiple attempts to register component ${t}.`),!1;D.set(t,e);for(const t of x.values())N(t,e);return!0}function R(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const O=new s.UR("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class U{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.Yl("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw O.create("app-deleted",{appName:this._name})}}const P="10.8.0";function M(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:C,automaticDataCollectionEnabled:!1},t),o=r.name;if("string"!=typeof o||!o)throw O.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.Yd)()),!n)throw O.create("no-options");const a=x.get(o);if(a){if((0,s.IN)(n,a.options)&&(0,s.IN)(r,a.config))return a;throw O.create("duplicate-app",{appName:o})}const c=new i.op(o);for(const e of D.values())c.addComponent(e);const l=new U(n,r,c);return x.set(o,l),l}function F(e=C){const t=x.get(e);if(!t&&e===C&&(0,s.Yd)())return M();if(!t)throw O.create("no-app",{appName:e});return t}function j(e,t,n){var r;let s=null!==(r=k[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void I.warn(e.join(" "))}L(new i.Yl(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const B="firebase-heartbeat-database",V=1,q="firebase-heartbeat-store";let H=null;function z(){return H||(H=function(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=m(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(m(o.result),e.oldVersion,e.newVersion,m(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(B,V,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(q)}catch(e){console.warn(e)}}}).catch((e=>{throw O.create("idb-open",{originalErrorMessage:e.message})}))),H}async function $(e,t){try{const n=(await z()).transaction(q,"readwrite"),i=n.objectStore(q);await i.put(t,W(e)),await n.done}catch(e){if(e instanceof s.kx)I.warn(e.message);else{const t=O.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});I.warn(t.message)}}}function W(e){return`${e.name}!${e.options.appId}`}class G{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Y(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=K();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=K(),{heartbeatsToSend:n,unsentEntries:i}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),X(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),X(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=(0,s.Wg)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function K(){return(new Date).toISOString().substring(0,10)}class Y{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.yy)()&&(0,s.A3)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await z()).transaction(q),n=await t.objectStore(q).get(W(e));return await t.done,n}catch(e){if(e instanceof s.kx)I.warn(e.message);else{const t=O.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});I.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return $(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return $(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function X(e){return(0,s.Wg)(JSON.stringify({version:2,heartbeats:e})).length}L(new i.Yl("platform-logger",(e=>new T(e)),"PRIVATE")),L(new i.Yl("heartbeat",(e=>new G(e)),"PRIVATE")),j(S,A,""),j(S,A,"esm2017"),j("fire-js","")},392:(e,t,n)=>{"use strict";n.d(t,{Yl:()=>r,op:()=>a});var i=n(6900);class r{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new i.o9;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=s){return this.instances.has(e)}getOptions(e=s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===s?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e=s){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},4212:(e,t,n)=>{"use strict";n.d(t,{Ge:()=>r,YJ:()=>l});const i=[];var r;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(r||(r={}));const s={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},o=r.INFO,a={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},c=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=a[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[r](`[${i}]  ${e.name}:`,...n)};class l{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in r))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...e),this._logHandler(this,r.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...e),this._logHandler(this,r.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,r.INFO,...e),this._logHandler(this,r.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,r.WARN,...e),this._logHandler(this,r.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...e),this._logHandler(this,r.ERROR,...e)}}},8824:(e,t,n)=>{"use strict";n.d(t,{kx:()=>i.kx,mg:()=>i.mg});var i=n(4376);(0,i.Kk)("firebase","10.8.0","app")}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";n(4216),n(996);var e=n(908),t=n(6316);function i(e){const n=Number.parseFloat(e.getAttribute("parallax-factor"));if(!isNaN(n)){e.style.setProperty("--parallax-factor",n.toString());const i=getComputedStyle(e),r=t.c.isReplacedElement(e)?i.objectPosition.split(" "):i.translate.split(" ");if(e.style.setProperty("--original-displacement-x",r[0]),e.style.setProperty("--original-displacement-y",r[1]),e instanceof HTMLImageElement){const t=e.getBoundingClientRect();e.style.setProperty("--min-displacement-y",t.height-e.naturalHeight+"px"),e.style.setProperty("--max-displacement-y",`calc(100% + ${e.naturalHeight-t.height}px)`)}else e.style.setProperty("--min-displacement-y","0%"),e.style.setProperty("--max-displacement-y","100%");e.setAttribute("parallax-scrolling","")}}e.c.onDOMContentLoaded().then((()=>{document.body.style.setProperty("--scroll-x",window.scrollX+"px"),document.body.style.setProperty("--scroll-y",window.scrollY+"px"),document.querySelectorAll("*[parallax-factor]").forEach((e=>{e instanceof HTMLElement&&i(e)})),new MutationObserver((e=>{for(const t of e)if("childList"===t.type&&t.target instanceof Element){const e=[t.target];for(;e.length;){const t=e.pop();t instanceof HTMLElement&&t.hasAttribute("parallax-factor")&&!t.hasAttribute("parallax-scrolling")&&i(t),e.push(...Array.from(t.children))}}})).observe(document.body,{attributes:!0,childList:!0,subtree:!0})})),document.addEventListener("scroll",(()=>{requestAnimationFrame((()=>{document.body.style.setProperty("--scroll-x",window.scrollX+"px"),document.body.style.setProperty("--scroll-y",window.scrollY+"px")}))}));class r extends HTMLElement{get currentIndex(){return this.current}constructor(e=5e3,t=1e3,n=0){super(),this.revolvingElements=[],this.classList.add("center-content"),this.delay=Number.parseFloat(this.getAttribute("delay")),isNaN(this.delay)&&(this.delay=e),this.fadeTime=Number.parseFloat(this.getAttribute("fade-time")),isNaN(this.fadeTime)&&(this.fadeTime=t),this.style.setProperty("--fade-time",this.fadeTime+"ms"),this.current=Number.parseInt(this.getAttribute("current")),isNaN(this.current)&&(this.current=n),this.revolvingElements.push(...Array.from(this.children).filter((e=>e.hasAttribute("cover")))),this.revolvingElements.filter(((e,t)=>t!==this.current)).forEach((e=>e.setAttribute("hide",""))),setInterval((()=>{const e=this.current;this.current=(this.current+1)%this.revolvingElements.length,this.revolvingElements[e]?.setAttribute("hide",""),this.revolvingElements[this.current]?.removeAttribute("hide")}),this.delay)}appendChild(e){return e instanceof Element&&!e.hasAttribute("cover")&&this.revolvingElements.push(e)-1!==this.current&&e.setAttribute("hide",""),super.appendChild(e)}append(...e){for(const t of e)"string"==typeof t?this.appendChild(document.createTextNode(t)):this.appendChild(t)}}customElements.define("element-carousel",r);var s=n(9796),o=n(7936),a=n(3935),c=n(2464),l=n(7632);class u extends l.S{constructor(e,t,n,i,r,s,o,a){super(t,[]),this.sourceDB=e,this.heading=n,this.body=i,this.created_at=r,this.category=s,this.show_on_homepage=o,this.only_for_members=a}copy(){return new u(this.sourceDB,this.id,this.heading,this.body,new Date(this.created_at),this.category,this.show_on_homepage,this.only_for_members)}satisfies(e){return!(!super.satisfies(e)||e.after&&e.after>this.created_at||e.before&&e.before<this.created_at||e.category&&e.category!==this.category||e.forHomepage&&!this.show_on_homepage)}equals(e){return super.equals(e)&&e.heading===this.heading&&e.body===this.body&&e.created_at.getTime()===this.created_at.getTime()&&e.category===this.category&&e.show_on_homepage===this.show_on_homepage&&e.only_for_members===this.only_for_members}}class h extends l.c{}var d,f=n(9848),p=n(784),g=n(992),m=n(9368),y=n(3236),v=n(5752);class E extends HTMLElement{constructor(e,t=s.c.MEDIUM){super(),this.article=e,this.lod=t,this.initElement()}initElement(){this.style.display="flex",this.style.position="relative",this.setAttribute("lod",s.c.toString(this.lod)),this.heading=f.c.a(this.lod!==s.c.FULL?d.getLinkTo(this.article):void 0).class("heading").children(f.c.h1(this.article.heading)).make(),this.body=f.c.div(void 0,"body","rich-text","flex-rows","in-section-gap").children(...y.c.deserialize(this.article.body)).make(),g.c.onEach(this.body,(e=>{e instanceof Element&&e.toggleAttribute("hidden",d.LOD_HIDDEN_ELEMENT_TYPES[this.lod].includes(e.tagName))})),g.c.limitWords(this.body,d.LOD_CUTOFFS[this.lod])<=0&&(this.body.textContent+=""),this.postDate=f.c.p("Geplaatst op "+p.c.DATE_FORMATS.DAY_AND_TIME.SHORT(this.article.created_at)).class("post-date","no-margin").make(),this.readMore=this.lod===s.c.LOW?this.readMore=f.c.a(d.getLinkTo(this.article),"article_shortcut").tooltip("Naar bericht gaan").class("read-more","icon").make():f.c.a(d.getLinkTo(this.article),"Lees verder ").class("read-more").make(),this.quickActions=f.c.div(void 0,"quick-actions","flex-columns","cross-axis-center").children(this.lod===s.c.LOW&&this.readMore,d.CAN_UPDATE&&f.c.p("edit_square").id("edit-button").class("icon","click-action").tooltip("Bericht bewerken").on("click",((e,t)=>{this.lod===s.c.FULL?this.replaceWith(new _(this.article,this.lod)):location.href=d.getLinkTo(this.article,!0)})),d.CAN_DELETE&&f.c.p("delete").id("delete-button").class("icon","click-action").tooltip("Bericht verwijderen").on("click",((e,t)=>{t.hasAttribute("awaiting-confirmation")?this.article.sourceDB.delete(this.article).then((()=>{v.c.success("Bericht succesvol verwijderd."),location.pathname.startsWith("/artikel")?location.href="/":location.reload()})).catch((e=>v.c.error((0,o.c)(e)))):(t.textContent="delete_forever",t.title="Definitief verwijderen",t.setAttribute("awaiting-confirmation",""),t.classList.add("pulsate-in"),v.c.warning("Zeker weten? Een bericht verwijderen kan niet worden teruggedraaid!",5e3),setTimeout((()=>{t.textContent="delete",t.title="Bericht verwijderen",t.classList.remove("pulsate-in"),t.removeAttribute("awaiting-confirmation")}),5e3))})),f.c.p("share").id("share-button").class("icon","click-action").tooltip("Delen").on("click",(()=>{const e=d.getLinkTo(this.article);navigator.canShare({url:e,title:`GWS Bericht - ${this.article.heading}`})?navigator.share({url:e,title:`GWS Bericht - ${this.article.heading}`}):navigator.clipboard.writeText(e).then((()=>v.c.success("Link gekopieerd!"))).catch((()=>v.c.error("Kan link niet kopiren, probeer het later opnieuw.")))}))).style({position:"absolute",right:"var(--in-section-gap)",top:"var(--in-section-gap)"}).make(),this.lod===s.c.LOW?(this.classList.add("flex-columns","in-section-gap","main-axis-space-between","cross-axis-center"),this.append(f.c.div(void 0,"flex-rows","in-section-gap").children(this.heading,this.body,this.postDate).make(),this.quickActions)):(this.classList.add("flex-rows",this.lod===s.c.FULL?"min-section-gap":"in-section-gap"),this.append(this.heading,this.body,this.readMore,this.postDate,this.quickActions))}static getLinkTo(e,t=!1){e instanceof u&&(e=e.id);let n=`${location.origin}/artikel.html?id=${e}`;return t&&(n+="&mode=edit"),n}}d=E,E.CAN_DELETE=!1,E.CAN_UPDATE=!1,(0,a.kL)([c.c.Permission.DELETE_ARTICLES,c.c.Permission.UPDATE_ARTICLES],((e,t)=>{d.CAN_DELETE=t.DELETE_ARTICLES,d.CAN_UPDATE=t.UPDATE_ARTICLES}),!0,!0),E.LOD_CUTOFFS={[s.c.FULL]:1/0,[s.c.HIGH]:100,[s.c.MEDIUM]:50,[s.c.LOW]:30},E.LOD_HIDDEN_ELEMENT_TYPES={[s.c.FULL]:[],[s.c.HIGH]:[],[s.c.MEDIUM]:["IMG","MULTISOURCE-IMAGE","MULTISOURCE-ATTACHMENT","UL","OL"],[s.c.LOW]:["H1","H2","H3","H4","H5","H6","IMG","MULTISOURCE-IMAGE","MULTISOURCE-ATTACHMENT","UL","OL"]};const w=E;e.c.onDOMContentLoaded().then((()=>customElements.define("smart-article",E,{extends:"article"})));class _ extends E{get data(){return{heading:this.heading.value.trim(),body:this.body.value,created_at:this.article.created_at,category:this.category.value.trim(),show_on_homepage:this.showOnHomepage.value,only_for_members:this.onlyForMembers.value}}constructor(e,t,n=!1){super(e,t),this.onSave=()=>{},(this.saveAsNew=n)&&(this.saveButton.textContent="post_add",this.saveButton.title="Bericht plaatsen"),window.addEventListener("beforeunload",(e=>{!document.body.contains(this)||e.defaultPrevented||_.PartialArticleInfo.equals(this.data,this.article)||e.preventDefault()}))}initElement(){this.style.display="flex",this.classList.add("flex-rows","min-section-gap"),this.setAttribute("lod",s.c.toString(this.lod)),this.heading=this.appendChild(f.c.input.text(this.article.heading).placeholder("Koptitel").class("heading").make()),this.append(f.c.div(void 0,"category-and-switches","flex-columns","main-axis-space-evenly","cross-axis-center","in-section-gap").children(this.category=f.c.input.text(this.article.category).placeholder("Categorie").class("category").make(),f.c.div(void 0,"show-on-homepage","flex-columns","main-axis-space-between","cross-axis-center","in-section-gap").children(f.c.label("Zichtbaar op homepagina?"),this.showOnHomepage=new m.c(this.article.show_on_homepage)),f.c.div(void 0,"only-for-members","flex-columns","main-axis-space-between","cross-axis-center","in-section-gap").children(f.c.label("Alleen te lezen door leden?"),this.onlyForMembers=new m.c(this.article.only_for_members))).make()),this.body=this.appendChild(f.c.input.richText(this.article.body).placeholder("Tekst").compact(!0).make()),this.quickActions=this.appendChild(f.c.div(void 0,"quick-actions","flex-columns","cross-axis-center").children(this.saveButton=f.c.p("save_as").id("save-changes-button").class("icon","click-action").tooltip("Wijzigingen opslaan").on("click",((e,t)=>{const n=this.data;if(n.heading){const e=this.heading.value.trim();(this.saveAsNew?_.findFreeId(this.article.sourceDB,e):Promise.resolve(this.article.id)).then((e=>{const t=new u(this.article.sourceDB,e,n.heading,n.body,n.created_at,n.category,n.show_on_homepage,n.only_for_members);this.article.sourceDB.write(t).then((()=>{v.c.success("Wijzigingen opgeslagen!"),this.replaceWith(new E(t,this.lod)),this.onSave(t)})).catch((e=>v.c.error((0,o.c)(e))))})).catch((e=>v.c.error((0,o.c)(e))))}else v.c.error("Koptitel is leeg.")})).make(),f.c.p("backspace").class("cancel-edit-button","icon","click-action").tooltip("Wijzigingen annuleren").on("click",(()=>{this.replaceWith(new E(this.article,this.lod))}))).style({position:"absolute",right:"var(--in-section-gap)",top:"var(--in-section-gap)"}).make())}static findFreeId(e,t){const n=[];let i="";for(let e=0;e<t.length;e++){const r=t[e];this.ALPHANUMERIC_REGEX.test(r)?i+=r:(i.length&&n.push(i),i="")}return i.length&&n.push(i),function t(n,i=0){const r=n+(i?`-${i}`:"");return e.getById(r).then((e=>e?t(n,i+1):r))}(n.join("-"))}}_.ALPHANUMERIC_REGEX=/[a-zA-Z0-9]/,function(e){let t;!function(e){e.equals=function(e,t){return e.heading===t.heading&&e.body===t.body&&e.created_at.getTime()===t.created_at.getTime()&&e.category===t.category&&e.only_for_members===t.only_for_members&&e.show_on_homepage===t.show_on_homepage}}(t=e.PartialArticleInfo||(e.PartialArticleInfo={}))}(_||(_={})),e.c.onDOMContentLoaded().then((()=>customElements.define("editable-smart-article",_)));class b extends HTMLElement{constructor(e,t){super(),this.currentPageIndex=0,this.paginator=e,this.elementConstructor=t,this.initElement()}initElement(){this.style.display="flex",this.classList.add("flex-rows","section-gap"),this.currentPage=this.appendChild(f.c.div(void 0,"current-page","flex-rows","section-gap").make()),this.pageNavigator=this.appendChild(f.c.div(void 0,"page-navigator","flex-columns","cross-axis-center","in-section-gap").children(f.c.p().class("flex-columns","cross-axis-center","in-section-gap","no-margin").children(f.c.span("Pagina"),this.pageNumber=f.c.span("1 / ?").make())).make()),this.paginator.getSize().then((e=>{this.pageNavigator.prepend(this.firstPageButton=f.c.input.button("first_page",(()=>{this.loadPage(this.currentPageIndex=0,!0)})).class("icon").disabled(0===e.numInfos).make(),this.previousPageButton=f.c.input.button("navigate_before",(()=>{this.loadPage(this.currentPageIndex=Math.max(0,this.currentPageIndex-1),!0)})).class("icon").disabled(0===e.numInfos).make(),this.nextPageButton=f.c.input.button("navigate_next",(()=>{this.loadPage(this.currentPageIndex=Math.min(e.numPages-1,this.currentPageIndex+1),!0)})).class("icon").disabled(0===e.numInfos).make(),this.lastPageButton=f.c.input.button("last_page",(()=>{this.loadPage(this.currentPageIndex=e.numPages-1,!0)})).class("icon").disabled(0===e.numInfos).make()),e.numInfos>0&&this.loadPage(this.currentPageIndex)})).catch(console.error)}loadPage(t,n=!1){return e.c.markLoadStart(this),this.paginator.getPage(t).then((e=>{g.c.empty(this.currentPage),this.currentPage.append(...e.infos.map((e=>this.elementConstructor(e)))),this.paginator.getSize().then((e=>{this.pageNumber.textContent=`${t+1}/${e.numPages}`,n&&window.scrollBy({top:this.currentPage.getBoundingClientRect().top,behavior:"smooth"}),this.firstPageButton.disabled=this.previousPageButton.disabled=0===t,this.lastPageButton.disabled=this.nextPageButton.disabled=t===e.numPages-1})).catch(console.error)})).then((()=>e.c.markLoadEnd(this)))}}const T=b;e.c.onDOMContentLoaded().then((()=>customElements.define("info-list",b)));class S extends T{constructor(e,t=s.c.MEDIUM){super(e,(e=>new w(e,t))),this.setAttribute("lod",s.c.toString(t))}}e.c.onDOMContentLoaded().then((()=>customElements.define("article-list",S)));var A=n(4112),I=n(8144);var C=n(2824),k=n(1244);class x{constructor(e,t,n,i="descending"){this.pageCache={},this.db=e,this.baseFilter=t,this.pageSize=n,this.sortOrder=i}getSize(){return this.numInfos&&this.numPages?Promise.resolve({numInfos:this.numInfos,numPages:this.numPages}):this.db.count(this.baseFilter).then((e=>({numInfos:this.numInfos=e,numPages:this.numPages=Math.ceil(e/this.pageSize)})))}addToPageCache(e,t){if(e in this.pageCache)throw new Error(`page index ${e} already in cache`);{const n=t.toSorted(((e,t)=>this.getMetric(e)-this.getMetric(t)));"descending"===this.sortOrder&&n.reverse();const i=n.map((e=>this.getMetric(e))),[r,s]=[Math.min(...i),Math.max(...i)];return this.pageCache[e]={index:e,infos:n,range:{min:r,max:s}}}}getPage(e){return e in this.pageCache?Promise.resolve(this.pageCache[e]):e<0?Promise.reject(new RangeError(`page index out of range: ${e} (minimum index is 0)`)):this.getSize().then((({numPages:t,numInfos:n})=>{if(e>=t)throw new RangeError(`page index out of range: ${e} (maximum index is ${t-1})`);if(0===e)return this.db.get({...this.getFirstPageFilter(this.sortOrder),...this.baseFilter,limit:this.pageSize}).then((t=>this.addToPageCache(e,t)));if(e===t-1){const t=n%this.pageSize||this.pageSize;return this.db.get({...this.getLastPageFilter(this.sortOrder),...this.baseFilter,limit:t}).then((t=>this.addToPageCache(e,t)))}{const t=Object.keys(this.pageCache).map((e=>parseInt(e))),n=k.c.closest(e,t)<e?e-1:e+1;return this.getPage(n).then((t=>{const n={...this.getFilterBySupportPage(this.sortOrder,t,e),...this.baseFilter,limit:this.pageSize};return this.db.get(n)})).then((t=>this.addToPageCache(e,t)))}}))}}!function(e){let t;!function(e){e.oppositeOf=function(e){return"ascending"===e?"descending":"ascending"}}(t=e.SortingOrder||(e.SortingOrder={}))}(x||(x={}));const D=x;class N extends D{constructor(e,t,n){super(e,t,n,"descending")}getMetric(e){return e.created_at.getTime()}getFirstPageFilter(e){return{sortByCreatedAt:e}}getLastPageFilter(e){return{sortByCreatedAt:D.SortingOrder.oppositeOf(e)}}getFilterBySupportPage(e,t,n){return t.index<n!=("descending"===e)?{after:new Date(t.range.max),sortByCreatedAt:"ascending"}:{before:new Date(t.range.min),sortByCreatedAt:"descending"}}}var L=n(4296);function R(e){return new Promise(((t,n)=>{const i=[];(0,L.kN)(R.FOLDER_REF).then((e=>e.items.sort(((e,t)=>e.fullPath.localeCompare(t.fullPath))))).then((s=>{for(let e=0;e<s.length;e++){const e=document.createElement("img");e.setAttribute("parallax-factor",".75"),i.push(e)}const o=new r(5e3,800);o.append(...i,f.c.h1(e).id("carousel-name").class("no-margin").attr("cover").attr("parallax-factor",.7).make(),f.c.div().attr("cover").make()),o.id="photo-carousel",s.forEach(((e,r)=>{(0,L.Kq)(e).then((e=>{0===r&&i[0].addEventListener("load",(()=>t(o))),i[r].addEventListener("load",(()=>i[r].toggleAttribute("loaded",!0))),i[r].src=e})).catch(n)}))})).catch(n)}))}!function(e){e.FOLDER_REF=(0,L.IL)(I.mw,"/openbaar/fotos-homepagina")}(R||(R={}));const O=R,U=new(n(9560).c);e.c.useDynamicContent((0,I.iA)(),(e=>{e&&U.getById(e.uid).then((e=>{0===e?.permissions.length&&v.c.warning("Je inschrijving moet eerst goedgekeurd worden voordat je toegang hebt tot alle berichten en je je kan inschrijven voor activiteiten.")}))})),e.c.useDynamicContent(O("Studievereniging Den Geitenwollen Soc."),(e=>{C.c.replaceWith("photo-carousel",e)}));const P=new class extends h{constructor(){var e;super(...arguments),this.converter=(e=this,{toFirestore:e=>({heading:e.heading,body:e.body,category:e.category,created_at:A.kR.fromDate(e.created_at),show_on_homepage:e.show_on_homepage,only_for_members:e.only_for_members}),fromFirestore(t){const n=t.data();return new u(e,t.id,n.heading,n.body,n.created_at.toDate(),n.category,n.show_on_homepage,n.only_for_members)}}),this.COLLECTION=(0,A.oV)(I.AZ,"articles").withConverter(this.converter)}get(e={}){return this.getArticles({sortByCreatedAt:"descending",...e})}count(e={}){return this.getArticles({...e},!0)}getById(e){const t=(0,A.UN)(this.COLLECTION,e);return(0,A.i4)(t).then((e=>e.exists()?e.data():void 0))}getByCategory(e,t){return this.getArticles({category:e,...t})}getNext(e,t){return this.getArticles({after:e.created_at,limit:1,sortByCreatedAt:"ascending",...t}).then((e=>e.length>0?e[0]:void 0))}getPrevious(e,t){return this.getArticles({before:e.created_at,limit:1,sortByCreatedAt:"descending",...t}).then((e=>e.length>0?e[0]:void 0))}doWrite(...e){const t=(0,A.sv)(I.AZ);for(const n of e)t.set((0,A.UN)(I.AZ,"articles",n.id),this.converter.toFirestore(n));return t.commit().then((()=>e.length))}doDelete(...e){const t=(0,A.sv)(I.AZ);for(const n of e)t.delete((0,A.UN)(I.AZ,"articles",n.id));return t.commit().then((()=>e.length))}getArticles(e,t=!1){const n=[];e.limit&&n.push((0,A.Yf)(e.limit)),e.id&&n.push((0,A.A9)((0,A.ET)(),"==",e.id)),e.notId&&n.push((0,A.A9)((0,A.ET)(),"!=",e.notId)),e.sortByCreatedAt&&n.push((0,A.k$)("created_at","ascending"===e.sortByCreatedAt?"asc":"desc")),e.before&&n.push((0,A.A9)("created_at","<",A.kR.fromDate(e.before))),e.after&&n.push((0,A.A9)("created_at",">",A.kR.fromDate(e.after))),"string"==typeof e.category&&n.push((0,A.A9)("category","==",e.category)),void 0!==e.forHomepage&&n.push((0,A.A9)("show_on_homepage","==",e.forHomepage)),void 0!==e.forMembers&&n.push((0,A.A9)("only_for_members","==",e.forMembers));const i=(0,A.kt)(this.COLLECTION,...n);return t?(0,A.QL)(i).then((e=>e.data().count)):(0,A.uY)(i).then((e=>{const t=[];return e.forEach((e=>t.push(e.data()))),t}))}};e.c.useDynamicContent((0,a.qM)(c.c.Permission.READ_MEMBER_ARTICLES,!0),(e=>{const t={forHomepage:!0,forMembers:!!e[c.c.Permission.READ_MEMBER_ARTICLES]&&void 0};C.c.replaceWith("article-list",new S(new N(P,t,5)))}))})()})();