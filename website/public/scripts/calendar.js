/*! For license information please see calendar.js.LICENSE.txt */
(()=>{var e={7088:(e,t,n)=>{"use strict";n.d(t,{Iv:()=>Yt});var r=n(6900),i=n(4376),s=n(4212);function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var a=n(392);const c=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},l=new r.UR("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),u=new s.YJ("@firebase/auth");function h(e,...t){u.logLevel<=s.Ge.ERROR&&u.error(`Auth (${i.Sg}): ${e}`,...t)}function d(e,...t){throw p(e,...t)}function f(e,...t){return p(e,...t)}function p(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return l.create(e,...t)}function m(e,t,...n){if(!e)throw p(t,...n)}function g(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function y(e,t){e||g(t)}function v(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function _(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class w{constructor(e,t){this.shortDelay=e,this.longDelay=t,y(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,r.AV)()||(0,r.AL)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===_()||"https:"===_()||(0,r.Cc)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function b(e,t){y(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class E{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void g("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void g("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void g("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const T={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},S=new w(3e4,6e4);function C(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function A(e,t,n,i,s={}){return k(e,s,(async()=>{let s={},o={};i&&("GET"===t?o=i:s={body:JSON.stringify(i)});const a=(0,r.ik)(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),E.fetch()(x(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},s))}))}async function k(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},T),t);try{const t=new N(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw R(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const t=s.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw R(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw R(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw R(e,"user-disabled",o);const l=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw function(e,t,n){const i=Object.assign(Object.assign({},c()),{[t]:n});return new r.UR("auth","Firebase",i).create(t,{appName:e.name})}(e,l,a);d(e,l)}}catch(t){if(t instanceof r.kx)throw t;d(e,"network-request-failed",{message:String(t)})}}async function I(e,t,n,r,i={}){const s=await A(e,t,n,r,i);return"mfaPendingCredential"in s&&d(e,"multi-factor-auth-required",{_serverResponse:s}),s}function x(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?b(e.config,i):`${e.config.apiScheme}://${i}`}function D(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class N{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(f(this.auth,"network-request-failed"))),S.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function R(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=f(e,t,r);return i.customData._tokenResponse=n,i}function O(e){return void 0!==e&&void 0!==e.enterprise}class L{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return D(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}function P(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function M(e){return 1e3*Number(e)}function F(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,r.WW)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(e){return h("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function U(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof r.kx&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class B{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class j{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=P(this.lastLoginAt),this.creationTime=P(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function V(e){var t;const n=e.auth,r=await e.getIdToken(),i=await U(e,async function(e,t){return A(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));m(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=(l=e.providerData,u=a,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const h=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==c?void 0:c.length)),f=!!h&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new j(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(e,p)}class z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){m(e.idToken,"internal-error"),m(void 0!==e.idToken,"internal-error"),m(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=F(e);return m(t,"internal-error"),m(void 0!==t.exp,"internal-error"),m(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return m(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await async function(e,t){const n=await k(e,{},(async()=>{const n=(0,r.ik)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=x(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",E.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new z;return n&&(m("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(m("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(m("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new z,this.toJSON())}_performRefresh(){return g("not implemented")}}function H(e,t){m("string"==typeof e||void 0===e,"internal-error",{appName:t})}class q{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new B(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new j(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await U(this,this.stsTokenManager.getToken(this.auth,e));return m(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=(0,r.Yj)(e),i=await n.getIdToken(t),s=F(i);m(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:P(M(s.auth_time)),issuedAtTime:P(M(s.iat)),expirationTime:P(M(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,r.Yj)(e);await V(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(m(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new q(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){m(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await V(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await U(this,async function(e,t){return A(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,y=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:_,emailVerified:w,isAnonymous:b,providerData:E,stsTokenManager:T}=t;m(_&&T,e,"internal-error");const S=z.fromJSON(this.name,T);m("string"==typeof _,e,"internal-error"),H(u,e.name),H(h,e.name),m("boolean"==typeof w,e,"internal-error"),m("boolean"==typeof b,e,"internal-error"),H(d,e.name),H(f,e.name),H(p,e.name),H(g,e.name),H(y,e.name),H(v,e.name);const C=new q({uid:_,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:y,lastLoginAt:v});return E&&Array.isArray(E)&&(C.providerData=E.map((e=>Object.assign({},e)))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t,n=!1){const r=new z;r.updateFromServerResponse(t);const i=new q({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await V(i),i}}const W=new Map;function $(e){y(e instanceof Function,"Expected a class definition");let t=W.get(e);return t?(y(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,W.set(e,t),t)}class G{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}G.type="NONE";const K=G;function Y(e,t,n){return`firebase:${e}:${t}:${n}`}class X{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Y(this.userKey,r.apiKey,i),this.fullPersistenceKey=Y("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?q._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new X($(K),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||$(K);const s=Y(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=q._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new X(i,e,n)):new X(i,e,n)}}function Q(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(te(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(J(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(re(t))return"Blackberry";if(ie(t))return"Webos";if(Z(t))return"Safari";if((t.includes("chrome/")||ee(t))&&!t.includes("edge/"))return"Chrome";if(ne(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function J(e=(0,r.Su)()){return/firefox\//i.test(e)}function Z(e=(0,r.Su)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ee(e=(0,r.Su)()){return/crios\//i.test(e)}function te(e=(0,r.Su)()){return/iemobile/i.test(e)}function ne(e=(0,r.Su)()){return/android/i.test(e)}function re(e=(0,r.Su)()){return/blackberry/i.test(e)}function ie(e=(0,r.Su)()){return/webos/i.test(e)}function se(e=(0,r.Su)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function oe(e=(0,r.Su)()){return se(e)||ne(e)||ie(e)||re(e)||/windows phone/i.test(e)||te(e)}function ae(e,t=[]){let n;switch(e){case"Browser":n=Q((0,r.Su)());break;case"Worker":n=`${Q((0,r.Su)())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${i.Sg}/${s}`}class ce{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class le{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ue{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new de(this),this.idTokenSubscription=new de(this),this.beforeStateQueue=new ce(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await X.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return m(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await V(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,r.Yj)(e):null;return t&&m(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&m(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence($(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return A(e,"GET","/v2/passwordPolicy",C(e,t))}(this),t=new le(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.UR("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return A(e,"POST","/v2/accounts:revokeToken",C(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$(e)||this._popupRedirectResolver;m(t,this,"argument-error"),this.redirectPersistenceManager=await X.create(this,[$(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(m(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return m(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){u.logLevel<=s.Ge.WARN&&u.warn(`Auth (${i.Sg}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function he(e){return(0,r.Yj)(e)}class de{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,r.my)((e=>this.observer=e))}get next(){return m(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fe={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pe(e){return fe.loadJS(e)}function me(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ge{constructor(e){this.type="recaptcha-enterprise",this.auth=he(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;O(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return A(e,"GET","/v2/recaptchaConfig",C(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new L(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&O(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=fe.recaptchaEnterpriseScript;0!==t.length&&(t+=i),pe(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ye(e,t,n,r=!1){const i=new ge(e);let s;try{s=await i.verify(n)}catch(e){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ve(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ye(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await ye(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function _e(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function we(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class be{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return g("not implemented")}_getIdTokenResponse(e){return g("not implemented")}_linkToIdToken(e,t){return g("not implemented")}_getReauthenticationResolver(e){return g("not implemented")}}async function Ee(e,t){return A(e,"POST","/v1/accounts:signUp",t)}async function Te(e,t){return I(e,"POST","/v1/accounts:signInWithPassword",C(e,t))}class Se extends be{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Se(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Se(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ve(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Te);case"emailLink":return async function(e,t){return I(e,"POST","/v1/accounts:signInWithEmailLink",C(e,t))}(e,{email:this._email,oobCode:this._password});default:d(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ve(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ee);case"emailLink":return async function(e,t){return I(e,"POST","/v1/accounts:signInWithEmailLink",C(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:d(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ce(e,t){return I(e,"POST","/v1/accounts:signInWithIdp",C(e,t))}class Ae extends be{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ae(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):d("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ae(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ce(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ce(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ce(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,r.ik)(t)}return e}}const ke={USER_NOT_FOUND:"user-not-found"};class Ie extends be{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ie({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ie({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return I(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await I(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,t));if(n.temporaryProof)throw R(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return I(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ke)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ie({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class xe{constructor(e){var t,n,i,s,o,a;const c=(0,r.aw)((0,r.kF)(e)),l=null!==(t=c.apiKey)&&void 0!==t?t:null,u=null!==(n=c.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);m(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,r.aw)((0,r.kF)(e)).link,n=t?(0,r.aw)((0,r.kF)(t)).deep_link_id:null,i=(0,r.aw)((0,r.kF)(e)).deep_link_id;return(i?(0,r.aw)((0,r.kF)(i)).link:null)||i||n||t||e}(e);try{return new xe(t)}catch(e){return null}}}class De{constructor(){this.providerId=De.PROVIDER_ID}static credential(e,t){return Se._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=xe.parseLink(t);return m(n,"argument-error"),Se._fromEmailAndCode(e,n.code,n.tenantId)}}De.PROVIDER_ID="password",De.EMAIL_PASSWORD_SIGN_IN_METHOD="password",De.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ne{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Re extends Ne{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Oe extends Re{constructor(){super("facebook.com")}static credential(e){return Ae._fromParams({providerId:Oe.PROVIDER_ID,signInMethod:Oe.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oe.credentialFromTaggedObject(e)}static credentialFromError(e){return Oe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Oe.credential(e.oauthAccessToken)}catch(e){return null}}}Oe.FACEBOOK_SIGN_IN_METHOD="facebook.com",Oe.PROVIDER_ID="facebook.com";class Le extends Re{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ae._fromParams({providerId:Le.PROVIDER_ID,signInMethod:Le.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Le.credentialFromTaggedObject(e)}static credentialFromError(e){return Le.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Le.credential(t,n)}catch(e){return null}}}Le.GOOGLE_SIGN_IN_METHOD="google.com",Le.PROVIDER_ID="google.com";class Pe extends Re{constructor(){super("github.com")}static credential(e){return Ae._fromParams({providerId:Pe.PROVIDER_ID,signInMethod:Pe.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pe.credentialFromTaggedObject(e)}static credentialFromError(e){return Pe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Pe.credential(e.oauthAccessToken)}catch(e){return null}}}Pe.GITHUB_SIGN_IN_METHOD="github.com",Pe.PROVIDER_ID="github.com";class Me extends Re{constructor(){super("twitter.com")}static credential(e,t){return Ae._fromParams({providerId:Me.PROVIDER_ID,signInMethod:Me.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Me.credentialFromTaggedObject(e)}static credentialFromError(e){return Me.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Me.credential(t,n)}catch(e){return null}}}Me.TWITTER_SIGN_IN_METHOD="twitter.com",Me.PROVIDER_ID="twitter.com";class Fe{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await q._fromIdTokenResponse(e,n,r),s=Ue(n);return new Fe({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ue(n);return new Fe({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ue(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Be extends r.kx{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Be.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Be(e,t,n,r)}}function je(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Be._fromErrorAndOperation(e,n,t,r);throw n}))}new WeakMap;const Ve="__sak";class ze{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ve,"1"),this.storage.removeItem(Ve),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class He extends ze{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,r.Su)();return Z(e)||se(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=oe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,r.Uv)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}He.type="LOCAL";const qe=He;class We extends ze{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}We.type="SESSION";const $e=We;class Ge{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ge(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ke(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Ge.receivers=[];class Ye{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Ke("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Xe(){return window}function Qe(){return void 0!==Xe().WorkerGlobalScope&&"function"==typeof Xe().importScripts}const Je="firebaseLocalStorageDb",Ze="firebaseLocalStorage",et="fbase_key";class tt{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function nt(e,t){return e.transaction([Ze],t?"readwrite":"readonly").objectStore(Ze)}function rt(){const e=indexedDB.open(Je,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ze,{keyPath:et})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ze)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Je);return new tt(e).toPromise()}(),t(await rt()))}))}))}async function it(e,t,n){const r=nt(e,!0).put({[et]:t,value:n});return new tt(r).toPromise()}function st(e,t){const n=nt(e,!0).delete(t);return new tt(n).toPromise()}class ot{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await rt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ge._getInstance(Qe()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ye(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rt();return await it(e,Ve,"1"),await st(e,Ve),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>it(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=nt(e,!1).get(t),r=await new tt(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>st(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=nt(e,!1).getAll();return new tt(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ot.type="LOCAL";const at=ot;me("rcb"),new w(3e4,6e4);class ct{constructor(e){this.providerId=ct.PROVIDER_ID,this.auth=he(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var r;const i=await n.verify();try{let s;if(m("string"==typeof i,e,"argument-error"),m("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){m("enroll"===t.type,e,"internal-error");const n=await function(e,t){return A(e,"POST","/v2/accounts/mfaEnrollment:start",C(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{m("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;m(n,e,"missing-multi-factor-info");const o=await function(e,t){return A(e,"POST","/v2/accounts/mfaSignIn:start",C(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return A(e,"POST","/v1/accounts:sendVerificationCode",C(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}(this.auth,e,(0,r.Yj)(t))}static credential(e,t){return Ie._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ct.credentialFromTaggedObject(t)}static credentialFromError(e){return ct.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Ie._fromTokenResponse(t,n):null}}ct.PROVIDER_ID="phone",ct.PHONE_SIGN_IN_METHOD="phone";class lt extends be{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ce(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ce(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ce(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ut(e){return async function(e,t,n=!1){const r="signIn",i=await je(e,r,t),s=await Fe._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}(e.auth,new lt(e),e.bypassAuthState)}function ht(e){const{auth:t,user:n}=e;return m(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await U(e,je(r,i,t,e),n);m(s.idToken,r,"internal-error");const o=F(s.idToken);m(o,r,"internal-error");const{sub:a}=o;return m(e.uid===a,r,"user-mismatch"),Fe._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&d(r,"user-mismatch"),e}}(n,new lt(e),e.bypassAuthState)}async function dt(e){const{auth:t,user:n}=e;return m(n,t,"internal-error"),async function(e,t,n=!1){const r=await U(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Fe._forOperation(e,"link",r)}(n,new lt(e),e.bypassAuthState)}class ft{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ut;case"linkViaPopup":case"linkViaRedirect":return dt;case"reauthViaPopup":case"reauthViaRedirect":return ht;default:d(this.auth,"internal-error")}}resolve(e){y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pt=new w(2e3,1e4);class mt extends ft{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,mt.currentPopupAction&&mt.currentPopupAction.cancel(),mt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return m(e,this.auth,"internal-error"),e}async onExecution(){y(1===this.filter.length,"Popup operations only handle one event");const e=Ke();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(f(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(f(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,pt.get())};e()}}mt.currentPopupAction=null;const gt="pendingRedirect",yt=new Map;class vt extends ft{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=yt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Y(gt,e.config.apiKey,e.name)}(t),r=function(e){return $(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}yt.set(this.auth._key(),e)}return this.bypassAuthState||yt.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function _t(e,t){yt.set(e._key(),t)}async function wt(e,t,n=!1){const r=he(e),i=function(e,t){return t?$(t):(m(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),s=new vt(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class bt{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tt(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Tt(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(f(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Et(e))}saveEventToCache(e){this.cachedEventUids.add(Et(e)),this.lastProcessedEventTime=Date.now()}}function Et(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Tt({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const St=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ct=/^https?/;function At(e){const t=v(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ct.test(n))return!1;if(St.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const kt=new w(3e4,6e4);function It(){const e=Xe().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function xt(e){return new Promise(((t,n)=>{var r,i,s;function o(){It(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{It(),n(f(e,"network-request-failed"))},timeout:kt.get()})}if(null===(i=null===(r=Xe().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Xe().gapi)||void 0===s?void 0:s.load)){const t=me("iframefcb");return Xe()[t]=()=>{gapi.load?o():n(f(e,"network-request-failed"))},pe(`${fe.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Dt=null,e}))}let Dt=null;const Nt=new w(5e3,15e3),Rt="__/auth/iframe",Ot="emulator/auth/iframe",Lt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mt(e){const t=e.config;m(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?b(t,Ot):`https://${e.config.authDomain}/${Rt}`,s={apiKey:t.apiKey,appName:e.name,v:i.Sg},o=Pt.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,r.ik)(s).slice(1)}`}const Ft={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ut{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const Bt=encodeURIComponent("fac");async function jt(e,t,n,s,o,a){m(e.config.authDomain,e,"auth-domain-config-required"),m(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:i.Sg,eventId:o};if(t instanceof Ne){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",(0,r.t7)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(t instanceof Re){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const l=c;for(const e of Object.keys(l))void 0===l[e]&&delete l[e];const u=await e._getAppCheckToken(),h=u?`#${Bt}=${encodeURIComponent(u)}`:"";return`${function({config:e}){return e.emulator?b(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,r.ik)(l).slice(1)}${h}`}const Vt="webStorageSupport",zt=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$e,this._completeRedirectFn=wt,this._overrideRedirectResult=_t}async _openPopup(e,t,n,i){var s;return y(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const l=Object.assign(Object.assign({},Ft),{width:i.toString(),height:s.toString(),top:o,left:a}),u=(0,r.Su)().toLowerCase();n&&(c=ee(u)?"_blank":n),J(u)&&(t=t||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=(0,r.Su)()){var t;return se(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new Ut(null);const d=window.open(t||"",c,h);m(d,e,"popup-blocked");try{d.focus()}catch(e){}return new Ut(d)}(e,await jt(e,t,n,v(),i),Ke())}async _openRedirect(e,t,n,r){return await this._originValidation(e),i=await jt(e,t,n,v(),r),Xe().location.href=i,new Promise((()=>{}));var i}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(y(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await function(e){return Dt=Dt||xt(e),Dt}(e),n=Xe().gapi;return m(n,e,"internal-error"),t.open({where:document.body,url:Mt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lt,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=f(e,"network-request-failed"),s=Xe().setTimeout((()=>{r(i)}),Nt.get());function o(){Xe().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new bt(e);return t.register("authEvent",(t=>(m(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vt,{type:Vt},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Vt];void 0!==i&&t(!!i),d(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return A(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(At(e))return}catch(e){}d(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oe()||Z()||se()}};var Ht="@firebase/auth",qt="1.6.0";class Wt{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){m(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const $t=(0,r.sX)("authIdTokenMaxAge")||300;let Gt=null;const Kt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$t)return;const i=null==n?void 0:n.token;Gt!==i&&(Gt=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Yt(e=(0,i.WE)()){const t=(0,i.U5)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,i.U5)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),i=n.getOptions();if((0,r.IN)(i,null!=t?t:{}))return e;d(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:zt,persistence:[at,qe,$e]}),s=(0,r.sX)("authTokenSyncURL");if(s){const e=Kt(s);!function(e,t,n){(0,r.Yj)(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(t,n,i,s){(0,r.Yj)(t).onIdTokenChanged((t=>e(t)),void 0,void 0)}(n)}const o=(0,r.EB)("auth");return o&&function(e,t,n){const r=he(e);m(r._canInitEmulator,r,"emulator-config-failed"),m(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=_e(t),{host:o,port:a}=function(e){const t=_e(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:we(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:we(t)}}}(t),c=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${o}`),n}var Xt;fe={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=f("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Xt="Browser",(0,i.q4)(new a.Yl("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;m(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:Xt,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ae(Xt)},c=new ue(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map($);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(c,t),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,i.q4)(new a.Yl("auth-internal",(e=>{return t=he(e.getProvider("auth").getImmediate()),new Wt(t);var t}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,i.Kk)(Ht,qt,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Xt)),(0,i.Kk)(Ht,qt,"esm2017")},4112:(e,t,n)=>{"use strict";n.d(t,{kR:()=>Zr,oV:()=>du,cr:()=>bh,UN:()=>fu,ET:()=>Tu,QL:()=>vh,i4:()=>fh,uY:()=>mh,gZ:()=>gu,Yf:()=>nh,k$:()=>eh,kt:()=>Yu,Sm:()=>gh,A9:()=>Qu,sv:()=>Eh});var r,i=n(4376),s=n(392),o=n(4212),a=n(6900),c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l={},u=u||{},h=c||self;function d(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var p="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(e,t,n){return e.call.apply(e.bind,arguments)}function y(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function v(e,t,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:y).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function b(){this.s=this.s,this.o=this.o}b.prototype.s=!1,b.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,p)&&e[p]||(e[p]=++m))},b.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function T(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function S(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(d(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function C(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};h.addEventListener("test",e,t),h.removeEventListener("test",e,t)}catch(e){}return e}();function k(e){return/^[\s\xa0]*$/.test(e)}function I(){var e=h.navigator;return e&&(e=e.userAgent)?e:""}function x(e){return-1!=I().indexOf(e)}function D(e){return D[" "](e),e}D[" "]=function(){};var N,R,O,L=x("Opera"),P=x("Trident")||x("MSIE"),M=x("Edge"),F=M||P,U=x("Gecko")&&!(-1!=I().toLowerCase().indexOf("webkit")&&!x("Edge"))&&!(x("Trident")||x("MSIE"))&&!x("Edge"),B=-1!=I().toLowerCase().indexOf("webkit")&&!x("Edge");function j(){var e=h.document;return e?e.documentMode:void 0}e:{var V="",z=(R=I(),U?/rv:([^\);]+)(\)|;)/.exec(R):M?/Edge\/([\d\.]+)/.exec(R):P?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(R):B?/WebKit\/(\S+)/.exec(R):L?/(?:Version)[ \/]?(\S+)/.exec(R):void 0);if(z&&(V=z?z[1]:""),P){var H=j();if(null!=H&&H>parseFloat(V)){N=String(H);break e}}N=V}h.document&&P?O=j()||parseInt(N,10)||void 0:O=void 0;var q=O;function W(e,t){if(C.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(U){e:{try{D(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:$[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&W.$.h.call(this)}}w(W,C);var $={2:"touch",3:"pen",4:"mouse"};W.prototype.h=function(){W.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),K=0;function Y(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++K,this.fa=this.ia=!1}function X(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Q(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function J(e){const t={};for(const n in e)t[n]=e[n];return t}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<Z.length;t++)n=Z[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function te(e){this.src=e,this.g={},this.h=0}function ne(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=E(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(X(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function re(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}te.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=re(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Y(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var ie="closure_lm_"+(1e6*Math.random()|0),se={};function oe(e,t,n,r,i){if(r&&r.once)return ce(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)oe(e,t[s],n,r,i);return null}return n=me(n),e&&e[G]?e.O(t,n,f(r)?!!r.capture:!!r,i):ae(e,t,n,!1,r,i)}function ae(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=f(i)?!!i.capture:!!i,a=fe(e);if(a||(e[ie]=a=new te(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){const e=de;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)A||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(he(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ce(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ce(e,t[s],n,r,i);return null}return n=me(n),e&&e[G]?e.P(t,n,f(r)?!!r.capture:!!r,i):ae(e,t,n,!0,r,i)}function le(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)le(e,t[s],n,r,i);else r=f(r)?!!r.capture:!!r,n=me(n),e&&e[G]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=re(s=e.g[t],n,r,i))&&(X(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=fe(e))&&(t=e.g[t.toString()],e=-1,t&&(e=re(t,n,r,i)),(n=-1<e?t[e]:null)&&ue(n))}function ue(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[G])ne(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(he(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=fe(t))?(ne(n,e),0==n.h&&(n.src=null,t[ie]=null)):X(e)}}}function he(e){return e in se?se[e]:se[e]="on"+e}function de(e,t){if(e.fa)e=!0;else{t=new W(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ue(e),e=n.call(r,t)}return e}function fe(e){return(e=e[ie])instanceof te?e:null}var pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(e){return"function"==typeof e?e:(e[pe]||(e[pe]=function(t){return e.handleEvent(t)}),e[pe])}function ge(){b.call(this),this.i=new te(this),this.S=this,this.J=null}function ye(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new C(t,e);else if(t instanceof C)t.target=t.target||e;else{var i=t;ee(t=new C(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ve(o,r,!0,t)&&i}if(i=ve(o=t.g=e,r,!0,t)&&i,i=ve(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ve(o=t.g=n[s],r,!1,t)&&i}function ve(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ne(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}w(ge,b),ge.prototype[G]=!0,ge.prototype.removeEventListener=function(e,t,n,r){le(this,e,t,n,r)},ge.prototype.N=function(){if(ge.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)X(n[r]);delete t.g[e],t.h--}}this.J=null},ge.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ge.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var _e=h.JSON.stringify;function we(){var e=ke;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var be=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Ee),(e=>e.reset()));class Ee{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Te(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Se(e){h.setTimeout((()=>{throw e}),0)}let Ce,Ae=!1,ke=new class{constructor(){this.h=this.g=null}add(e,t){const n=be.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ie=()=>{const e=h.Promise.resolve(void 0);Ce=()=>{e.then(xe)}};var xe=()=>{for(var e;e=we();){try{e.h.call(e.g)}catch(e){Se(e)}var t=be;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ae=!1};function De(e,t){ge.call(this),this.h=e||1,this.g=t||h,this.j=v(this.qb,this),this.l=Date.now()}function Ne(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Re(e,t,n){if("function"==typeof e)n&&(e=v(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=v(e.handleEvent,e)}return 2147483647<Number(t)?-1:h.setTimeout(e,t||0)}function Oe(e){e.g=Re((()=>{e.g=null,e.i&&(e.i=!1,Oe(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}w(De,ge),(r=De.prototype).ga=!1,r.T=null,r.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ye(this,"tick"),this.ga&&(Ne(this),this.start()))}},r.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.N=function(){De.$.N.call(this),Ne(this),delete this.g};class Le extends b{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pe(e){b.call(this),this.h=e,this.g={}}w(Pe,b);var Me=[];function Fe(e,t,n,r){Array.isArray(n)||(n&&(Me[0]=n.toString()),n=Me);for(var i=0;i<n.length;i++){var s=oe(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ue(e){Q(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ue(e)}),e),e.g={}}function Be(){this.g=!0}function je(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return _e(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Pe.prototype.N=function(){Pe.$.N.call(this),Ue(this)},Pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Be.prototype.Ea=function(){this.g=!1},Be.prototype.info=function(){};var Ve={},ze=null;function He(){return ze=ze||new ge}function qe(e){C.call(this,Ve.Ta,e)}function We(e){const t=He();ye(t,new qe(t))}function $e(e,t){C.call(this,Ve.STAT_EVENT,e),this.stat=t}function Ge(e){const t=He();ye(t,new $e(t,e))}function Ke(e,t){C.call(this,Ve.Ua,e),this.size=t}function Ye(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){e()}),t)}Ve.Ta="serverreachability",w(qe,C),Ve.STAT_EVENT="statevent",w($e,C),Ve.Ua="timingevent",w(Ke,C);var Xe={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qe={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Je(){}function Ze(e){return e.h||(e.h=e.i())}function et(){}Je.prototype.h=null;var tt,nt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rt(){C.call(this,"d")}function it(){C.call(this,"c")}function st(){}function ot(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Pe(this),this.P=ct,e=F?125:void 0,this.V=new De(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new at}function at(){this.i=null,this.g="",this.h=!1}w(rt,C),w(it,C),w(st,Je),st.prototype.g=function(){return new XMLHttpRequest},st.prototype.i=function(){return{}},tt=new st;var ct=45e3,lt={},ut={};function ht(e,t,n){e.L=1,e.A=Dt(Ct(t)),e.u=n,e.S=!0,dt(e,null)}function dt(e,t){e.G=Date.now(),gt(e),e.B=Ct(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Ht(n.i,"t",r),e.o=0,n=e.l.J,e.h=new at,e.g=qn(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Le(v(e.Pa,e,e.g),e.O)),Fe(e.U,e.g,"readystatechange",e.nb),t=e.I?J(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),We(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ft(e){return!!e.g&&"GET"==e.v&&2!=e.L&&e.l.Ha}function pt(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=mt(e,n),r==ut){4==t&&(e.s=4,Ge(14),i=!1),je(e.j,e.m,null,"[Incomplete Response]");break}if(r==lt){e.s=4,Ge(15),je(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}je(e.j,e.m,r,null),bt(e,r)}ft(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Ge(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mn(t),t.M=!0,Ge(11))):(je(e.j,e.m,n,"[Invalid Chunked Response]"),wt(e),_t(e))}function mt(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?ut:(n=Number(t.substring(n,r)),isNaN(n)?lt:(r+=1)+n>t.length?ut:(t=t.slice(r,r+n),e.o=r+n,t))}function gt(e){e.Y=Date.now()+e.P,yt(e,e.P)}function yt(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Ye(v(e.lb,e),t)}function vt(e){e.C&&(h.clearTimeout(e.C),e.C=null)}function _t(e){0==e.l.H||e.J||Bn(e.l,e)}function wt(e){vt(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ne(e.V),Ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function bt(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Xt(n.i,e)))if(!e.K&&Xt(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Un(n),In(n)}Pn(n),Ge(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ye(v(n.ib,n),6e3));if(1>=Yt(n.i)&&n.oa){try{n.oa()}catch(e){}n.oa=void 0}}else Vn(n,11)}else if((e.K||n.g==e)&&Un(n),!k(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Qt(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,xt(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Hn(r,r.J?r.pa:null,r.Y),o.K){Jt(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(vt(a),gt(a)),r.g=o}else Ln(r);0<n.j.length&&Dn(n)}else"stop"!=l[0]&&"close"!=l[0]||Vn(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Vn(n,7):kn(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}We()}catch(e){}}function Et(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(d(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(d(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(d(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(r=ot.prototype).setTimeout=function(e){this.P=e},r.nb=function(e){e=e.target;const t=this.M;t&&3==bn(e)?t.l():this.Pa(e)},r.Pa=function(e){try{if(e==this.g)e:{const u=bn(this.g);var t=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||F||this.g&&(this.h.h||this.g.ja()||En(this.g)))){this.J||4!=u||7==t||We(),vt(this);var n=this.g.da();this.ca=n;t:if(ft(this)){var r=En(this.g);e="";var i=r.length,s=4==bn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){wt(this),_t(this);var o="";break t}this.h.i=new h.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Ge(12),wt(this),_t(this);break e}je(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bt(this,n)}this.S?(pt(this,u,o),F&&this.i&&3==u&&(Fe(this.U,this.V,"tick",this.mb),this.V.start())):(je(this.j,this.m,o,null),bt(this,o)),4==u&&wt(this),this.i&&!this.J&&(4==u?Bn(this.l,this):(this.i=!1,gt(this)))}else(function(e){const t={};e=(e.g&&2<=bn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(k(e[r]))continue;var n=Te(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),wt(this),_t(this)}}}catch(e){}},r.mb=function(){if(this.g){var e=bn(this.g),t=this.g.ja();this.o<t.length&&(vt(this),pt(this,e,t),this.i&&4!=e&&gt(this))}},r.cancel=function(){this.J=!0,wt(this)},r.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(We(),Ge(17)),wt(this),this.s=2,_t(this)):yt(this,this.Y-e)};var Tt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function St(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof St){this.h=e.h,At(this,e.j),this.s=e.s,this.g=e.g,kt(this,e.m),this.l=e.l;var t=e.i,n=new Bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),It(this,n),this.o=e.o}else e&&(t=String(e).match(Tt))?(this.h=!1,At(this,t[1]||"",!0),this.s=Nt(t[2]||""),this.g=Nt(t[3]||"",!0),kt(this,t[4]),this.l=Nt(t[5]||"",!0),It(this,t[6]||"",!0),this.o=Nt(t[7]||"")):(this.h=!1,this.i=new Bt(null,this.h))}function Ct(e){return new St(e)}function At(e,t,n){e.j=n?Nt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function kt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function It(e,t,n){t instanceof Bt?(e.i=t,function(e,t){t&&!e.j&&(jt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Vt(this,t),Ht(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Rt(t,Ft)),e.i=new Bt(t,e.h))}function xt(e,t,n){e.i.set(t,n)}function Dt(e){return xt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Nt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Rt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ot),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ot(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}St.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Rt(t,Lt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Rt(t,Lt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Rt(n,"/"==n.charAt(0)?Mt:Pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Rt(n,Ut)),e.join("")};var Lt=/[#\/\?@]/g,Pt=/[#\?:]/g,Mt=/[#\?]/g,Ft=/[#\?@]/g,Ut=/#/g;function Bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function jt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Vt(e,t){jt(e),t=qt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function zt(e,t){return jt(e),t=qt(e,t),e.g.has(t)}function Ht(e,t,n){Vt(e,t),0<n.length&&(e.i=null,e.g.set(qt(e,t),T(n)),e.h+=n.length)}function qt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=Bt.prototype).add=function(e,t){jt(this),this.i=null,e=qt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){jt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},r.ta=function(){jt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},r.Z=function(e){jt(this);let t=[];if("string"==typeof e)zt(this,e)&&(t=t.concat(this.g.get(qt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},r.set=function(e,t){return jt(this),this.i=null,zt(this,e=qt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Wt=class{constructor(e,t){this.g=e,this.map=t}};function $t(e){this.l=e||Gt,e=h.PerformanceNavigationTiming?0<(e=h.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(h.g&&h.g.Ka&&h.g.Ka()&&h.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Gt=10;function Kt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Yt(e){return e.h?1:e.g?e.g.size:0}function Xt(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qt(e,t){e.g?e.g.add(t):e.h=t}function Jt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Zt(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return T(e.i)}$t.prototype.cancel=function(){if(this.i=Zt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var en=class{stringify(e){return h.JSON.stringify(e,void 0)}parse(e){return h.JSON.parse(e,void 0)}};function tn(){this.g=new en}function nn(e,t,n){const r=n||"";try{Et(e,(function(e,n){let i=e;f(e)&&(i=_e(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function rn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function sn(e){this.l=e.ec||null,this.j=e.ob||!1}function on(e,t){ge.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=an,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}w(sn,Je),sn.prototype.g=function(){return new on(this.l,this.j)},sn.prototype.i=function(e){return function(){return e}}({}),w(on,ge);var an=0;function cn(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ln(e){e.readyState=4,e.l=null,e.j=null,e.A=null,un(e)}function un(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=on.prototype).open=function(e,t){if(this.readyState!=an)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,un(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||h).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ln(this)),this.readyState=an},r.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,un(this)),this.g&&(this.readyState=3,un(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==h.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cn(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},r.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ln(this):un(this),3==this.readyState&&cn(this)}},r.Za=function(e){this.g&&(this.response=this.responseText=e,ln(this))},r.Ya=function(e){this.g&&(this.response=e,ln(this))},r.ka=function(){this.g&&ln(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(on.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var hn=h.JSON.parse;function dn(e){ge.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=fn,this.L=this.M=!1}w(dn,ge);var fn="",pn=/^https?$/i,mn=["POST","PUT"];function gn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,yn(e),_n(e)}function yn(e){e.F||(e.F=!0,ye(e,"complete"),ye(e,"error"))}function vn(e){if(e.h&&void 0!==u&&(!e.C[1]||4!=bn(e)||2!=e.da()))if(e.v&&4==bn(e))Re(e.La,0,e);else if(ye(e,"readystatechange"),4==bn(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(Tt)[1]||null;!i&&h.self&&h.self.location&&(i=h.self.location.protocol.slice(0,-1)),r=!pn.test(i?i.toLowerCase():"")}n=r}if(n)ye(e,"complete"),ye(e,"success");else{e.m=6;try{var s=2<bn(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.da()+"]",yn(e)}}finally{_n(e)}}}function _n(e,t){if(e.g){wn(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ye(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function wn(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(h.clearTimeout(e.A),e.A=null)}function bn(e){return e.g?e.g.readyState:0}function En(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case fn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Tn(e){let t="";return Q(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Sn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Tn(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):xt(e,t,n))}function Cn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function An(e){this.Ga=0,this.j=[],this.l=new Be,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Cn("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Cn("baseRetryDelayMs",5e3,e),this.hb=Cn("retryDelaySeedMs",1e4,e),this.eb=Cn("forwardChannelMaxRetries",2,e),this.xa=Cn("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new $t(e&&e.concurrentRequestLimit),this.Ja=new tn,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function kn(e){if(xn(e),3==e.H){var t=e.W++,n=Ct(e.I);if(xt(n,"SID",e.K),xt(n,"RID",t),xt(n,"TYPE","terminate"),Rn(e,n),(t=new ot(e,e.l,t)).L=2,t.A=Dt(Ct(n)),n=!1,h.navigator&&h.navigator.sendBeacon)try{n=h.navigator.sendBeacon(t.A.toString(),"")}catch(e){}!n&&h.Image&&((new Image).src=t.A,n=!0),n||(t.g=qn(t.l,null),t.g.ha(t.A)),t.G=Date.now(),gt(t)}zn(e)}function In(e){e.g&&(Mn(e),e.g.cancel(),e.g=null)}function xn(e){In(e),e.u&&(h.clearTimeout(e.u),e.u=null),Un(e),e.i.cancel(),e.m&&("number"==typeof e.m&&h.clearTimeout(e.m),e.m=null)}function Dn(e){if(!Kt(e.i)&&!e.m){e.m=!0;var t=e.Na;Ce||Ie(),Ae||(Ce(),Ae=!0),ke.add(t,e),e.C=0}}function Nn(e,t){var n;n=t?t.m:e.W++;const r=Ct(e.I);xt(r,"SID",e.K),xt(r,"RID",n),xt(r,"AID",e.V),Rn(e,r),e.o&&e.s&&Sn(r,e.o,e.s),n=new ot(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=On(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Qt(e.i,n),ht(n,r,t)}function Rn(e,t){e.na&&Q(e.na,(function(e,n){xt(t,n,e)})),e.h&&Et({},(function(e,n){xt(t,n,e)}))}function On(e,t,n){n=Math.min(e.j.length,n);var r=e.h?v(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{nn(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Ln(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ce||Ie(),Ae||(Ce(),Ae=!0),ke.add(t,e),e.A=0}}function Pn(e){return!(e.g||e.u||3<=e.A||(e.ba++,e.u=Ye(v(e.Ma,e),jn(e,e.A)),e.A++,0))}function Mn(e){null!=e.B&&(h.clearTimeout(e.B),e.B=null)}function Fn(e){e.g=new ot(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ct(e.wa);xt(t,"RID","rpc"),xt(t,"SID",e.K),xt(t,"AID",e.V),xt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&xt(t,"TO",e.qa),xt(t,"TYPE","xmlhttp"),Rn(e,t),e.o&&e.s&&Sn(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Dt(Ct(t)),n.u=null,n.S=!0,dt(n,e)}function Un(e){null!=e.v&&(h.clearTimeout(e.v),e.v=null)}function Bn(e,t){var n=null;if(e.g==t){Un(e),Mn(e),e.g=null;var r=2}else{if(!Xt(e.i,t))return;n=t.F,Jt(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;ye(r=He(),new Ke(r,n)),Dn(e)}else Ln(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Yt(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=Ye(v(e.Na,e,t),jn(e,e.C)),e.C++,0)))}(e,t)||2==r&&Pn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Vn(e,5);break;case 4:Vn(e,10);break;case 3:Vn(e,6);break;default:Vn(e,2)}}function jn(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Vn(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=v(e.pb,e);n||(n=new St("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||At(n,"https"),Dt(n)),function(e,t){const n=new Be;if(h.Image){const r=new Image;r.onload=_(rn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=_(rn,n,r,"TestLoadImage: error",!1,t),r.onabort=_(rn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=_(rn,n,r,"TestLoadImage: timeout",!1,t),h.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ge(2);e.H=0,e.h&&e.h.za(t),zn(e),xn(e)}function zn(e){if(e.H=0,e.ma=[],e.h){const t=Zt(e.i);0==t.length&&0==e.j.length||(S(e.ma,t),S(e.ma,e.j),e.i.i.length=0,T(e.j),e.j.length=0),e.h.ya()}}function Hn(e,t,n){var r=n instanceof St?Ct(n):new St(n);if(""!=r.g)t&&(r.g=t+"."+r.g),kt(r,r.m);else{var i=h.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new St(null);r&&At(s,r),t&&(s.g=t),i&&kt(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&xt(r,n,t),xt(r,"VER",e.ra),Rn(e,r),r}function qn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new dn(new sn({ob:n})):new dn(e.va)).Oa(e.J),t}function Wn(){}function $n(){if(P&&!(10<=Number(q)))throw Error("Environmental error: no available transport.")}function Gn(e,t){ge.call(this),this.g=new An(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!k(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Xn(this)}function Kn(e){rt.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Yn(){it.call(this),this.status=1}function Xn(e){this.g=e}function Qn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Jn(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Zn(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(r=dn.prototype).Oa=function(e){this.M=e},r.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():tt.g(),this.C=this.u?Ze(this.u):Ze(tt),this.g.onreadystatechange=v(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(e){return void gn(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=h.FormData&&e instanceof h.FormData,!(0<=E(mn,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wn(this),0<this.B&&((this.L=function(e){return P&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=v(this.ua,this)):this.A=Re(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){gn(this,e)}},r.ua=function(){void 0!==u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ye(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ye(this,"complete"),ye(this,"abort"),_n(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_n(this,!0)),dn.$.N.call(this)},r.La=function(){this.s||(this.G||this.v||this.l?vn(this):this.kb())},r.kb=function(){vn(this)},r.isActive=function(){return!!this.g},r.da=function(){try{return 2<bn(this)?this.g.status:-1}catch(e){return-1}},r.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},r.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),hn(t)}},r.Ia=function(){return this.m},r.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(r=An.prototype).ra=8,r.H=1,r.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ot(this,this.l,e);let s=this.s;if(this.U&&(s?(s=J(s),ee(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=On(this,i,t),xt(n=Ct(this.I),"RID",e),xt(n,"CVER",22),this.F&&xt(n,"X-HTTP-Session-Id",this.F),Rn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Tn(s)))+"&"+t:this.o&&Sn(n,this.o,s)),Qt(this.i,i),this.bb&&xt(n,"TYPE","init"),this.P?(xt(n,"$req",t),xt(n,"SID","null"),i.aa=!0,ht(i,n,null)):ht(i,n,t),this.H=2}}else 3==this.H&&(e?Nn(this,e):0==this.j.length||Kt(this.i)||Nn(this))},r.Ma=function(){if(this.u=null,Fn(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ye(v(this.jb,this),e)}},r.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ge(10),In(this),Fn(this))},r.ib=function(){null!=this.v&&(this.v=null,In(this),Pn(this),Ge(19))},r.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ge(2)):(this.l.info("Failed to ping google.com"),Ge(1))},r.isActive=function(){return!!this.h&&this.h.isActive(this)},(r=Wn.prototype).Ba=function(){},r.Aa=function(){},r.za=function(){},r.ya=function(){},r.isActive=function(){return!0},r.Va=function(){},$n.prototype.g=function(e,t){return new Gn(e,t)},w(Gn,ge),Gn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ge(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Hn(e,null,e.Y),Dn(e)},Gn.prototype.close=function(){kn(this.g)},Gn.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=_e(e),e=n);t.j.push(new Wt(t.fb++,e)),3==t.H&&Dn(t)},Gn.prototype.N=function(){this.g.h=null,delete this.j,kn(this.g),delete this.g,Gn.$.N.call(this)},w(Kn,rt),w(Yn,it),w(Xn,Wn),Xn.prototype.Ba=function(){ye(this.g,"a")},Xn.prototype.Aa=function(e){ye(this.g,new Kn(e))},Xn.prototype.za=function(e){ye(this.g,new Yn)},Xn.prototype.ya=function(){ye(this.g,"b")},w(Qn,(function(){this.blockSize=-1})),Qn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Qn.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Jn(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Jn(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Jn(this,r),i=0;break}}this.h=i,this.i+=t},Qn.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var er={};function tr(e){return-128<=e&&128>e?function(e,t){var n=er;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=function(e){return new Zn([0|e],0>e?-1:0)}(e)}(e):new Zn([0|e],0>e?-1:0)}function nr(e){if(isNaN(e)||!isFinite(e))return ir;if(0>e)return lr(nr(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=rr;return new Zn(t,0)}var rr=4294967296,ir=tr(0),sr=tr(1),or=tr(16777216);function ar(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function cr(e){return-1==e.h}function lr(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Zn(n,~e.h).add(sr)}function ur(e,t){return e.add(lr(t))}function hr(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function dr(e,t){this.g=e,this.h=t}function fr(e,t){if(ar(t))throw Error("division by zero");if(ar(e))return new dr(ir,ir);if(cr(e))return t=fr(lr(e),t),new dr(lr(t.g),lr(t.h));if(cr(t))return t=fr(e,lr(t)),new dr(lr(t.g),t.h);if(30<e.g.length){if(cr(e)||cr(t))throw Error("slowDivide_ only works with positive integers.");for(var n=sr,r=t;0>=r.X(e);)n=pr(n),r=pr(r);var i=mr(n,1),s=mr(r,1);for(r=mr(r,2),n=mr(n,2);!ar(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=mr(r,1),n=mr(n,1)}return t=ur(e,i.R(t)),new dr(i,t)}for(i=ir;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=nr(n)).R(t);cr(o)||0<o.X(e);)o=(s=nr(n-=r)).R(t);ar(s)&&(s=sr),i=i.add(s),e=ur(e,o)}return new dr(i,e)}function pr(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Zn(n,e.h)}function mr(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Zn(i,e.h)}(r=Zn.prototype).ea=function(){if(cr(this))return-lr(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:rr+r)*t,t*=rr}return e},r.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ar(this))return"0";if(cr(this))return"-"+lr(this).toString(e);for(var t=nr(Math.pow(e,6)),n=this,r="";;){var i=fr(n,t).g,s=((0<(n=ur(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ar(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},r.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},r.X=function(e){return cr(e=ur(this,e))?-1:ar(e)?0:1},r.abs=function(){return cr(this)?lr(this):this},r.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Zn(n,-2147483648&n[n.length-1]?-1:0)},r.R=function(e){if(ar(this)||ar(e))return ir;if(cr(this))return cr(e)?lr(this).R(lr(e)):lr(lr(this).R(e));if(cr(e))return lr(this.R(lr(e)));if(0>this.X(or)&&0>e.X(or))return nr(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,hr(n,2*r+2*i),n[2*r+2*i+1]+=s*c,hr(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,hr(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,hr(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Zn(n,0)},r.gb=function(e){return fr(this,e).h},r.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Zn(n,this.h&e.h)},r.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Zn(n,this.h|e.h)},r.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Zn(n,this.h^e.h)},$n.prototype.createWebChannel=$n.prototype.g,Gn.prototype.send=Gn.prototype.u,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,Xe.NO_ERROR=0,Xe.TIMEOUT=8,Xe.HTTP_ERROR=6,Qe.COMPLETE="complete",et.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",ge.prototype.listen=ge.prototype.O,dn.prototype.listenOnce=dn.prototype.P,dn.prototype.getLastError=dn.prototype.Sa,dn.prototype.getLastErrorCode=dn.prototype.Ia,dn.prototype.getStatus=dn.prototype.da,dn.prototype.getResponseJson=dn.prototype.Wa,dn.prototype.getResponseText=dn.prototype.ja,dn.prototype.send=dn.prototype.ha,dn.prototype.setWithCredentials=dn.prototype.Oa,Qn.prototype.digest=Qn.prototype.l,Qn.prototype.reset=Qn.prototype.reset,Qn.prototype.update=Qn.prototype.j,Zn.prototype.add=Zn.prototype.add,Zn.prototype.multiply=Zn.prototype.R,Zn.prototype.modulo=Zn.prototype.gb,Zn.prototype.compare=Zn.prototype.X,Zn.prototype.toNumber=Zn.prototype.ea,Zn.prototype.toString=Zn.prototype.toString,Zn.prototype.getBits=Zn.prototype.D,Zn.fromNumber=nr,Zn.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return lr(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=nr(Math.pow(n,8)),i=ir,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=nr(Math.pow(n,o)),i=i.R(o).add(nr(a))):i=(i=i.R(r)).add(nr(a))}return i};var gr=l.createWebChannelTransport=function(){return new $n},yr=l.getStatEventTarget=function(){return He()},vr=l.ErrorCode=Xe,_r=l.EventType=Qe,wr=l.Event=Ve,br=l.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Er=(l.FetchXmlHttpFactory=sn,l.WebChannel=et),Tr=l.XhrIo=dn,Sr=l.Md5=Qn,Cr=l.Integer=Zn;const Ar="@firebase/firestore";class kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kr.UNAUTHENTICATED=new kr(null),kr.GOOGLE_CREDENTIALS=new kr("google-credentials-uid"),kr.FIRST_PARTY=new kr("first-party-uid"),kr.MOCK_USER=new kr("mock-user");let Ir="10.8.0";const xr=new o.YJ("@firebase/firestore");function Dr(){return xr.logLevel}function Nr(e,...t){if(xr.logLevel<=o.Ge.DEBUG){const n=t.map(Lr);xr.debug(`Firestore (${Ir}): ${e}`,...n)}}function Rr(e,...t){if(xr.logLevel<=o.Ge.ERROR){const n=t.map(Lr);xr.error(`Firestore (${Ir}): ${e}`,...n)}}function Or(e,...t){if(xr.logLevel<=o.Ge.WARN){const n=t.map(Lr);xr.warn(`Firestore (${Ir}): ${e}`,...n)}}function Lr(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Pr(e="Unexpected state"){const t=`FIRESTORE (${Ir}) INTERNAL ASSERTION FAILED: `+e;throw Rr(t),new Error(t)}function Mr(e,t){e||Pr()}function Fr(e,t){return e}const Ur={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Br extends a.kx{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vr{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(kr.UNAUTHENTICATED)))}shutdown(){}}class Hr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class qr{constructor(e){this.t=e,this.currentUser=kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jr,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Nr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Nr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jr)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Nr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Mr("string"==typeof t.accessToken),new Vr(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mr(null===e||"string"==typeof e),new kr(e)}}class Wr{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=kr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $r{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Wr(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(kr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kr{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Nr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Nr("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Nr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Nr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Mr("string"==typeof e.token),this.R=e.token,new Gr(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Yr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class Xr{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Yr(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Qr(e,t){return e<t?-1:e>t?1:0}function Jr(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Zr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Br(Ur.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Br(Ur.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Br(Ur.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Br(Ur.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zr.fromMillis(Date.now())}static fromDate(e){return Zr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Zr(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qr(this.nanoseconds,e.nanoseconds):Qr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ei{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ei(e)}static min(){return new ei(new Zr(0,0))}static max(){return new ei(new Zr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ti{constructor(e,t,n){void 0===t?t=0:t>e.length&&Pr(),void 0===n?n=e.length-t:n>e.length-t&&Pr(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ti.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ti?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ni extends ti{construct(e,t,n){return new ni(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Br(Ur.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new ni(t)}static emptyPath(){return new ni([])}}const ri=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ii extends ti{construct(e,t,n){return new ii(e,t,n)}static isValidIdentifier(e){return ri.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ii.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ii(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Br(Ur.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Br(Ur.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Br(Ur.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Br(Ur.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ii(t)}static emptyPath(){return new ii([])}}class si{constructor(e){this.path=e}static fromPath(e){return new si(ni.fromString(e))}static fromName(e){return new si(ni.fromString(e).popFirst(5))}static empty(){return new si(ni.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ni.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ni.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new si(new ni(e.slice()))}}function oi(e){return new ai(e.readTime,e.key,-1)}class ai{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ai(ei.min(),si.empty(),-1)}static max(){return new ai(ei.max(),si.empty(),-1)}}function ci(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=si.comparator(e.documentKey,t.documentKey),0!==n?n:Qr(e.largestBatchId,t.largestBatchId))}const li="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ui{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function hi(e){if(e.code!==Ur.FAILED_PRECONDITION||e.message!==li)throw e;Nr("LocalStore","Unexpectedly lost primary lease")}class di{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new di(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof di?t:di.resolve(t)}catch(e){return di.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):di.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):di.reject(t)}static resolve(e){return new di(((t,n)=>{t(e)}))}static reject(e){return new di(((t,n)=>{n(e)}))}static waitFor(e){return new di(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=di.resolve(!1);for(const n of e)t=t.next((e=>e?di.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new di(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new di(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class fi{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new jr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new gi(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=bi(t.target.error);this.V.reject(new gi(e,n))}}static open(e,t,n,r){try{return new fi(t,e.transaction(r,n))}catch(e){throw new gi(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Nr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vi(t)}}class pi{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===pi.S((0,a.Su)())&&Rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Nr("SimpleDb","Removing database:",e),_i(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,a.yy)())return!1;if(pi.C())return!0;const e=(0,a.Su)(),t=pi.S(e),n=0<t&&t<10,r=pi.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Nr("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new gi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Br(Ur.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Br(Ur.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new gi(e,r))},r.onupgradeneeded=e=>{Nr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Nr("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=fi.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),di.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Nr("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class mi{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return _i(this.k.delete())}}class gi extends Br{constructor(e,t){super(Ur.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yi(e){return"IndexedDbTransactionError"===e.name}class vi{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Nr("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Nr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),_i(n)}add(e){return Nr("SimpleDb","ADD",this.store.name,e,e),_i(this.store.add(e))}get(e){return _i(this.store.get(e)).next((t=>(void 0===t&&(t=null),Nr("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Nr("SimpleDb","DELETE",this.store.name,e),_i(this.store.delete(e))}count(){return Nr("SimpleDb","COUNT",this.store.name),_i(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new di(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new di(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Nr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new di(((n,r)=>{t.onerror=e=>{const t=bi(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new di(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new mi(i),o=t(i.primaryKey,i.value,s);if(o instanceof di){const e=o.catch((e=>(s.done(),di.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>di.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _i(e){return new di(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=bi(e.target.error);n(t)}}))}let wi=!1;function bi(e){const t=pi.S((0,a.Su)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Br("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wi||(wi=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Ei{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Ti(e){return null==e}function Si(e){return 0===e&&1/e==-1/0}Ei._e=-1;function Ci(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ai(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ki(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ii{constructor(e,t){this.comparator=e,this.root=t||Di.EMPTY}insert(e,t){return new Ii(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Di.BLACK,null,null))}remove(e){return new Ii(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Di.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xi(this.root,e,this.comparator,!1)}getReverseIterator(){return new xi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xi(this.root,e,this.comparator,!0)}}class xi{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Di{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Di.RED,this.left=null!=r?r:Di.EMPTY,this.right=null!=i?i:Di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Di(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Di.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pr();if(this.right.isRed())throw Pr();const e=this.left.check();if(e!==this.right.check())throw Pr();return e+(this.isRed()?0:1)}}Di.EMPTY=null,Di.RED=!0,Di.BLACK=!1,Di.EMPTY=new class{constructor(){this.size=0}get key(){throw Pr()}get value(){throw Pr()}get color(){throw Pr()}get left(){throw Pr()}get right(){throw Pr()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Di(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ni{constructor(e){this.comparator=e,this.data=new Ii(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ri(this.data.getIterator())}getIteratorFrom(e){return new Ri(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ni))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ni(this.comparator);return t.data=e,t}}class Ri{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Oi{constructor(e){this.fields=e,e.sort(ii.comparator)}static empty(){return new Oi([])}unionWith(e){let t=new Ni(ii.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jr(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Li extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Li("Invalid base64 string: "+e):e}}(e);return new Pi(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Pi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pi.EMPTY_BYTE_STRING=new Pi("");const Mi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fi(e){if(Mr(!!e),"string"==typeof e){let t=0;const n=Mi.exec(e);if(Mr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ui(e.seconds),nanos:Ui(e.nanos)}}function Ui(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Bi(e){return"string"==typeof e?Pi.fromBase64String(e):Pi.fromUint8Array(e)}function ji(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vi(e){const t=e.mapValue.fields.__previous_value__;return ji(t)?Vi(t):t}function zi(e){const t=Fi(e.mapValue.fields.__local_write_time__.timestampValue);return new Zr(t.seconds,t.nanos)}class Hi{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class qi{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qi&&e.projectId===this.projectId&&e.database===this.database}}const Wi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $i(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ji(e)?4:os(e)?9007199254740991:10:Pr()}function Gi(e,t){if(e===t)return!0;const n=$i(e);if(n!==$i(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zi(e).isEqual(zi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Fi(e.timestampValue),r=Fi(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Bi(e.bytesValue).isEqual(Bi(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ui(e.geoPointValue.latitude)===Ui(t.geoPointValue.latitude)&&Ui(e.geoPointValue.longitude)===Ui(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ui(e.integerValue)===Ui(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ui(e.doubleValue),r=Ui(t.doubleValue);return n===r?Si(n)===Si(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Jr(e.arrayValue.values||[],t.arrayValue.values||[],Gi);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ci(n)!==Ci(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!Gi(n[e],r[e])))return!1;return!0}(e,t);default:return Pr()}}function Ki(e,t){return void 0!==(e.values||[]).find((e=>Gi(e,t)))}function Yi(e,t){if(e===t)return 0;const n=$i(e),r=$i(t);if(n!==r)return Qr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ui(e.integerValue||e.doubleValue),r=Ui(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Xi(e.timestampValue,t.timestampValue);case 4:return Xi(zi(e),zi(t));case 5:return Qr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Bi(e),r=Bi(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=Qr(n[e],r[e]);if(0!==t)return t}return Qr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Qr(Ui(e.latitude),Ui(t.latitude));return 0!==n?n:Qr(Ui(e.longitude),Ui(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Yi(n[e],r[e]);if(t)return t}return Qr(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Wi.mapValue&&t===Wi.mapValue)return 0;if(e===Wi.mapValue)return 1;if(t===Wi.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=Qr(r[e],s[e]);if(0!==t)return t;const o=Yi(n[r[e]],i[s[e]]);if(0!==o)return o}return Qr(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Pr()}}function Xi(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qr(e,t);const n=Fi(e),r=Fi(t),i=Qr(n.seconds,r.seconds);return 0!==i?i:Qr(n.nanos,r.nanos)}function Qi(e){return Ji(e)}function Ji(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Fi(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Bi(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return si.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ji(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ji(e.fields[i])}`;return n+"}"}(e.mapValue):Pr()}function Zi(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function es(e){return!!e&&"integerValue"in e}function ts(e){return!!e&&"arrayValue"in e}function ns(e){return!!e&&"nullValue"in e}function rs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function is(e){return!!e&&"mapValue"in e}function ss(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ai(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ss(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ss(e.arrayValue.values[n]);return t}return Object.assign({},e)}function os(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class as{constructor(e){this.value=e}static empty(){return new as({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!is(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ss(t)}setAll(e){let t=ii.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ss(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());is(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];is(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ai(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new as(ss(this.value))}}function cs(e){const t=[];return Ai(e.fields,((e,n)=>{const r=new ii([e]);if(is(n)){const e=cs(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Oi(t)}class ls{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ls(e,0,ei.min(),ei.min(),ei.min(),as.empty(),0)}static newFoundDocument(e,t,n,r){return new ls(e,1,t,ei.min(),n,r,0)}static newNoDocument(e,t){return new ls(e,2,t,ei.min(),ei.min(),as.empty(),0)}static newUnknownDocument(e,t){return new ls(e,3,t,ei.min(),ei.min(),as.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ei.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=as.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=as.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ei.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ls&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ls(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class us{constructor(e,t){this.position=e,this.inclusive=t}}function hs(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?si.comparator(si.fromName(o.referenceValue),n.key):Yi(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ds(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Gi(e.position[n],t.position[n]))return!1;return!0}class fs{constructor(e,t="asc"){this.field=e,this.dir=t}}function ps(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ms{}class gs extends ms{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ts(e,t,n):"array-contains"===t?new ks(e,n):"in"===t?new Is(e,n):"not-in"===t?new xs(e,n):"array-contains-any"===t?new Ds(e,n):new gs(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ss(e,n):new Cs(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Yi(t,this.value)):null!==t&&$i(this.value)===$i(t)&&this.matchesComparison(Yi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Pr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ys extends ms{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new ys(e,t)}matches(e){return vs(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function vs(e){return"and"===e.op}function _s(e){return function(e){for(const t of e.filters)if(t instanceof ys)return!1;return!0}(e)&&vs(e)}function ws(e){if(e instanceof gs)return e.field.canonicalString()+e.op.toString()+Qi(e.value);if(_s(e))return e.filters.map((e=>ws(e))).join(",");{const t=e.filters.map((e=>ws(e))).join(",");return`${e.op}(${t})`}}function bs(e,t){return e instanceof gs?function(e,t){return t instanceof gs&&e.op===t.op&&e.field.isEqual(t.field)&&Gi(e.value,t.value)}(e,t):e instanceof ys?function(e,t){return t instanceof ys&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&bs(n,t.filters[r])),!0)}(e,t):void Pr()}function Es(e){return e instanceof gs?function(e){return`${e.field.canonicalString()} ${e.op} ${Qi(e.value)}`}(e):e instanceof ys?function(e){return e.op.toString()+" {"+e.getFilters().map(Es).join(" ,")+"}"}(e):"Filter"}class Ts extends gs{constructor(e,t,n){super(e,t,n),this.key=si.fromName(n.referenceValue)}matches(e){const t=si.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ss extends gs{constructor(e,t){super(e,"in",t),this.keys=As(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Cs extends gs{constructor(e,t){super(e,"not-in",t),this.keys=As(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function As(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>si.fromName(e.referenceValue)))}class ks extends gs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ts(t)&&Ki(t.arrayValue,this.value)}}class Is extends gs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ki(this.value.arrayValue,t)}}class xs extends gs{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ki(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ki(this.value.arrayValue,t)}}class Ds extends gs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ts(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ki(this.value.arrayValue,e)))}}class Ns{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Rs(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Ns(e,t,n,r,i,s,o)}function Os(e){const t=Fr(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ws(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ti(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Qi(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Qi(e))).join(",")),t.ce=e}return t.ce}function Ls(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ps(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bs(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ds(e.startAt,t.startAt)&&ds(e.endAt,t.endAt)}function Ps(e){return si.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ms{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Fs(e){return new Ms(e)}function Us(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Bs(e){return null!==e.collectionGroup}function js(e){const t=Fr(e);if(null===t.le){t.le=[];const e=new Set;for(const n of t.explicitOrderBy)t.le.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ni(ii.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new fs(r,n))})),e.has(ii.keyField().canonicalString())||t.le.push(new fs(ii.keyField(),n))}return t.le}function Vs(e){const t=Fr(e);return t.he||(t.he=zs(t,js(e))),t.he}function zs(e,t){if("F"===e.limitType)return Rs(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new fs(e.field,t)}));const n=e.endAt?new us(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new us(e.startAt.position,e.startAt.inclusive):null;return Rs(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Hs(e,t){const n=e.filters.concat([t]);return new Ms(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function qs(e,t,n){return new Ms(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ws(e,t){return Ls(Vs(e),Vs(t))&&e.limitType===t.limitType}function $s(e){return`${Os(Vs(e))}|lt:${e.limitType}`}function Gs(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Es(e))).join(", ")}]`),Ti(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Qi(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Qi(e))).join(",")),`Target(${t})`}(Vs(e))}; limitType=${e.limitType})`}function Ks(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):si.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of js(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=hs(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,js(e),t)||e.endAt&&!function(e,t,n){const r=hs(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,js(e),t))}(e,t)}function Ys(e){return(t,n)=>{let r=!1;for(const i of js(e)){const e=Xs(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Xs(e,t,n){const r=e.field.isKeyField()?si.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Yi(r,i):Pr()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Pr()}}class Qs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ai(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return ki(this.inner)}size(){return this.innerSize}}const Js=new Ii(si.comparator);function Zs(){return Js}const eo=new Ii(si.comparator);function to(...e){let t=eo;for(const n of e)t=t.insert(n.key,n);return t}function no(e){let t=eo;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function ro(){return so()}function io(){return so()}function so(){return new Qs((e=>e.toString()),((e,t)=>e.isEqual(t)))}const oo=new Ii(si.comparator),ao=new Ni(si.comparator);function co(...e){let t=ao;for(const n of e)t=t.add(n);return t}const lo=new Ni(Qr);function uo(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Si(t)?"-0":t}}function ho(e){return{integerValue:""+e}}function fo(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Si(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?ho(t):uo(e,t)}class po{constructor(){this._=void 0}}function mo(e,t,n){return e instanceof vo?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ji(t)&&(t=Vi(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof _o?wo(e,t):e instanceof bo?Eo(e,t):function(e,t){const n=yo(e,t),r=So(n)+So(e.Ie);return es(n)&&es(e.Ie)?ho(r):uo(e.serializer,r)}(e,t)}function go(e,t,n){return e instanceof _o?wo(e,t):e instanceof bo?Eo(e,t):n}function yo(e,t){return e instanceof To?function(e){return es(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class vo extends po{}class _o extends po{constructor(e){super(),this.elements=e}}function wo(e,t){const n=Co(t);for(const t of e.elements)n.some((e=>Gi(e,t)))||n.push(t);return{arrayValue:{values:n}}}class bo extends po{constructor(e){super(),this.elements=e}}function Eo(e,t){let n=Co(t);for(const t of e.elements)n=n.filter((e=>!Gi(e,t)));return{arrayValue:{values:n}}}class To extends po{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function So(e){return Ui(e.integerValue||e.doubleValue)}function Co(e){return ts(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ao{constructor(e,t){this.version=e,this.transformResults=t}}class ko{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ko}static exists(e){return new ko(void 0,e)}static updateTime(e){return new ko(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Io(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class xo{}function Do(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new jo(e.key,ko.none()):new Po(e.key,e.data,ko.none());{const n=e.data,r=as.empty();let i=new Ni(ii.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Mo(e.key,r,new Oi(i.toArray()),ko.none())}}function No(e,t,n){e instanceof Po?function(e,t,n){const r=e.value.clone(),i=Uo(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Mo?function(e,t,n){if(!Io(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Uo(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Fo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ro(e,t,n,r){return e instanceof Po?function(e,t,n,r){if(!Io(e.precondition,t))return n;const i=e.value.clone(),s=Bo(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Mo?function(e,t,n,r){if(!Io(e.precondition,t))return n;const i=Bo(e.fieldTransforms,r,t),s=t.data;return s.setAll(Fo(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Io(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Oo(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=yo(r.transform,e||null);null!=i&&(null===n&&(n=as.empty()),n.set(r.field,i))}return n||null}function Lo(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Jr(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof _o&&t instanceof _o||e instanceof bo&&t instanceof bo?Jr(e.elements,t.elements,Gi):e instanceof To&&t instanceof To?Gi(e.Ie,t.Ie):e instanceof vo&&t instanceof vo}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Po extends xo{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Mo extends xo{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Fo(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Uo(e,t,n){const r=new Map;Mr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,go(o,a,n[i]))}return r}function Bo(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,mo(e,s,t))}return r}class jo extends xo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vo extends xo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zo{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&No(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ro(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ro(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=io();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Do(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ei.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),co())}isEqual(e){return this.batchId===e.batchId&&Jr(this.mutations,e.mutations,((e,t)=>Lo(e,t)))&&Jr(this.baseMutations,e.baseMutations,((e,t)=>Lo(e,t)))}}class Ho{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Mr(e.mutations.length===n.length);let r=oo;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Ho(e,t,n,r)}}class qo{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Wo{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class $o{constructor(e,t){this.count=e,this.unchangedNames=t}}var Go,Ko;function Yo(e){if(void 0===e)return Rr("GRPC error has no .code"),Ur.UNKNOWN;switch(e){case Go.OK:return Ur.OK;case Go.CANCELLED:return Ur.CANCELLED;case Go.UNKNOWN:return Ur.UNKNOWN;case Go.DEADLINE_EXCEEDED:return Ur.DEADLINE_EXCEEDED;case Go.RESOURCE_EXHAUSTED:return Ur.RESOURCE_EXHAUSTED;case Go.INTERNAL:return Ur.INTERNAL;case Go.UNAVAILABLE:return Ur.UNAVAILABLE;case Go.UNAUTHENTICATED:return Ur.UNAUTHENTICATED;case Go.INVALID_ARGUMENT:return Ur.INVALID_ARGUMENT;case Go.NOT_FOUND:return Ur.NOT_FOUND;case Go.ALREADY_EXISTS:return Ur.ALREADY_EXISTS;case Go.PERMISSION_DENIED:return Ur.PERMISSION_DENIED;case Go.FAILED_PRECONDITION:return Ur.FAILED_PRECONDITION;case Go.ABORTED:return Ur.ABORTED;case Go.OUT_OF_RANGE:return Ur.OUT_OF_RANGE;case Go.UNIMPLEMENTED:return Ur.UNIMPLEMENTED;case Go.DATA_LOSS:return Ur.DATA_LOSS;default:return Pr()}}(Ko=Go||(Go={}))[Ko.OK=0]="OK",Ko[Ko.CANCELLED=1]="CANCELLED",Ko[Ko.UNKNOWN=2]="UNKNOWN",Ko[Ko.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ko[Ko.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ko[Ko.NOT_FOUND=5]="NOT_FOUND",Ko[Ko.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ko[Ko.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ko[Ko.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ko[Ko.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ko[Ko.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ko[Ko.ABORTED=10]="ABORTED",Ko[Ko.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ko[Ko.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ko[Ko.INTERNAL=13]="INTERNAL",Ko[Ko.UNAVAILABLE=14]="UNAVAILABLE",Ko[Ko.DATA_LOSS=15]="DATA_LOSS";const Xo=new Cr([4294967295,4294967295],0);function Qo(e){const t=(new TextEncoder).encode(e),n=new Sr;return n.update(t),new Uint8Array(n.digest())}function Jo(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Cr([n,r],0),new Cr([i,s],0)]}class Zo{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ea(`Invalid padding: ${t}`);if(n<0)throw new ea(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ea(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ea(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Cr.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Cr.fromNumber(n)));return 1===r.compare(Xo)&&(r=new Cr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Qo(e),[n,r]=Jo(t);for(let e=0;e<this.hashCount;e++){const t=this.de(n,r,e);if(!this.Ae(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Zo(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Qo(e),[n,r]=Jo(t);for(let e=0;e<this.hashCount;e++){const t=this.de(n,r,e);this.Re(t)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ta{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,na.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ta(ei.min(),r,new Ii(Qr),Zs(),co())}}class na{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new na(n,t,co(),co(),co())}}class ra{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class ia{constructor(e,t){this.targetId=e,this.fe=t}}class sa{constructor(e,t,n=Pi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class oa{constructor(){this.ge=0,this.pe=la(),this.ye=Pi.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=co(),t=co(),n=co();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Pr()}})),new na(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=la()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Mr(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class aa{constructor(e){this.Le=e,this.ke=new Map,this.qe=Zs(),this.Qe=ca(),this.Ke=new Ii(Qr)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Pr()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Ps(i))if(0===n){const e=new si(i.path);this.We(t,e,ls.newNoDocument(e,ei.min()))}else Mr(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Bi(n).toUint8Array()}catch(e){if(e instanceof Li)return Or("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Zo(s,r,i)}catch(e){return Or(e instanceof ea?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Ps(i.target)){const t=new si(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,ls.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=co();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new ta(e,t,this.Ke,this.qe,n);return this.qe=Zs(),this.Qe=ca(),this.Ke=new Ii(Qr),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new oa,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Ni(Qr),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Nr("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new oa),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ca(){return new Ii(si.comparator)}function la(){return new Ii(si.comparator)}const ua={asc:"ASCENDING",desc:"DESCENDING"},ha={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},da={and:"AND",or:"OR"};class fa{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pa(e,t){return e.useProto3Json||Ti(t)?t:{value:t}}function ma(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ga(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ya(e,t){return ma(e,t.toTimestamp())}function va(e){return Mr(!!e),ei.fromTimestamp(function(e){const t=Fi(e);return new Zr(t.seconds,t.nanos)}(e))}function _a(e,t){return wa(e,t).canonicalString()}function wa(e,t){const n=function(e){return new ni(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ba(e){const t=ni.fromString(e);return Mr(Ba(t)),t}function Ea(e,t){return _a(e.databaseId,t.path)}function Ta(e,t){const n=ba(t);if(n.get(1)!==e.databaseId.projectId)throw new Br(Ur.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Br(Ur.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new si(Aa(n))}function Sa(e,t){return _a(e.databaseId,t)}function Ca(e){return new ni(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Aa(e){return Mr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ka(e,t,n){return{name:Ea(e,t),fields:n.value.mapValue.fields}}function Ia(e,t){return{documents:[Sa(e,t.path)]}}function xa(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Sa(e,i);const s=function(e){if(0!==e.length)return Fa(ys.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Pa(e.field),direction:Ra(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=pa(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Da(e){let t=function(e){const t=ba(e);return 4===t.length?ni.emptyPath():Aa(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Mr(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Na(e);return t instanceof ys&&_s(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new fs(Ma(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ti(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new us(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new us(n,t)}(n.endAt)),function(e,t,n,r,i,s,o,a){return new Ms(e,t,n,r,i,s,o,a)}(t,i,o,s,a,"F",c,l)}function Na(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ma(e.unaryFilter.field);return gs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ma(e.unaryFilter.field);return gs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ma(e.unaryFilter.field);return gs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ma(e.unaryFilter.field);return gs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Pr()}}(e):void 0!==e.fieldFilter?function(e){return gs.create(Ma(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pr()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ys.create(e.compositeFilter.filters.map((e=>Na(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Pr()}}(e.compositeFilter.op))}(e):Pr()}function Ra(e){return ua[e]}function Oa(e){return ha[e]}function La(e){return da[e]}function Pa(e){return{fieldPath:e.canonicalString()}}function Ma(e){return ii.fromServerFormat(e.fieldPath)}function Fa(e){return e instanceof gs?function(e){if("=="===e.op){if(rs(e.value))return{unaryFilter:{field:Pa(e.field),op:"IS_NAN"}};if(ns(e.value))return{unaryFilter:{field:Pa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rs(e.value))return{unaryFilter:{field:Pa(e.field),op:"IS_NOT_NAN"}};if(ns(e.value))return{unaryFilter:{field:Pa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pa(e.field),op:Oa(e.op),value:e.value}}}(e):e instanceof ys?function(e){const t=e.getFilters().map((e=>Fa(e)));return 1===t.length?t[0]:{compositeFilter:{op:La(e.op),filters:t}}}(e):Pr()}function Ua(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ba(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ja{constructor(e,t,n,r,i=ei.min(),s=ei.min(),o=Pi.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Va{constructor(e){this.ct=e}}function za(e){const t=Da({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?qs(t,t.limit,"L"):t}class Ha{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Ui(e.integerValue));else if("doubleValue"in e){const n=Ui(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Si(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At(`${n.seconds||""}`),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Bi(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?os(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Pr()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const e of Object.keys(n))this.Rt(e,t),this.It(n[e],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const e of n)this.It(e,t)}gt(e,t){this.Et(t,37),si.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}Ha.bt=new Ha;class qa{constructor(){this._n=new Wa}addToCollectionParentIndex(e,t){return this._n.add(t),di.resolve()}getCollectionParents(e,t){return di.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return di.resolve()}deleteFieldIndex(e,t){return di.resolve()}deleteAllFieldIndexes(e){return di.resolve()}createTargetIndexes(e,t){return di.resolve()}getDocumentsMatchingTarget(e,t){return di.resolve(null)}getIndexType(e,t){return di.resolve(0)}getFieldIndexes(e,t){return di.resolve([])}getNextCollectionGroupToUpdate(e){return di.resolve(null)}getMinOffset(e,t){return di.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,t){return di.resolve(ai.min())}updateCollectionGroup(e,t,n){return di.resolve()}updateIndexEntries(e,t){return di.resolve()}}class Wa{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ni(ni.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ni(ni.comparator)).toArray()}}new Uint8Array(0);class $a{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new $a(e,$a.DEFAULT_COLLECTION_PERCENTILE,$a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}$a.DEFAULT_COLLECTION_PERCENTILE=10,$a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$a.DEFAULT=new $a(41943040,$a.DEFAULT_COLLECTION_PERCENTILE,$a.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$a.DISABLED=new $a(-1,0,0);class Ga{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ga(0)}static Bn(){return new Ga(-1)}}class Ka{constructor(){this.changes=new Qs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ls.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?di.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ya{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Xa{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Ro(n.mutation,e,Oi.empty(),Zr.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,co()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=co()){const r=ro();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=to();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=ro();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,co())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Zs();const s=so(),o=so();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Mo)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Ro(o.mutation,t,o.mutation.getFieldMask(),Zr.now())):s.set(t.key,Oi.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Ya(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=so();let r=new Ii(((e,t)=>e-t)),i=co();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Oi.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||co()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=io();c.forEach((e=>{if(!i.has(e)){const r=Do(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return di.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return si.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bs(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):di.resolve(ro());let o=-1,a=i;return s.next((t=>di.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?di.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,co()))).next((e=>({batchId:o,changes:no(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new si(t)).next((e=>{let t=to();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=to();return this.indexManager.getCollectionParents(e,i).next((o=>di.forEach(o,(o=>{const a=function(e,t){return new Ms(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ls.newInvalidDocument(r)))}));let n=to();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Ro(s.mutation,r,Oi.empty(),Zr.now()),Ks(t,r)&&(n=n.insert(e,r))})),n}))}}class Qa{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return di.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:va(e.createTime)}}(t)),di.resolve()}getNamedQuery(e,t){return di.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:za(e.bundledQuery),readTime:va(e.readTime)}}(t)),di.resolve()}}class Ja{constructor(){this.overlays=new Ii(si.comparator),this.hr=new Map}getOverlay(e,t){return di.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ro();return di.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),di.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),di.resolve()}getOverlaysForCollection(e,t,n){const r=ro(),i=t.length+1,s=new si(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return di.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ii(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ro(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=ro(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return di.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new qo(t,n));let i=this.hr.get(t);void 0===i&&(i=co(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Za{constructor(){this.Pr=new Ni(ec.Ir),this.Tr=new Ni(ec.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new ec(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new ec(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new si(new ni([])),n=new ec(t,e),r=new ec(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new si(new ni([])),n=new ec(t,e),r=new ec(t,e+1);let i=co();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new ec(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ec{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return si.comparator(e.key,t.key)||Qr(e.pr,t.pr)}static Er(e,t){return Qr(e.pr,t.pr)||si.comparator(e.key,t.key)}}class tc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Ni(ec.Ir)}checkEmpty(e){return di.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new zo(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.wr=this.wr.add(new ec(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return di.resolve(s)}lookupMutationBatch(e,t){return di.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return di.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return di.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return di.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ec(t,0),r=new ec(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),di.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ni(Qr);return t.forEach((e=>{const t=new ec(e,0),r=new ec(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),di.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;si.isDocumentKey(i)||(i=i.child(""));const s=new ec(new si(i),0);let o=new Ni(Qr);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),di.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Mr(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return di.forEach(t.mutations,(r=>{const i=new ec(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new ec(t,0),r=this.wr.firstAfterOrEqual(n);return di.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,di.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nc{constructor(e){this.vr=e,this.docs=new Ii(si.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return di.resolve(n?n.document.mutableCopy():ls.newInvalidDocument(t))}getEntries(e,t){let n=Zs();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ls.newInvalidDocument(e))})),di.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Zs();const s=t.path,o=new si(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ci(oi(o),n)<=0||(r.has(o.key)||Ks(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return di.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Pr()}Fr(e,t){return di.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new rc(this)}getSize(e){return di.resolve(this.size)}}class rc extends Ka{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),di.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class ic{constructor(e){this.persistence=e,this.Mr=new Qs((e=>Os(e)),Ls),this.lastRemoteSnapshotVersion=ei.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Za,this.targetCount=0,this.Br=Ga.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),di.resolve()}getLastRemoteSnapshotVersion(e){return di.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return di.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),di.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),di.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Ga(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,di.resolve()}updateTargetData(e,t){return this.qn(t),di.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,di.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),di.waitFor(i).next((()=>r))}getTargetCount(e){return di.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return di.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),di.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),di.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),di.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return di.resolve(n)}containsKey(e,t){return di.resolve(this.Nr.containsKey(t))}}class sc{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Ei(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ic(this),this.indexManager=new qa,this.remoteDocumentCache=function(e){return new nc(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Va(t),this.$r=new Qa(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ja,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new tc(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Nr("MemoryPersistence","Starting transaction:",e);const r=new oc(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return di.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class oc extends ui{constructor(e){super(),this.currentSequenceNumber=e}}class ac{constructor(e){this.persistence=e,this.zr=new Za,this.jr=null}static Hr(e){return new ac(e)}get Jr(){if(this.jr)return this.jr;throw Pr()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),di.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),di.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),di.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return di.forEach(this.Jr,(n=>{const r=si.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,ei.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return di.or([()=>di.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class cc{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=co(),r=co();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new cc(e,t.fromCache,n,r)}}class lc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class uc{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,a.qk)()?8:pi.v((0,a.Su)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new lc;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Dr()<=o.Ge.DEBUG&&Nr("QueryEngine","SDK will not create cache indexes for query:",Gs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),di.resolve()):(Dr()<=o.Ge.DEBUG&&Nr("QueryEngine","Query:",Gs(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Dr()<=o.Ge.DEBUG&&Nr("QueryEngine","The SDK decides to create cache indexes for query:",Gs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vs(t))):di.resolve())}ji(e,t){if(Us(t))return di.resolve(null);let n=Vs(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=qs(t,null,"F"),n=Vs(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=co(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,qs(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Us(t)||r.isEqual(ei.min())?di.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?di.resolve(null):(Dr()<=o.Ge.DEBUG&&Nr("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gs(t)),this.es(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ei.fromTimestamp(1e9===r?new Zr(n+1,0):new Zr(n,r));return new ai(i,si.empty(),t)}(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Ni(Ys(e));return t.forEach(((t,r)=>{Ks(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Dr()<=o.Ge.DEBUG&&Nr("QueryEngine","Using full collection scan to execute query:",Gs(t)),this.zi.getDocumentsMatchingQuery(e,t,ai.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class hc{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Ii(Qr),this.rs=new Qs((e=>Os(e)),Ls),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xa(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}async function dc(e,t){const n=Fr(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=co();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function fc(e){const t=Fr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function pc(e,t){const n=Fr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function mc(e,t,n){const r=Fr(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!yi(e))throw e;Nr("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function gc(e,t,n){const r=Fr(e);let i=ei.min(),s=co();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Fr(e),i=r.rs.get(n);return void 0!==i?di.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Vs(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:ei.min(),n?s:co()))).next((e=>(function(e,t,n){let r=e.ss.get(t)||ei.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,hs:s})))))}class yc{constructor(){this.activeTargetIds=lo}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vc{constructor(){this.no=new yc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new yc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _c{io(e){}shutdown(){}}class wc{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Nr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Nr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let bc=null;function Ec(){return null===bc?bc=268435456+Math.round(2147483648*Math.random()):bc++,"0x"+bc.toString(16)}const Tc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sc{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Cc="WebChannelConnection";class Ac extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po=`projects/${n}/databases/${r}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get wo(){return!1}So(e,t,n,r,i){const s=Ec(),o=this.bo(e,t.toUriEncodedString());Nr("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(Nr("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Or("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ir,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Tc[e];return`${this.fo}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Ec();return new Promise(((s,o)=>{const a=new Tr;a.setWithCredentials(!0),a.listenOnce(_r.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case vr.NO_ERROR:const t=a.getResponseJson();Nr(Cc,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case vr.TIMEOUT:Nr(Cc,`RPC '${e}' ${i} timed out`),o(new Br(Ur.DEADLINE_EXCEEDED,"Request time out"));break;case vr.HTTP_ERROR:const n=a.getStatus();if(Nr(Cc,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ur).indexOf(t)>=0?t:Ur.UNKNOWN}(t.status);o(new Br(e,t.message))}else o(new Br(Ur.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Br(Ur.UNAVAILABLE,"Connection failed."));break;default:Pr()}}finally{Nr(Cc,`RPC '${e}' ${i} completed.`)}}));const c=JSON.stringify(r);Nr(Cc,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",c,n,15)}))}Fo(e,t,n){const r=Ec(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=gr(),o=yr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");Nr(Cc,`Creating RPC '${e}' stream ${r}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new Sc({lo:t=>{d?Nr(Cc,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Nr(Cc,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),Nr(Cc,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Er.EventType.OPEN,(()=>{d||Nr(Cc,`RPC '${e}' stream ${r} transport opened.`)})),p(u,Er.EventType.CLOSE,(()=>{d||(d=!0,Nr(Cc,`RPC '${e}' stream ${r} transport closed`),f.Vo())})),p(u,Er.EventType.ERROR,(t=>{d||(d=!0,Or(Cc,`RPC '${e}' stream ${r} transport errored:`,t),f.Vo(new Br(Ur.UNAVAILABLE,"The operation could not be completed")))})),p(u,Er.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Mr(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Nr(Cc,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Go[e];if(void 0!==t)return Yo(t)}(t),i=o.message;void 0===n&&(n=Ur.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new Br(n,i)),u.close()}else Nr(Cc,`RPC '${e}' stream ${r} received:`,i),f.mo(i)}})),p(o,wr.STAT_EVENT,(t=>{t.stat===br.PROXY?Nr(Cc,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===br.NOPROXY&&Nr(Cc,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.Ro()}),0),f}}function kc(){return"undefined"!=typeof document?document:null}function Ic(e){return new fa(e,!0)}class xc{constructor(e,t,n=1e3,r=1.5,i=6e4){this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&Nr("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Dc{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new xc(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Ur.RESOURCE_EXHAUSTED?(Rr(t.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Ur.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Wo===t&&this.o_(e,n)}),(t=>{e((()=>{const e=new Br(Ur.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Nr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Nr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Nc extends Dc{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Pr()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Mr(void 0===t||"string"==typeof t),Pi.fromBase64String(t||"")):(Mr(void 0===t||t instanceof Uint8Array),Pi.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ur.UNKNOWN:Yo(e.code);return new Br(t,e.message||"")}(o);n=new sa(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ta(e,r.document.name),s=va(r.document.updateTime),o=r.document.createTime?va(r.document.createTime):ei.min(),a=new as({mapValue:{fields:r.document.fields}}),c=ls.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new ra(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ta(e,r.document),s=r.readTime?va(r.readTime):ei.min(),o=ls.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ra([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ta(e,r.document),s=r.removedTargetIds||[];n=new ra([],s,i,null)}else{if(!("filter"in t))return Pr();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new $o(r,i),o=e.targetId;n=new ia(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ei.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ei.min():t.readTime?va(t.readTime):ei.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Ca(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ps(r)?{documents:Ia(e,r)}:{query:xa(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ga(e,t.resumeToken);const r=pa(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ei.min())>0){n.readTime=ma(e,t.snapshotVersion.toTimestamp());const r=pa(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pr()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Ca(this.serializer),t.removeTarget=e,this.t_(t)}}class Rc extends Dc{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Mr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Mr(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?va(e.updateTime):va(t);return n.isEqual(ei.min())&&(n=va(t)),new Ao(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=va(e.commitTime);return this.listener.T_(n,t)}return Mr(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Ca(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof Po)n={update:ka(e,t.key,t.value)};else if(t instanceof jo)n={delete:Ea(e,t.key)};else if(t instanceof Mo)n={update:ka(e,t.key,t.data),updateMask:Ua(t.fieldMask)};else{if(!(t instanceof Vo))return Pr();n={verify:Ea(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof vo)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _o)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof bo)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof To)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Pr()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ya(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Pr()}(e,t.precondition)),n}(this.serializer,e)))};this.t_(t)}}class Oc extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Br(Ur.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.So(e,wa(t,n),r,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ur.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Br(Ur.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.vo(e,wa(t,n),r,s,o,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ur.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Br(Ur.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Lc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Rr(t),this.g_=!1):Nr("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Pc{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{qc(this)&&(Nr("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Fr(e);t.v_.add(4),await Fc(t),t.x_.set("Unknown"),t.v_.delete(4),await Mc(t)}(this))}))})),this.x_=new Lc(n,r)}}async function Mc(e){if(qc(e))for(const t of e.F_)await t(!0)}async function Fc(e){for(const t of e.F_)await t(!1)}function Uc(e,t){const n=Fr(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Hc(n)?zc(n):al(n).Jo()&&jc(n,t))}function Bc(e,t){const n=Fr(e),r=al(n);n.C_.delete(t),r.Jo()&&Vc(n,t),0===n.C_.size&&(r.Jo()?r.Xo():qc(n)&&n.x_.set("Unknown"))}function jc(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ei.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}al(e).c_(t)}function Vc(e,t){e.O_.Oe(t),al(e).l_(t)}function zc(e){e.O_=new aa({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),al(e).start(),e.x_.p_()}function Hc(e){return qc(e)&&!al(e).Ho()&&e.C_.size>0}function qc(e){return 0===Fr(e).v_.size}function Wc(e){e.O_=void 0}async function $c(e){e.C_.forEach(((t,n)=>{jc(e,t)}))}async function Gc(e,t){Wc(e),Hc(e)?(e.x_.S_(t),zc(e)):e.x_.set("Unknown")}async function Kc(e,t,n){if(e.x_.set("Online"),t instanceof sa&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Nr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Yc(e,n)}else if(t instanceof ra?e.O_.$e(t):t instanceof ia?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(ei.min()))try{const t=await fc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Pi.EMPTY_BYTE_STRING,r.snapshotVersion)),Vc(e,t);const i=new ja(r.target,t,n,r.sequenceNumber);jc(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Nr("RemoteStore","Failed to raise snapshot:",t),await Yc(e,t)}}async function Yc(e,t,n){if(!yi(t))throw t;e.v_.add(1),await Fc(e),e.x_.set("Offline"),n||(n=()=>fc(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Nr("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Mc(e)}))}function Xc(e,t){return t().catch((n=>Yc(e,n,t)))}async function Qc(e){const t=Fr(e),n=cl(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Jc(t);)try{const e=await pc(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,Zc(t,e)}catch(e){await Yc(t,e)}el(t)&&tl(t)}function Jc(e){return qc(e)&&e.D_.length<10}function Zc(e,t){e.D_.push(t);const n=cl(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function el(e){return qc(e)&&!cl(e).Ho()&&e.D_.length>0}function tl(e){cl(e).start()}async function nl(e){cl(e).d_()}async function rl(e){const t=cl(e);for(const n of e.D_)t.I_(n.mutations)}async function il(e,t,n){const r=e.D_.shift(),i=Ho.from(r,t,n);await Xc(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Qc(e)}async function sl(e,t){t&&cl(e).P_&&await async function(e,t){if(function(e){return function(e){switch(e){default:return Pr();case Ur.CANCELLED:case Ur.UNKNOWN:case Ur.DEADLINE_EXCEEDED:case Ur.RESOURCE_EXHAUSTED:case Ur.INTERNAL:case Ur.UNAVAILABLE:case Ur.UNAUTHENTICATED:return!1;case Ur.INVALID_ARGUMENT:case Ur.NOT_FOUND:case Ur.ALREADY_EXISTS:case Ur.PERMISSION_DENIED:case Ur.FAILED_PRECONDITION:case Ur.ABORTED:case Ur.OUT_OF_RANGE:case Ur.UNIMPLEMENTED:case Ur.DATA_LOSS:return!0}}(e)&&e!==Ur.ABORTED}(t.code)){const n=e.D_.shift();cl(e).Zo(),await Xc(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Qc(e)}}(e,t),el(e)&&tl(e)}async function ol(e,t){const n=Fr(e);n.asyncQueue.verifyOperationInProgress(),Nr("RemoteStore","RemoteStore received new credentials");const r=qc(n);n.v_.add(3),await Fc(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Mc(n)}function al(e){return e.N_||(e.N_=function(e,t,n){const r=Fr(e);return r.R_(),new Nc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:$c.bind(null,e),To:Gc.bind(null,e),u_:Kc.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),Hc(e)?zc(e):e.x_.set("Unknown")):(await e.N_.stop(),Wc(e))}))),e.N_}function cl(e){return e.B_||(e.B_=function(e,t,n){const r=Fr(e);return r.R_(),new Rc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:nl.bind(null,e),To:sl.bind(null,e),E_:rl.bind(null,e),T_:il.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await Qc(e)):(await e.B_.stop(),e.D_.length>0&&(Nr("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))}))),e.B_}class ll{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new ll(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Br(Ur.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ul(e,t){if(Rr("AsyncQueue",`${t}: ${e}`),yi(e))return new Br(Ur.UNAVAILABLE,`${t}: ${e}`);throw e}class hl{constructor(e){this.comparator=e?(t,n)=>e(t,n)||si.comparator(t.key,n.key):(e,t)=>si.comparator(e.key,t.key),this.keyedMap=to(),this.sortedSet=new Ii(this.comparator)}static emptySet(e){return new hl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hl))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new hl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class dl{constructor(){this.L_=new Ii(si.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Pr():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class fl{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new fl(e,t,hl.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ws(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class pl{constructor(){this.q_=void 0,this.Q_=[]}}class ml{constructor(){this.queries=new Qs((e=>$s(e)),Ws),this.onlineState="Unknown",this.K_=new Set}}async function gl(e,t){const n=Fr(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new pl),i)try{s.q_=await n.onListen(r)}catch(e){const n=ul(e,`Initialization of query '${Gs(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&wl(n)}async function yl(e,t){const n=Fr(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function vl(e,t){const n=Fr(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.Q_)t.W_(e)&&(r=!0);i.q_=e}}r&&wl(n)}function _l(e,t,n){const r=Fr(e),i=r.queries.get(t);if(i)for(const e of i.Q_)e.onError(n);r.queries.delete(t)}function wl(e){e.K_.forEach((e=>{e.next()}))}class bl{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new fl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class El{constructor(e){this.key=e}}class Tl{constructor(e){this.key=e}}class Sl{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=co(),this.mutatedKeys=co(),this.ua=Ys(e),this.ca=new hl(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new dl,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=Ks(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||c&&this.ua(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pr()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const o=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,c=a!==this._a;return this._a=a,0!==s.length||c?{snapshot:new fl(this.query,e.ca,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new dl,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=co(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new Tl(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new El(n))})),t}Ra(e){this.oa=e.hs,this.aa=co();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return fl.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Cl{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Al{constructor(e){this.key=e,this.ma=!1}}class kl{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Qs((e=>$s(e)),Ws),this.pa=new Map,this.ya=new Set,this.wa=new Ii(si.comparator),this.Sa=new Map,this.ba=new Za,this.Da={},this.Ca=new Map,this.va=Ga.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function Il(e,t){const n=function(e){const t=Fr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dl.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ql.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Rl.bind(null,t),t.fa.u_=vl.bind(null,t.eventManager),t.fa.xa=_l.bind(null,t.eventManager),t}(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await function(e,t){const n=Fr(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,di.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new ja(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}(n.localStore,Vs(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await async function(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await gc(e.localStore,t.query,!1).then((({documents:e})=>t.view.ha(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Bl(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const s=await gc(e.localStore,t,!0),o=new Sl(t,s.hs),a=o.ha(s.documents),c=na.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);Bl(e,n,l.da);const u=new Cl(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),l.snapshot}(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Uc(n.remoteStore,e)}return i}async function xl(e,t){const n=Fr(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!Ws(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await mc(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Bc(n.remoteStore,r.targetId),Fl(n,r.targetId)})).catch(hi)):(Fl(n,r.targetId),await mc(n.localStore,r.targetId,!0))}async function Dl(e,t){const n=Fr(e);try{const e=await function(e,t){const n=Fr(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Pi.EMPTY_BYTE_STRING,ei.min()).withLastLimboFreeSnapshotVersion(ei.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(e,l))}));let a=Zs(),c=co();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(function(e,t,n){let r=co(),i=co();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Zs();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ei.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Nr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(ei.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return di.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(Mr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?Mr(r.ma):e.removedDocuments.size>0&&(Mr(r.ma),r.ma=!1))})),await zl(n,e,t)}catch(e){await hi(e)}}function Nl(e,t,n){const r=Fr(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Fr(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.Q_)e.U_(t)&&(r=!0)})),r&&wl(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Rl(e,t,n){const r=Fr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new Ii(si.comparator);e=e.insert(s,ls.newNoDocument(s,ei.min()));const n=co().add(s),i=new ta(ei.min(),new Map,new Ii(Qr),e,n);await Dl(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),Vl(r)}else await mc(r.localStore,t,!1).then((()=>Fl(r,t,n))).catch(hi)}async function Ol(e,t){const n=Fr(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Fr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=di.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Mr(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=co();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Ml(n,r,null),Pl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zl(n,e)}catch(e){await hi(e)}}async function Ll(e,t,n){const r=Fr(e);try{const e=await function(e,t){const n=Fr(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Mr(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Ml(r,t,n),Pl(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await zl(r,e)}catch(n){await hi(n)}}function Pl(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function Ml(e,t,n){const r=Fr(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function Fl(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||Ul(e,t)}))}function Ul(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(Bc(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Vl(e))}function Bl(e,t,n){for(const r of n)r instanceof El?(e.ba.addReference(r.key,t),jl(e,r)):r instanceof Tl?(Nr("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||Ul(e,r.key)):Pr()}function jl(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(Nr("SyncEngine","New document in limbo: "+n),e.ya.add(r),Vl(e))}function Vl(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new si(ni.fromString(t)),r=e.va.next();e.Sa.set(r,new Al(n)),e.wa=e.wa.insert(n,r),Uc(e.remoteStore,new ja(Vs(Fs(n.path)),r,"TargetPurposeLimboResolution",Ei._e))}}async function zl(e,t,n){const r=Fr(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{o.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=cc.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.fa.u_(i),await async function(e,t){const n=Fr(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>di.forEach(t,(t=>di.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>di.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!yi(e))throw e;Nr("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.ns.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(t,i)}}}(r.localStore,s))}async function Hl(e,t){const n=Fr(e);if(!n.currentUser.isEqual(t)){Nr("SyncEngine","User change. New user:",t.toKey());const e=await dc(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new Br(Ur.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ca.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await zl(n,e.us)}}function ql(e,t){const n=Fr(e),r=n.Sa.get(t);if(r&&r.ma)return co().add(r.key);{let e=co();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}function Wl(e){const t=Fr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ol.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ll.bind(null,t),t}class $l{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ic(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,r){return new hc(e,t,n,r)}(this.persistence,new uc,e.initialUser,this.serializer)}createPersistence(e){return new sc(ac.Hr,this.serializer)}createSharedClientState(e){return new vc}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Gl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Nl(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hl.bind(null,this.syncEngine),await async function(e,t){const n=Fr(e);t?(n.v_.delete(2),await Mc(n)):t||(n.v_.add(2),await Fc(n),n.x_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ml}createDatastore(e){const t=Ic(e.databaseInfo.databaseId),n=function(e){return new Ac(e)}(e.databaseInfo);return function(e,t,n,r){return new Oc(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Pc(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Nl(this.syncEngine,e,0)),wc.D()?new wc:new _c)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new kl(e,t,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Fr(e);Nr("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Fc(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class Kl{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Yl{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=kr.UNAUTHENTICATED,this.clientId=Xr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Nr("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Nr("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Br(Ur.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ul(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Xl(e,t){e.asyncQueue.verifyOperationInProgress(),Nr("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await dc(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Ql(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Nr("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xl(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ur.FAILED_PRECONDITION||e.code===Ur.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Or("Error using user provided cache. Falling back to memory cache: "+n),await Xl(e,new $l)}}else Nr("FirestoreClient","Using default OfflineComponentProvider"),await Xl(e,new $l);return e._offlineComponents}(e);Nr("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>ol(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ol(t.remoteStore,n))),e._onlineComponents=t}async function Jl(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Nr("FirestoreClient","Using user provided OnlineComponentProvider"),await Ql(e,e._uninitializedComponentsProvider._online)):(Nr("FirestoreClient","Using default OnlineComponentProvider"),await Ql(e,new Gl))),e._onlineComponents}async function Zl(e){const t=await Jl(e),n=t.eventManager;return n.onListen=Il.bind(null,t.syncEngine),n.onUnlisten=xl.bind(null,t.syncEngine),n}function eu(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const tu=new Map;function nu(e,t,n){if(!n)throw new Br(Ur.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ru(e){if(!si.isDocumentKey(e))throw new Br(Ur.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function iu(e){if(si.isDocumentKey(e))throw new Br(Ur.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function su(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Pr()}function ou(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Br(Ur.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=su(e);throw new Br(Ur.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class au{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Br(Ur.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Br(Ur.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Br(Ur.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eu(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Br(Ur.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Br(Ur.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Br(Ur.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new au({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Br(Ur.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Br(Ur.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new au(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new zr;switch(e.type){case"firstParty":return new $r(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Br(Ur.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=tu.get(e);t&&(Nr("ComponentProvider","Removing Datastore"),tu.delete(e),t.terminate())}(this),Promise.resolve()}}class lu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new lu(this.firestore,e,this._query)}}class uu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new uu(this.firestore,e,this._key)}}class hu extends lu{constructor(e,t,n){super(e,t,Fs(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new uu(this.firestore,null,new si(e))}withConverter(e){return new hu(this.firestore,e,this._path)}}function du(e,t,...n){if(e=(0,a.Yj)(e),nu("collection","path",t),e instanceof cu){const r=ni.fromString(t,...n);return iu(r),new hu(e,null,r)}{if(!(e instanceof uu||e instanceof hu))throw new Br(Ur.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ni.fromString(t,...n));return iu(r),new hu(e.firestore,null,r)}}function fu(e,t,...n){if(e=(0,a.Yj)(e),1===arguments.length&&(t=Xr.newId()),nu("doc","path",t),e instanceof cu){const r=ni.fromString(t,...n);return ru(r),new uu(e,null,new si(r))}{if(!(e instanceof uu||e instanceof hu))throw new Br(Ur.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ni.fromString(t,...n));return ru(r),new uu(e.firestore,e instanceof hu?e.converter:null,new si(r))}}class pu{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new xc(this,"async_queue_retry"),this._u=()=>{const e=kc();e&&Nr("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=kc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=kc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new jr;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!yi(e))throw e;Nr("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Rr("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=ll.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&Pr()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}class mu extends cu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new pu,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vu(this),this._firestoreClient.terminate()}}function gu(e,t){const n="object"==typeof e?e:(0,i.WE)(),r="string"==typeof e?e:t||"(default)",s=(0,i.U5)(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(0,a.on)("firestore");e&&function(e,t,n,r={}){var i;const s=(e=ou(e,cu))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=kr.MOCK_USER;else{t=(0,a.YD)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Br(Ur.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new kr(s)}e._authCredentials=new Hr(new Vr(t,n))}}(s,...e)}return s}function yu(e){return e._firestoreClient||vu(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function vu(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Hi(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,eu(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Yl(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class _u{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class wu{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class bu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bu(Pi.fromBase64String(e))}catch(e){throw new Br(Ur.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new bu(Pi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Eu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Br(Ur.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Tu(){return new Eu("__name__")}class Su{constructor(e){this._methodName=e}}class Cu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Br(Ur.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Br(Ur.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qr(this._lat,e._lat)||Qr(this._long,e._long)}}const Au=/^__.*__$/;class ku{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Mo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Po(e,this.data,t,this.fieldTransforms)}}class Iu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Mo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pr()}}class Du{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Du(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return zu(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(xu(this.du)&&Au.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Nu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ic(e)}Su(e,t,n,r=!1){return new Du({du:e,methodName:t,wu:n,path:ii.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ru(e){const t=e._freezeSettings(),n=Ic(e._databaseId);return new Nu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ou(e,t,n,r,i,s={}){const o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);Uu("Data must be an object, but it was:",o,r);const a=Mu(r,o);let c,l;if(s.merge)c=new Oi(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Bu(t,r,n);if(!o.contains(i))throw new Br(Ur.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Hu(e,i)||e.push(i)}c=new Oi(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new ku(new as(a),c,l)}class Lu extends Su{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lu}}function Pu(e,t){if(Fu(e=(0,a.Yj)(e)))return Uu("Unsupported field value:",t,e),Mu(e,t);if(e instanceof Su)return function(e,t){if(!xu(t.du))throw t.pu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.pu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Pu(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,a.Yj)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fo(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Zr.fromDate(e);return{timestampValue:ma(t.serializer,n)}}if(e instanceof Zr){const n=new Zr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ma(t.serializer,n)}}if(e instanceof Cu)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof bu)return{bytesValue:ga(t.serializer,e._byteString)};if(e instanceof uu){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:_a(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu(`Unsupported field value: ${su(e)}`)}(e,t)}function Mu(e,t){const n={};return ki(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ai(e,((e,r)=>{const i=Pu(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Fu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Zr||e instanceof Cu||e instanceof bu||e instanceof uu||e instanceof Su)}function Uu(e,t,n){if(!Fu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=su(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function Bu(e,t,n){if((t=(0,a.Yj)(t))instanceof Eu)return t._internalPath;if("string"==typeof t)return Vu(e,t);throw zu("Field path arguments must be of type string or ",e,!1,void 0,n)}const ju=new RegExp("[~\\*/\\[\\]]");function Vu(e,t,n){if(t.search(ju)>=0)throw zu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Eu(...t.split("."))._internalPath}catch(r){throw zu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function zu(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Br(Ur.INVALID_ARGUMENT,a+e+c)}function Hu(e,t){return e.some((e=>e.isEqual(t)))}class qu{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new uu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Wu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($u("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Wu extends qu{data(){return super.data()}}function $u(e,t){return"string"==typeof t?Vu(e,t):t instanceof Eu?t._internalPath:t._delegate._internalPath}class Gu{}class Ku extends Gu{}function Yu(e,t,...n){let r=[];t instanceof Gu&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof Ju)).length,n=e.filter((e=>e instanceof Xu)).length;if(t>1||t>0&&n>0)throw new Br(Ur.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const t of r)e=t._apply(e);return e}class Xu extends Ku{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Xu(e,t,n)}_apply(e){const t=this._parse(e);return sh(e._query,t),new lu(e.firestore,e.converter,Hs(e._query,t))}_parse(e){const t=Ru(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Br(Ur.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){ih(o,s);const t=[];for(const n of o)t.push(rh(r,e,n));a={arrayValue:{values:t}}}else a=rh(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||ih(o,s),a=function(e,t,n,r=!1){return Pu(n,e.Su(r?4:3,t))}(n,"where",o,"in"===s||"not-in"===s);return gs.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Qu(e,t,n){const r=t,i=$u("where",e);return Xu._create(i,r,n)}class Ju extends Gu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ju(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ys.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)sh(n,e),n=Hs(n,e)}(e._query,t),new lu(e.firestore,e.converter,Hs(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Zu extends Ku{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zu(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Br(Ur.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Br(Ur.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fs(t,n)}(e._query,this._field,this._direction);return new lu(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ms(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function eh(e,t="asc"){const n=t,r=$u("orderBy",e);return Zu._create(r,n)}class th extends Ku{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new th(e,t,n)}_apply(e){return new lu(e.firestore,e.converter,qs(e._query,this._limit,this._limitType))}}function nh(e){return function(e,t){if(t<=0)throw new Br(Ur.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}("limit",e),th._create("limit",e,"F")}function rh(e,t,n){if("string"==typeof(n=(0,a.Yj)(n))){if(""===n)throw new Br(Ur.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bs(t)&&-1!==n.indexOf("/"))throw new Br(Ur.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ni.fromString(n));if(!si.isDocumentKey(r))throw new Br(Ur.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zi(e,new si(r))}if(n instanceof uu)return Zi(e,n._key);throw new Br(Ur.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${su(n)}.`)}function ih(e,t){if(!Array.isArray(e)||0===e.length)throw new Br(Ur.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function sh(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Br(Ur.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Br(Ur.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class oh{convertValue(e,t="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ui(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Pr()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ai(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Cu(Ui(e.latitude),Ui(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Vi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(zi(e));default:return null}}convertTimestamp(e){const t=Fi(e);return new Zr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ni.fromString(e);Mr(Ba(n));const r=new qi(n.get(1),n.get(3)),i=new si(n.popFirst(5));return r.isEqual(t)||Rr(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function ah(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ch{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lh extends qu{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field($u("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class uh extends lh{data(e={}){return super.data(e)}}class hh{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ch(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new uh(this._firestore,this._userDataWriter,n.key,n,new ch(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Br(Ur.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new uh(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ch(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new uh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ch(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:dh(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dh(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pr()}}function fh(e){e=ou(e,uu);const t=ou(e.firestore,mu);return function(e,t,n={}){const r=new jr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Kl({next:s=>{t.enqueueAndForget((()=>yl(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Br(Ur.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Br(Ur.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new bl(Fs(n.path),s,{includeMetadataChanges:!0,Z_:!0});return gl(e,o)}(await Zl(e),e.asyncQueue,t,n,r))),r.promise}(yu(t),e._key).then((n=>function(e,t,n){const r=n.docs.get(t._key),i=new ph(e);return new lh(e,i,t._key,r,new ch(n.hasPendingWrites,n.fromCache),t.converter)}(t,e,n)))}class ph extends oh{constructor(e){super(),this.firestore=e}convertBytes(e){return new bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new uu(this.firestore,null,t)}}function mh(e){e=ou(e,lu);const t=ou(e.firestore,mu),n=yu(t),r=new ph(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Br(Ur.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),function(e,t,n={}){const r=new jr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Kl({next:n=>{t.enqueueAndForget((()=>yl(e,o))),n.fromCache&&"server"===r.source?i.reject(new Br(Ur.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new bl(n,s,{includeMetadataChanges:!0,Z_:!0});return gl(e,o)}(await Zl(e),e.asyncQueue,t,n,r))),r.promise}(n,e._query).then((n=>new hh(t,r,e,n)))}function gh(e,t,n){e=ou(e,uu);const r=ou(e.firestore,mu),i=ah(e.converter,t,n);return yh(r,[Ou(Ru(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ko.none())])}function yh(e,t){return function(e,t){const n=new jr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Wl(e);try{const e=await function(e,t){const n=Fr(e),r=Zr.now(),i=t.reduce(((e,t)=>e.add(t.key)),co());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Zs(),c=co();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Oo(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Mo(e.key,t,cs(t.value.mapValue),ko.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:no(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new Ii(Qr)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await zl(r,e.changes),await Qc(r.remoteStore)}catch(e){const t=ul(e,"Failed to persist write");n.reject(t)}}(await function(e){return Jl(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(yu(e),t)}function vh(e){return function(e,t){const n=ou(e.firestore,mu),r=yu(n),i=function(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r));return n}(t,((e,t)=>new Wo(t,e.aggregateType,e._internalFieldPath)));return function(e,t,n){const r=new jr;return e.asyncQueue.enqueueAndForget((async()=>{try{const i=await function(e){return Jl(e).then((e=>e.datastore))}(e);r.resolve(async function(e,t,n){var r;const i=Fr(e),{request:s,V_:o,parent:a}=function(e,t,n){const{ut:r,parent:i}=xa(e,t),s={},o=[];let a=0;return n.forEach((e=>{const t="aggregate_"+a++;s[t]=e.alias,"count"===e.aggregateType?o.push({alias:t,count:{}}):"avg"===e.aggregateType?o.push({alias:t,avg:{field:Pa(e.fieldPath)}}):"sum"===e.aggregateType&&o.push({alias:t,sum:{field:Pa(e.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:r.structuredQuery},parent:r.parent},V_:s,parent:i}}(i.serializer,function(e){const t=Fr(e);return t.Pe||(t.Pe=zs(t,e.explicitOrderBy)),t.Pe}(t),n);i.connection.wo||delete s.parent;const c=(await i.vo("RunAggregationQuery",i.serializer.databaseId,a,s,1)).filter((e=>!!e.result));Mr(1===c.length);const l=null===(r=c[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(l).reduce(((e,t)=>(e[o[t]]=l[t],e)),{})}(i,t,n))}catch(e){r.reject(e)}})),r.promise}(r,e._query,i).then((t=>function(e,t,n){const r=new ph(e);return new wu(t,r,n)}(n,e,t)))}(e,{count:new _u("count")})}class _h{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ru(e)}set(e,t,n){this._verifyNotCommitted();const r=wh(e,this._firestore),i=ah(r.converter,t,n),s=Ou(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,ko.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=wh(e,this._firestore);let s;return s="string"==typeof(t=(0,a.Yj)(t))||t instanceof Eu?function(e,t,n,r,i,s){const o=e.Su(1,t,n),c=[Bu(t,r,n)],l=[i];if(s.length%2!=0)throw new Br(Ur.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)c.push(Bu(t,s[e])),l.push(s[e+1]);const u=[],h=as.empty();for(let e=c.length-1;e>=0;--e)if(!Hu(u,c[e])){const t=c[e];let n=l[e];n=(0,a.Yj)(n);const r=o.fu(t);if(n instanceof Lu)u.push(t);else{const e=Pu(n,r);null!=e&&(u.push(t),h.set(t,e))}}const d=new Oi(u);return new Iu(h,d,o.fieldTransforms)}(this._dataReader,"WriteBatch.update",i._key,t,n,r):function(e,t,n,r){const i=e.Su(1,t,n);Uu("Data must be an object, but it was:",i,r);const s=[],o=as.empty();Ai(r,((e,r)=>{const c=Vu(t,e,n);r=(0,a.Yj)(r);const l=i.fu(c);if(r instanceof Lu)s.push(c);else{const e=Pu(r,l);null!=e&&(s.push(c),o.set(c,e))}}));const c=new Oi(s);return new Iu(o,c,i.fieldTransforms)}(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,ko.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wh(e,this._firestore);return this._mutations=this._mutations.concat(new jo(t._key,ko.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Br(Ur.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wh(e,t){if((e=(0,a.Yj)(e)).firestore!==t)throw new Br(Ur.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function bh(){return new Lu("deleteField")}function Eh(e){return yu(e=ou(e,mu)),new _h(e,(t=>yh(e,t)))}new WeakMap,function(e,t=!0){!function(e){Ir=e}(i.Sg),(0,i.q4)(new s.Yl("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new mu(new qr(e.getProvider("auth-internal")),new Kr(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Br(Ur.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qi(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),(0,i.Kk)(Ar,"4.4.2",e),(0,i.Kk)(Ar,"4.4.2","esm2017")}()},4296:(e,t,n)=>{"use strict";n.d(t,{Gf:()=>g,Kq:()=>ne,GO:()=>te,wv:()=>ie,IL:()=>re});var r=n(4376);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=i>>2,u=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==a||null==c)throw new o;const l=i<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==c){const e=a<<6&192|c;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return s.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},l=e=>{const t=(e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]};class u extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,h.prototype.create)}}class h{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(d,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new u(r,o,n)}}const d=/\{\$([^}]+)}/g;function f(e){return e&&e._delegate?e._delegate:e}const p="firebasestorage.googleapis.com",m="storageBucket";class g extends u{constructor(e,t,n=0){super(_(e),`Firebase Storage: ${t} (${_(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,g.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var y,v;function _(e){return"storage/"+e}function w(){return new g(y.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function b(e){return new g(y.INVALID_ARGUMENT,e)}function E(){return new g(y.APP_DELETED,"The Firebase app was deleted.")}function T(e){throw new g(y.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(y||(y={}));class S{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=S.makeFromUrl(e,t)}catch(t){return new S(e,"")}if(""===n.path)return n;throw r=e,new g(y.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===p?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let t=0;t<a.length;t++){const r=a[t],i=r.regex.exec(e);if(i){const e=i[r.indices.bucket];let t=i[r.indices.path];t||(t=""),n=new S(e,t),r.postModify(n);break}}if(null==n)throw function(e){return new g(y.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class C{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function A(e){return"string"==typeof e||e instanceof String}function k(e,t,n,r){if(r<t)throw b(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw b(`Invalid value for '${e}'. Expected ${n} or less.`)}function I(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function x(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(v||(v={}));class D{constructor(e,t,n,r,i,s,o,a,c,l,u,h=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(e){r(e)}else if(null!==i){const e=w();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else t.canceled?r(this.appDelete_?E():new g(y.CANCELED,"User canceled the upload/download.")):r(new g(y.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new N(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(...e){l||(l=!0,t.apply(null,e))}function h(t){i=setTimeout((()=>{i=null,e(f,c())}),t)}function d(){s&&clearTimeout(s)}function f(e,...t){if(l)return void d();if(e)return d(),void u.call(null,e,...t);if(c()||o)return d(),void u.call(null,e,...t);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),h(n)}let p=!1;function m(e){p||(p=!0,d(),l||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(((e,t)=>{if(t)return void e(!1,new N(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===v.NO_ERROR,i=n.getStatus();if(!t||function(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===v.ABORT;return void e(!1,new N(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new N(s,n))}))}),e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class N{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function R(e){let t;try{t=JSON.parse(e)}catch(e){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t;var n}function O(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function L(e,t){return t}class P{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||L}}let M=null;function F(){if(M)return M;const e=[];e.push(new P("bucket")),e.push(new P("generation")),e.push(new P("metageneration")),e.push(new P("name","fullPath",!0));const t=new P("name");t.xform=function(e,t){return function(e){return!A(e)||e.length<2?e:O(e)}(t)},e.push(t);const n=new P("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new P("timeCreated")),e.push(new P("updated")),e.push(new P("md5Hash",null,!0)),e.push(new P("cacheControl",null,!0)),e.push(new P("contentDisposition",null,!0)),e.push(new P("contentEncoding",null,!0)),e.push(new P("contentLanguage",null,!0)),e.push(new P("contentType",null,!0)),e.push(new P("metadata","customMetadata",!0)),M=e,M}function U(e,t,n){const r=R(t);return null===r?null:function(e,t,n){const r={type:"file"},i=n.length;for(let e=0;e<i;e++){const i=n[e];r[i.local]=i.xform(r,t[i.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new S(n,r);return t._makeStorageReference(i)}})}(r,e),r}(e,r,n)}class B{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function j(e){if(!e)throw w()}function V(e){const t=function(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new g(y.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new g(y.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new g(y.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new g(y.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new g(y.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function z(e,t,n){const r=I(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new B(r,"GET",function(e,t){return function(n,r){const i=U(e,r,t);return j(null!==i),i}}(e,n),i);return s.errorHandler=V(t),s}let H=null;class q{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=v.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=v.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=v.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw T("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const e in r)r.hasOwnProperty(e)&&this.xhr_.setRequestHeader(e,r[e].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw T("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw T("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw T("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw T("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class W extends q{initXhr(){this.xhr_.responseType="text"}}function $(){return H?H():new W}class G{constructor(e,t){this._service=e,this._location=t instanceof S?t:S.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new G(e,t)}get root(){const e=new S(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return O(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new S(this._location.bucket,e);return new G(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new g(y.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function K(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=I(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new B(r,"GET",function(e,t){return function(n,r){const i=U(e,r,t);return j(null!==i),function(e,t,n,r){const i=R(t);if(null===i)return null;if(!A(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return I("/b/"+o(i)+"/o/"+o(s),n,r)+x({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}(e,n),i);return s.errorHandler=V(t),s}(e.storage,e._location,F());return e.storage.makeRequestWithTokens(t,$).then((e=>{if(null===e)throw new g(y.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Y(e,t){if(e instanceof Q){const n=e;if(null==n._bucket)throw new g(y.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+m+"' property when initializing the app?");const r=new G(n,n._bucket);return null!=t?Y(r,t):r}return void 0!==t?function(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new S(e._location.bucket,n);return new G(e.storage,r)}(e,t):e}function X(e,t){const n=null==t?void 0:t[m];return null==n?null:S.makeFromBucketSpec(n,e)}class Q{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=p,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?S.makeFromBucketSpec(r,this._host):X(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=S.makeFromBucketSpec(this._url,e):this._bucket=X(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){k("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){k("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new G(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new C(E());{const s=function(e,t,n,r,i,s,o=!0){const a=x(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new D(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const J="@firebase/storage",Z="0.11.2",ee="storage";function te(e){return function(e){e._throwIfRoot("getMetadata");const t=z(e.storage,e._location,F());return e.storage.makeRequestWithTokens(t,$)}(e=f(e))}function ne(e){return K(e=f(e))}function re(e,t){return function(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Q)return new G(e,t);throw b("To use ref(service, url), the first argument must be a Storage instance.")}return Y(e,t)}(e=f(e),t)}function ie(e=(0,r.WE)(),t){e=f(e);const n=(0,r.U5)(e,ee).getImmediate({identifier:t}),i=l("storage");return i&&function(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}(i,e.app.options.projectId))}(e,t,n,r)}(n,...i),n}(0,r.q4)(new class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}(ee,(function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Q(n,i,s,t,r.Sg)}),"PUBLIC").setMultipleInstances(!0)),(0,r.Kk)(J,Z,""),(0,r.Kk)(J,Z,"esm2017")},6900:(e,t,n)=>{"use strict";n.d(t,{A3:()=>E,AL:()=>v,AV:()=>g,Cc:()=>y,EB:()=>l,IN:()=>k,Su:()=>m,UR:()=>S,Uv:()=>_,WW:()=>a,Wg:()=>o,YD:()=>p,Yd:()=>h,Yj:()=>P,aw:()=>D,ik:()=>x,kF:()=>N,kx:()=>T,my:()=>R,o9:()=>f,on:()=>u,qk:()=>w,sX:()=>d,t7:()=>A,yy:()=>b});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=i>>2,u=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],o=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==o||null==a||null==c)throw new s;const l=i<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==c){const e=a<<6&192|c;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return i.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},c=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},l=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},u=e=>{const t=l(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},d=e=>{var t;return null===(t=c())||void 0===t?void 0:t[`_${e}`]};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}function m(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function y(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){const e=m();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function w(){return!function(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){try{return"object"==typeof indexedDB}catch(e){return!1}}function E(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class T extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S.prototype.create)}}class S{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(C,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new T(r,o,n)}}const C=/\{\$([^}]+)}/g;function A(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function k(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(I(n)&&I(s)){if(!k(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function I(e){return null!==e&&"object"==typeof e}function x(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function D(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function N(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function R(e,t){const n=new O(e,t);return n.subscribe.bind(n)}class O{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function L(){}function P(e){return e&&e._delegate?e._delegate:e}},7480:function(e,t,n){var r,i;void 0===(i="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){a(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,o=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,n,o){var a=s.URL||s.webkitURL,c=document.createElement("a");n=n||e.name||"download",c.download=n,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?i(c):r(c.href)?t(e,n,o):i(c,c.target="_blank")):(c.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(c.href)}),4e4),setTimeout((function(){i(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,s){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,s),n);else if(r(e))t(e,n,s);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){i(o)}))}}:function(e,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var a="application/octet-stream"===e.type,c=/constructor/i.test(s.HTMLElement)||s.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&c||o)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},u.readAsDataURL(e)}else{var h=s.URL||s.webkitURL,d=h.createObjectURL(e);i?i.location=d:location.href=d,i=null,setTimeout((function(){h.revokeObjectURL(d)}),4e4)}});s.saveAs=a.saveAs=a,e.exports=a})?r.apply(t,[]):r)||(e.exports=i)},7588:function(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(r,i){"use strict";var s=[],o=Object.getPrototypeOf,a=s.slice,c=s.flat?function(e){return s.flat.call(e)}:function(e){return s.concat.apply([],e)},l=s.push,u=s.indexOf,h={},d=h.toString,f=h.hasOwnProperty,p=f.toString,m=p.call(Object),g={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},v=function(e){return null!=e&&e===e.window},_=r.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,s=(n=n||_).createElement("script");if(s.text=e,t)for(r in w)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&s.setAttribute(r,i);n.head.appendChild(s).parentNode.removeChild(s)}function E(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[d.call(e)]||"object":typeof e}var T="3.7.1",S=/HTML$/i,C=function(e,t){return new C.fn.init(e,t)};function A(e){var t=!!e&&"length"in e&&e.length,n=E(e);return!y(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function k(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}C.fn=C.prototype={jquery:T,constructor:C,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(e){return this.pushStack(C.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(C.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:s.sort,splice:s.splice},C.extend=C.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||y(o)||(o={}),a===c&&(o=this,a--);a<c;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(l&&r&&(C.isPlainObject(r)||(i=Array.isArray(r)))?(n=o[t],s=i&&!Array.isArray(n)?[]:i||C.isPlainObject(n)?n:{},i=!1,o[t]=C.extend(l,s,r)):void 0!==r&&(o[t]=r));return o},C.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e)||(t=o(e))&&("function"!=typeof(n=f.call(t,"constructor")&&t.constructor)||p.call(n)!==m))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(A(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r++];)n+=C.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(A(Object(e))?C.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!S.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,s=e.length,o=!n;i<s;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,s=0,o=[];if(A(e))for(r=e.length;s<r;s++)null!=(i=t(e[s],s,n))&&o.push(i);else for(s in e)null!=(i=t(e[s],s,n))&&o.push(i);return c(o)},guid:1,support:g}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=s[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var I=s.pop,x=s.sort,D=s.splice,N="[\\x20\\t\\r\\n\\f]",R=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g");C.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var O=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function L(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}C.escapeSelector=function(e){return(e+"").replace(O,L)};var P=_,M=l;!function(){var e,t,n,i,o,c,l,h,d,p,m=M,y=C.expando,v=0,_=0,w=ee(),b=ee(),E=ee(),T=ee(),S=function(e,t){return e===t&&(o=!0),0},A="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",O="(?:\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",L="\\["+N+"*("+O+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+N+"*\\]",F=":("+O+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+L+")*)|.*)\\)|)",U=new RegExp(N+"+","g"),B=new RegExp("^"+N+"*,"+N+"*"),j=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),V=new RegExp(N+"|>"),z=new RegExp(F),H=new RegExp("^"+O+"$"),q={ID:new RegExp("^#("+O+")"),CLASS:new RegExp("^\\.("+O+")"),TAG:new RegExp("^("+O+"|[*])"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+A+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Y=new RegExp("\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\([^\\r\\n\\f])","g"),X=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Q=function(){ce()},J=de((function(e){return!0===e.disabled&&k(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{m.apply(s=a.call(P.childNodes),P.childNodes),s[P.childNodes.length].nodeType}catch(e){m={apply:function(e,t){M.apply(e,a.call(t))},call:function(e){M.apply(e,a.call(arguments,1))}}}function Z(e,t,n,r){var i,s,o,a,l,u,f,p=t&&t.ownerDocument,v=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==v&&9!==v&&11!==v)return n;if(!r&&(ce(t),t=t||c,h)){if(11!==v&&(l=G.exec(e)))if(i=l[1]){if(9===v){if(!(o=t.getElementById(i)))return n;if(o.id===i)return m.call(n,o),n}else if(p&&(o=p.getElementById(i))&&Z.contains(t,o)&&o.id===i)return m.call(n,o),n}else{if(l[2])return m.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&t.getElementsByClassName)return m.apply(n,t.getElementsByClassName(i)),n}if(!(T[e+" "]||d&&d.test(e))){if(f=e,p=t,1===v&&(V.test(e)||j.test(e))){for((p=K.test(e)&&ae(t.parentNode)||t)==t&&g.scope||((a=t.getAttribute("id"))?a=C.escapeSelector(a):t.setAttribute("id",a=y)),s=(u=ue(e)).length;s--;)u[s]=(a?"#"+a:":scope")+" "+he(u[s]);f=u.join(",")}try{return m.apply(n,p.querySelectorAll(f)),n}catch(t){T(e,!0)}finally{a===y&&t.removeAttribute("id")}}}return ve(e.replace(R,"$1"),t,n,r)}function ee(){var e=[];return function n(r,i){return e.push(r+" ")>t.cacheLength&&delete n[e.shift()],n[r+" "]=i}}function te(e){return e[y]=!0,e}function ne(e){var t=c.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return k(t,"input")&&t.type===e}}function ie(e){return function(t){return(k(t,"input")||k(t,"button"))&&t.type===e}}function se(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&J(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function oe(e){return te((function(t){return t=+t,te((function(n,r){for(var i,s=e([],n.length,t),o=s.length;o--;)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))}))}))}function ae(e){return e&&void 0!==e.getElementsByTagName&&e}function ce(e){var n,r=e?e.ownerDocument||e:P;return r!=c&&9===r.nodeType&&r.documentElement?(l=(c=r).documentElement,h=!C.isXMLDoc(c),p=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,l.msMatchesSelector&&P!=c&&(n=c.defaultView)&&n.top!==n&&n.addEventListener("unload",Q),g.getById=ne((function(e){return l.appendChild(e).id=C.expando,!c.getElementsByName||!c.getElementsByName(C.expando).length})),g.disconnectedMatch=ne((function(e){return p.call(e,"*")})),g.scope=ne((function(){return c.querySelectorAll(":scope")})),g.cssHas=ne((function(){try{return c.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),g.getById?(t.filter.ID=function(e){var t=e.replace(Y,X);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(Y,X);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n,r,i,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(i=t.getElementsByName(e),r=0;s=i[r++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),t.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(e)},d=[],ne((function(e){var t;l.appendChild(e).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+N+"*(?:value|"+A+")"),e.querySelectorAll("[id~="+y+"-]").length||d.push("~="),e.querySelectorAll("a#"+y+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=c.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),l.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=c.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+N+"*name"+N+"*="+N+"*(?:''|\"\")")})),g.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),S=function(e,t){if(e===t)return o=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!g.sortDetached&&t.compareDocumentPosition(e)===n?e===c||e.ownerDocument==P&&Z.contains(P,e)?-1:t===c||t.ownerDocument==P&&Z.contains(P,t)?1:i?u.call(i,e)-u.call(i,t):0:4&n?-1:1)},c):c}for(e in Z.matches=function(e,t){return Z(e,null,null,t)},Z.matchesSelector=function(e,t){if(ce(e),h&&!T[t+" "]&&(!d||!d.test(t)))try{var n=p.call(e,t);if(n||g.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){T(t,!0)}return Z(t,c,null,[e]).length>0},Z.contains=function(e,t){return(e.ownerDocument||e)!=c&&ce(e),C.contains(e,t)},Z.attr=function(e,n){(e.ownerDocument||e)!=c&&ce(e);var r=t.attrHandle[n.toLowerCase()],i=r&&f.call(t.attrHandle,n.toLowerCase())?r(e,n,!h):void 0;return void 0!==i?i:e.getAttribute(n)},Z.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},C.uniqueSort=function(e){var t,n=[],r=0,s=0;if(o=!g.sortStable,i=!g.sortStable&&a.call(e,0),x.call(e,S),o){for(;t=e[s++];)t===e[s]&&(r=n.push(s));for(;r--;)D.call(e,n[r],1)}return i=null,e},C.fn.uniqueSort=function(){return this.pushStack(C.uniqueSort(a.apply(this)))},t=C.expr={cacheLength:50,createPseudo:te,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Y,X),e[3]=(e[3]||e[4]||e[5]||"").replace(Y,X),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Z.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Z.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&z.test(n)&&(t=ue(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Y,X).toLowerCase();return"*"===e?function(){return!0}:function(e){return k(e,t)}},CLASS:function(e){var t=w[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&w(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=Z.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var l,u,h,d,f,p=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=a&&t.nodeName.toLowerCase(),_=!c&&!a,w=!1;if(m){if(s){for(;p;){for(h=t;h=h[p];)if(a?k(h,g):1===h.nodeType)return!1;f=p="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&_){for(w=(d=(l=(u=m[y]||(m[y]={}))[e]||[])[0]===v&&l[1])&&l[2],h=d&&m.childNodes[d];h=++d&&h&&h[p]||(w=d=0)||f.pop();)if(1===h.nodeType&&++w&&h===t){u[e]=[v,d,w];break}}else if(_&&(w=d=(l=(u=t[y]||(t[y]={}))[e]||[])[0]===v&&l[1]),!1===w)for(;(h=++d&&h&&h[p]||(w=d=0)||f.pop())&&(!(a?k(h,g):1===h.nodeType)||!++w||(_&&((u=h[y]||(h[y]={}))[e]=[v,w]),h!==t)););return(w-=i)===r||w%r==0&&w/r>=0}}},PSEUDO:function(e,n){var r,i=t.pseudos[e]||t.setFilters[e.toLowerCase()]||Z.error("unsupported pseudo: "+e);return i[y]?i(n):i.length>1?(r=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var r,s=i(e,n),o=s.length;o--;)e[r=u.call(e,s[o])]=!(t[r]=s[o])})):function(e){return i(e,0,r)}):i}},pseudos:{not:te((function(e){var t=[],n=[],r=ye(e.replace(R,"$1"));return r[y]?te((function(e,t,n,i){for(var s,o=r(e,null,i,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))})):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}})),has:te((function(e){return function(t){return Z(e,t).length>0}})),contains:te((function(e){return e=e.replace(Y,X),function(t){return(t.textContent||C.text(t)).indexOf(e)>-1}})),lang:te((function(e){return H.test(e||"")||Z.error("unsupported lang: "+e),e=e.replace(Y,X).toLowerCase(),function(t){var n;do{if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===l},focus:function(e){return e===function(){try{return c.activeElement}catch(e){}}()&&c.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:se(!1),disabled:se(!0),checked:function(e){return k(e,"input")&&!!e.checked||k(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return $.test(e.nodeName)},input:function(e){return W.test(e.nodeName)},button:function(e){return k(e,"input")&&"button"===e.type||k(e,"button")},text:function(e){var t;return k(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:oe((function(){return[0]})),last:oe((function(e,t){return[t-1]})),eq:oe((function(e,t,n){return[n<0?n+t:n]})),even:oe((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:oe((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:oe((function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:oe((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=re(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=ie(e);function le(){}function ue(e,n){var r,i,s,o,a,c,l,u=b[e+" "];if(u)return n?0:u.slice(0);for(a=e,c=[],l=t.preFilter;a;){for(o in r&&!(i=B.exec(a))||(i&&(a=a.slice(i[0].length)||a),c.push(s=[])),r=!1,(i=j.exec(a))&&(r=i.shift(),s.push({value:r,type:i[0].replace(R," ")}),a=a.slice(r.length)),t.filter)!(i=q[o].exec(a))||l[o]&&!(i=l[o](i))||(r=i.shift(),s.push({value:r,type:o,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?Z.error(e):b(e,c).slice(0)}function he(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function de(e,t,n){var r=t.dir,i=t.next,s=i||r,o=n&&"parentNode"===s,a=_++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,c){var l,u,h=[v,a];if(c){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,c))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(u=t[y]||(t[y]={}),i&&k(t,i))t=t[r]||t;else{if((l=u[s])&&l[0]===v&&l[1]===a)return h[2]=l[2];if(u[s]=h,h[2]=e(t,n,c))return!0}return!1}}function fe(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function pe(e,t,n,r,i){for(var s,o=[],a=0,c=e.length,l=null!=t;a<c;a++)(s=e[a])&&(n&&!n(s,r,i)||(o.push(s),l&&t.push(a)));return o}function me(e,t,n,r,i,s){return r&&!r[y]&&(r=me(r)),i&&!i[y]&&(i=me(i,s)),te((function(s,o,a,c){var l,h,d,f,p=[],g=[],y=o.length,v=s||function(e,t,n){for(var r=0,i=t.length;r<i;r++)Z(e,t[r],n);return n}(t||"*",a.nodeType?[a]:a,[]),_=!e||!s&&t?v:pe(v,p,e,a,c);if(n?n(_,f=i||(s?e:y||r)?[]:o,a,c):f=_,r)for(l=pe(f,g),r(l,[],a,c),h=l.length;h--;)(d=l[h])&&(f[g[h]]=!(_[g[h]]=d));if(s){if(i||e){if(i){for(l=[],h=f.length;h--;)(d=f[h])&&l.push(_[h]=d);i(null,f=[],l,c)}for(h=f.length;h--;)(d=f[h])&&(l=i?u.call(s,d):p[h])>-1&&(s[l]=!(o[l]=d))}}else f=pe(f===o?f.splice(y,f.length):f),i?i(null,o,f,c):m.apply(o,f)}))}function ge(e){for(var r,i,s,o=e.length,a=t.relative[e[0].type],c=a||t.relative[" "],l=a?1:0,h=de((function(e){return e===r}),c,!0),d=de((function(e){return u.call(r,e)>-1}),c,!0),f=[function(e,t,i){var s=!a&&(i||t!=n)||((r=t).nodeType?h(e,t,i):d(e,t,i));return r=null,s}];l<o;l++)if(i=t.relative[e[l].type])f=[de(fe(f),i)];else{if((i=t.filter[e[l].type].apply(null,e[l].matches))[y]){for(s=++l;s<o&&!t.relative[e[s].type];s++);return me(l>1&&fe(f),l>1&&he(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(R,"$1"),i,l<s&&ge(e.slice(l,s)),s<o&&ge(e=e.slice(s)),s<o&&he(e))}f.push(i)}return fe(f)}function ye(e,r){var i,s=[],o=[],a=E[e+" "];if(!a){for(r||(r=ue(e)),i=r.length;i--;)(a=ge(r[i]))[y]?s.push(a):o.push(a);a=E(e,function(e,r){var i=r.length>0,s=e.length>0,o=function(o,a,l,u,d){var f,p,g,y=0,_="0",w=o&&[],b=[],E=n,T=o||s&&t.find.TAG("*",d),S=v+=null==E?1:Math.random()||.1,A=T.length;for(d&&(n=a==c||a||d);_!==A&&null!=(f=T[_]);_++){if(s&&f){for(p=0,a||f.ownerDocument==c||(ce(f),l=!h);g=e[p++];)if(g(f,a||c,l)){m.call(u,f);break}d&&(v=S)}i&&((f=!g&&f)&&y--,o&&w.push(f))}if(y+=_,i&&_!==y){for(p=0;g=r[p++];)g(w,b,a,l);if(o){if(y>0)for(;_--;)w[_]||b[_]||(b[_]=I.call(u));b=pe(b)}m.apply(u,b),d&&!o&&b.length>0&&y+r.length>1&&C.uniqueSort(u)}return d&&(v=S,n=E),w};return i?te(o):o}(o,s)),a.selector=e}return a}function ve(e,n,r,i){var s,o,a,c,l,u="function"==typeof e&&e,d=!i&&ue(e=u.selector||e);if(r=r||[],1===d.length){if((o=d[0]=d[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===n.nodeType&&h&&t.relative[o[1].type]){if(!(n=(t.find.ID(a.matches[0].replace(Y,X),n)||[])[0]))return r;u&&(n=n.parentNode),e=e.slice(o.shift().value.length)}for(s=q.needsContext.test(e)?0:o.length;s--&&(a=o[s],!t.relative[c=a.type]);)if((l=t.find[c])&&(i=l(a.matches[0].replace(Y,X),K.test(o[0].type)&&ae(n.parentNode)||n))){if(o.splice(s,1),!(e=i.length&&he(o)))return m.apply(r,i),r;break}}return(u||ye(e,d))(i,n,!h,r,!n||K.test(e)&&ae(n.parentNode)||n),r}le.prototype=t.filters=t.pseudos,t.setFilters=new le,g.sortStable=y.split("").sort(S).join("")===y,ce(),g.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(c.createElement("fieldset"))})),C.find=Z,C.expr[":"]=C.expr.pseudos,C.unique=C.uniqueSort,Z.compile=ye,Z.select=ve,Z.setDocument=ce,Z.tokenize=ue,Z.escape=C.escapeSelector,Z.getText=C.text,Z.isXML=C.isXMLDoc,Z.selectors=C.expr,Z.support=C.support,Z.uniqueSort=C.uniqueSort}();var F=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&C(e).is(n))break;r.push(e)}return r},U=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},B=C.expr.match.needsContext,j=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function V(e,t,n){return y(t)?C.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?C.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?C.grep(e,(function(e){return u.call(t,e)>-1!==n})):C.filter(t,e,n)}C.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?C.find.matchesSelector(r,e)?[r]:[]:C.find.matches(e,C.grep(t,(function(e){return 1===e.nodeType})))},C.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(C(e).filter((function(){for(t=0;t<r;t++)if(C.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)C.find(e,i[t],n);return r>1?C.uniqueSort(n):n},filter:function(e){return this.pushStack(V(this,e||[],!1))},not:function(e){return this.pushStack(V(this,e||[],!0))},is:function(e){return!!V(this,"string"==typeof e&&B.test(e)?C(e):e||[],!1).length}});var z,H=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||z,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:H.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:_,!0)),j.test(r[1])&&C.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=_.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(C):C.makeArray(e,this)}).prototype=C.fn,z=C(_);var q=/^(?:parents|prev(?:Until|All))/,W={children:!0,contents:!0,next:!0,prev:!0};function $(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(C.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,s=[],o="string"!=typeof e&&C(e);if(!B.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&C.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?C.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?u.call(C(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return F(e,"parentNode")},parentsUntil:function(e,t,n){return F(e,"parentNode",n)},next:function(e){return $(e,"nextSibling")},prev:function(e){return $(e,"previousSibling")},nextAll:function(e){return F(e,"nextSibling")},prevAll:function(e){return F(e,"previousSibling")},nextUntil:function(e,t,n){return F(e,"nextSibling",n)},prevUntil:function(e,t,n){return F(e,"previousSibling",n)},siblings:function(e){return U((e.parentNode||{}).firstChild,e)},children:function(e){return U(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(k(e,"template")&&(e=e.content||e),C.merge([],e.childNodes))}},(function(e,t){C.fn[e]=function(n,r){var i=C.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=C.filter(r,i)),this.length>1&&(W[e]||C.uniqueSort(i),q.test(e)&&i.reverse()),this.pushStack(i)}}));var G=/[^\x20\t\r\n\f]+/g;function K(e){return e}function Y(e){throw e}function X(e,t,n,r){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(n):e&&y(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}C.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return C.each(e.match(G)||[],(function(e,n){t[n]=!0})),t}(e):C.extend({},e);var t,n,r,i,s=[],o=[],a=-1,c=function(){for(i=i||e.once,r=t=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=s.length,n=!1);e.memory||(n=!1),t=!1,i&&(s=n?[]:"")},l={add:function(){return s&&(n&&!t&&(a=s.length-1,o.push(n)),function t(n){C.each(n,(function(n,r){y(r)?e.unique&&l.has(r)||s.push(r):r&&r.length&&"string"!==E(r)&&t(r)}))}(arguments),n&&!t&&c()),this},remove:function(){return C.each(arguments,(function(e,t){for(var n;(n=C.inArray(t,s,n))>-1;)s.splice(n,1),n<=a&&a--})),this},has:function(e){return e?C.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return i=o=[],n||t||(s=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},C.extend({Deferred:function(e){var t=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return C.Deferred((function(n){C.each(t,(function(t,r){var i=y(e[r[4]])&&e[r[4]];s[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,i){var s=0;function o(e,t,n,i){return function(){var a=this,c=arguments,l=function(){var r,l;if(!(e<s)){if((r=n.apply(a,c))===t.promise())throw new TypeError("Thenable self-resolution");l=r&&("object"==typeof r||"function"==typeof r)&&r.then,y(l)?i?l.call(r,o(s,t,K,i),o(s,t,Y,i)):(s++,l.call(r,o(s,t,K,i),o(s,t,Y,i),o(s,t,K,t.notifyWith))):(n!==K&&(a=void 0,c=[r]),(i||t.resolveWith)(a,c))}},u=i?l:function(){try{l()}catch(r){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(r,u.error),e+1>=s&&(n!==Y&&(a=void 0,c=[r]),t.rejectWith(a,c))}};e?u():(C.Deferred.getErrorHook?u.error=C.Deferred.getErrorHook():C.Deferred.getStackHook&&(u.error=C.Deferred.getStackHook()),r.setTimeout(u))}}return C.Deferred((function(r){t[0][3].add(o(0,r,y(i)?i:K,r.notifyWith)),t[1][3].add(o(0,r,y(e)?e:K)),t[2][3].add(o(0,r,y(n)?n:Y))})).promise()},promise:function(e){return null!=e?C.extend(e,i):i}},s={};return C.each(t,(function(e,r){var o=r[2],a=r[5];i[r[1]]=o.add,a&&o.add((function(){n=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(r[3].fire),s[r[0]]=function(){return s[r[0]+"With"](this===s?void 0:this,arguments),this},s[r[0]+"With"]=o.fireWith})),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,n=t,r=Array(n),i=a.call(arguments),s=C.Deferred(),o=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?a.call(arguments):n,--t||s.resolveWith(r,i)}};if(t<=1&&(X(e,s.done(o(n)).resolve,s.reject,!t),"pending"===s.state()||y(i[n]&&i[n].then)))return s.then();for(;n--;)X(i[n],o(n),s.reject);return s.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&Q.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},C.readyException=function(e){r.setTimeout((function(){throw e}))};var J=C.Deferred();function Z(){_.removeEventListener("DOMContentLoaded",Z),r.removeEventListener("load",Z),C.ready()}C.fn.ready=function(e){return J.then(e).catch((function(e){C.readyException(e)})),this},C.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==e&&--C.readyWait>0||J.resolveWith(_,[C]))}}),C.ready.then=J.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?r.setTimeout(C.ready):(_.addEventListener("DOMContentLoaded",Z),r.addEventListener("load",Z));var ee=function(e,t,n,r,i,s,o){var a=0,c=e.length,l=null==n;if("object"===E(n))for(a in i=!0,n)ee(e,t,a,n[a],!0,s,o);else if(void 0!==r&&(i=!0,y(r)||(o=!0),l&&(o?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(C(e),n)})),t))for(;a<c;a++)t(e[a],n,o?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):c?t(e[0],n):s},te=/^-ms-/,ne=/-([a-z])/g;function re(e,t){return t.toUpperCase()}function ie(e){return e.replace(te,"ms-").replace(ne,re)}var se=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function oe(){this.expando=C.expando+oe.uid++}oe.uid=1,oe.prototype={cache:function(e){var t=e[this.expando];return t||(t={},se(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[ie(t)]=n;else for(r in t)i[ie(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ie(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(ie):(t=ie(t))in r?[t]:t.match(G)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||C.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var ae=new oe,ce=new oe,le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ue=/[A-Z]/g;function he(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ue,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:le.test(e)?JSON.parse(e):e)}(n)}catch(e){}ce.set(e,t,n)}else n=void 0;return n}C.extend({hasData:function(e){return ce.hasData(e)||ae.hasData(e)},data:function(e,t,n){return ce.access(e,t,n)},removeData:function(e,t){ce.remove(e,t)},_data:function(e,t,n){return ae.access(e,t,n)},_removeData:function(e,t){ae.remove(e,t)}}),C.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(i=ce.get(s),1===s.nodeType&&!ae.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=ie(r.slice(5)),he(s,r,i[r]));ae.set(s,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){ce.set(this,e)})):ee(this,(function(t){var n;if(s&&void 0===t)return void 0!==(n=ce.get(s,e))||void 0!==(n=he(s,e))?n:void 0;this.each((function(){ce.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ce.remove(this,e)}))}}),C.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ae.get(e,t),n&&(!r||Array.isArray(n)?r=ae.access(e,t,C.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=C.queue(e,t),r=n.length,i=n.shift(),s=C._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,(function(){C.dequeue(e,t)}),s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ae.get(e,n)||ae.access(e,n,{empty:C.Callbacks("once memory").add((function(){ae.remove(e,[t+"queue",n])}))})}}),C.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?C.queue(this[0],e):void 0===t?this:this.each((function(){var n=C.queue(this,e,t);C._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&C.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){C.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=C.Deferred(),s=this,o=this.length,a=function(){--r||i.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=ae.get(s[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fe=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),pe=["Top","Right","Bottom","Left"],me=_.documentElement,ge=function(e){return C.contains(e.ownerDocument,e)},ye={composed:!0};me.getRootNode&&(ge=function(e){return C.contains(e.ownerDocument,e)||e.getRootNode(ye)===e.ownerDocument});var ve=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ge(e)&&"none"===C.css(e,"display")};function _e(e,t,n,r){var i,s,o=20,a=r?function(){return r.cur()}:function(){return C.css(e,t,"")},c=a(),l=n&&n[3]||(C.cssNumber[t]?"":"px"),u=e.nodeType&&(C.cssNumber[t]||"px"!==l&&+c)&&fe.exec(C.css(e,t));if(u&&u[3]!==l){for(c/=2,l=l||u[3],u=+c||1;o--;)C.style(e,t,u+l),(1-s)*(1-(s=a()/c||.5))<=0&&(o=0),u/=s;u*=2,C.style(e,t,u+l),n=n||[]}return n&&(u=+u||+c||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=u,r.end=i)),i}var we={};function be(e){var t,n=e.ownerDocument,r=e.nodeName,i=we[r];return i||(t=n.body.appendChild(n.createElement(r)),i=C.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),we[r]=i,i)}function Ee(e,t){for(var n,r,i=[],s=0,o=e.length;s<o;s++)(r=e[s]).style&&(n=r.style.display,t?("none"===n&&(i[s]=ae.get(r,"display")||null,i[s]||(r.style.display="")),""===r.style.display&&ve(r)&&(i[s]=be(r))):"none"!==n&&(i[s]="none",ae.set(r,"display",n)));for(s=0;s<o;s++)null!=i[s]&&(e[s].style.display=i[s]);return e}C.fn.extend({show:function(){return Ee(this,!0)},hide:function(){return Ee(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ve(this)?C(this).show():C(this).hide()}))}});var Te,Se,Ce=/^(?:checkbox|radio)$/i,Ae=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ke=/^$|^module$|\/(?:java|ecma)script/i;Te=_.createDocumentFragment().appendChild(_.createElement("div")),(Se=_.createElement("input")).setAttribute("type","radio"),Se.setAttribute("checked","checked"),Se.setAttribute("name","t"),Te.appendChild(Se),g.checkClone=Te.cloneNode(!0).cloneNode(!0).lastChild.checked,Te.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!Te.cloneNode(!0).lastChild.defaultValue,Te.innerHTML="<option></option>",g.option=!!Te.lastChild;var Ie={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function xe(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&k(e,t)?C.merge([e],n):n}function De(e,t){for(var n=0,r=e.length;n<r;n++)ae.set(e[n],"globalEval",!t||ae.get(t[n],"globalEval"))}Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td,g.option||(Ie.optgroup=Ie.option=[1,"<select multiple='multiple'>","</select>"]);var Ne=/<|&#?\w+;/;function Re(e,t,n,r,i){for(var s,o,a,c,l,u,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((s=e[f])||0===s)if("object"===E(s))C.merge(d,s.nodeType?[s]:s);else if(Ne.test(s)){for(o=o||h.appendChild(t.createElement("div")),a=(Ae.exec(s)||["",""])[1].toLowerCase(),c=Ie[a]||Ie._default,o.innerHTML=c[1]+C.htmlPrefilter(s)+c[2],u=c[0];u--;)o=o.lastChild;C.merge(d,o.childNodes),(o=h.firstChild).textContent=""}else d.push(t.createTextNode(s));for(h.textContent="",f=0;s=d[f++];)if(r&&C.inArray(s,r)>-1)i&&i.push(s);else if(l=ge(s),o=xe(h.appendChild(s),"script"),l&&De(o),n)for(u=0;s=o[u++];)ke.test(s.type||"")&&n.push(s);return h}var Oe=/^([^.]*)(?:\.(.+)|)/;function Le(){return!0}function Pe(){return!1}function Me(e,t,n,r,i,s){var o,a;if("object"==typeof t){for(a in"string"!=typeof n&&(r=r||n,n=void 0),t)Me(e,a,n,r,t[a],s);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Pe;else if(!i)return e;return 1===s&&(o=i,i=function(e){return C().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=C.guid++)),e.each((function(){C.event.add(this,t,i,r,n)}))}function Fe(e,t,n){n?(ae.set(e,t,!1),C.event.add(e,t,{namespace:!1,handler:function(e){var n,r=ae.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(C.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=a.call(arguments),ae.set(this,t,r),this[t](),n=ae.get(this,t),ae.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(ae.set(this,t,C.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Le)}})):void 0===ae.get(e,t)&&C.event.add(e,t,Le)}C.event={global:{},add:function(e,t,n,r,i){var s,o,a,c,l,u,h,d,f,p,m,g=ae.get(e);if(se(e))for(n.handler&&(n=(s=n).handler,i=s.selector),i&&C.find.matchesSelector(me,i),n.guid||(n.guid=C.guid++),(c=g.events)||(c=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(t){return void 0!==C&&C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(G)||[""]).length;l--;)f=m=(a=Oe.exec(t[l])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=C.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=C.event.special[f]||{},u=C.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&C.expr.match.needsContext.test(i),namespace:p.join(".")},s),(d=c[f])||((d=c[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,p,o)||e.addEventListener&&e.addEventListener(f,o)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,u):d.push(u),C.event.global[f]=!0)},remove:function(e,t,n,r,i){var s,o,a,c,l,u,h,d,f,p,m,g=ae.hasData(e)&&ae.get(e);if(g&&(c=g.events)){for(l=(t=(t||"").match(G)||[""]).length;l--;)if(f=m=(a=Oe.exec(t[l])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=C.event.special[f]||{},d=c[f=(r?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)u=d[s],!i&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(d.splice(s,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,g.handle)||C.removeEvent(e,f,g.handle),delete c[f])}else for(f in c)C.event.remove(e,f+t[l],n,r,!0);C.isEmptyObject(c)&&ae.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,s,o,a=new Array(arguments.length),c=C.event.fix(e),l=(ae.get(this,"events")||Object.create(null))[c.type]||[],u=C.event.special[c.type]||{};for(a[0]=c,t=1;t<arguments.length;t++)a[t]=arguments[t];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(o=C.event.handlers.call(this,c,l),t=0;(i=o[t++])&&!c.isPropagationStopped();)for(c.currentTarget=i.elem,n=0;(s=i.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==s.namespace&&!c.rnamespace.test(s.namespace)||(c.handleObj=s,c.data=s.data,void 0!==(r=((C.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,a))&&!1===(c.result=r)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,r,i,s,o,a=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(s=[],o={},n=0;n<c;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?C(i,this).index(l)>-1:C.find(i,this,null,[l]).length),o[i]&&s.push(r);s.length&&a.push({elem:l,handlers:s})}return l=this,c<t.length&&a.push({elem:l,handlers:t.slice(c)}),a},addProp:function(e,t){Object.defineProperty(C.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Ce.test(t.type)&&t.click&&k(t,"input")&&Fe(t,"click",!0),!1},trigger:function(e){var t=this||e;return Ce.test(t.type)&&t.click&&k(t,"input")&&Fe(t,"click"),!0},_default:function(e){var t=e.target;return Ce.test(t.type)&&t.click&&k(t,"input")&&ae.get(t,"click")||k(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},C.Event=function(e,t){if(!(this instanceof C.Event))return new C.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Le:Pe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:Pe,isPropagationStopped:Pe,isImmediatePropagationStopped:Pe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Le,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Le,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Le,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},(function(e,t){function n(e){if(_.documentMode){var n=ae.get(this,"handle"),r=C.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else C.event.simulate(t,e.target,C.event.fix(e))}C.event.special[e]={setup:function(){var r;if(Fe(this,e,!0),!_.documentMode)return!1;(r=ae.get(this,t))||this.addEventListener(t,n),ae.set(this,t,(r||0)+1)},trigger:function(){return Fe(this,e),!0},teardown:function(){var e;if(!_.documentMode)return!1;(e=ae.get(this,t)-1)?ae.set(this,t,e):(this.removeEventListener(t,n),ae.remove(this,t))},_default:function(t){return ae.get(t.target,e)},delegateType:t},C.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=_.documentMode?this:r,s=ae.get(i,t);s||(_.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),ae.set(i,t,(s||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=_.documentMode?this:r,s=ae.get(i,t)-1;s?ae.set(i,t,s):(_.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),ae.remove(i,t))}}})),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){C.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||C.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}})),C.fn.extend({on:function(e,t,n,r){return Me(this,e,t,n,r)},one:function(e,t,n,r){return Me(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,C(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Pe),this.each((function(){C.event.remove(this,e,n,t)}))}});var Ue=/<script|<style|<link/i,Be=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ve(e,t){return k(e,"table")&&k(11!==t.nodeType?t:t.firstChild,"tr")&&C(e).children("tbody")[0]||e}function ze(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function He(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function qe(e,t){var n,r,i,s,o,a;if(1===t.nodeType){if(ae.hasData(e)&&(a=ae.get(e).events))for(i in ae.remove(t,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)C.event.add(t,i,a[i][n]);ce.hasData(e)&&(s=ce.access(e),o=C.extend({},s),ce.set(t,o))}}function We(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ce.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function $e(e,t,n,r){t=c(t);var i,s,o,a,l,u,h=0,d=e.length,f=d-1,p=t[0],m=y(p);if(m||d>1&&"string"==typeof p&&!g.checkClone&&Be.test(p))return e.each((function(i){var s=e.eq(i);m&&(t[0]=p.call(this,i,s.html())),$e(s,t,n,r)}));if(d&&(s=(i=Re(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=s),s||r)){for(a=(o=C.map(xe(i,"script"),ze)).length;h<d;h++)l=i,h!==f&&(l=C.clone(l,!0,!0),a&&C.merge(o,xe(l,"script"))),n.call(e[h],l,h);if(a)for(u=o[o.length-1].ownerDocument,C.map(o,He),h=0;h<a;h++)l=o[h],ke.test(l.type||"")&&!ae.access(l,"globalEval")&&C.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?C._evalUrl&&!l.noModule&&C._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):b(l.textContent.replace(je,""),l,u))}return e}function Ge(e,t,n){for(var r,i=t?C.filter(t,e):e,s=0;null!=(r=i[s]);s++)n||1!==r.nodeType||C.cleanData(xe(r)),r.parentNode&&(n&&ge(r)&&De(xe(r,"script")),r.parentNode.removeChild(r));return e}C.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,s,o,a=e.cloneNode(!0),c=ge(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(o=xe(a),r=0,i=(s=xe(e)).length;r<i;r++)We(s[r],o[r]);if(t)if(n)for(s=s||xe(e),o=o||xe(a),r=0,i=s.length;r<i;r++)qe(s[r],o[r]);else qe(e,a);return(o=xe(a,"script")).length>0&&De(o,!c&&xe(e,"script")),a},cleanData:function(e){for(var t,n,r,i=C.event.special,s=0;void 0!==(n=e[s]);s++)if(se(n)){if(t=n[ae.expando]){if(t.events)for(r in t.events)i[r]?C.event.remove(n,r):C.removeEvent(n,r,t.handle);n[ae.expando]=void 0}n[ce.expando]&&(n[ce.expando]=void 0)}}}),C.fn.extend({detach:function(e){return Ge(this,e,!0)},remove:function(e){return Ge(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?C.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return $e(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ve(this,e).appendChild(e)}))},prepend:function(){return $e(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ve(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return $e(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return $e(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(xe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return C.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ue.test(e)&&!Ie[(Ae.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(C.cleanData(xe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return $e(this,arguments,(function(t){var n=this.parentNode;C.inArray(this,e)<0&&(C.cleanData(xe(this)),n&&n.replaceChild(t,this))}),e)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){C.fn[e]=function(e){for(var n,r=[],i=C(e),s=i.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),C(i[o])[t](n),l.apply(r,n.get());return this.pushStack(r)}}));var Ke=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),Ye=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Qe=function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=s[i];return r},Je=new RegExp(pe.join("|"),"i");function Ze(e,t,n){var r,i,s,o,a=Ye.test(t),c=e.style;return(n=n||Xe(e))&&(o=n.getPropertyValue(t)||n[t],a&&o&&(o=o.replace(R,"$1")||void 0),""!==o||ge(e)||(o=C.style(e,t)),!g.pixelBoxStyles()&&Ke.test(o)&&Je.test(t)&&(r=c.width,i=c.minWidth,s=c.maxWidth,c.minWidth=c.maxWidth=c.width=o,o=n.width,c.width=r,c.minWidth=i,c.maxWidth=s)),void 0!==o?o+"":o}function et(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(l).appendChild(u);var e=r.getComputedStyle(u);n="1%"!==e.top,c=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),i=36===t(e.width),u.style.position="absolute",s=12===t(u.offsetWidth/3),me.removeChild(l),u=null}}function t(e){return Math.round(parseFloat(e))}var n,i,s,o,a,c,l=_.createElement("div"),u=_.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===u.style.backgroundClip,C.extend(g,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),s},reliableTrDimensions:function(){var e,t,n,i;return null==a&&(e=_.createElement("table"),t=_.createElement("tr"),n=_.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",me.appendChild(e).appendChild(t).appendChild(n),i=r.getComputedStyle(t),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,me.removeChild(e)),a}}))}();var tt=["Webkit","Moz","ms"],nt=_.createElement("div").style,rt={};function it(e){return C.cssProps[e]||rt[e]||(e in nt?e:rt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=tt.length;n--;)if((e=tt[n]+t)in nt)return e}(e)||e)}var st=/^(none|table(?!-c[ea]).+)/,ot={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function ct(e,t,n){var r=fe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function lt(e,t,n,r,i,s){var o="width"===t?1:0,a=0,c=0,l=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=C.css(e,n+pe[o],!0,i)),r?("content"===n&&(c-=C.css(e,"padding"+pe[o],!0,i)),"margin"!==n&&(c-=C.css(e,"border"+pe[o]+"Width",!0,i))):(c+=C.css(e,"padding"+pe[o],!0,i),"padding"!==n?c+=C.css(e,"border"+pe[o]+"Width",!0,i):a+=C.css(e,"border"+pe[o]+"Width",!0,i));return!r&&s>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-c-a-.5))||0),c+l}function ut(e,t,n){var r=Xe(e),i=(!g.boxSizingReliable()||n)&&"border-box"===C.css(e,"boxSizing",!1,r),s=i,o=Ze(e,t,r),a="offset"+t[0].toUpperCase()+t.slice(1);if(Ke.test(o)){if(!n)return o;o="auto"}return(!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&k(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===C.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===C.css(e,"boxSizing",!1,r),(s=a in e)&&(o=e[a])),(o=parseFloat(o)||0)+lt(e,t,n||(i?"border":"content"),s,r,o)+"px"}function ht(e,t,n,r,i){return new ht.prototype.init(e,t,n,r,i)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,a=ie(t),c=Ye.test(t),l=e.style;if(c||(t=it(a)),o=C.cssHooks[t]||C.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:l[t];"string"==(s=typeof n)&&(i=fe.exec(n))&&i[1]&&(n=_e(e,t,i),s="number"),null!=n&&n==n&&("number"!==s||c||(n+=i&&i[3]||(C.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(c?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,s,o,a=ie(t);return Ye.test(t)||(t=it(a)),(o=C.cssHooks[t]||C.cssHooks[a])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=Ze(e,t,r)),"normal"===i&&t in at&&(i=at[t]),""===n||n?(s=parseFloat(i),!0===n||isFinite(s)?s||0:i):i}}),C.each(["height","width"],(function(e,t){C.cssHooks[t]={get:function(e,n,r){if(n)return!st.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ut(e,t,r):Qe(e,ot,(function(){return ut(e,t,r)}))},set:function(e,n,r){var i,s=Xe(e),o=!g.scrollboxSize()&&"absolute"===s.position,a=(o||r)&&"border-box"===C.css(e,"boxSizing",!1,s),c=r?lt(e,t,r,a,s):0;return a&&o&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-lt(e,t,"border",!1,s)-.5)),c&&(i=fe.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=C.css(e,t)),ct(0,n,c)}}})),C.cssHooks.marginLeft=et(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ze(e,"marginLeft"))||e.getBoundingClientRect().left-Qe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),C.each({margin:"",padding:"",border:"Width"},(function(e,t){C.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+pe[r]+t]=s[r]||s[r-2]||s[0];return i}},"margin"!==e&&(C.cssHooks[e+t].set=ct)})),C.fn.extend({css:function(e,t){return ee(this,(function(e,t,n){var r,i,s={},o=0;if(Array.isArray(t)){for(r=Xe(e),i=t.length;o<i;o++)s[t[o]]=C.css(e,t[o],!1,r);return s}return void 0!==n?C.style(e,t,n):C.css(e,t)}),e,t,arguments.length>1)}}),C.Tween=ht,ht.prototype={constructor:ht,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(C.cssNumber[n]?"":"px")},cur:function(){var e=ht.propHooks[this.prop];return e&&e.get?e.get(this):ht.propHooks._default.get(this)},run:function(e){var t,n=ht.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ht.propHooks._default.set(this),this}},ht.prototype.init.prototype=ht.prototype,ht.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||!C.cssHooks[e.prop]&&null==e.elem.style[it(e.prop)]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}},ht.propHooks.scrollTop=ht.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=ht.prototype.init,C.fx.step={};var dt,ft,pt=/^(?:toggle|show|hide)$/,mt=/queueHooks$/;function gt(){ft&&(!1===_.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(gt):r.setTimeout(gt,C.fx.interval),C.fx.tick())}function yt(){return r.setTimeout((function(){dt=void 0})),dt=Date.now()}function vt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=pe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function _t(e,t,n){for(var r,i=(wt.tweeners[t]||[]).concat(wt.tweeners["*"]),s=0,o=i.length;s<o;s++)if(r=i[s].call(n,t,e))return r}function wt(e,t,n){var r,i,s=0,o=wt.prefilters.length,a=C.Deferred().always((function(){delete c.elem})),c=function(){if(i)return!1;for(var t=dt||yt(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),s=0,o=l.tweens.length;s<o;s++)l.tweens[s].run(r);return a.notifyWith(e,[l,r,n]),r<1&&o?n:(o||a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:C.extend({},t),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},n),originalProperties:t,originalOptions:n,startTime:dt||yt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=C.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),u=l.props;for(function(e,t){var n,r,i,s,o;for(n in e)if(i=t[r=ie(n)],s=e[n],Array.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),(o=C.cssHooks[r])&&"expand"in o)for(n in s=o.expand(s),delete e[r],s)n in e||(e[n]=s[n],t[n]=i);else t[r]=i}(u,l.opts.specialEasing);s<o;s++)if(r=wt.prefilters[s].call(l,e,u,l.opts))return y(r.stop)&&(C._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return C.map(u,_t,l),y(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),C.fx.timer(C.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l}C.Animation=C.extend(wt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return _e(n.elem,e,fe.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(G);for(var n,r=0,i=e.length;r<i;r++)n=e[r],wt.tweeners[n]=wt.tweeners[n]||[],wt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,s,o,a,c,l,u,h="width"in t||"height"in t,d=this,f={},p=e.style,m=e.nodeType&&ve(e),g=ae.get(e,"fxshow");for(r in n.queue||(null==(o=C._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,C.queue(e,"fx").length||o.empty.fire()}))}))),t)if(i=t[r],pt.test(i)){if(delete t[r],s=s||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}f[r]=g&&g[r]||C.style(e,r)}if((c=!C.isEmptyObject(t))||!C.isEmptyObject(f))for(r in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=g&&g.display)&&(l=ae.get(e,"display")),"none"===(u=C.css(e,"display"))&&(l?u=l:(Ee([e],!0),l=e.style.display||l,u=C.css(e,"display"),Ee([e]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===C.css(e,"float")&&(c||(d.done((function(){p.display=l})),null==l&&(u=p.display,l="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),c=!1,f)c||(g?"hidden"in g&&(m=g.hidden):g=ae.access(e,"fxshow",{display:l}),s&&(g.hidden=!m),m&&Ee([e],!0),d.done((function(){for(r in m||Ee([e]),ae.remove(e,"fxshow"),f)C.style(e,r,f[r])}))),c=_t(m?g[r]:0,r,d),r in g||(g[r]=c.start,m&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?wt.prefilters.unshift(e):wt.prefilters.push(e)}}),C.speed=function(e,t,n){var r=e&&"object"==typeof e?C.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return C.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in C.fx.speeds?r.duration=C.fx.speeds[r.duration]:r.duration=C.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&C.dequeue(this,r.queue)},r},C.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ve).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=C.isEmptyObject(e),s=C.speed(t,n,r),o=function(){var t=wt(this,C.extend({},e),s);(i||ae.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",s=C.timers,o=ae.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&mt.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));!t&&n||C.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=ae.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=C.timers,o=r?r.length:0;for(n.finish=!0,C.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),C.each(["toggle","show","hide"],(function(e,t){var n=C.fn[t];C.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(vt(t,!0),e,r,i)}})),C.each({slideDown:vt("show"),slideUp:vt("hide"),slideToggle:vt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){C.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),C.timers=[],C.fx.tick=function(){var e,t=0,n=C.timers;for(dt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||C.fx.stop(),dt=void 0},C.fx.timer=function(e){C.timers.push(e),C.fx.start()},C.fx.interval=13,C.fx.start=function(){ft||(ft=!0,gt())},C.fx.stop=function(){ft=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(e,t){return e=C.fx&&C.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}}))},function(){var e=_.createElement("input"),t=_.createElement("select").appendChild(_.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=_.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var bt,Et=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return ee(this,C.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){C.removeAttr(this,e)}))}}),C.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?C.prop(e,t,n):(1===s&&C.isXMLDoc(e)||(i=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?bt:void 0)),void 0!==n?null===n?void C.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=C.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&k(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(G);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),bt={set:function(e,t,n){return!1===t?C.removeAttr(e,n):e.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=Et[t]||C.find.attr;Et[t]=function(e,t,r){var i,s,o=t.toLowerCase();return r||(s=Et[o],Et[o]=i,i=null!=n(e,t,r)?o:null,Et[o]=s),i}}));var Tt=/^(?:input|select|textarea|button)$/i,St=/^(?:a|area)$/i;function Ct(e){return(e.match(G)||[]).join(" ")}function At(e){return e.getAttribute&&e.getAttribute("class")||""}function kt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(G)||[]}C.fn.extend({prop:function(e,t){return ee(this,C.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[C.propFix[e]||e]}))}}),C.extend({prop:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&C.isXMLDoc(e)||(t=C.propFix[t]||t,i=C.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):Tt.test(e.nodeName)||St.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){C.propFix[this.toLowerCase()]=this})),C.fn.extend({addClass:function(e){var t,n,r,i,s,o;return y(e)?this.each((function(t){C(this).addClass(e.call(this,t,At(this)))})):(t=kt(e)).length?this.each((function(){if(r=At(this),n=1===this.nodeType&&" "+Ct(r)+" "){for(s=0;s<t.length;s++)i=t[s],n.indexOf(" "+i+" ")<0&&(n+=i+" ");o=Ct(n),r!==o&&this.setAttribute("class",o)}})):this},removeClass:function(e){var t,n,r,i,s,o;return y(e)?this.each((function(t){C(this).removeClass(e.call(this,t,At(this)))})):arguments.length?(t=kt(e)).length?this.each((function(){if(r=At(this),n=1===this.nodeType&&" "+Ct(r)+" "){for(s=0;s<t.length;s++)for(i=t[s];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");o=Ct(n),r!==o&&this.setAttribute("class",o)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,i,s,o=typeof e,a="string"===o||Array.isArray(e);return y(e)?this.each((function(n){C(this).toggleClass(e.call(this,n,At(this),t),t)})):"boolean"==typeof t&&a?t?this.addClass(e):this.removeClass(e):(n=kt(e),this.each((function(){if(a)for(s=C(this),i=0;i<n.length;i++)r=n[i],s.hasClass(r)?s.removeClass(r):s.addClass(r);else void 0!==e&&"boolean"!==o||((r=At(this))&&ae.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":ae.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+Ct(At(n))+" ").indexOf(t)>-1)return!0;return!1}});var It=/\r/g;C.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=y(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,C(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=C.map(i,(function(e){return null==e?"":e+""}))),(t=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=C.valHooks[i.type]||C.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(It,""):null==n?"":n:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:Ct(C.text(e))}},select:{get:function(e){var t,n,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],c=o?s+1:i.length;for(r=s<0?c:o?s:0;r<c;r++)if(((n=i[r]).selected||r===s)&&!n.disabled&&(!n.parentNode.disabled||!k(n.parentNode,"optgroup"))){if(t=C(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,s=C.makeArray(t),o=i.length;o--;)((r=i[o]).selected=C.inArray(C.valHooks.option.get(r),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),C.each(["radio","checkbox"],(function(){C.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=C.inArray(C(e).val(),t)>-1}},g.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var xt=r.location,Dt={guid:Date.now()},Nt=/\?/;C.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||C.error("Invalid XML: "+(n?C.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Rt=/^(?:focusinfocus|focusoutblur)$/,Ot=function(e){e.stopPropagation()};C.extend(C.event,{trigger:function(e,t,n,i){var s,o,a,c,l,u,h,d,p=[n||_],m=f.call(e,"type")?e.type:e,g=f.call(e,"namespace")?e.namespace.split("."):[];if(o=d=a=n=n||_,3!==n.nodeType&&8!==n.nodeType&&!Rt.test(m+C.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),l=m.indexOf(":")<0&&"on"+m,(e=e[C.expando]?e:new C.Event(m,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:C.makeArray(t,[e]),h=C.event.special[m]||{},i||!h.trigger||!1!==h.trigger.apply(n,t))){if(!i&&!h.noBubble&&!v(n)){for(c=h.delegateType||m,Rt.test(c+m)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||_)&&p.push(a.defaultView||a.parentWindow||r)}for(s=0;(o=p[s++])&&!e.isPropagationStopped();)d=o,e.type=s>1?c:h.bindType||m,(u=(ae.get(o,"events")||Object.create(null))[e.type]&&ae.get(o,"handle"))&&u.apply(o,t),(u=l&&o[l])&&u.apply&&se(o)&&(e.result=u.apply(o,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!se(n)||l&&y(n[m])&&!v(n)&&((a=n[l])&&(n[l]=null),C.event.triggered=m,e.isPropagationStopped()&&d.addEventListener(m,Ot),n[m](),e.isPropagationStopped()&&d.removeEventListener(m,Ot),C.event.triggered=void 0,a&&(n[l]=a)),e.result}},simulate:function(e,t,n){var r=C.extend(new C.Event,n,{type:e,isSimulated:!0});C.event.trigger(r,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each((function(){C.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return C.event.trigger(e,t,n,!0)}});var Lt=/\[\]$/,Pt=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,Ft=/^(?:input|select|textarea|keygen)/i;function Ut(e,t,n,r){var i;if(Array.isArray(t))C.each(t,(function(t,i){n||Lt.test(e)?r(e,i):Ut(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==E(t))r(e,t);else for(i in t)Ut(e+"["+i+"]",t[i],n,r)}C.param=function(e,t){var n,r=[],i=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,(function(){i(this.name,this.value)}));else for(n in e)Ut(n,e[n],t,i);return r.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&Ft.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!Ce.test(e))})).map((function(e,t){var n=C(this).val();return null==n?null:Array.isArray(n)?C.map(n,(function(e){return{name:t.name,value:e.replace(Pt,"\r\n")}})):{name:t.name,value:n.replace(Pt,"\r\n")}})).get()}});var Bt=/%20/g,jt=/#.*$/,Vt=/([?&])_=[^&]*/,zt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:GET|HEAD)$/,qt=/^\/\//,Wt={},$t={},Gt="*/".concat("*"),Kt=_.createElement("a");function Yt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(G)||[];if(y(n))for(;r=s[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Xt(e,t,n,r){var i={},s=e===$t;function o(a){var c;return i[a]=!0,C.each(e[a]||[],(function(e,a){var l=a(t,n,r);return"string"!=typeof l||s||i[l]?s?!(c=l):void 0:(t.dataTypes.unshift(l),o(l),!1)})),c}return o(t.dataTypes[0])||!i["*"]&&o("*")}function Qt(e,t){var n,r,i=C.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&C.extend(!0,e,r),e}Kt.href=xt.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Qt(Qt(e,C.ajaxSettings),t):Qt(C.ajaxSettings,e)},ajaxPrefilter:Yt(Wt),ajaxTransport:Yt($t),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,s,o,a,c,l,u,h,d,f=C.ajaxSetup({},t),p=f.context||f,m=f.context&&(p.nodeType||p.jquery)?C(p):C.event,g=C.Deferred(),y=C.Callbacks("once memory"),v=f.statusCode||{},w={},b={},E="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(l){if(!o)for(o={};t=zt.exec(s);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(e,t){return null==l&&(e=b[e.toLowerCase()]=b[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==l&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)T.always(e[T.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||E;return n&&n.abort(t),S(0,t),this}};if(g.promise(T),f.url=((e||f.url||xt.href)+"").replace(qt,xt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(G)||[""],null==f.crossDomain){c=_.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Kt.protocol+"//"+Kt.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=C.param(f.data,f.traditional)),Xt(Wt,f,t,T),l)return T;for(h in(u=C.event&&f.global)&&0==C.active++&&C.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ht.test(f.type),i=f.url.replace(jt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Bt,"+")):(d=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(Nt.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Vt,"$1"),d=(Nt.test(i)?"&":"?")+"_="+Dt.guid+++d),f.url=i+d),f.ifModified&&(C.lastModified[i]&&T.setRequestHeader("If-Modified-Since",C.lastModified[i]),C.etag[i]&&T.setRequestHeader("If-None-Match",C.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Gt+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,T,f)||l))return T.abort();if(E="abort",y.add(f.complete),T.done(f.success),T.fail(f.error),n=Xt($t,f,t,T)){if(T.readyState=1,u&&m.trigger("ajaxSend",[T,f]),l)return T;f.async&&f.timeout>0&&(a=r.setTimeout((function(){T.abort("timeout")}),f.timeout));try{l=!1,n.send(w,S)}catch(e){if(l)throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,t,o,c){var h,d,_,w,b,E=t;l||(l=!0,a&&r.clearTimeout(a),n=void 0,s=c||"",T.readyState=e>0?4:0,h=e>=200&&e<300||304===e,o&&(w=function(e,t,n){for(var r,i,s,o,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){c.unshift(i);break}if(c[0]in n)s=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==c[0]&&c.unshift(s),n[s]}(f,T,o)),!h&&C.inArray("script",f.dataTypes)>-1&&C.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),w=function(e,t,n,r){var i,s,o,a,c,l={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o];for(s=u.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=s,s=u.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(!(o=l[c+" "+s]||l["* "+s]))for(i in l)if((a=i.split(" "))[1]===s&&(o=l[c+" "+a[0]]||l["* "+a[0]])){!0===o?o=l[i]:!0!==l[i]&&(s=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+c+" to "+s}}}return{state:"success",data:t}}(f,w,T,h),h?(f.ifModified&&((b=T.getResponseHeader("Last-Modified"))&&(C.lastModified[i]=b),(b=T.getResponseHeader("etag"))&&(C.etag[i]=b)),204===e||"HEAD"===f.type?E="nocontent":304===e?E="notmodified":(E=w.state,d=w.data,h=!(_=w.error))):(_=E,!e&&E||(E="error",e<0&&(e=0))),T.status=e,T.statusText=(t||E)+"",h?g.resolveWith(p,[d,E,T]):g.rejectWith(p,[T,E,_]),T.statusCode(v),v=void 0,u&&m.trigger(h?"ajaxSuccess":"ajaxError",[T,f,h?d:_]),y.fireWith(p,[T,E]),u&&(m.trigger("ajaxComplete",[T,f]),--C.active||C.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],(function(e,t){C[t]=function(e,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),C.ajax(C.extend({url:e,type:t,dataType:i,data:n,success:r},C.isPlainObject(e)&&e))}})),C.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),C._evalUrl=function(e,t,n){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){C.globalEval(e,t,n)}})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){C(this).wrapInner(e.call(this,t))})):this.each((function(){var t=C(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(n){C(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){C(this).replaceWith(this.childNodes)})),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Jt={0:200,1223:204},Zt=C.ajaxSettings.xhr();g.cors=!!Zt&&"withCredentials"in Zt,g.ajax=Zt=!!Zt,C.ajaxTransport((function(e){var t,n;if(g.cors||Zt&&!e.crossDomain)return{send:function(i,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Jt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),C.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),C.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=C("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),_.head.appendChild(t[0])},abort:function(){n&&n()}}}));var en,tn=[],nn=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tn.pop()||C.expando+"_"+Dt.guid++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",(function(e,t,n){var i,s,o,a=!1!==e.jsonp&&(nn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(nn,"$1"+i):!1!==e.jsonp&&(e.url+=(Nt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||C.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=r[i],r[i]=function(){o=arguments},n.always((function(){void 0===s?C(r).removeProp(i):r[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,tn.push(i)),o&&y(s)&&s(o[0]),o=s=void 0})),"script"})),g.createHTMLDocument=((en=_.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===en.childNodes.length),C.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((r=(t=_.implementation.createHTMLDocument("")).createElement("base")).href=_.location.href,t.head.appendChild(r)):t=_),s=!n&&[],(i=j.exec(e))?[t.createElement(i[1])]:(i=Re([e],t,s),s&&s.length&&C(s).remove(),C.merge([],i.childNodes)));var r,i,s},C.fn.load=function(e,t,n){var r,i,s,o=this,a=e.indexOf(" ");return a>-1&&(r=Ct(e.slice(a)),e=e.slice(0,a)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),o.length>0&&C.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){s=arguments,o.html(r?C("<div>").append(C.parseHTML(e)).find(r):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,s||[e.responseText,t,e])}))}),this},C.expr.pseudos.animated=function(e){return C.grep(C.timers,(function(t){return e===t.elem})).length},C.offset={setOffset:function(e,t,n){var r,i,s,o,a,c,l=C.css(e,"position"),u=C(e),h={};"static"===l&&(e.style.position="relative"),a=u.offset(),s=C.css(e,"top"),c=C.css(e,"left"),("absolute"===l||"fixed"===l)&&(s+c).indexOf("auto")>-1?(o=(r=u.position()).top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(c)||0),y(t)&&(t=t.call(e,n,C.extend({},a))),null!=t.top&&(h.top=t.top-a.top+o),null!=t.left&&(h.left=t.left-a.left+i),"using"in t?t.using.call(e,h):u.css(h)}},C.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){C.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===C.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===C.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=C(e).offset()).top+=C.css(e,"borderTopWidth",!0),i.left+=C.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-C.css(r,"marginTop",!0),left:t.left-i.left-C.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||me}))}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;C.fn[e]=function(r){return ee(this,(function(e,r,i){var s;if(v(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===i)return s?s[t]:e[r];s?s.scrollTo(n?s.pageXOffset:i,n?i:s.pageYOffset):e[r]=i}),e,r,arguments.length)}})),C.each(["top","left"],(function(e,t){C.cssHooks[t]=et(g.pixelPosition,(function(e,n){if(n)return n=Ze(e,t),Ke.test(n)?C(e).position()[t]+"px":n}))})),C.each({Height:"height",Width:"width"},(function(e,t){C.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){C.fn[r]=function(i,s){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===s?"margin":"border");return ee(this,(function(t,n,i){var s;return v(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?C.css(t,n,a):C.style(t,n,i,a)}),t,o?i:void 0,o)}}))})),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){C.fn[t]=function(e){return this.on(t,e)}})),C.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){C.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;C.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return r=a.call(arguments,2),i=function(){return e.apply(t||this,r.concat(a.call(arguments)))},i.guid=e.guid=e.guid||C.guid++,i},C.holdReady=function(e){e?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=k,C.isFunction=y,C.isWindow=v,C.camelCase=ie,C.type=E,C.now=Date.now,C.isNumeric=function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},C.trim=function(e){return null==e?"":(e+"").replace(rn,"$1")},void 0===(n=function(){return C}.apply(t,[]))||(e.exports=n);var sn=r.jQuery,on=r.$;return C.noConflict=function(e){return r.$===C&&(r.$=on),e&&r.jQuery===C&&(r.jQuery=sn),C},void 0===i&&(r.jQuery=r.$=C),C}))},7152:(e,t,n)=>{e.exports=function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){return i(t[o][1][e]||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var s=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,o,a,c,l,u=[],h=0,d=e.length,f=d,p="string"!==r.getTypeOf(e);h<e.length;)f=d-h,i=p?(t=e[h++],n=h<d?e[h++]:0,h<d?e[h++]:0):(t=e.charCodeAt(h++),n=h<d?e.charCodeAt(h++):0,h<d?e.charCodeAt(h++):0),o=t>>2,a=(3&t)<<4|n>>4,c=1<f?(15&n)<<2|i>>6:64,l=2<f?63&i:64,u.push(s.charAt(o)+s.charAt(a)+s.charAt(c)+s.charAt(l));return u.join("")},n.decode=function(e){var t,n,r,o,a,c,l=0,u=0,h="data:";if(e.substr(0,5)===h)throw new Error("Invalid base64 input, it looks like a data url.");var d,f=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===s.charAt(64)&&f--,e.charAt(e.length-2)===s.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=i.uint8array?new Uint8Array(0|f):new Array(0|f);l<e.length;)t=s.indexOf(e.charAt(l++))<<2|(o=s.indexOf(e.charAt(l++)))>>4,n=(15&o)<<4|(a=s.indexOf(e.charAt(l++)))>>2,r=(3&a)<<6|(c=s.indexOf(e.charAt(l++))),d[u++]=t,64!==a&&(d[u++]=n),64!==c&&(d[u++]=r);return d}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function a(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}a.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,n){return e.pipe(new s).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var s=i,o=0+n;e^=-1;for(var a=0;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}(0|t,e,e.length):function(e,t,n,r){var s=i,o=0+n;e^=-1;for(var a=0;a<o;a++)e=e>>>8^s[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),s=e("./utils"),o=e("./stream/GenericWorker"),a=r?"uint8array":"array";function c(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",s.inherits(c,o),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,e.data),!1)},c.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new c("Deflate",e)},n.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,o,u){var h,d,f=e.file,p=e.compression,m=u!==a.utf8encode,g=s.transformTo("string",u(f.name)),y=s.transformTo("string",a.utf8encode(f.name)),v=f.comment,_=s.transformTo("string",u(v)),w=s.transformTo("string",a.utf8encode(v)),b=y.length!==f.name.length,E=w.length!==v.length,T="",S="",C="",A=f.dir,k=f.date,I={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(I.crc32=e.crc32,I.compressedSize=e.compressedSize,I.uncompressedSize=e.uncompressedSize);var x=0;t&&(x|=8),m||!b&&!E||(x|=2048);var D=0,N=0;A&&(D|=16),"UNIX"===o?(N=798,D|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(f.unixPermissions,A)):(N=20,D|=function(e){return 63&(e||0)}(f.dosPermissions)),h=k.getUTCHours(),h<<=6,h|=k.getUTCMinutes(),h<<=5,h|=k.getUTCSeconds()/2,d=k.getUTCFullYear()-1980,d<<=4,d|=k.getUTCMonth()+1,d<<=5,d|=k.getUTCDate(),b&&(S=r(1,1)+r(c(g),4)+y,T+="up"+r(S.length,2)+S),E&&(C=r(1,1)+r(c(_),4)+w,T+="uc"+r(C.length,2)+C);var R="";return R+="\n\0",R+=r(x,2),R+=p.magic,R+=r(h,2),R+=r(d,2),R+=r(I.crc32,4),R+=r(I.compressedSize,4),R+=r(I.uncompressedSize,4),R+=r(g.length,2),R+=r(T.length,2),{fileRecord:l.LOCAL_FILE_HEADER+R+g+T,dirRecord:l.CENTRAL_FILE_HEADER+r(N,2)+R+r(_.length,2)+"\0\0\0\0"+r(D,4)+r(i,4)+g+T+_}}var s=e("../utils"),o=e("../stream/GenericWorker"),a=e("../utf8"),c=e("../crc32"),l=e("../signature");function u(e,t,n,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(u,o),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return l.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,o){var a=s.transformTo("string",o(i));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(a.length,2)+a}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},u.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var s=new i(t.streamFiles,n,t.platform,t.encodeFileName),o=0;try{e.forEach((function(e,n){o++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),a=n.options.compressionOptions||t.compressionOptions||{},c=n.dir,l=n.date;n._compressWorker(i,a).withStreamInfo("file",{name:e,dir:c,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(s)})),s.entriesCount=o}catch(e){s.error(e)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),s=e("./utf8"),o=e("./zipEntries"),a=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function l(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new a);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),c.isNode&&c.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new o(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var s=0;s<r.length;s++)n.push(l(r[s]));return i.Promise.all(n)})).then((function(e){for(var i=e.shift(),s=i.files,o=0;o<s.length;o++){var a=s[o],c=a.fileNameStr,l=r.resolve(a.fileNameStr);n.file(l,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders}),a.dir||(n.file(l).unsafeOriginalName=c)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function s(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(s,i),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,i=s.getTypeOf(t),a=s.extend(n||{},c);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=m(e)),a.createFolders&&(r=p(e))&&g.call(this,r,!0);var h="string"===i&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!h),(t instanceof l&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",i="string");var y;y=t instanceof l||t instanceof o?t:d.isNode&&d.isStream(t)?new f(e,t):s.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var v=new u(e,y,a);this.files[e]=v}var i=e("./utf8"),s=e("./utils"),o=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),c=e("./defaults"),l=e("./compressedObject"),u=e("./zipObject"),h=e("./generate"),d=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:c.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(y(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var s=this.files[this.root+e];return s&&!s.dir?s:null},folder:function(e){if(!e)return this;if(y(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=g.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=s.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");s.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=h.generateWorker(this,n,r)}catch(e){(t=new o("error")).error(e)}return new a(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===n&&this.data[s+2]===r&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&n===s[1]&&r===s[2]&&i===s[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),s=e("./ArrayReader"),o=e("./StringReader"),a=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new a(e):i.uint8array?new c(r.transformTo("uint8array",e)):new s(r.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function s(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(s,r),s.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function s(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,r),s.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(s,i),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./ConvertWorker"),s=e("./GenericWorker"),o=e("../base64"),a=e("../support"),c=e("../external"),l=null;if(a.nodestream)try{l=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function u(e,t,n){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=n,r.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}u.prototype={accumulate:function(e){return function(e,t){return new c.Promise((function(n,i){var s=[],a=e._internalType,c=e._outputType,l=e._mimeType;e.on("data",(function(e,n){s.push(e),t&&t(n)})).on("error",(function(e){s=[],i(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return o.encode(t);default:return r.transformTo(e,t)}}(c,function(e,t){var n,r=0,i=null,s=0;for(n=0;n<t.length;n++)s+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(s),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,s),l);n(e)}catch(e){i(e)}s=[]})).resume()}))}(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(t,arguments,n)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),s=e("./nodejsUtils"),o=e("./stream/GenericWorker"),a=new Array(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(){o.call(this,"utf-8 decode"),this.leftOver=null}function u(){o.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(e){return i.nodebuffer?s.newBufferFrom(e,"utf-8"):function(e){var t,n,r,s,o,a=e.length,c=0;for(s=0;s<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(c):new Array(c),s=o=0;o<c;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,s,o=e.length,c=new Array(2*o);for(t=n=0;t<o;)if((i=e[t++])<128)c[n++]=i;else if(4<(s=a[i]))c[n++]=65533,t+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&t<o;)i=i<<6|63&e[t++],s--;1<s?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i)}return c.length!==n&&(c.subarray?c=c.subarray(0,n):c.length=n),r.applyFromCharCode(c)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(l,o),l.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var s=t;(t=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),t.set(s,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}(t),c=t;o!==t.length&&(i.uint8array?(c=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(c=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:n.utf8decode(c),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=l,r.inherits(u,o),u.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),s=e("./nodejsUtils"),o=e("./external");function a(e){return e}function c(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(e,t,n){var r=[],i=0,s=e.length;if(s<=n)return String.fromCharCode.apply(null,e);for(;i<s;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,s)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,s)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=l.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=l.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return l.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return l.stringifyByChar(e)}function h(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=u;var d={};d.string={string:a,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,s.allocBuffer(e.length))}},d.array={string:u,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},d.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:u,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return s.newBufferFrom(e)}},d.nodebuffer={string:u,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:a},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return d[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&s.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,s,a,l){return o.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var u=n.getTypeOf(t);return u?("arraybuffer"===u?t=n.transformTo("uint8array",t):"string"===u&&(l?t=i.decode(t):s&&!0!==a&&(t=function(e){return c(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),s=e("./signature"),o=e("./zipEntry"),a=e("./support");function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),s=e("./compressedObject"),o=e("./crc32"),a=e("./utf8"),c=e("./compressions"),l=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(Object.prototype.hasOwnProperty.call(c,t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var s=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),o=e("./utf8"),a=e("./compressedObject"),c=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!r&&(t=t.pipe(new o.Utf8EncodeWorker)),!s&&r&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new c("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof c?this._data:new s(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)r.prototype[l[h]]=u;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var s=0,o=new i(u),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}t.exports=function(e){1!==l.push(e)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return s.reject(e,r)}r===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,s.reject(e,t))}function i(t){n||(n=!0,s.resolve(e,t))}var o=p((function(){t(i,r)}));"error"===o.status&&r(o.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=l).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(i);return this.state!==c?h(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return s.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:s.resolve(new this(i),e)},l.reject=function(e){var t=new this(i);return s.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,c=-1,l=new this(i);++c<n;)u(e[c],c);return l;function u(e,i){t.resolve(e).then((function(e){o[i]=e,++a!==n||r||(r=!0,s.resolve(l,o))}),(function(e){r||(r=!0,s.reject(l,e))}))}},l.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r,o=-1,a=new this(i);++o<t;)r=e[o],this.resolve(r).then((function(e){n||(n=!0,s.resolve(a,e))}),(function(e){n||(n=!0,s.reject(a,e))}));return a}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/messages"),a=e("./zlib/zstream"),c=Object.prototype.toString,l=0,u=-1,h=0,d=8;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({level:u,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==l)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var p;if(p="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,p))!==l)throw new Error(o[n]);this._dict_set=!0}}function p(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}f.prototype.push=function(e,t){var n,o,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=s.string2buf(e):"[object ArrayBuffer]"===c.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(u),a.next_out=0,a.avail_out=u),1!==(n=r.deflate(a,o))&&n!==l)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l):2!==o||(this.onEnd(l),!(a.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=f,n.deflate=p,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,p(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/constants"),a=e("./zlib/messages"),c=e("./zlib/zstream"),l=e("./zlib/gzheader"),u=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(a[n]);this.header=new l,r.inflateGetHeader(this.strm,this.header)}function d(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}h.prototype.push=function(e,t){var n,a,c,l,h,d,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?f.input=s.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&m&&(d="string"==typeof m?s.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,d)),n===o.Z_BUF_ERROR&&!0===g&&(n=o.Z_OK,g=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==o.Z_STREAM_END&&(0!==f.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(c=s.utf8border(f.output,f.next_out),l=f.next_out-c,h=s.buf2string(f.output,c),f.next_out=l,f.avail_out=p-l,l&&i.arraySet(f.output,f.output,c,l,0),this.onData(h)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(f.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=h,n.inflate=d,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){var t,n,r,i,s,o;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)s=e[t],o.set(s,i),i+=s.length;return o}},s={arraySet:function(e,t,n,r,i){for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var o=new r.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function c(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,n.string2buf=function(e){var t,n,i,s,o,a=e.length,c=0;for(s=0;s<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(c),s=o=0;o<c;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},n.buf2binstring=function(e){return c(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,s,a=t||e.length,l=new Array(2*a);for(n=r=0;n<a;)if((i=e[n++])<128)l[r++]=i;else if(4<(s=o[i]))l[r++]=65533,n+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&n<a;)i=i<<6|63&e[n++],s--;1<s?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return c(l,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,s=e>>>16&65535|0,o=0;0!==n;){for(n-=o=2e3<n?2e3:n;s=s+(i=i+t[r++]|0)|0,--o;);i%=65521,s%=65521}return i|s<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var s=r,o=i+n;e^=-1;for(var a=i;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),s=e("./trees"),o=e("./adler32"),a=e("./crc32"),c=e("./messages"),l=0,u=0,h=-2,d=2,f=8,p=286,m=30,g=19,y=2*p+1,v=15,_=3,w=258,b=w+_+1,E=42,T=113;function S(e,t){return e.msg=c[t],t}function C(e){return(e<<1)-(4<e?9:0)}function A(e){for(var t=e.length;0<=--t;)e[t]=0}function k(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function I(e,t){s._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,k(e.strm)}function x(e,t){e.pending_buf[e.pending++]=t}function D(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function N(e,t){var n,r,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-b?e.strstart-(e.w_size-b):0,l=e.window,u=e.w_mask,h=e.prev,d=e.strstart+w,f=l[s+o-1],p=l[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(l[(n=t)+o]===p&&l[n+o-1]===f&&l[n]===l[s]&&l[++n]===l[s+1]){s+=2,n++;do{}while(l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&s<d);if(r=w-(d-s),s=d-w,o<r){if(e.match_start=t,a<=(o=r))break;f=l[s+o-1],p=l[s+o]}}}while((t=h[t&u])>c&&0!=--i);return o<=e.lookahead?o:e.lookahead}function R(e){var t,n,r,s,c,l,u,h,d,f,p=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-b)){for(i.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=n=e.hash_size;r=e.head[--t],e.head[t]=p<=r?r-p:0,--n;);for(t=n=p;r=e.prev[--t],e.prev[t]=p<=r?r-p:0,--n;);s+=p}if(0===e.strm.avail_in)break;if(l=e.strm,u=e.window,h=e.strstart+e.lookahead,f=void 0,(d=s)<(f=l.avail_in)&&(f=d),n=0===f?0:(l.avail_in-=f,i.arraySet(u,l.input,l.next_in,f,h),1===l.state.wrap?l.adler=o(l.adler,u,f,h):2===l.state.wrap&&(l.adler=a(l.adler,u,f,h)),l.next_in+=f,l.total_in+=f,f),e.lookahead+=n,e.lookahead+e.insert>=_)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+_-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<_)););}while(e.lookahead<b&&0!==e.strm.avail_in)}function O(e,t){for(var n,r;;){if(e.lookahead<b){if(R(e),e.lookahead<b&&t===l)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=_&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+_-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-b&&(e.match_length=N(e,n)),e.match_length>=_)if(r=s._tr_tally(e,e.strstart-e.match_start,e.match_length-_),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=_){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+_-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(I(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<_-1?e.strstart:_-1,4===t?(I(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(I(e,!1),0===e.strm.avail_out)?1:2}function L(e,t){for(var n,r,i;;){if(e.lookahead<b){if(R(e),e.lookahead<b&&t===l)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=_&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+_-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=_-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-b&&(e.match_length=N(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===_&&4096<e.strstart-e.match_start)&&(e.match_length=_-1)),e.prev_length>=_&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-_,r=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-_),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+_-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=_-1,e.strstart++,r&&(I(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=s._tr_tally(e,0,e.window[e.strstart-1]))&&I(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<_-1?e.strstart:_-1,4===t?(I(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(I(e,!1),0===e.strm.avail_out)?1:2}function P(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function M(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=f,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*y),this.dyn_dtree=new i.Buf16(2*(2*m+1)),this.bl_tree=new i.Buf16(2*(2*g+1)),A(this.dyn_ltree),A(this.dyn_dtree),A(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(v+1),this.heap=new i.Buf16(2*p+1),A(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*p+1),A(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function F(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=d,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?E:T,e.adler=2===t.wrap?0:1,t.last_flush=l,s._tr_init(t),u):S(e,h)}function U(e){var t=F(e);return t===u&&function(e){e.window_size=2*e.w_size,A(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=_-1,e.match_available=0,e.ins_h=0}(e.state),t}function B(e,t,n,r,s,o){if(!e)return h;var a=1;if(-1===t&&(t=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),s<1||9<s||n!==f||r<8||15<r||t<0||9<t||o<0||4<o)return S(e,h);8===r&&(r=9);var c=new M;return(e.state=c).strm=e,c.wrap=a,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=s+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+_-1)/_),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<s+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=o,c.method=n,U(e)}r=[new P(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(R(e),0===e.lookahead&&t===l)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,I(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-b&&(I(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(I(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(I(e,!1),e.strm.avail_out),1)})),new P(4,4,8,4,O),new P(4,5,16,8,O),new P(4,6,32,32,O),new P(4,4,16,16,L),new P(8,16,32,32,L),new P(8,16,128,128,L),new P(8,32,128,256,L),new P(32,128,258,1024,L),new P(32,258,258,4096,L)],n.deflateInit=function(e,t){return B(e,t,f,15,8,0)},n.deflateInit2=B,n.deflateReset=U,n.deflateResetKeep=F,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=t,u):h},n.deflate=function(e,t){var n,i,o,c;if(!e||!e.state||5<t||t<0)return e?S(e,h):h;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return S(e,0===e.avail_out?-5:h);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===E)if(2===i.wrap)e.adler=0,x(i,31),x(i,139),x(i,8),i.gzhead?(x(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),x(i,255&i.gzhead.time),x(i,i.gzhead.time>>8&255),x(i,i.gzhead.time>>16&255),x(i,i.gzhead.time>>24&255),x(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),x(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(x(i,255&i.gzhead.extra.length),x(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(x(i,0),x(i,0),x(i,0),x(i,0),x(i,0),x(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),x(i,3),i.status=T);else{var d=f+(i.w_bits-8<<4)<<8;d|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(d|=32),d+=31-d%31,i.status=T,D(i,d),0!==i.strstart&&(D(i,e.adler>>>16),D(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),k(e),o=i.pending,i.pending!==i.pending_buf_size));)x(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),k(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,x(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),k(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,x(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&k(e),i.pending+2<=i.pending_buf_size&&(x(i,255&e.adler),x(i,e.adler>>8&255),e.adler=0,i.status=T)):i.status=T),0!==i.pending){if(k(e),0===e.avail_out)return i.last_flush=-1,u}else if(0===e.avail_in&&C(t)<=C(n)&&4!==t)return S(e,-5);if(666===i.status&&0!==e.avail_in)return S(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==l&&666!==i.status){var p=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(R(e),0===e.lookahead)){if(t===l)return 1;break}if(e.match_length=0,n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(I(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(I(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(I(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=w){if(R(e),e.lookahead<=w&&t===l)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=_&&0<e.strstart&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+w;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=w-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=_?(n=s._tr_tally(e,1,e.match_length-_),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(I(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(I(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(I(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==p&&4!==p||(i.status=666),1===p||3===p)return 0===e.avail_out&&(i.last_flush=-1),u;if(2===p&&(1===t?s._tr_align(i):5!==t&&(s._tr_stored_block(i,0,0,!1),3===t&&(A(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),k(e),0===e.avail_out))return i.last_flush=-1,u}return 4!==t?u:i.wrap<=0?1:(2===i.wrap?(x(i,255&e.adler),x(i,e.adler>>8&255),x(i,e.adler>>16&255),x(i,e.adler>>24&255),x(i,255&e.total_in),x(i,e.total_in>>8&255),x(i,e.total_in>>16&255),x(i,e.total_in>>24&255)):(D(i,e.adler>>>16),D(i,65535&e.adler)),k(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?u:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==E&&69!==t&&73!==t&&91!==t&&103!==t&&t!==T&&666!==t?S(e,h):(e.state=null,t===T?S(e,-3):u):h},n.deflateSetDictionary=function(e,t){var n,r,s,a,c,l,d,f,p=t.length;if(!e||!e.state)return h;if(2===(a=(n=e.state).wrap)||1===a&&n.status!==E||n.lookahead)return h;for(1===a&&(e.adler=o(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===a&&(A(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,t,p-n.w_size,n.w_size,0),t=f,p=n.w_size),c=e.avail_in,l=e.next_in,d=e.input,e.avail_in=p,e.next_in=0,e.input=t,R(n);n.lookahead>=_;){for(r=n.strstart,s=n.lookahead-(_-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+_-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--s;);n.strstart=r,n.lookahead=_-1,R(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=_-1,n.match_available=0,e.next_in=l,e.input=d,e.avail_in=c,n.wrap=a,u},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,s,o,a,c,l,u,h,d,f,p,m,g,y,v,_,w,b,E,T,S,C,A;n=e.state,r=e.next_in,C=e.input,i=r+(e.avail_in-5),s=e.next_out,A=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),c=n.dmax,l=n.wsize,u=n.whave,h=n.wnext,d=n.window,f=n.hold,p=n.bits,m=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{p<15&&(f+=C[r++]<<p,p+=8,f+=C[r++]<<p,p+=8),_=m[f&y];t:for(;;){if(f>>>=w=_>>>24,p-=w,0==(w=_>>>16&255))A[s++]=65535&_;else{if(!(16&w)){if(0==(64&w)){_=m[(65535&_)+(f&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}b=65535&_,(w&=15)&&(p<w&&(f+=C[r++]<<p,p+=8),b+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=C[r++]<<p,p+=8,f+=C[r++]<<p,p+=8),_=g[f&v];n:for(;;){if(f>>>=w=_>>>24,p-=w,!(16&(w=_>>>16&255))){if(0==(64&w)){_=g[(65535&_)+(f&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(E=65535&_,p<(w&=15)&&(f+=C[r++]<<p,(p+=8)<w&&(f+=C[r++]<<p,p+=8)),c<(E+=f&(1<<w)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=w,p-=w,(w=s-o)<E){if(u<(w=E-w)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=d,(T=0)===h){if(T+=l-w,w<b){for(b-=w;A[s++]=d[T++],--w;);T=s-E,S=A}}else if(h<w){if(T+=l+h-w,(w-=h)<b){for(b-=w;A[s++]=d[T++],--w;);if(T=0,h<b){for(b-=w=h;A[s++]=d[T++],--w;);T=s-E,S=A}}}else if(T+=h-w,w<b){for(b-=w;A[s++]=d[T++],--w;);T=s-E,S=A}for(;2<b;)A[s++]=S[T++],A[s++]=S[T++],A[s++]=S[T++],b-=3;b&&(A[s++]=S[T++],1<b&&(A[s++]=S[T++]))}else{for(T=s-E;A[s++]=A[T++],A[s++]=A[T++],A[s++]=A[T++],2<(b-=3););b&&(A[s++]=A[T++],1<b&&(A[s++]=A[T++]))}break}}break}}while(r<i&&s<a);r-=b=p>>3,f&=(1<<(p-=b<<3))-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=s<a?a-s+257:257-(s-a),n.hold=f,n.bits=p}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),s=e("./crc32"),o=e("./inffast"),a=e("./inftrees"),c=0,l=-2,u=1,h=852,d=592;function f(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=u,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(h),t.distcode=t.distdyn=new r.Buf32(d),t.sane=1,t.back=-1,c):l}function g(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,m(e)):l}function y(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?l:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,g(e))):l}function v(e,t){var n,r;return e?(r=new p,(e.state=r).window=null,(n=y(e,t))!==c&&(e.state=null),n):l}var _,w,b=!0;function E(e){if(b){var t;for(_=new r.Buf32(512),w=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,_,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,w,0,e.work,{bits:5}),b=!1}e.lencode=_,e.lenbits=9,e.distcode=w,e.distbits=5}function T(e,t,n,i){var s,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(s=o.wsize-o.wnext)&&(s=i),r.arraySet(o.window,t,n-i,s,o.wnext),(i-=s)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}n.inflateReset=g,n.inflateReset2=y,n.inflateResetKeep=m,n.inflateInit=function(e){return v(e,15)},n.inflateInit2=v,n.inflate=function(e,t){var n,h,d,p,m,g,y,v,_,w,b,S,C,A,k,I,x,D,N,R,O,L,P,M,F=0,U=new r.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;12===(n=e.state).mode&&(n.mode=13),m=e.next_out,d=e.output,y=e.avail_out,p=e.next_in,h=e.input,g=e.avail_in,v=n.hold,_=n.bits,w=g,b=y,L=c;e:for(;;)switch(n.mode){case u:if(0===n.wrap){n.mode=13;break}for(;_<16;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}if(2&n.wrap&&35615===v){U[n.check=0]=255&v,U[1]=v>>>8&255,n.check=s(n.check,U,2,0),_=v=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&v)){e.msg="unknown compression method",n.mode=30;break}if(_-=4,O=8+(15&(v>>>=4)),0===n.wbits)n.wbits=O;else if(O>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<O,e.adler=n.check=1,n.mode=512&v?10:12,_=v=0;break;case 2:for(;_<16;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}if(n.flags=v,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(U[0]=255&v,U[1]=v>>>8&255,n.check=s(n.check,U,2,0)),_=v=0,n.mode=3;case 3:for(;_<32;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}n.head&&(n.head.time=v),512&n.flags&&(U[0]=255&v,U[1]=v>>>8&255,U[2]=v>>>16&255,U[3]=v>>>24&255,n.check=s(n.check,U,4,0)),_=v=0,n.mode=4;case 4:for(;_<16;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(U[0]=255&v,U[1]=v>>>8&255,n.check=s(n.check,U,2,0)),_=v=0,n.mode=5;case 5:if(1024&n.flags){for(;_<16;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(U[0]=255&v,U[1]=v>>>8&255,n.check=s(n.check,U,2,0)),_=v=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(g<(S=n.length)&&(S=g),S&&(n.head&&(O=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,h,p,S,O)),512&n.flags&&(n.check=s(n.check,h,S,p)),g-=S,p+=S,n.length-=S),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===g)break e;for(S=0;O=h[p+S++],n.head&&O&&n.length<65536&&(n.head.name+=String.fromCharCode(O)),O&&S<g;);if(512&n.flags&&(n.check=s(n.check,h,S,p)),g-=S,p+=S,O)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===g)break e;for(S=0;O=h[p+S++],n.head&&O&&n.length<65536&&(n.head.comment+=String.fromCharCode(O)),O&&S<g;);if(512&n.flags&&(n.check=s(n.check,h,S,p)),g-=S,p+=S,O)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;_<16;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}if(v!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}_=v=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;_<32;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}e.adler=n.check=f(v),_=v=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=m,e.avail_out=y,e.next_in=p,e.avail_in=g,n.hold=v,n.bits=_,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){v>>>=7&_,_-=7&_,n.mode=27;break}for(;_<3;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}switch(n.last=1&v,_-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(E(n),n.mode=20,6!==t)break;v>>>=2,_-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}v>>>=2,_-=2;break;case 14:for(v>>>=7&_,_-=7&_;_<32;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}if((65535&v)!=(v>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&v,_=v=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(S=n.length){if(g<S&&(S=g),y<S&&(S=y),0===S)break e;r.arraySet(d,h,p,S,m),g-=S,p+=S,y-=S,m+=S,n.length-=S;break}n.mode=12;break;case 17:for(;_<14;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}if(n.nlen=257+(31&v),v>>>=5,_-=5,n.ndist=1+(31&v),v>>>=5,_-=5,n.ncode=4+(15&v),v>>>=4,_-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;_<3;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}n.lens[B[n.have++]]=7&v,v>>>=3,_-=3}for(;n.have<19;)n.lens[B[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},L=a(0,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,L){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;I=(F=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,x=65535&F,!((k=F>>>24)<=_);){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}if(x<16)v>>>=k,_-=k,n.lens[n.have++]=x;else{if(16===x){for(M=k+2;_<M;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}if(v>>>=k,_-=k,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}O=n.lens[n.have-1],S=3+(3&v),v>>>=2,_-=2}else if(17===x){for(M=k+3;_<M;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}_-=k,O=0,S=3+(7&(v>>>=k)),v>>>=3,_-=3}else{for(M=k+7;_<M;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}_-=k,O=0,S=11+(127&(v>>>=k)),v>>>=7,_-=7}if(n.have+S>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;S--;)n.lens[n.have++]=O}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,P={bits:n.lenbits},L=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,L){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},L=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,L){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=g&&258<=y){e.next_out=m,e.avail_out=y,e.next_in=p,e.avail_in=g,n.hold=v,n.bits=_,o(e,b),m=e.next_out,d=e.output,y=e.avail_out,p=e.next_in,h=e.input,g=e.avail_in,v=n.hold,_=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;I=(F=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,x=65535&F,!((k=F>>>24)<=_);){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}if(I&&0==(240&I)){for(D=k,N=I,R=x;I=(F=n.lencode[R+((v&(1<<D+N)-1)>>D)])>>>16&255,x=65535&F,!(D+(k=F>>>24)<=_);){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}v>>>=D,_-=D,n.back+=D}if(v>>>=k,_-=k,n.back+=k,n.length=x,0===I){n.mode=26;break}if(32&I){n.back=-1,n.mode=12;break}if(64&I){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&I,n.mode=22;case 22:if(n.extra){for(M=n.extra;_<M;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,_-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;I=(F=n.distcode[v&(1<<n.distbits)-1])>>>16&255,x=65535&F,!((k=F>>>24)<=_);){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}if(0==(240&I)){for(D=k,N=I,R=x;I=(F=n.distcode[R+((v&(1<<D+N)-1)>>D)])>>>16&255,x=65535&F,!(D+(k=F>>>24)<=_);){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}v>>>=D,_-=D,n.back+=D}if(v>>>=k,_-=k,n.back+=k,64&I){e.msg="invalid distance code",n.mode=30;break}n.offset=x,n.extra=15&I,n.mode=24;case 24:if(n.extra){for(M=n.extra;_<M;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,_-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===y)break e;if(S=b-y,n.offset>S){if((S=n.offset-S)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}C=S>n.wnext?(S-=n.wnext,n.wsize-S):n.wnext-S,S>n.length&&(S=n.length),A=n.window}else A=d,C=m-n.offset,S=n.length;for(y<S&&(S=y),y-=S,n.length-=S;d[m++]=A[C++],--S;);0===n.length&&(n.mode=21);break;case 26:if(0===y)break e;d[m++]=n.length,y--,n.mode=21;break;case 27:if(n.wrap){for(;_<32;){if(0===g)break e;g--,v|=h[p++]<<_,_+=8}if(b-=y,e.total_out+=b,n.total+=b,b&&(e.adler=n.check=n.flags?s(n.check,d,b,m-b):i(n.check,d,b,m-b)),b=y,(n.flags?v:f(v))!==n.check){e.msg="incorrect data check",n.mode=30;break}_=v=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;_<32;){if(0===g)break e;g--,v+=h[p++]<<_,_+=8}if(v!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}_=v=0}n.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;default:return l}return e.next_out=m,e.avail_out=y,e.next_in=p,e.avail_in=g,n.hold=v,n.bits=_,(n.wsize||b!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&T(e,e.output,e.next_out,b-e.avail_out)?(n.mode=31,-4):(w-=e.avail_in,b-=e.avail_out,e.total_in+=w,e.total_out+=b,n.total+=b,n.wrap&&b&&(e.adler=n.check=n.flags?s(n.check,d,b,e.next_out-b):i(n.check,d,b,e.next_out-b)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==w&&0===b||4===t)&&L===c&&(L=-5),L)},n.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,c},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?l:((n.head=t).done=!1,c):l},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?l:11===n.mode&&i(1,t,r,0)!==n.check?-3:T(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,c):l},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,c,l,u,h,d){var f,p,m,g,y,v,_,w,b,E=d.bits,T=0,S=0,C=0,A=0,k=0,I=0,x=0,D=0,N=0,R=0,O=null,L=0,P=new r.Buf16(16),M=new r.Buf16(16),F=null,U=0;for(T=0;T<=15;T++)P[T]=0;for(S=0;S<c;S++)P[t[n+S]]++;for(k=E,A=15;1<=A&&0===P[A];A--);if(A<k&&(k=A),0===A)return l[u++]=20971520,l[u++]=20971520,d.bits=1,0;for(C=1;C<A&&0===P[C];C++);for(k<C&&(k=C),T=D=1;T<=15;T++)if(D<<=1,(D-=P[T])<0)return-1;if(0<D&&(0===e||1!==A))return-1;for(M[1]=0,T=1;T<15;T++)M[T+1]=M[T]+P[T];for(S=0;S<c;S++)0!==t[n+S]&&(h[M[t[n+S]]++]=S);if(v=0===e?(O=F=h,19):1===e?(O=i,L-=257,F=s,U-=257,256):(O=o,F=a,-1),T=C,y=u,x=S=R=0,m=-1,g=(N=1<<(I=k))-1,1===e&&852<N||2===e&&592<N)return 1;for(;;){for(_=T-x,b=h[S]<v?(w=0,h[S]):h[S]>v?(w=F[U+h[S]],O[L+h[S]]):(w=96,0),f=1<<T-x,C=p=1<<I;l[y+(R>>x)+(p-=f)]=_<<24|w<<16|b|0,0!==p;);for(f=1<<T-1;R&f;)f>>=1;if(0!==f?(R&=f-1,R+=f):R=0,S++,0==--P[T]){if(T===A)break;T=t[n+h[S]]}if(k<T&&(R&g)!==m){for(0===x&&(x=k),y+=C,D=1<<(I=T-x);I+x<A&&!((D-=P[I+x])<=0);)I++,D<<=1;if(N+=1<<I,1===e&&852<N||2===e&&592<N)return 1;l[m=R&g]=k<<24|I<<16|y-u|0}}return 0!==R&&(l[y+R]=T-x<<24|64<<16|0),d.bits=k,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var s=256,o=286,a=30,c=15,l=16,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],h=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);i(p);var m=new Array(60);i(m);var g=new Array(512);i(g);var y=new Array(256);i(y);var v=new Array(29);i(v);var _,w,b,E=new Array(a);function T(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function S(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function C(e){return e<256?g[e]:g[256+(e>>>7)]}function A(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function k(e,t,n){e.bi_valid>l-n?(e.bi_buf|=t<<e.bi_valid&65535,A(e,e.bi_buf),e.bi_buf=t>>l-e.bi_valid,e.bi_valid+=n-l):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function I(e,t,n){k(e,n[2*t],n[2*t+1])}function x(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function D(e,t,n){var r,i,s=new Array(c+1),o=0;for(r=1;r<=c;r++)s[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=x(s[a]++,a))}}function N(e){var t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<a;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function R(e){8<e.bi_valid?A(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function O(e,t,n,r){var i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]}function L(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&O(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!O(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function P(e,t,n){var r,i,o,a,c=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===r?I(e,i,t):(I(e,(o=y[i])+s+1,t),0!==(a=u[o])&&k(e,i-=v[o],a),I(e,o=C(--r),n),0!==(a=h[o])&&k(e,r-=E[o],a)),c<e.last_lit;);I(e,256,t)}function M(e,t){var n,r,i,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<l;n++)0!==s[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=o[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;1<=n;n--)L(e,s,n);for(i=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],L(e,s,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,s[2*i]=s[2*n]+s[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,s[2*n+1]=s[2*r+1]=i,e.heap[1]=i++,L(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,s,o,a,l=t.dyn_tree,u=t.max_code,h=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(s=0;s<=c;s++)e.bl_count[s]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)m<(s=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(s=m,g++),l[2*r+1]=s,u<r||(e.bl_count[s]++,o=0,p<=r&&(o=f[r-p]),a=l[2*r],e.opt_len+=a*(s+o),d&&(e.static_len+=a*(h[2*r+1]+o)));if(0!==g){do{for(s=m-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[m]--,g-=2}while(0<g);for(s=m;0!==s;s--)for(r=e.bl_count[s];0!==r;)u<(i=e.heap[--n])||(l[2*i+1]!==s&&(e.opt_len+=(s-l[2*i+1])*l[2*i],l[2*i+1]=s),r--)}}(e,t),D(s,u,e.bl_count)}function F(e,t,n){var r,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++a<c&&i===o||(a<l?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=i,l=(a=0)===o?(c=138,3):i===o?(c=6,3):(c=7,4))}function U(e,t,n){var r,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++a<c&&i===o)){if(a<l)for(;I(e,i,e.bl_tree),0!=--a;);else 0!==i?(i!==s&&(I(e,i,e.bl_tree),a--),I(e,16,e.bl_tree),k(e,a-3,2)):a<=10?(I(e,17,e.bl_tree),k(e,a-3,3)):(I(e,18,e.bl_tree),k(e,a-11,7));s=i,l=(a=0)===o?(c=138,3):i===o?(c=6,3):(c=7,4)}}i(E);var B=!1;function j(e,t,n,i){k(e,0+(i?1:0),3),function(e,t,n,i){R(e),A(e,n),A(e,~n),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}n._tr_init=function(e){B||(function(){var e,t,n,r,i,s=new Array(c+1);for(r=n=0;r<28;r++)for(v[r]=n,e=0;e<1<<u[r];e++)y[n++]=r;for(y[n-1]=r,r=i=0;r<16;r++)for(E[r]=i,e=0;e<1<<h[r];e++)g[i++]=r;for(i>>=7;r<a;r++)for(E[r]=i<<7,e=0;e<1<<h[r]-7;e++)g[256+i++]=r;for(t=0;t<=c;t++)s[t]=0;for(e=0;e<=143;)p[2*e+1]=8,e++,s[8]++;for(;e<=255;)p[2*e+1]=9,e++,s[9]++;for(;e<=279;)p[2*e+1]=7,e++,s[7]++;for(;e<=287;)p[2*e+1]=8,e++,s[8]++;for(D(p,287,s),e=0;e<a;e++)m[2*e+1]=5,m[2*e]=x(e,5);_=new T(p,u,257,o,c),w=new T(m,h,0,a,c),b=new T(new Array(0),d,0,19,7)}(),B=!0),e.l_desc=new S(e.dyn_ltree,_),e.d_desc=new S(e.dyn_dtree,w),e.bl_desc=new S(e.bl_tree,b),e.bi_buf=0,e.bi_valid=0,N(e)},n._tr_stored_block=j,n._tr_flush_block=function(e,t,n,r){var i,o,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<s;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),M(e,e.l_desc),M(e,e.d_desc),a=function(e){var t;for(F(e,e.dyn_ltree,e.l_desc.max_code),F(e,e.dyn_dtree,e.d_desc.max_code),M(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*f[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?j(e,t,n,r):4===e.strategy||o===i?(k(e,2+(r?1:0),3),P(e,p,m)):(k(e,4+(r?1:0),3),function(e,t,n,r){var i;for(k(e,t-257,5),k(e,n-1,5),k(e,r-4,4),i=0;i<r;i++)k(e,e.bl_tree[2*f[i]+1],3);U(e,e.dyn_ltree,t-1),U(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),P(e,e.dyn_ltree,e.dyn_dtree)),N(e),r&&R(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(y[n]+s+1)]++,e.dyn_dtree[2*C(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){k(e,2,3),I(e,256,p),function(e){16===e.bi_valid?(A(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,r,i,s,o=1,a={},c=!1,l=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){d(e.data)},function(e){i.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(r=l.documentElement,function(e){var t=l.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(d,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return a[o]=i,n(o),o++},u.clearImmediate=h}function h(e){delete a[e]}function d(e){if(c)setTimeout(d,0,e);else{var n=a[e];if(n){c=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{h(e),c=!1}}}}function f(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&d(+t.data.slice(s.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},9928:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});class r{static has(e){return null!==this.get(e)}static get(e,t=!1){if(null===localStorage.getItem(e))return null;{const n=JSON.parse(localStorage.getItem(e)),r=Date.now()>n[1];return r&&localStorage.removeItem(e),!r||t?n[0]:null}}static getAndRefresh(e,t,n=216e5){return new Promise(((r,i)=>{const s=this.get(e,!0);null===s?t.then((t=>{this.set(e,t,Date.now()+n),r(t)})).catch(i):(r(s),this.has(e)||t.then((t=>this.set(e,t,Date.now()+n))).catch(console.error))}))}static set(e,t,n=r.MAX_VALID_TIMESTAMP){const i=this.get(e),s=[t,n instanceof Date?n.getTime():n];return localStorage.setItem(e,JSON.stringify(s)),i}static remove(e){const t=this.get(e);return localStorage.removeItem(e),t}}r.MAX_VALID_TIMESTAMP=864e13;const i=r},908:(e,t,n)=>{"use strict";var r;function i(e){return e.sort((()=>Math.random()-.5))}function s(...e){return e[Math.floor(Math.random()*e.length)]}n.d(t,{c:()=>a});class o{constructor(){}static get numLoading(){return this.currentlyLoading.length}static markLoadStart(e){this.currentlyLoading.push(e)}static markLoadEnd(e){const t=this.currentlyLoading.lastIndexOf(e);-1!==t&&this.currentlyLoading.splice(t,1)}static getElementsById(e){const t={};for(const n in e){const r=document.getElementById(n);if(null===r)throw new Error(`no element with id "${n}" found`);if(!(r instanceof e[n]))throw new Error(`element with id "${n}" exists, but is ${r}, not ${e[n].name}`);t[n]=r}return t}static onDOMContentLoaded(e={}){return new Promise(((t,n)=>{if(this.DOMContentLoaded)try{t(this.getElementsById(e))}catch(e){n(e)}else window.addEventListener("DOMContentLoaded",(()=>{try{t(this.getElementsById(e))}catch(e){n(e)}}))}))}static useDynamicContent(e,t,n=(e=>console.error(e))){this.markLoadStart(e),Promise.all([e,this.onDOMContentLoaded]).then((([n,r])=>{t(n),this.markLoadEnd(e)})).catch((e=>n(e)))}}r=o,o.EMOJI_CONFIG=[[[1,1],()=>{const e=["0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣"];return["🎉",...(new Date).getFullYear().toString().split("").map((e=>Number.parseInt(e))).map((t=>e[t])),"🎉"]}],[[2,5],()=>i(["🥳","🎂","🍰","🎈","🎉","🎊","🪅"]).slice(0,3)],[[2,14],s((()=>s([s("👨🏻","👨🏼","👨🏽","👨🏾","👨🏿"),"❤️",s("👨🏻","👨🏼","👨🏽","👨🏾","👨🏿")],[s("👨🏻","👨🏼","👨🏽","👨🏾","👨🏿"),"❤️",s("👩🏻","👩🏼","👩🏽","👩🏾","👩🏿")],[s("👩🏻","👩🏼","👩🏽","👩🏾","👩🏿"),"❤️",s("👨🏻","👨🏼","👨🏽","👨🏾","👨🏿")],[s("👩🏻","👩🏼","👩🏽","👩🏾","👩🏿"),"❤️",s("👩🏻","👩🏼","👩🏽","👩🏾","👩🏿")])),(()=>["❤️‍🔥","❤️‍🔥","❤️‍🔥"]),(()=>["🥰","😍","😘"]),(()=>["🐐","🫶","🐐"]))],[[4,1],()=>Math.random()<=.1?["🤡","🤡","🤡"]:r.DEFAULT_EMOJIS()],[[4,27],()=>{const[e,t]=[s("🧡","🟠","🔶"),s("👑","🫅")];return[e,t,e]}],[[5,4],()=>["🧡","🕊️","🧡"]],[[5,5],s((()=>["🇳🇱","🇳🇱","🇳🇱"]),(()=>["🎉","🇳🇱","🎉"]),(()=>["🧡","🇳🇱","🧡"]))],[[6,28],s((()=>["🏳️‍🌈","🌈","🏳️‍🌈"]),(()=>["❤️","🧡","💛","💚","💙","💜"]),(()=>s(["🩵","🩷","🤍","🩷","🩵"],["💛","🤍","💜","🖤"],["🖤","🩶","🤍","💜"],["🩷","💜","💙"],["🩷","💛","🩵"],["🧡","🤍","🩷"],["💚","🤍","🩷"],["💚","🤍","💙"])),(()=>s([s("👨🏻","👨🏼","👨🏽","👨🏾","👨🏿"),"❤️",s("👨🏻","👨🏼","👨🏽","👨🏾","👨🏿")],[s("👩🏻","👩🏼","👩🏽","👩🏾","👩🏿"),"❤️",s("👩🏻","👩🏼","👩🏽","👩🏾","👩🏿")])))],[[12,5],s((()=>["🎅🏼","🎁","👟","🥾"]),(()=>["👀","👴🏼","🚢","🚂"]),(()=>["👂","🍃","🌳","🐎"]),(()=>["🧑","🚲","💥","🚶‍♂️"]))],[[12,25],s((()=>["🎁","🎄","🎁"]),(()=>i(["❄️","☃️","🫎"])),(()=>["🎅","🎄","🤶"]),(()=>["🧦","🌟","🧦"]))],[[12,31],s((()=>["🎆","🎇","🎆"]),(()=>["🎇","🎆","🎇"]),(()=>["🕛","🍾","🥂"]),(()=>["🎊","📆","🎊"]),(()=>["🌉","🎆","🌉"]))]],o.DEFAULT_EMOJIS=()=>["🐐","🧶","🧦"],o.loadingScreen=document.createElement("div"),(()=>{r.loadingScreen.id="loading-screen",document.body.appendChild(r.loadingScreen),window.addEventListener("DOMContentLoaded",(()=>document.body.toggleAttribute("loading",!0)));const e=new Date,[t,n]=[e.getMonth()+1,e.getDate()],i=r.EMOJI_CONFIG.find((e=>e[0][0]===t&&e[0][1]===n))?.[1]??r.DEFAULT_EMOJIS;for(const e of i()){const t=document.createElement("p");t.textContent=e,r.loadingScreen.appendChild(t)}const s=Date.now();r.checkLoadedInterval=setInterval((()=>{if(0===r.numLoading){document.body.removeAttribute("loading");const e=document.getElementById("split-view");e&&(e.style.opacity="1"),Array.from(document.getElementsByClassName("content")).forEach((e=>{e instanceof HTMLElement&&(e.style.opacity="1")})),r.loadingScreen.classList.add("fading"),clearInterval(r.checkLoadedInterval),console.log(`Loading done: ${Date.now()-s}ms`)}}),50)})(),o.currentlyLoading=[],o.DOMContentLoaded=!1,r.markLoadStart(window),window.addEventListener("DOMContentLoaded",(()=>{r.DOMContentLoaded=!0,r.markLoadEnd(window)}));const a=o},5245:(e,t,n)=>{"use strict";n.d(t,{c:()=>l});var r=n(7588),i=n.n(r),s=n(96),o=n(4388),a=n(6316);class c extends HTMLElement{static useClickInteraction(){return o.c.isSlimmerOrEq(o.c.Viewport.DESKTOP_SLIM)}set foldDir(e){this._foldDir=e,this.arrow.textContent="chevron_right"}set heading(e){const t=this._heading;e!==t&&(t.replaceWith(e),this._heading=e)}get heading(){return this._heading}set arrowHidden(e){e?this.arrow.setAttribute("hidden",""):this.arrow.removeAttribute("hidden")}get contents(){return this._contents}get contentsPosition(){return this._contentsPosition}set contentsPosition(e){this._contents.classList.remove("absolute","static"),this._contents.classList.add(e),this._contentsPosition=e}get isOpen(){return this.hasAttribute("open")}constructor(e,t,n,r,l,u){super(),this.style.position="relative",this.style.display="block",this._foldDir=t??(this.hasAttribute("fold-dir")?this.getAttribute("fold-dir"):null)??"right",this.closingDelay=r??a.c.getAttrAsNumber(this,"closing-delay")??0;const h=Array.from(this.children);this._heading=s.c.h4(e??this.getAttribute("heading")??"").class("heading").make(),this.arrow=s.c.h4("chevron_right").class("arrow","light-weight","icon").make(),this.topper=super.appendChild(s.c.div().class("topper","flex-columns","cross-axis-center").children(this._heading,this.arrow).make()),n??(n=a.c.getAttrAs(this,"contents-position",(e=>"absolute"===e||"static"===e))??"absolute"),this._contents=super.appendChild(s.c.div().class("contents",n).children(...h).make()),this.contentsPosition=n,l??(l=a.c.getAttrAs(this,"open-on")??"mouseenter"),u??(u=a.c.getAttrAs(this,"close-on")??"mouseleave"),i()(this._contents).hide(),l===u?this.topper.addEventListener(l,(()=>this.isOpen?this.close():this.open())):(this.topper.addEventListener(l,(()=>{c.useClickInteraction()||this.open()})),this.topper.addEventListener("click",(e=>{c.useClickInteraction()&&(this.isOpen?this.close():this.open(),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())})),this.addEventListener(l,(()=>clearTimeout(this.closingTimeout))),this.addEventListener(u,(()=>{c.useClickInteraction()||(this.closingTimeout=setTimeout((()=>this.close()),c.useClickInteraction()?0:this.closingDelay))})),document.body.addEventListener("click",(e=>{c.useClickInteraction()&&e.target instanceof Node&&!this.contains(e.target)&&(this.close(),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}))),o.c.onChange((()=>this.topper.classList.toggle("click-action",c.useClickInteraction())),!0)}appendChild(e){return this._contents.appendChild(e)}append(...e){return this._contents.append(...e)}open(){if(!this.hasAttribute("disabled")){switch(this._heading.getBoundingClientRect(),this._foldDir){case"down":this._contents.style.left="0px",this._contents.style.top=this.clientHeight+"px",this.arrow.style.rotate="90deg";break;case"right":this._contents.style.left=this.parentElement.getBoundingClientRect().right-this.getBoundingClientRect().left+"px",this._contents.style.top="0px",this.arrow.style.rotate="90deg"}if(this._contents.style.setProperty("--top",this._contents.style.top??"0px"),"absolute"===this.contentsPosition){let e=c.topFolderContentZIndex+1;e>=300&&(e=280),this.contents.style.zIndex=(c.topFolderContentZIndex=e).toString()}i()(this._contents).stop().slideDown(200,(()=>this._contents.style.height="")),this.setAttribute("open","")}}close(){i()(this._contents).stop().slideUp(200),this.arrow.style.rotate="0deg",this.removeAttribute("open")}}c.topFolderContentZIndex=280;const l=c;customElements.define("folder-element",c)},8332:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});var r=n(96);class i extends HTMLElement{get value(){return this._value}set value(e){this._value!==e&&(this.optionElements.forEach(((t,n)=>{this.options[n][0]===e?t.setAttribute("selected",""):t.removeAttribute("selected")})),this._value=e,this.dispatchEvent(new Event("input")),this.dispatchEvent(new Event("change")))}constructor(...e){if(super(),0===e.length)this.classList.add("flex-columns","cross-axis-center"),this.options=[],this.optionElements=[],this._value=void 0;else{if(e.map((e=>e[0])).some(((e,t,n)=>n.indexOf(e)!==t)))throw new Error(`duplicate value: ${e.map((e=>e[0])).find(((e,t,n)=>n.indexOf(e)!==t))}`);this.options=e.map((e=>[e[0],e[1]])),this._value=(e.find((e=>e[3]))??e[0])[0],this.classList.add("flex-columns","cross-axis-center"),this.optionElements=e.map((e=>r.c.p(e[1]).class("icon","option","click-action").attr("selected",this._value===e[0]?"":null).tooltip(e[2]??null).on("click",(()=>this.value=e[0])).make())),this.optionElements.forEach(((e,t)=>{this.appendChild(e),t!==this.optionElements.length-1&&this.appendChild(r.c.div(void 0,"separator").make())}))}}addOption(e,t,n,i=!1){const s=e;return 0!==this.options.length&&this.append(r.c.div(void 0,"separator").make()),this.options.push([s,t]),this.optionElements.push(this.appendChild(r.c.p(t).class("icon","option","click-action").tooltip(n??null).on("click",(()=>this.value=s)).make())),i&&(this.optionElements.forEach(((e,t)=>{this.options[t][0]===s?e.setAttribute("selected",""):e.removeAttribute("selected")})),this._value=s),this}}customElements.define("icon-selector",i)},3868:(e,t,n)=>{"use strict";n.d(t,{c:()=>p});var r,i=n(4296),s=n(3935),o=n(2464),a=n(8144),c=n(8356),l=n(6316),u=n(96),h=n(9796),d=n(908);class f extends HTMLElement{static getFileSizeString(e){let t=0,n=e;for(;n>=1e3;)[t,n]=[t+1,n/1e3];return n.toFixed(1)+this.FILE_SIZE_UNITS[t]}get origin(){return this._origin}set origin(e){e!==this._origin&&(this._origin=e,this.setAttribute("origin",e),this.refresh())}get src(){return this._src}set src(e){e!==this._src&&(this._src=e,this.setAttribute("src",e),this.refresh())}refresh(){const e="external"===this.origin?c.c.getInfo(this.src):"firebase-storage-protected"===this.origin?r.getInfoFromFirebase("beveiligd",this.src):r.getInfoFromFirebase("openbaar",this.src);return new Promise(((t,n)=>{d.c.markLoadStart(this),e.then((e=>{this.classList.remove("error"),this.filetypeIcon.textContent=r.FILE_TYPE_ICONS[e.fileType],this.fileNameLabel.textContent=e.name,this.fileSizeLabel.textContent=e.size?r.getFileSizeString(e.size):"",this.downloadButton.textContent="download",this.downloadButton.title="Bestand downloaden",this.downloadButton.classList.add("click-action"),this.downloadButton.setAttribute("href",e.href),this.downloadButton.setAttribute("download",""),d.c.markLoadEnd(this)})).catch((e=>{this.classList.add("error"),this.filetypeIcon.textContent="error",this.fileNameLabel.textContent=e instanceof Error?e.message:"Er ging iets mis",this.fileSizeLabel.textContent="",this.downloadButton.textContent="file_download_off",this.downloadButton.title="",this.downloadButton.classList.remove("click-action"),this.downloadButton.removeAttribute("href"),this.downloadButton.removeAttribute("download"),d.c.markLoadEnd(this)}))}))}constructor(e,t){super(),this.initElement(),this._origin=e??l.c.getAttrAs(this,"origin",h.s.checkType)??"firebase-storage-public",this._src=t??this.getAttribute("src")??"",this.refresh()}initElement(){this.style.display="flex",this.classList.add("flex-columns","cross-axis-center","in-section-gap"),this.filetypeIcon=this.appendChild(u.c.p("collections_bookmark").class("icon","file-type-icon").make()),this.appendChild(u.c.div(void 0,"file-info","flex-rows").children(this.fileNameLabel=u.c.p("Bestandsnaam").class("file-name","no-margin").make(),this.fileSizeLabel=u.c.p("Bestandsgrootte").class("file-size","no-margin").make()).make()),this.downloadButton=this.appendChild(u.c.a(void 0,"download").openInNewTab(!0).tooltip("Bestand downloaden").class("icon","click-action","download-icon").on("click",((e,t)=>{if(!this.classList.contains("error")){const n=t.getAttribute("href");n&&(e.preventDefault(),window.open(n,"_blank"))}})).make())}static getInfoFromFirebase(e,...t){return new Promise(((n,r)=>{if("beveiligd"!==e||this.CAN_DOWNLOAD_PROTECTED_ATTACHMENTS){const s=[e,...t].join("/"),o=(0,i.IL)(a.mw,s);Promise.all([(0,i.GO)(o),(0,i.Kq)(o)]).then((([e,t])=>{n({href:t,name:e.name,contentType:e.contentType??"unknown/unknown",fileType:c.O.fromContentType(e.contentType??"unknown/unknown"),size:e.size,lastModified:new Date(e.updated)})})).catch((e=>{if(e instanceof i.Gf)switch(e.code){case"storage/object-not-found":r(new Error("Kan bestand niet vinden",{cause:"not found"}));break;case"storage/unauthorized":r(new Error("Geen toegang tot bestand",{cause:"missing permissions"}));break;default:r(new Error("Er ging iets mis",{cause:"unknown"}))}else r(e)}))}else r(new Error("Geen toegang tot bestand",{cause:"missing permissions"}))}))}}r=f,f.CAN_DOWNLOAD_PROTECTED_ATTACHMENTS=!1,(0,s.kL)(o.c.Permission.DOWNLOAD_PROTECTED_FILES,(e=>r.CAN_DOWNLOAD_PROTECTED_ATTACHMENTS=e),!0,!0),f.FILE_SIZE_UNITS=["B","kB","MB","GB","TB","PB","YB"],f.FILE_TYPE_ICONS={image:"photo_library",application:"collections_bookmark",audio:"library_music",example:"quiz",font:"font_download",model:"deployed_code",text:"library_books",video:"video_library",unknown:"quiz","compressed-folder":"folder_zip",pdf:"picture_as_pdf"};const p=f;d.c.onDOMContentLoaded().then((()=>customElements.define("multisource-attachment",f))),Error},8828:(e,t,n)=>{"use strict";n.d(t,{c:()=>f});var r,i=n(4296),s=n(3935),o=n(2464),a=n(8144),c=n(6316),l=n(9796),u=n(96),h=n(908);class d extends HTMLElement{get origin(){return this._origin}set origin(e){e!==this._origin&&(this._origin=e,this.setAttribute("origin",e),this.refresh())}get src(){return this._src}set src(e){e!==this._src&&(this._src=e,this.setAttribute("src",e),this.refresh())}set alt(e){this.image.alt=e}refresh(){h.c.markLoadStart(this),("external"===this.origin?new Promise((e=>e(this.src))):"firebase-storage-protected"===this.origin?r.getSrcFromFirebase("beveiligd",this.src):r.getSrcFromFirebase("openbaar",this.src)).then((e=>{this.classList.remove("error"),h.c.markLoadStart(this.image),this.image.addEventListener("load",(()=>h.c.markLoadEnd(this.image)),{once:!0}),this.image.src=e,this.image.removeAttribute("hidden"),this.errorMessage.toggleAttribute("hidden",!0),h.c.markLoadEnd(this)})).catch((e=>{this.classList.add("error"),this.image.removeAttribute("src"),this.image.toggleAttribute("hidden",!0),this.errorMessage.lastChild.textContent=e instanceof Error?e.message:"Er ging iets mis.",this.errorMessage.removeAttribute("hidden"),h.c.markLoadEnd(this)}))}constructor(e,t){super(),this.initElement(),this._origin=e??c.c.getAttrAs(this,"origin",l.s.checkType)??"firebase-storage-public",this._src=t??this.getAttribute("src")??"",this.refresh()}initElement(){this.style.display="flex",this.classList.add("flex-rows","main-axis-center","cross-axis-center"),this.image=this.appendChild(u.c.img().attr("hidden").make()),this.errorMessage=this.appendChild(u.c.div(void 0,"error-message","no-margin","flex-columns","main-axis-center","cross-axis-center","in-section-gap").attr("hidden").children(u.c.p("broken_image").class("icon"),u.c.p().class("no-margin").make()).make())}static getSrcFromFirebase(e,...t){return new Promise(((n,r)=>{if("beveiligd"!==e||this.CAN_DOWNLOAD_PROTECTED_FILES){const s=[e,...t].join("/"),o=(0,i.IL)(a.mw,s);Promise.all([(0,i.GO)(o),(0,i.Kq)(o)]).then((([e,t])=>{e.contentType?.startsWith("image/")?n(t):r(new Error("Bestand is geen afbeelding",{cause:"non-image file"}))})).catch((e=>{if(e instanceof i.Gf)switch(e.code){case"storage/object-not-found":r(new Error("Kan afbeelding niet vinden",{cause:"not found"}));break;case"storage/unauthorized":r(new Error("Geen toegang tot afbeelding",{cause:"missing permissions"}));break;default:r(new Error("Er ging iets mis",{cause:"unknown"}))}else r(e)}))}else r(new Error("Geen toegang tot afbeelding",{cause:"missing permissions"}))}))}}r=d,d.CAN_DOWNLOAD_PROTECTED_FILES=!1,(0,s.kL)(o.c.Permission.DOWNLOAD_PROTECTED_FILES,(e=>r.CAN_DOWNLOAD_PROTECTED_FILES=e),!0,!0);const f=d;customElements.define("multisource-image",d)},2824:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});class r extends HTMLElement{constructor(e){if(super(),e&&(this.id=e),!this.id)throw new Error("placeholders must have an ID");if(this.id in r.ALL_BY_ID)throw new s(this.id);r.ALL_BY_ID[this.id]=this,new MutationObserver((e=>{for(const t of e)t.target instanceof r&&(t.oldValue&&delete r.ALL_BY_ID[t.oldValue],r.ALL_BY_ID[t.target.id]=t.target)})).observe(this,{attributes:!0,attributeFilter:["id"],attributeOldValue:!0})}replaceWith(...e){super.replaceWith(...e),document.contains(this)||delete r.ALL_BY_ID[this.id]}static replaceWith(e,t){const n=r.ALL_BY_ID[e];if(n)return n.replaceWith(t),t;throw new Error(`no placeholder with id "${e}"`)}static replaceWithMultiple(e,...t){const n=r.ALL_BY_ID[e];if(!n)throw new Error(`no placeholder with id "${e}"`);n.replaceWith(...t)}}r.ALL_BY_ID={};const i=r;customElements.define("place-holder",r);class s extends Error{constructor(e){super(`placeholder with id "${e}" already exists`)}}},9368:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(96),i=n(908),s=n(6316);class o extends HTMLElement{get value(){return this._value}get checked(){return this._value}set value(e){if(e!==this._value){this._value=e,e?this.setAttribute("on",""):this.removeAttribute("on"),this.indicator&&(this.indicator.textContent=e?"check":"close");for(const t of this.dependants)e!==this.inverted?o.removeDisabler(t):o.addDisabler(t);this.dispatchEvent(new InputEvent("input",{bubbles:!0})),this.dispatchEvent(new Event("change",{bubbles:!0}))}}get disabled(){return this.hasAttribute("disabled")}set disabled(e){this.toggleAttribute("disabled",e)}static addDisabler(e){const t=e.hasAttribute("disabled")?s.c.getAttrAsNumber(e,"disabled",!1)??1:0;e.setAttribute("disabled",(t+1).toString())}static removeDisabler(e){const t=(e.hasAttribute("disabled")?s.c.getAttrAsNumber(e,"disabled",!1)??1:0)-1;t<=0?e.removeAttribute("disabled"):e.setAttribute("disabled",t.toString())}constructor(e=!1,t,n=!1){super(),this.dependants=[],this.inverted=n||this.hasAttribute("inverted"),t??(t=this.getAttribute("dependants")??void 0),t&&(Array.isArray(t)||(t=[t]),t.forEach((e=>{"string"==typeof e?e.split(",").map((e=>e.trim())).forEach((e=>{const t=document.getElementById(e);t&&this.dependants.push(t)})):this.dependants.push(e)}))),e||(e=this.hasAttribute("on")),[this.value,this._value]=[e,e],this.initElement()}initElement(){this.appendChild(r.c.div(void 0,"knob","click-action").make()),this.indicator=this.appendChild(r.c.h4(this._value?"check":"close").class("icon","indicator").make()),this.addEventListener("click",(()=>this.toggle()))}toggle(){return this.value=!this.value,this.value}}i.c.onDOMContentLoaded().then((()=>customElements.define("switch-input",o)))},1176:(e,t,n)=>{"use strict";n.d(t,{c:()=>O});var r=n(96),i=n(6316),s=n(992),o=n(9684);class a{static isInStyleTag(e,t){return null!==this.getContainingStyleTag(e,t)}static getContainingStyleTag(e,t){const n=getSelection();if(n&&0!==n.rangeCount){const r=n.getRangeAt(0);return i.c.queryAncestors(r.commonAncestorContainer,`.${e}`,!0).filter((e=>void 0===t||e.getAttribute("value")===t))[0]??null}return null}static makeTempTextNode(e,t=(()=>{}),n=(()=>{})){const i=r.c.text("​"),s=()=>{if(0!==i.textContent.replace("​","").length){const n=i.textContent.indexOf("​");-1!==n&&i.replaceData(n,1,""),t(),e.removeEventListener("keyup",o),e.removeEventListener("focusout",o),e.removeEventListener("input",s)}};e.addEventListener("input",s);const o=t=>{if(!t.defaultPrevented){const r=0===(i.textContent??"").replace("​","").length,a=getSelection(),c=null!==a&&0!==a.rangeCount&&a.getRangeAt(0).commonAncestorContainer.contains(i);!r||t instanceof KeyboardEvent&&c||(i.remove(),n(),e.removeEventListener("keyup",o),e.removeEventListener("focusout",o),e.removeEventListener("input",s))}};return e.addEventListener("keyup",o),e.addEventListener("focusout",o),i}static getStyleMap(e,t=a.DEFAULT_VALUES_BY_CLASS[e]){switch(e){case"small":case"big":case"bold":case"italic":case"underlined":case"strikethrough":default:return{};case"text-color":return{color:t};case"background-color":return{backgroundColor:t}}}static applyStyleTag(e,t,n=a.DEFAULT_VALUES_BY_CLASS[t]){let o=!1;s.c.deepReplaceAll(e,"​","");const c=getSelection();if(c&&0!==c.rangeCount){const l=c.getRangeAt(0),u=l.collapsed,h=l.commonAncestorContainer,d=i.c.queryAncestors(h,`.${t}`,!0)[0],f=void 0!==d;o=f&&d.getAttribute("value")!==n;let p=Array.from(l.extractContents().childNodes);const m=[];if(f)if(i.c.isChain(d))p.toReversed().forEach((e=>l.insertNode(e))),d.replaceWith(...Array.from(d.childNodes));else{const t=i.c.getChainEnd(d),n=document.createElement("div");l.insertNode(n);const r=Array.from(t.childNodes);d.replaceWith(...Array.from(d.childNodes)),r.forEach((t=>{const r=d.cloneNode();if(u&&n.previousSibling===t){m.push(r),s.c.swap(t,r),r.appendChild(t);const n=r.parentElement.insertBefore(this.makeTempTextNode(e),r.nextSibling);l.selectNode(n),l.collapse()}else s.c.swap(t,r),r.appendChild(t)})),n.parentElement?.replaceWith(...p)}else{const i=r.c.span().class(t).attr("value",n).style(this.getStyleMap(t,n)).children(...p).make();if(l.insertNode(i),0===p.length){const t=i.appendChild(this.makeTempTextNode(e,(()=>{}),(()=>{i.remove(),e.normalize()})));l.selectNode(t),l.collapse()}else l.selectNodeContents(i)}p=p.flatMap((e=>s.c.getLeafNodes(e)));for(const t of a.STYLE_TAG_CLASSES)Array.from(e.getElementsByClassName(t)).forEach((e=>{0!==i.c.queryAncestors(e,`.${t}`).length&&e.replaceWith(...Array.from(e.childNodes))}));let g,y;u&&(g=document.createElement("div"),y=Array.from(l.extractContents().childNodes),l.insertNode(g));for(const t of a.STYLE_TAG_CLASSES)Array.from(e.getElementsByClassName(t)).forEach((e=>{if(!m.includes(e)){let n=e.nextSibling;for(;null!==n&&n.nodeType===Node.TEXT_NODE&&0===n.textContent.length;)n=n.nextSibling;n instanceof Element&&n.classList.contains(t)&&n.getAttribute("value")===e.getAttribute("value")&&(n.prepend(...Array.from(e.childNodes)),e.remove())}}));u&&(l.setStartAfter(g),l.setEndAfter(g),g.replaceWith(...y));const v=e.getElementsByTagName("span");Array.from(v).forEach((e=>{e.textContent||e.remove()})),0!==p.length&&(l.setStartBefore(p[0]),l.setEndAfter(p.at(-1))),e.normalize(),s.c.onEach(e,(e=>{if(e.nodeType===Node.TEXT_NODE&&e.textContent.length>1){const t=e,n=t.textContent.indexOf("​");-1!==n&&t.deleteData(n,1)}}))}return o?this.applyStyleTag(e,t,n):this.isInStyleTag(t,n)}}!function(e){e.DEFAULT_VALUES_BY_CLASS={small:null,big:null,bold:null,italic:null,underlined:null,strikethrough:null,"text-color":"#000000","background-color":"#000000"},e.STYLE_TAG_CLASSES=o.c.keys(e.DEFAULT_VALUES_BY_CLASS)}(a||(a={}));const c=a;var l=n(8392),u=n(8440),h=n(4440),d=n(1244),f=n(3236),p=n(3868),m=n(8828),g=n(9368);class y extends HTMLElement{constructor(e){super(),this.src=this.getAttribute("src")??e,this.initElement()}initElement(){this.contents=this.appendChild(document.createElement("iframe")),this.contents.classList.add("contents"),this.contents.src=this.src,this.setAttribute("src",this.src)}}customElements.define("iframe-container",y);var v=n(908),_=n(4388),w=n(7936),b=n(3935),E=n(928),T=n(1724),S=n(2464),C=n(9560),A=n(8144),k=n(5752),I=n(8036),x=n(8356);class D extends HTMLElement{constructor(){super(),this.initElement()}initElement(){this.classList.add("boxed","flex-rows","center-content","in-section-gap"),this.appendChild(r.c.div(void 0,"flex-columns","main-axis-space-between","cross-axis-center","min-section-gap").children(r.c.p("Anonieme suggestie?").class("italic","no-margin"),this.anonymousSwitch=new g.c(!1)).make()),this.anonymousSwitch.addEventListener("input",(()=>this.feedbackText.lastElementChild.toggleAttribute("hidden",this.anonymousSwitch.value))),this.subjectInput=this.appendChild(r.c.input.text().class("subject-input").attr("invalid").placeholder("Onderwerp...").maxLength(128).make()),this.bodyInput=this.appendChild(r.c.textarea().class("message-input").attr("invalid").placeholder("Bericht...").maxLength(5096).attr("no-resize").make()),this.submitButton=this.appendChild(r.c.button().class("flex-columns","cross-axis-center","in-section-gap").attr("disabled").children(r.c.h4("Versturen"),r.c.h4("send").class("icon")).make()),this.feedbackText=this.appendChild(r.c.div(void 0,"feedback","flex-rows","center-content","in-section-gap","section-padding").attr("hidden").children(r.c.h4("Bedankt voor je suggestie!").class("no-margin"),r.c.h4("We zullen z.s.m. contact met je opnemen.").class("subtitle","no-margin")).make()),Promise.all([(0,A.iA)(),(0,b.qM)(S.c.Permission.CREATE_IDEA_BOX_SUBMISSIONS)]).then((([e,t])=>{e?t.CREATE_IDEA_BOX_SUBMISSIONS?(this.addEventListener("input",(()=>{this.submitButton.disabled=!this.subjectInput.value||!this.bodyInput.value,this.subjectInput.toggleAttribute("invalid",0===this.subjectInput.value.length),this.bodyInput.toggleAttribute("invalid",0===this.bodyInput.value.length)})),this.submitButton.addEventListener("click",(()=>{this.submitButton.disabled=!0,D.USER_DB.getById(e.uid).then((t=>{if(t){const n=new T.O(I.c.generateID(),this.anonymousSwitch.value?"anonymous":{id:e.uid,name:`${t?.first_name} ${t?.family_name}`},new Date,this.subjectInput.value,this.bodyInput.value);D.SUBMISSION_DB.write(n).then((()=>{this.childNodes.forEach((e=>{e instanceof HTMLElement&&(e.hidden=!0),this.feedbackText.hidden=!1}))})).catch((e=>{k.c.error((0,w.c)(e)),this.submitButton.disabled=!1}))}else k.c.error((0,w.c)(void 0)),this.submitButton.disabled=!1})).catch((e=>{k.c.error((0,w.c)(e)),this.submitButton.disabled=!1}))}))):(this.anonymousSwitch.disabled=this.subjectInput.disabled=this.bodyInput.disabled=!0,this.submitButton.firstChild.textContent="Versturen niet mogelijk",this.submitButton.lastChild.textContent="cancel_schedule_send"):(this.anonymousSwitch.disabled=this.subjectInput.disabled=this.bodyInput.disabled=!0,this.submitButton.firstChild.textContent="Log in om te gebruiken",this.submitButton.lastChild.textContent="login",this.submitButton.addEventListener("click",(()=>location.href=x.c.createLinkBackURL("/inloggen.html",location.href).toString())))}))}}D.SUBMISSION_DB=new E.c,D.USER_DB=new C.c;const N=D;customElements.define("idea-box",D);class R extends HTMLElement{set isCompact(e){this.toggleAttribute("compact",e)}get isCompact(){return this.hasAttribute("compact")}get value(){return f.c.serialize(this.body)}set value(e){this.selectedElement=null,s.c.empty(this.body);const t=f.c.deserialize(e);for(const e of t)e instanceof HTMLElement?this.insert(R.inferSectionName(e),e,[this.body,1/0]):e.nodeType===Node.TEXT_NODE?this.insert("paragraph",r.c.p(e.textContent).make(),[this.body,1/0]):this.body.appendChild(e)}get placeholder(){return this.style.getPropertyValue("--placeholder")}set placeholder(e){this.style.setProperty("--placeholder",`"${e}"`)}set selectedElement(e){const t=this._selectedElement;t?.removeAttribute("selected"),this._selectedElement=e,e?.toggleAttribute("selected",!0)}get selectedElement(){return this.body.contains(this._selectedElement)||(this.selectedElement=null),this._selectedElement}get insertionPosition(){if(this.selectedElement){let e=this.selectedElement;for(;e.parentNode!==this.body;)e=e.parentNode;return[this.body,s.c.getChildIndex(this.body,e)+1]}return[this.body,1/0]}insert(e,t,n){let i;if(t.setAttribute("do-serialize",""),t.setAttribute("type",e),t instanceof HTMLAnchorElement)i=r.c.div(void 0,"specialized-container","element-container","flex-rows","in-section-gap").children((()=>{const e=[t];r.c.input.url(t.getAttribute("href")??"").onValueChanged((e=>t.href=e)).placeholder("Koppeling...").onMake((t=>e.push(t))).make();const n=new g.c("_blank"===t.target);return n.addEventListener("input",(()=>{n.value?t.setAttribute("target","_blank"):t.removeAttribute("target")})),e.push(r.c.div(void 0,"flex-columns","cross-axis-center","in-section-gap").children(r.c.label("In nieuw tabblad openen?"),n).make()),e})).make();else if("MULTISOURCE-ATTACHMENT"===t.tagName||"MULTISOURCE-IMAGE"===t.tagName){const e=t;i=r.c.div(void 0,"specialized-container","element-container","flex-rows","in-section-gap").children((()=>{const n=[t];let i;r.c.div(void 0,"origin-selector","flex-columns","cross-axis-center","in-section-gap").children(r.c.label("Bron"),i=r.c.select({"firebase-storage-public":"Firebase cloud-opslag (openbaar)","firebase-storage-protected":"Firebase cloud-opslag (beveiligd)",external:"Directe link"}).value(e.getAttribute("origin")).onValueChanged((t=>{e.origin=t,o.placeholder="external"===t?"Link naar bestand...":"Bestandspad..."})).make()).onMake((e=>n.push(e))).make();const s=()=>e.src=o.value,o=r.c.input.text().class("src-input").placeholder("Bestandspad...").value(e.getAttribute("src")??"").on("input",(()=>{h.c.setDelayedCallback(s,500)})).onMake((e=>n.push(e))).make();if("MULTISOURCE-IMAGE"===t.tagName){let e;r.c.div(void 0,"width-selector","flex-columns","cross-axis-center","in-section-gap").children(e=r.c.label(`Breedte (${t.style.width||"100%"})`).make(),r.c.input.range(d.c.parse(t.style.width.slice(0,-1),100),0,100,1).onValueChanged((n=>{t.style.width=`${n}%`,e.textContent=`Breedte (${n}%)`}))).onMake((e=>n.push(e))).make()}return n})).make()}else"IDEA-BOX"===t.tagName?(t.style.pointerEvents="none",i=t):i=t;i.style.flexGrow="1";const o=r.c.div(void 0,"element-container","flex-columns","main-axis-space-between","cross-axis-center","in-section-gap").children(i,r.c.div(void 0,"controls","flex-columns","in-section-gap").children(r.c.iconButton("move_up",(()=>{o.previousElementSibling&&s.c.swap(o,o.previousElementSibling)}),"Naar boven"),r.c.iconButton("move_down",(()=>{o.nextElementSibling&&s.c.swap(o,o.nextElementSibling)}),"Naar beneden"),r.c.iconButton("remove",(()=>o.remove()),"Verwijderen"))).make();if(function(e,...t){const[n,r]=e;if(r<=0)for(const e of t)n.insertBefore(e,n.firstChild);else if(r>=n.childNodes.length)for(const e of t)n.appendChild(e);else for(const e of t)n.insertBefore(e,n.childNodes[r])}(n,o),R.ALL_TEXT.includes(e)&&(t.classList.add("text-input"),t.setAttribute("contenteditable","plaintext-only"),t.setAttribute("supports-style-tags",""),t.addEventListener("keydown",(e=>{i.textContent||"Backspace"!==e.key||o.remove()})),t.focus()),e in R.EXCLUDED_INSERTABLE_SUBSECTIONS){t.setAttribute("insertion-target","");const n=s.c.extractChildren(t);for(const e of n)e instanceof HTMLElement?this.insert(R.inferSectionName(e),e,[t,1/0]):t.appendChild(e);t.prepend(this.makeSectionTypes((()=>{if(this.selectedElement&&t.contains(this.selectedElement)){let e=this.selectedElement;for(;e.parentNode!==t;)e=e.parentNode;return[t,s.c.getChildIndex(t,e)+1]}return[t,1/0]}),R.EXCLUDED_INSERTABLE_SUBSECTIONS[e]))}}stylableElementSelected(){const e=getSelection();if(e&&0!==e.rangeCount){const t=e.getRangeAt(0);return this.body.contains(t.commonAncestorContainer)&&0!==i.c.queryAncestors(t.commonAncestorContainer,"[supports-style-tags]",!0).length}return!1}constructor(e){super(),this._selectedElement=null,this.initElement(),void 0!==e&&(this.value=e)}makeStyleTagToggle(e,t,n,i,s){const o=()=>{s&&c.isInStyleTag(s)&&c.applyStyleTag(this.body,s),c.applyStyleTag(this.body,e)},a=r.c.iconButton(t,((e,t)=>{t.hasAttribute("disabled")||o()}),n).attr("can-unselect").attr("disabled").onMake((t=>{const n=()=>{t.toggleAttribute("disabled",!this.stylableElementSelected()||!this.body.contains(document.activeElement)),t.toggleAttribute("selected",c.isInStyleTag(e)&&this.body.contains(document.activeElement))};document.addEventListener("selectionchange",n),document.addEventListener("focusout",n)})).make();return i&&this.addEventListener("keydown",(e=>{(!i[1]||"alt"===i[1]&&e.altKey||"ctrl"===i[1]&&e.ctrlKey||"shift"===i[1]&&e.shiftKey)&&e.key.toLowerCase()===i[0].toLowerCase()&&!a.hasAttribute("disabled")&&(e.preventDefault(),o())})),a}makeColorBulb(e,t){return r.c.div().class("color-bulb","click-action","center-content").attr("value",e).children(r.c.p("⬤").class("color-bulb-indicator","no-margin").style({color:e})).on("click",(()=>t(e)))}makeColorPicker(e,t,n,i){return r.c.folderElement("down",250,!0).heading(r.c.p(t).class("icon").tooltip(n)).class("color-picker","category").attr("disabled").noFocus().canSelect(!1).children(r.c.div(void 0,"color-category","flex-columns").children(...d.c.range(R.PICKER_BASE_COLORS.length-1,0,1,!0).map((t=>this.makeColorBulb(u.c.mix("#000000","#ffffff",t/(R.PICKER_BASE_COLORS.length-1)),e)))),r.c.div(void 0,"color-category","flex-columns").children(...R.PICKER_BASE_COLORS.map((t=>this.makeColorBulb(t,e)))),...R.PICKER_SHADE_RATIOS.map((t=>r.c.div(void 0,"color-category","flex-columns").children(...R.PICKER_BASE_COLORS.map((n=>this.makeColorBulb(u.c.mix(n,"#ffffff",t),e)))))),...R.PICKER_SHADE_RATIOS.toReversed().map((t=>r.c.div(void 0,"color-category","flex-columns").children(...R.PICKER_BASE_COLORS.map((n=>this.makeColorBulb(u.c.mix(n,"#000000",t),e))))))).onMake((e=>{const t=()=>{const t=c.getContainingStyleTag(i)?.getAttribute("value")?.toLowerCase();Array.from(e.getElementsByClassName("color-bulb")).forEach((e=>{const n=e.getAttribute("value");e.toggleAttribute("selected",n===t)})),e.heading.style.color=t??"#000000",e.toggleAttribute("disabled",!this.stylableElementSelected()||!this.body.contains(document.activeElement))};document.addEventListener("selectionchange",t),document.addEventListener("focusout",t)})).make()}initElement(){let e,t;this.classList.add("boxed","flex-rows","cross-axis-center","section-gap"),this.toolbar=this.appendChild(r.c.div(void 0,"toolbar","flex-columns","main-axis-space-evenly","section-gap").canSelect(!1).children(r.c.div(void 0,"styling","flex-columns","in-section-gap").children(this.makeStyleTagToggle("small","text_decrease","Kleiner (ctrl+<)",["<","ctrl"],"big"),this.makeStyleTagToggle("big","text_increase","Groter (ctrl+>)",[">","ctrl"],"small"),this.makeStyleTagToggle("bold","format_bold","Dikgedrukt (ctrl+b)",["b","ctrl"]),this.makeStyleTagToggle("italic","format_italic","Cursief (ctrl+i)",["i","ctrl"]),this.makeStyleTagToggle("underlined","format_underlined","Onderstreept (ctrl+u)",["u","ctrl"]),this.makeStyleTagToggle("strikethrough","format_strikethrough","Doorgestreept (ctrl+s)",["s","ctrl"]),this.makeColorPicker((e=>c.applyStyleTag(this.body,"text-color",e)),"format_color_text","Tekstkleur","text-color"),this.makeColorPicker((e=>c.applyStyleTag(this.body,"background-color",e)),"format_ink_highlighter","Markeringskleur","background-color"),e=r.c.folderElement("down",250).class("category").tooltip("Tekst uitlijnen").heading(r.c.p("format_align_justify").class("icon")).children(r.c.div(void 0,"flex-columns").children(...t=[r.c.iconButton("format_align_left",(()=>{}),"Links uitlijnen").attr("selected").attr("value","align-left").make(),r.c.iconButton("format_align_center",(()=>{}),"Centreren").attr("value","align-center").make(),r.c.iconButton("format_align_right",(()=>{}),"Rechts uitlijnen").attr("value","align-right").make(),r.c.iconButton("format_align_justify",(()=>{}),"Spreiden").attr("value","align-justify").make()])).onMake((n=>{for(const n of t)n.addEventListener("click",(r=>{for(const e of t)e.toggleAttribute("selected",n===e);e.heading.textContent=n.textContent,this.selectedElement&&(this.selectedElement.classList.remove(...t.map((e=>e.getAttribute("value")))),this.selectedElement.classList.add(n.getAttribute("value")))}))})).make()),this.makeSectionTypes((()=>this.insertionPosition))).make()),this.body=this.appendChild(r.c.div(void 0,"body","rich-text","flex-rows").on("focusin",(n=>{let r=n.target;if(r instanceof HTMLElement){let n=r;for(;!n.hasAttribute("do-serialize");){const e=n.querySelector("[do-serialize]");if(e instanceof HTMLElement)n=e;else{if(!n.parentElement){n=null;break}n=n.parentElement}}if(this.selectedElement=n,this.selectedElement){for(const e of t)e.removeAttribute("selected");const n=t.find((e=>this.selectedElement.classList.contains(e.getAttribute("value"))));n?.setAttribute("selected",""),e.heading.textContent=n?.textContent??"format_align_left"}}})).on("input",(()=>{const e=this.body.getElementsByTagName("span");Array.from(e).forEach((e=>{e.textContent||e.remove()}))})).make()),document.addEventListener("focusin",(e=>{e.target instanceof Node&&!this.contains(e.target)&&(this.selectedElement=null)})),document.addEventListener("scroll",(()=>{requestAnimationFrame((()=>{const e=this.toolbar.getBoundingClientRect(),t=this.getBoundingClientRect();this.toolbar.style.top=_.c.isSlimmerOrEq(_.c.Viewport.DESKTOP_SLIM)?`clamp(var(--in-section-gap), calc(${-t.top}px + 4rem), calc(${t.height-e.height}px - var(--in-section-gap) / 2))`:`clamp(var(--in-section-gap), ${-t.top}px, calc(${t.height-e.height}px - var(--in-section-gap) / 2))`}))})),new ResizeObserver((()=>requestAnimationFrame((()=>{this.style.paddingTop=`calc(${this.toolbar.getBoundingClientRect().height}px + 2 * var(--in-section-gap))`})))).observe(document.body)}makeSectionTypes(e,t=[]){return r.c.div(void 0,"section-types","flex-columns","cross-axis-center","in-section-gap","no-bullet").canSelect(!1).children(!t.includes("shortcut")&&r.c.iconButton("add_link",(()=>{this.insert("shortcut",r.c.a().class("align-justify").style({fontSize:"16px"}).make(),e())}),"Snelkoppeling toevoegen"),!t.includes("attachment")&&r.c.iconButton("attach_file_add",(()=>{const t=new p.c;t.classList.add("align-justify"),this.insert("attachment",t,e())}),"Bijlage toevoegen"),!t.includes("image")&&r.c.iconButton("add_photo_alternate",(()=>{const t=new m.c;t.classList.add("align-center"),this.insert("image",t,e())}),"Afbeelding toevoegen"),!l.c.includesAll(t,...R.ALL_HEADERS)&&r.c.folderElement().class("category").foldDir("down").closingDelay(250).heading((n=>t.includes("title")?n.contents.firstElementChild:r.c.iconButton("title",(()=>{this.insert("title",r.c.h1().class("title","align-justify").style({fontSize:"40px"}).make(),e())}),"Titel toevoegen"))).children(!t.includes("h1")&&r.c.iconButton("format_h1",(()=>{this.insert("h1",r.c.h1().class("align-justify").style({fontSize:"32px"}).make(),e())}),"Nieuwe kop 1"),!t.includes("h2")&&r.c.iconButton("format_h2",(()=>{this.insert("h2",r.c.h2().class("align-justify").style({fontSize:"24px"}).make(),e())}),"Nieuwe kop 2"),!t.includes("h3")&&r.c.iconButton("format_h3",(()=>{this.insert("h3",r.c.h3().class("align-justify").style({fontSize:"18.5px"}).make(),e())}),"Nieuwe kop 3")).tooltip("Nieuwe kop/titel"),!t.includes("paragraph")&&r.c.iconButton("subject",(()=>{this.insert("paragraph",r.c.p().class("align-justify").style({fontSize:"16px"}).make(),e())}),"Nieuwe paragraaf"),!t.includes("list")&&r.c.iconButton("format_list_bulleted",(()=>{this.insert("list",r.c.ul().make(),e())}),"Nieuwe lijst"),!t.includes("numbered-list")&&r.c.iconButton("format_list_numbered",(()=>{this.insert("numbered-list",r.c.ol().make(),e())}),"Nieuwe genummerde lijst"),!l.c.includesAll(t,...R.ALL_WIDGETS)&&r.c.folderElement("down",250).class("category").heading(r.c.p("widgets").class("icon").tooltip("Widgets")).children(!t.includes("newspaper")&&r.c.iconButton("newspaper",(()=>{const t=new y(R.NEWSPAPER_SRC);t.classList.add("newspaper"),t.classList.add("align-center"),this.insert("newspaper",t,e())}),"Verenigingsblad toevoegen"),!t.includes("idea-box")&&r.c.iconButton("emoji_objects",(()=>{const t=new N;t.classList.add("align-center"),this.insert("idea-box",t,e())}),"Ideeënbox toevoegen"))).make()}}R.PICKER_BASE_COLORS=["#FF0000","#FF8700","#FFD300","#DEFF0A","#A1FF0A","#0AFF99","#0AEFFF","#147DF5","#580AFF","#BE0AFF"],R.PICKER_SHADE_RATIOS=[.25,.5,.75],function(e){const t=["shortcut","attachment","image","title","h1","h2","h3","paragraph","list","numbered-list","newspaper","idea-box"];e.isRichTextSectionName=function(e){return t.some((t=>e===t))},e.ALL_HEADERS=["title","h1","h2","h3"],e.ALL_TEXT=[...e.ALL_HEADERS,"paragraph","shortcut"],e.ALL_WIDGETS=["newspaper","idea-box"],e.NEWSPAPER_SRC="https://www.bladnl.nl/bladen/tblaadje/pluginfull",e.EXCLUDED_INSERTABLE_SUBSECTIONS={list:["list","numbered-list"],"numbered-list":["list","numbered-list"]},e.inferSectionName=function(e){if("A"===e.tagName)return"shortcut";if("MULTISOURCE-ATTACHMENT"===e.tagName)return"attachment";if("MULTISOURCE-IMAGE"===e.tagName)return"image";if(e instanceof HTMLHeadingElement)return"H1"===e.tagName?e.classList.contains("title")?"title":"h1":"H2"===e.tagName?"h2":"h3";if(e instanceof HTMLParagraphElement)return"paragraph";if(e instanceof HTMLUListElement)return"list";if(e instanceof HTMLOListElement)return"numbered-list";if("IFRAME-CONTAINER"===e.tagName&&e.classList.contains("newspaper"))return"newspaper";if("IDEA-BOX"===e.tagName)return"idea-box";throw Error(`could not infer section type of ${e.outerHTML}`)}}(R||(R={}));const O=R;v.c.onDOMContentLoaded().then((()=>customElements.define("rich-text-input",R)))},3236:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var r=n(992),i=n(1176);const s=["onfullscreenchange","onfullscreenerror","onabort","onanimationcancel","onanimationend","onanimationiteration","onanimationstart","onauxclick","onbeforeinput","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncompositionend","oncompositionstart","oncompositionupdate","oncontextmenu","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onformdata","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectionchange","onselectstart","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel"];class o{static escape(e){for(const t in this.ESCAPE_CONFIG)e=e.replaceAll(t,this.ESCAPE_CONFIG[t]);return e}static unescape(e){for(const t in this.ESCAPE_CONFIG)e=e.replaceAll(this.ESCAPE_CONFIG[t],t);return e}static serialize(e){let t="";return e.childNodes.forEach((e=>{const n=this.finalize(e);for(const e of n)t+=e instanceof Element?e.outerHTML:e.textContent??""})),t}static getStrippedClone(e){const t=e.cloneNode();for(;0!==t.attributes.length;)t.removeAttribute(t.attributes[0].name);for(;t.firstChild;)t.firstChild.remove();return["left","center","right","justify"].forEach((n=>{e.classList.contains(`align-${n}`)&&t.classList.add(`align-${n}`)})),t}static finalize(e){if(e.nodeType===Node.TEXT_NODE)return[document.createTextNode(e.textContent??"")];if(e instanceof HTMLElement){if(e.hasAttribute("do-serialize")){const t=e.getAttribute("type"),n=this.getStrippedClone(e);if(t&&i.c.isRichTextSectionName(t)){switch(t){case"attachment":case"image":return n.setAttribute("origin",e.getAttribute("origin")??"firebase-storage-public"),n.setAttribute("src",e.getAttribute("src")??""),n.style.width=e.style.width,[n];case"title":n.classList.add("title");case"shortcut":e.hasAttribute("href")&&n.setAttribute("href",e.getAttribute("href")),"_blank"===e.getAttribute("target")&&n.setAttribute("target","_blank");case"h1":case"h2":case"h3":case"paragraph":return e.childNodes.forEach((e=>n.appendChild(e.cloneNode(!0)))),r.c.onEach(n,(e=>{e instanceof Element&&e.removeAttribute("value")})),e.style.fontSize&&(n.style.fontSize=e.style.fontSize),n.innerHTML=n.innerHTML.replaceAll("\n","<br>"),[n];case"list":case"numbered-list":return e.childNodes.forEach((e=>n.append(...this.finalize(e)))),[n];case"newspaper":return n.setAttribute("src",e.getAttribute("src")??""),n.classList.add("newspaper"),[n];case"idea-box":return[n]}throw new o.SerializationError(`no finalization implementation found for section type "${t}"`)}throw null===t?new o.SerializationError("element was marked with do-serialize attribute, but no type was provided."):new o.SerializationError(`unrecognized section type "${t}".`)}return e.classList.contains("element-container")?Array.from(e.childNodes).filter((e=>e instanceof Element&&(e.hasAttribute("do-serialize")||e.classList.contains("element-container")))).flatMap((e=>this.finalize(e))):[]}throw new o.SerializationError("given node is not a text, nor an element.")}static deserialize(e){try{const t=(new DOMParser).parseFromString(e,"text/html");return r.c.onEach(t,(e=>{e instanceof Element&&("SCRIPT"===e.tagName?e.remove():e instanceof HTMLAnchorElement&&e.addEventListener("click",(()=>{e.href&&!e.hasAttribute("download")&&("_blank"===e.target?open(e.href):location.href=e.href)})),s.forEach((t=>e.removeAttribute(t))),Array.from(e.attributes).forEach((t=>{t.value.toLowerCase().includes("javascript:")&&e.removeAttribute(t.name)})))})),Array.from(t.body.childNodes)}catch(e){throw new o.DeserializationError(e instanceof Error?e.message:"unknown cause")}}}o.ESCAPE_CONFIG={"<":"&lt;",">":"&gt;",'"':"&quot;","=":"&#61;"},function(e){class t extends Error{constructor(e){super(`failed to serialize: ${e}`)}}e.SerializationError=t;class n extends Error{constructor(e){super(`failed to deserialize: ${e}`)}}e.DeserializationError=n}(o||(o={}));const a=o},7936:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(8824);const i="Er ging iets mis, probeer het later opnieuw.",s={"auth/invalid-credential":"Onjuiste inloggegevens, check je e-mailadres en/of wachtwoord.","auth/email-already-in-use":"Er is al een account geregistreerd met dat e-mailadres, gebruik a.u.b. een andere.","auth/insufficient-permission":"Je hebt geen toestemming om dit te doen.","auth/invalid-email":"Het gegeven e-mailadres is ongeldig.","auth/too-many-requests":"Te veel inlogpogingen, probeer het later opnieuw.","already-exists":"Bestand bestaat al.",cancelled:"Geannuleerd.","not-found":"Het opgevraagde bestand bestaat niet (meer).","permission-denied":"Je bent niet gemachtigd om dit uit te voeren.",unauthenticated:"Je identiteit kon niet geverifieerd worden. Probeer (opnieuw) in te loggen.",unavailable:"Onze database is momenteel niet beschikbaar, probeer het later opnieuw.",unknown:i};function o(e){return console.log(e),e&&e instanceof r.kx?(console.log(e.code),e.code in s?s[e.code]:i):i}},3935:(e,t,n)=>{"use strict";n.d(t,{kL:()=>h,qM:()=>u});var r=n(8144),i=n(9560),s=n(9928),o=n(9684);function a(e){return Array.isArray(e)?e:[e]}n(908);const c=new i.c;function l(e,t,n){const r=new Promise(((e,r)=>{if(n){const n=s.c.get(`permissions-${t}`);n?e(n):r(new Error(`useCache is true, but permissions of user ${t} are not in the cache`))}else c.getById(t).then((t=>e(t?.permissions??[]))).catch(r)}));return new Promise(((t,n)=>{r.then((n=>{t(o.c.mapToObject(e,(e=>n.includes(e))))})).catch(n)}))}function u(e,t=!1){const n=a(e);return new Promise(((e,i)=>{(0,r.iA)().then((r=>{r?t?l(n,r.uid,!0).then(e).catch((()=>l(n,r.uid,!1).then(e).catch(i))):l(n,r.uid,!1).then(e).catch(i):e(o.c.mapToObject(n,(e=>!1)))})).catch(i)}))}function h(e,t,n=!1,i=!0,s="all"){const c=a(e);(0,r.iA)().then((r=>{Array.isArray(e)&&0===e.length?t(!0,o.c.mapToObject(e,(()=>!1))):r?(n&&l(c,r.uid,!0).then((e=>t("all"===s?o.c.every(e,((e,t)=>t)):o.c.some(e,((e,t)=>t)),e))).catch((()=>{i||t(!1,o.c.mapToObject(c,(()=>!1)))})),n&&!i||l(c,r.uid,!1).then((e=>t("all"===s?o.c.every(e,((e,t)=>t)):o.c.some(e,((e,t)=>t)),e))).catch(console.error)):t(!1,o.c.mapToObject(c,(()=>!1)))})).catch(console.error)}},7632:(e,t,n)=>{"use strict";n.d(t,{S:()=>r,c:()=>i});class r{constructor(e,t){this.id=e,this.components=t}getComponent(e){return e instanceof r.Component?this.components.find((t=>t===e)):this.components.find((t=>t instanceof e))}hasComponent(e){return void 0!==this.getComponent(e)}satisfies(e){return!(e.id&&this.id!==e.id||e.notId&&this.id===e.notId||0===e.limit)}equals(e){return e.id===this.id}}!function(e){e.Component=class{validate(e){return this.dependencies.every((t=>e.components.some((e=>e instanceof t))))&&this.validateValues(e)}canBeRemovedFrom(e){return e.hasComponent(this.Class)&&!e.components.some((e=>e.dependencies.some((e=>this instanceof e))))}canBeAddedTo(e){return this.dependencies.every((t=>e.hasComponent(t)))&&!e.hasComponent(this.Class)}}}(r||(r={}));class i{constructor(){this.writeHandlers=[],this.deleteHandlers=[]}set onWrite(e){this.writeHandlers.push(e)}write(...e){return new Promise(((t,n)=>{this.doWrite(...e).then((n=>{t(n),this.writeHandlers.forEach((t=>t(...e)))})).catch(n)}))}set onDelete(e){this.deleteHandlers.push(e)}delete(...e){return new Promise(((t,n)=>{this.doDelete(...e).then((n=>{t(n),this.deleteHandlers.forEach((t=>t(...e)))})).catch(n)}))}}},2464:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r,i=n(8392),s=n(9684);!function(e){let t;!function(e){e.UPDATE_SETTINGS="UPDATE_SETTINGS",e.READ_MEMBER_ARTICLES="READ_MEMBER_ARTICLES",e.CREATE_ARTICLES="CREATE_ARTICLES",e.UPDATE_ARTICLES="UPDATE_ARTICLES",e.DELETE_ARTICLES="DELETE_ARTICLES",e.UPLOAD_FILES="UPLOAD_FILES",e.DOWNLOAD_PROTECTED_FILES="DOWNLOAD_PROTECTED_FILES",e.CREATE_IDEA_BOX_SUBMISSIONS="CREATE_IDEA_BOX_SUBMISSIONS",e.READ_IDEA_BOX_SUBMISSIONS="READ_IDEA_BOX_SUBMISSIONS",e.CREATE_EVENTS="CREATE_EVENTS",e.UPDATE_EVENTS="UPDATE_EVENTS",e.DELETE_EVENTS="DELETE_EVENTS",e.REGISTER_FOR_EVENTS="REGISTER_FOR_EVENTS",e.DEREGISTER_FOR_EVENTS="DEREGISTER_FOR_EVENTS",e.READ_EVENT_COMMENTS="READ_EVENT_COMMENTS",e.UPDATE_OWN_USER_INFO="UPDATE_OWN_USER_INFO",e.UPDATE_OWN_PERMISSIONS="UPDATE_OWN_PERMISSIONS",e.READ_OTHER_USER_INFO="READ_OTHER_USER_INFO",e.UPDATE_OTHER_USER_INFO="UPDATE_OTHER_USER_INFO",e.UPDATE_OTHER_USER_PERMISSIONS="UPDATE_OTHER_USER_PERMISSIONS",e.VIEW_ADMIN_PANEL="VIEW_ADMIN_PANEL"}(t=e.Permission||(e.Permission={})),e.ALL=Object.values(t),Object.freeze(e.ALL);const n={[t.UPDATE_SETTINGS]:"Site-instellingen aanpassen",[t.READ_MEMBER_ARTICLES]:"Berichten voor leden lezen",[t.CREATE_ARTICLES]:"Berichten plaatsen",[t.DELETE_ARTICLES]:"Berichten verwijderen",[t.UPDATE_ARTICLES]:"Berichten bewerken",[t.UPLOAD_FILES]:"Bestanden uploaden",[t.DOWNLOAD_PROTECTED_FILES]:"Beveiligde bestanden downloaden",[t.CREATE_EVENTS]:"Activiteiten toevoegen",[t.UPDATE_EVENTS]:"Activiteit-info bewerken",[t.DELETE_EVENTS]:"Activiteiten verwijderen",[t.REGISTER_FOR_EVENTS]:"Inschrijven voor activiteiten",[t.DEREGISTER_FOR_EVENTS]:"Uitschrijven van activiteiten",[t.READ_EVENT_COMMENTS]:"Activiteit-opmerkingen lezen",[t.CREATE_IDEA_BOX_SUBMISSIONS]:"Ideeënbox gebruiken",[t.READ_IDEA_BOX_SUBMISSIONS]:"Ideeënbox suggesties lezen",[t.UPDATE_OWN_USER_INFO]:"Account-info van henzelf bewerken",[t.UPDATE_OWN_PERMISSIONS]:"Account-machtigingen van henzelf bewerken",[t.READ_OTHER_USER_INFO]:"Account-info van anderen zien",[t.UPDATE_OTHER_USER_INFO]:"Account-info van anderen bewerken",[t.UPDATE_OTHER_USER_PERMISSIONS]:"Account-machtigingen van anderen bewerken",[t.VIEW_ADMIN_PANEL]:"Administratie-paneel zien"};Object.freeze(n),e.translate=function(e){const t=n[e];if(void 0===t)throw new Error(`unknown permission: "${e}"`);return t},e.PRESETS={Lid:[t.READ_MEMBER_ARTICLES,t.DOWNLOAD_PROTECTED_FILES,t.REGISTER_FOR_EVENTS,t.DEREGISTER_FOR_EVENTS,t.CREATE_IDEA_BOX_SUBMISSIONS],Administrateur:[t.UPDATE_SETTINGS,t.READ_MEMBER_ARTICLES,t.CREATE_ARTICLES,t.UPDATE_ARTICLES,t.DELETE_ARTICLES,t.UPLOAD_FILES,t.DOWNLOAD_PROTECTED_FILES,t.READ_IDEA_BOX_SUBMISSIONS,t.CREATE_EVENTS,t.UPDATE_EVENTS,t.DELETE_EVENTS,t.READ_EVENT_COMMENTS,t.UPDATE_OWN_USER_INFO,t.READ_OTHER_USER_INFO,t.UPDATE_OTHER_USER_INFO,t.UPDATE_OTHER_USER_PERMISSIONS,t.VIEW_ADMIN_PANEL]},s.c.deepFreeze(e.PRESETS),e.getPreset=function(t){for(const n in e.PRESETS){const r=n;if(i.c.containSame(t,e.PRESETS[r]))return r}}}(r||(r={}));const o=r},928:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var r=n(4112),i=n(8144),s=n(1724);class o extends s.c{get(e){return o.getSubmissions({...e})}count(e){return o.getSubmissions({...e},!0)}doWrite(...e){return new Promise(((t,n)=>{const s=(0,r.sv)(i.AZ);for(const t of e)s.set((0,r.UN)(i.AZ,"idea-box-submissions",t.id),o.COLLECTION.converter.toFirestore(t));s.commit().then((()=>t(e.length))).catch(n)}))}doDelete(...e){return new Promise(((t,n)=>{const s=(0,r.sv)(i.AZ);for(const t of e)s.delete((0,r.UN)(i.AZ,"idea-box-submissions",t.id));s.commit().then((()=>t(e.length))).catch(n)}))}getById(e){return new Promise(((t,n)=>{const i=(0,r.UN)(o.COLLECTION,e);(0,r.i4)(i).then((e=>{e.exists()?t(e.data()):t(void 0)})).catch(n)}))}static getSubmissions(e,t=!1){const n=[];return e.limit&&n.push((0,r.Yf)(e.limit)),e.id&&n.push((0,r.A9)((0,r.ET)(),"==",e.id)),e.notId&&n.push((0,r.A9)((0,r.ET)(),"!=",e.notId)),e.sortByCreatedAt&&n.push((0,r.k$)("created_at","ascending"===e.sortByCreatedAt?"asc":"desc")),e.before&&n.push((0,r.A9)("created_at","<",r.kR.fromDate(e.before))),e.after&&n.push((0,r.A9)("created_at",">",r.kR.fromDate(e.after))),void 0!==e.isAnonymous&&n.push((0,r.A9)("author",e.isAnonymous?"==":"!=","anonymous")),new Promise((async(e,i)=>{const s=(0,r.kt)(this.COLLECTION,...n);t?(0,r.QL)(s).then((t=>e(t.data().count))).catch(i):(0,r.uY)(s).then((t=>{const n=[];t.forEach((e=>n.push(e.data()))),e(n)})).catch(i)}))}}o.COLLECTION=(0,r.oV)(i.AZ,"idea-box-submissions").withConverter({toFirestore:e=>({author:e.author,created_at:r.kR.fromDate(e.created_at),subject:e.subject,body:e.body}),fromFirestore(e){const t=e.data();return new s.O(e.id,t.author,t.created_at.toDate(),t.subject,t.body)}});const a=o},1724:(e,t,n)=>{"use strict";n.d(t,{O:()=>s,c:()=>o});var r=n(9684),i=n(7632);class s extends i.S{constructor(e,t,n,r,i){super(e,[]),this.author=t,this.created_at=n,this.subject=r,this.body=i}copy(){return new s(this.id,"string"==typeof this.author?this.author:{...this.author},new Date(this.created_at),this.subject,this.body)}satisfies(e){return super.satisfies(e)&&void 0!==e.before&&this.created_at<e.before&&void 0!==e.after&&e.after<this.created_at&&(!0!==e.isAnonymous||"anonymous"===this.author)&&(!1!==e.isAnonymous||"anonymous"!==this.author)}equals(e){return super.equals(e)&&r.c.deepEquals(e.author,this.author)&&e.body===this.body&&e.created_at.getTime()===this.created_at.getTime()&&e.subject===this.subject}}class o extends i.c{}},8860:(e,t,n)=>{"use strict";n.d(t,{c:()=>c});var r,i=n(4112),s=n(8144),o=n(8596);class a extends o.c{constructor(){super(...arguments),this.SPONSOR_LINKS_DOC=(0,i.UN)(r.COLLECTION,"sponsor-links").withConverter({toFirestore:r.ImagedLinks.to,fromFirestore:e=>r.ImagedLinks.from(e.data())}),this.SOCIAL_MEDIA_LINKS_DOC=(0,i.UN)(r.COLLECTION,"social-media-links").withConverter({toFirestore:r.ImagedLinks.to,fromFirestore:e=>r.ImagedLinks.from(e.data())})}getNavbarLinks(e="/"){return new Promise(((e,t)=>{(0,i.i4)(r.NAVBAR_LINKS_DOC).then((n=>{n.exists()?e(n.data()):t(new r.MissingDocError("navbar-links"))})).catch(t)}))}setNavbarLinks(e){return new Promise(((t,n)=>{(0,i.Sm)(r.NAVBAR_LINKS_DOC,e).then(t).catch(n)}))}getSponsorLinks(){return new Promise(((e,t)=>{(0,i.i4)(this.SPONSOR_LINKS_DOC).then((n=>{n.exists()?e(n.data()):t(new r.MissingDocError("sponsor-links"))}))}))}setSponsorLinks(e){return new Promise(((t,n)=>{(0,i.Sm)(this.SPONSOR_LINKS_DOC,e).then(t).catch(n)}))}getSocialMediaLinks(){return new Promise(((e,t)=>{(0,i.i4)(this.SOCIAL_MEDIA_LINKS_DOC).then((n=>{n.exists()?e(n.data()):t(new r.MissingDocError("social-media-links"))}))}))}setSocialMediaLinks(e){return new Promise(((t,n)=>{(0,i.Sm)(this.SOCIAL_MEDIA_LINKS_DOC,e).then(t).catch(n)}))}}r=a,a.COLLECTION=(0,i.oV)(s.AZ,"settings"),a.NAVBAR_LINKS_DOC=(0,i.UN)(r.COLLECTION,"navbar-links").withConverter({toFirestore:e=>({links:JSON.stringify(e)}),fromFirestore:e=>JSON.parse(e.data().links)}),function(e){let t;!function(e){e.from=function(e){const t=[];for(const n in e)t.push({name:n,...e[n]});return t},e.to=function(e){const t={};for(const n of e)t[n.name]={origin:n.origin,src:n.src,href:n.href};return t}}(t=e.ImagedLinks||(e.ImagedLinks={}));class n extends Error{constructor(e){super(`setting "${e}" not found in database (missing document).`)}}e.MissingDocError=n}(a||(a={}));const c=a},8596:(e,t,n)=>{"use strict";var r;n.d(t,{C:()=>r,c:()=>i}),function(e){function t(e){const n=[];for(const r in e){const i=e[r];"string"==typeof i?n.push([r,i]):n.push(...t(i))}return n}e.search=function(e,n){return t(e).filter((e=>{const t=e[0].toLowerCase(),r=n.toLowerCase();return t.includes(r)||r.includes(t)})).sort(((e,t)=>e[0].localeCompare(t[0])))}}(r||(r={}));class i{}},9560:(e,t,n)=>{"use strict";n.d(t,{c:()=>u});var r=n(4112),i=n(5364),s=n(8144),o=n(9928),a=n(8392);const c={toFirestore:e=>({...e,joined_at:r.kR.fromDate(e.joined_at),member_until:r.kR.fromDate(e.member_until)}),fromFirestore(e){const t=e.data();return new i.K(e.id,t.joined_at.toDate(),t.member_until.toDate(),t.first_name,t.family_name,t.permissions??[])}};class l extends i.c{get(e={}){return l.getUsers({...e})}count(e){return l.getUsers({...e},!0)}getById(e){return new Promise(((t,n)=>{const i=(0,r.UN)(l.COLLECTION,e);(0,r.i4)(i).then((e=>{e.exists()?t(e.data()):t(void 0)})).catch(n)}))}getByIds(...e){if(1===e.length)return new Promise(((t,n)=>{this.getById(e[0]).then((n=>{const r={};n&&(r[e[0]]=n),t(r)})).catch(n)}));{const t=a.c.batch(e,l.MAX_BATCH_SIZE).map((e=>(0,r.kt)(l.COLLECTION,(0,r.A9)((0,r.ET)(),"in",e))));return new Promise(((e,n)=>{Promise.all(t.map((e=>(0,r.uY)(e)))).then((t=>{const n={};for(const e of t)e.forEach((e=>{const t=e.data();n[t.id]=t}));e(n)})).catch(n)}))}}doWrite(...e){return new Promise(((t,n)=>{const i=(0,r.sv)(s.AZ);for(const t of e)i.set((0,r.UN)(s.AZ,"users",t.id),c.toFirestore(t));i.commit().then((()=>t(e.length))).catch(n)}))}doDelete(...e){return new Promise(((t,n)=>{const i=(0,r.sv)(s.AZ);for(const t of e)i.delete((0,r.UN)(s.AZ,"users",t.id));i.commit().then((()=>t(e.length))).catch(n)}))}static getUsers(e,t=!1){const n=[];return e.limit&&n.push((0,r.Yf)(e.limit)),e.id&&n.push((0,r.A9)((0,r.ET)(),"==",e.id)),e.notId&&n.push((0,r.A9)((0,r.ET)(),"!=",e.notId)),e.has_permission&&n.push((0,r.A9)("permissions","array-contains",e.has_permission)),e.is_member&&n.push((0,r.A9)("member_until",">=",r.kR.now())),e.joined_after&&n.push((0,r.A9)("joined_at",">",r.kR.fromDate(e.joined_after))),e.joined_before&&n.push((0,r.A9)("joined_at","<",r.kR.fromDate(e.joined_before))),new Promise((async(i,s)=>{const a=(0,r.kt)(l.COLLECTION,...n);t?(0,r.QL)(a).then((e=>i(e.data().count))).catch(s):(0,r.uY)(a).then((e=>{const t=[];e.forEach((e=>t.push(e.data()))),t.forEach((e=>o.c.set(`permissions-${e.id}`,e.permissions))),i(t)})).catch((t=>{console.log("failed to get user",e,t)}))}))}}l.COLLECTION=(0,r.oV)(s.AZ,"users").withConverter(c),l.MAX_BATCH_SIZE=30;const u=l},5364:(e,t,n)=>{"use strict";n.d(t,{K:()=>s,c:()=>o});var r=n(8392),i=n(7632);class s extends i.S{constructor(e,t,n,r,i,s){super(e,[]),this.joined_at=t,this.member_until=n,this.first_name=r,this.family_name=i,this.permissions=s}get fullName(){return`${this.first_name} ${this.family_name}`}copy(){return new s(this.id,new Date(this.joined_at),new Date(this.member_until),this.first_name,this.family_name,[...this.permissions])}satisfies(e){if(!super.satisfies(e))return!1;if(e.has_permission)if(Array.isArray(e.has_permission)){if(e.has_permission.some((e=>!this.permissions.includes(e))))return!1}else if(!this.permissions.includes(e.has_permission))return!1;return!(e.is_member&&void 0===this.member_until||e.joined_after&&e.joined_after>=this.joined_at||e.joined_before&&e.joined_before<=this.joined_at)}equals(e){return super.equals(e)&&e.joined_at.getTime()===this.joined_at.getTime()&&e.first_name===this.first_name&&e.family_name===this.family_name&&r.c.containSame(e.permissions,this.permissions)}}class o extends i.c{}},8144:(e,t,n)=>{"use strict";n.d(t,{AZ:()=>u,iA:()=>d,mw:()=>p,o1:()=>f,wX:()=>h});var r=n(7088),i=n(4112),s=n(4296),o=n(8824),a=n(9928);const c={apiKey:"AIzaSyBZukBmRVOeFJPgy0u1qJlMoLeTz4TXJ0k",authDomain:"gws-website-52cf2.firebaseapp.com",projectId:"gws-website-52cf2",storageBucket:"gws-website-52cf2.appspot.com",messagingSenderId:"488447336748",appId:"1:488447336748:web:de9e194799dacf238ccc89",measurementId:"G-HX00VJ4YYY"};Object.freeze(c);const l=(0,o.mg)(c),u=(0,i.gZ)(l),h=(0,r.Iv)(l);function d(){return new Promise(((e,t)=>{h.authStateReady().then((()=>e(h.currentUser))).catch(t)}))}function f(e,t=!1,n=!0){t&&e(!0===a.c.get("is-logged-in")),t&&!n||d().then((t=>e(null!==t)))}a.c.get("is-logged-in")||h.signOut(),h.onAuthStateChanged((e=>{null===e?(a.c.remove("is-logged-in"),a.c.remove("do-login-expiry"),a.c.remove(`permissions-${a.c.get("own-id")}`),a.c.remove("own-id")):(a.c.get("do-login-expiry")?(a.c.set("is-logged-in",!0,Date.now()+6e4),setInterval((()=>a.c.set("is-logged-in",!0,Date.now()+6e4)),3e4)):a.c.set("is-logged-in",!0),a.c.set("own-id",e.uid))}));const p=(0,s.wv)(l)},96:(e,t,n)=>{"use strict";n.d(t,{c:()=>A});var r=n(1244),i=n(1176);const s=class{static toKebabCase(e){let t="";for(let n=0;n<e.length;n++){const r=e[n];r===r.toUpperCase()?t+="-"+r.toLowerCase():t+=r}return t}static apply(e,t){for(const n in e){const r=e[n];t.style.setProperty(this.toKebabCase(n),r)}return t}};class o{constructor(e,t){this.elementTypeSpecific={},this._classes=new Set,this._attributes={},this._children=[],this._styleMap={},this._handlers={},this._onMakeHandlers=[],this.tagName=e,this.initElem=t}id(e){return this._id=e,this}class(...e){for(const t of e)"string"==typeof t&&this._classes.add(t);return this}attr(e,t=""){return null!==t&&(this._attributes[e]=t.toString()),this}attrs(e){for(const t in e)this._attributes[t]=e[t].toString();return this}text(e){return this._text=e,this}tooltip(e){return e&&(this._tooltip=e),this}draggable(e){return this._draggable=e,this}noFocus(e=!0){return this._noFocus=e,this}canSelect(e){return!0===e?e="all":!1===e&&(e="none"),this._canSelect=e,this}html(e){return this._html=e,this}children(...e){return this._children.push(...e.filter((e=>null!==e))),this}style(e){for(const t in e){const n=e[t];void 0===n?delete this._styleMap[t]:this._styleMap[t]=n}return this}on(e,t){return this._handlers[e]=t,this}onMake(e){return this._onMakeHandlers.push(e),this}make(){const e=this.initElem?this.initElem():document.createElement(this.tagName);void 0!==this._id&&(e.id=this._id),this._classes.size>0&&e.classList.add(...this._classes);for(const t in this._attributes)e.setAttribute(t,this._attributes[t]);this._html&&(e.innerHTML=this._html),void 0!==this._text&&(e.textContent=this._text),void 0!==this._tooltip&&(e.title=this._tooltip),this._draggable&&(e.draggable=!0),this._noFocus&&e.addEventListener("mousedown",(e=>e.preventDefault())),this._canSelect&&(e.style.userSelect=this._canSelect);for(const t of this._children)if(t)if(t instanceof Node)e.appendChild(t);else if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(t instanceof o)e.appendChild(t.make());else{let n=t(e);Array.isArray(n)||(n=[n]),e.append(...o.Child.toNodes(n))}s.apply(this._styleMap,e);for(const t in this.elementTypeSpecific)e[t]=this.elementTypeSpecific[t];for(const t of Object.keys(this._handlers)){const n=t,r=this._handlers[n];e.addEventListener(n,(t=>r(t,e)))}for(const t of this._onMakeHandlers)t(e);return e}static specific(e,t,n){const r=new o(e,n);for(const e of t)Reflect.defineProperty(r,e,{writable:!1,value:t=>(r.elementTypeSpecific[e]=t,r)});return r}}!function(e){let t;!function(t){t.toNodes=function(t){const n=[];for(const r of t)r instanceof Node?n.push(r):"string"==typeof r?n.push(document.createTextNode(r)):r instanceof e&&n.push(r.make());return n}}(t=e.Child||(e.Child={}))}(o||(o={}));const a=o;class c extends o{constructor(){super("a"),this._openInNewTab=!1}href(e){return this._href=e,this}download(e=""){this._downloadLink=e}openInNewTab(e){return this._openInNewTab=e,this}make(){const e=super.make();return void 0!==this._href&&(e.href=this._href),void 0!==this._downloadLink&&(e.download=this._downloadLink),this._openInNewTab&&(e.target="_blank"),e}}class l extends o{constructor(){super("select"),this._options={}}option(e,t=e,n=!1){return this._options[e]=[t,n],this}options(e){if(Array.isArray(e))e.forEach((e=>{Array.isArray(e)?this._options[e[0]]=e:this._options[e]=[e,!1]}));else for(const t in e){const n=e[t];this._options[t]=Array.isArray(n)?n:[n,!1]}return this}value(e){return this._value=e,this}onValueChanged(e){return this._onValueChanged=e,this}make(){const e=super.make();for(const t in this._options){const n=document.createElement("option");n.value=t,n.selected=t===this._value,n.textContent=this._options[t][0],this._options[t][1]&&(n.hidden=!0),e.options.add(n)}if(window.addEventListener("change",(t=>{t.target===e&&(e.prevValue=e.value)})),this._onValueChanged){const t=this._onValueChanged;e.addEventListener("change",(()=>t(e.value,e.prevValue)))}return e}}class u extends o{constructor(){super("rich-text-input",(()=>new i.c))}value(e){return this._value=e,this}placeholder(e){return this._placeholder=e,this}compact(e=!0){return e&&super.attr("compact"),this}make(){const e=super.make();return this._value&&(e.value=this._value),this._placeholder&&(e.placeholder=this._placeholder),e}}var h=n(5245);class d extends a{constructor(){super("folder-element",(()=>new h.c))}foldDir(e){return this._foldDir=e,this}hideArrow(e=!0){return this._arrowHidden=e,this}closingDelay(e){return this._closingDelay=e,this}heading(e){return this._heading=e,this}contentPosition(e){return this._contentPosition=e,this}make(){const e=super.make();return this._foldDir&&(e.foldDir=this._foldDir),e.arrowHidden=this._arrowHidden??!1,this._closingDelay&&(e.closingDelay=this._closingDelay),this._contentPosition&&(e.contentsPosition=this._contentPosition),this._heading&&(this._heading instanceof Element||this._heading instanceof a||(this._heading=this._heading(e)),e.heading=this._heading instanceof a?this._heading.make():this._heading),e}}var f,p=n(784);!function(e){const t={button:e=>e,checkbox:e=>e,color:(...e)=>{if(1===e.length)return e[0];{const[t,n,r]=e;return`#${t.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`}},date:(...e)=>`${e[0].toString().padStart(4,"0")}-${(e[1]+1).toString().padStart(2,"0")}-${e[2].toString().padStart(2,"0")}`,"datetime-local":(...e)=>{let t;if(e[0]instanceof Date){const n=p.c.Timestamps.copy(e[0]);n.setMinutes(n.getMinutes()-n.getTimezoneOffset()),t=n.toISOString()}else t=new Date(e[0],e[1],e[2],e[3],e[4]).toISOString();return t.includes(".")?t.substring(0,t.indexOf(".")):t},email:e=>e,file:e=>e,hidden:e=>e,image:()=>"",month:(e,t)=>`${e.toString().padStart(4,"0")}-${(t+1).toString().padStart(2,"0")}`,number:e=>e.toString(),password:e=>e,radio:e=>e,range:e=>e.toString(),reset:e=>e,search:e=>e,submit:e=>e,tel:e=>e,text:e=>e,time:(e,t)=>`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`,url:e=>e,week:(e,t)=>`${e.toString().padStart(4,"0")}-W${t.toString().padStart(2,"0")}`};e.translateTypedValue=function(e,...n){return t[e](...n)}}(f||(f={}));class m extends a{constructor(e){super("input"),this.type=e}value(...e){return this._value=e,this}name(e){return this._name=e,this}disabled(e){return this._disabled=e,this}attr(e,t){return"value"===e||"onchange"===e?this:super.attr(e,t)}attrs(e){return delete e.value,delete e.onchange,super.attrs(e)}onValueChanged(e){return this._onValueChanged=e,this}make(){const e=super.make();if(e.type=this.type,void 0!==this._value){const t=f.translateTypedValue(this.type,...this._value);e.value=t}if(e.prevValue=e.value,window.addEventListener("input",(t=>{t.target===e&&(e.prevValue=e.value)})),this._onValueChanged){const t=this._onValueChanged;e.addEventListener("input",(()=>t(e.value,e.prevValue)))}return void 0!==this._name&&(e.name=this._name),this._disabled&&(e.disabled=!0),e}}class g extends m{onClick(e){return this._onClick=e,this}make(){const e=super.make();if(this._onClick){const t=this._onClick;e.addEventListener("click",(()=>t(e.value)))}return e}}class y extends m{constructor(e){super(e),this._checked=!1}checked(e){return this._checked=e,this}onCheckedChanged(e){return this._onCheckedChanged=e,this}make(){const e=super.make();if(e.checked=this._checked,e.wasChecked=e.checked,window.addEventListener("input",(t=>{t.target===e&&((e.wasChecked=e.checked)?e.setAttribute("was-checked",""):e.removeAttribute("was-checked"))})),this._onCheckedChanged){const t=this._onCheckedChanged;e.addEventListener("input",(()=>t(e.checked,e.wasChecked)))}return e}}class v extends m{constructor(e){super(e),this._step=1}min(...e){return this._min=e,this}max(...e){return this._max=e,this}step(e){return this._step=e,this}make(){const e=super.make();return void 0!==this._min&&(e.min=f.translateTypedValue(this.type,...this._min)),void 0!==this._max&&(e.max=f.translateTypedValue(this.type,...this._max)),e.step=this._step.toString(),e}}class _ extends v{make(){const e=super.make();return e.prevValueAsNumber=Number.parseFloat(e.prevValue),window.addEventListener("change",(t=>{t.target===e&&(e.prevValueAsNumber=Number.parseFloat(e.prevValue))})),e}}class w extends v{make(){const e=super.make();return e.prevValueAsDate=new Date(e.prevValue),window.addEventListener("change",(t=>{t.target===e&&(e.prevValueAsDate=new Date(e.prevValue))})),e}}class b extends m{constructor(e){super(e)}list(e){return this._list="string"==typeof e?e:e.id,this}minLength(e){return this._minLength=Math.floor(e),this}maxLength(e){return this._maxLength=Math.floor(e),this}placeholder(e){return this._placeholder=e,this}readonly(e){return this._readonly=e,this}size(e){return this._size=Math.floor(e),this}spellcheck(e){return this._spellcheck=e,this}make(){const e=super.make();return void 0!==this._list&&e.setAttribute("list",this._list),void 0!==this._minLength&&(e.minLength=this._minLength),void 0!==this._maxLength&&(e.maxLength=this._maxLength),this._placeholder&&(e.placeholder=this._placeholder),this._readonly&&(e.readOnly=this._readonly),void 0!==this._size&&(e.size=this._size),this._spellcheck&&(e.spellcheck=this._spellcheck),e}}var E=n(3236),T=n(8332);class S extends a{constructor(){super("icon-selector",(()=>new T.c)),this._options=[]}options(...e){return this._options.push(...e),e.find((e=>e[3])),this}value(e){return this._value=e,this}make(){let e=super.make();for(const t of this._options)e=e.addOption(...t);return void 0!==this._value&&(e.value=this._value),e}}class C{static header(){return new a("header")}static footer(){return new a("footer")}static div(e,...t){const n=new a("div");return"string"==typeof e&&n.id(e),n.class(...t),n}static heading(e,t){const n=this[`h${e=r.c.clamp(Math.floor(e),1,6)}`]();return t&&n.text(t),n}static h1(e){const t=new a("h1");return e?t.text(e):t}static h2(e){const t=new a("h2");return e?t.text(e):t}static h3(e){const t=new a("h3");return e?t.text(e):t}static h4(e){const t=new a("h4");return e?t.text(e):t}static h5(e){const t=new a("h5");return e?t.text(e):t}static h6(e){const t=new a("h6");return e?t.text(e):t}static p(e){const t=new a("p");return e?t.text(e):t}static richText(e){return C.div().class("rich-text").children(...E.c.deserialize(e))}static text(e){return document.createTextNode(e??"")}static span(e){const t=new a("span");return e?t.text(e):t}static a(e,t){const n=new c;return n.onMake((e=>{e.addEventListener("click",(()=>{e.href&&!e.hasAttribute("download")&&("_blank"===e.target?open(e.href):location.href=e.href)}))})),e&&n.href(e),t?n.text(t):n}static img(e,t){const n=a.specific("img",["src","alt"],(()=>document.createElement("img")));return e&&n.src(e),t?n.alt(t):n}static label(e,t){const n=a.specific("label",["htmlFor"],(()=>document.createElement("label")));return e&&n.text(e),t&&n.htmlFor(t),n}static button(e){const t=new a("button");return e&&t.on("click",e),t}static iconButton(e,t,n){return C.p(e).class("icon","icon-button","click-action","no-margin").tooltip(n||null).noFocus().on("click",t)}static textarea(e){const t=a.specific("textarea",["value","placeholder","minLength","maxLength","readOnly","spellcheck"],(()=>document.createElement("textarea")));return e&&t.value(e),t}static select(e=[]){return(new l).options(e)}static option(){return a.specific("option",["value","selected"],(()=>document.createElement("option")))}static optgroup(){return a.specific("optgroup",["label"],(()=>document.createElement("optgroup")))}static iconSelector(...e){const t=new S;return t.options(...e),t}static hr(){return new a("hr")}static br(){return new a("br")}static ul(){return a.specific("ul",[],(()=>document.createElement("ul")))}static ol(){return a.specific("ul",[],(()=>document.createElement("ol")))}static li(e){const t=a.specific("li",[],(()=>document.createElement("li")));return e&&t.text(e),t}static folderElement(e,t,n){const r=new d;return e&&r.foldDir(e),"number"==typeof t&&r.closingDelay(t),n&&r.hideArrow(n),r}}C.input={button(e,t){const n=new g("button");return void 0!==e&&n.value(e),t?n.onClick(t):n},checkbox:()=>new y("checkbox"),color(e){const t=new m("color");return e&&t.value(e),t},date(e,t,n,r){const i=new w("date");return e&&i.value(e.getFullYear(),e.getMonth(),e.getDate()),t&&i.min(t.getFullYear(),t.getMonth(),t.getDate()),n&&i.max(n.getFullYear(),n.getMonth(),n.getDate()),"number"==typeof r&&i.step(r),i},dateTimeLocal(e,t,n,r){const i=new w("datetime-local");return e instanceof Date&&i.value(e),t instanceof Date&&i.min(t),n instanceof Date&&i.max(n),"number"==typeof r&&i.step(r),i},email:()=>new b("email"),file:()=>new b("file"),image:()=>new m("image"),month(e,t){const n=new w("month");return void 0!==e&&void 0!==t?n.value(e,t):void 0!==e?n.value(e,(new Date).getMonth()):void 0!==t&&n.value((new Date).getFullYear(),t),n},number(e,t,n,r){const i=new _("number");return"number"==typeof e&&i.value(e),"number"==typeof t&&i.min(t),"number"==typeof n&&i.max(n),"number"==typeof r&&i.step(r),i},password:()=>new b("password"),radio:()=>new y("radio"),range(e,t,n,r){const i=new _("range");return"number"==typeof e?i.value(e):"number"==typeof t&&i.value(t),"number"==typeof t&&i.min(t),"number"==typeof n&&i.max(n),"number"==typeof r&&i.step(r),i},reset:()=>new g("reset"),search:()=>new b("search"),submit:()=>new g("submit"),tel:()=>new b("tel"),text(e){const t=new b("text");return e&&t.value(e),t},time:()=>new v("time"),url(e){const t=new b("url");return e&&t.value(e),t},week(e,t){const n=new w("week");return void 0!==e&&void 0!==t?n.value(e,t):void 0!==e?n.value(e,1):void 0!==t&&n.value((new Date).getFullYear(),t),n},richText(e,t){const n=new u;return e&&n.value(e),void 0!==t&&n.compact(t),n}};const A=C},4388:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var r,i=n(9684);!function(e){let t;!function(e){e[e.DESKTOP=0]="DESKTOP",e[e.DESKTOP_SLIM=1]="DESKTOP_SLIM",e[e.SQUARE=2]="SQUARE",e[e.TABLET_PORTRAIT=3]="TABLET_PORTRAIT",e[e.MOBILE_PORTRAIT=4]="MOBILE_PORTRAIT",e[e.VERY_THIN=5]="VERY_THIN"}(t=e.Viewport||(e.Viewport={}));const n=t.DESKTOP,r={[t.DESKTOP]:{width:16,height:9},[t.DESKTOP_SLIM]:{width:4,height:3},[t.SQUARE]:{width:1,height:1},[t.TABLET_PORTRAIT]:{width:3,height:4},[t.MOBILE_PORTRAIT]:{width:10,height:16},[t.VERY_THIN]:{width:1,height:2}},s=i.c.mapToArray(r,((e,t)=>[e,matchMedia(`(max-aspect-ratio: ${t.width} / ${t.height})`)]));let o;function a(){const e=void 0!==matchMedia?s.findLast((([e,t])=>t.matches))?.[0]??n:n;if(e!==o){console.log("viewport change",o,"--\x3e",e);const t=o;o=e,c.forEach((n=>n(e,t)))}}e.getCurrent=function(){return o};const c=[];e.onChange=function(e,t=!1){c.push(e),t&&e(o,o)},e.is=function(e){return e===o},e.isAnyOf=function(...e){return e.includes(o)},e.isWiderThan=function(e){return e>o},e.isWiderOrEq=function(e){return e>=o},e.isSlimmerThan=function(e){return e<o},e.isSlimmerOrEq=function(e){return e<=o},a(),window.addEventListener("resize",(()=>a()))}(r||(r={}));const s=r},5752:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var r,i,s=n(7588),o=n.n(s),a=n(96),c=n(9928),l=n(4388),u=n(908);!function(e){e.INFO="info",e.SUCCESS="success",e.WARNING="warning",e.ERROR="error"}(i||(i={}));class h{static get messageLimit(){return l.c.isSlimmerOrEq(l.c.Viewport.TABLET_PORTRAIT)?1:3}static createMessage(e,t,n=5e3){const r=a.c.p().text(e).class("boxed","message",t).make();return o()(r).delay(n).fadeOut(200,"swing",(function(){this.remove()})),r}static info(e,t=5e3,n){this.MESSAGE_AREA.childElementCount+1>this.messageLimit&&this.MESSAGE_AREA.lastChild?.remove(),this.MESSAGE_AREA.prepend(this.createMessage(e,r.MessageType.INFO,t)),n&&setTimeout(n,t)}static relayInfo(e,t=5e3){c.c.set("relayed-message",{type:r.MessageType.INFO,content:e,lifetime:t},Date.now()+1e4)}static success(e,t=5e3,n){this.MESSAGE_AREA.childElementCount+1>this.messageLimit&&this.MESSAGE_AREA.lastChild?.remove(),this.MESSAGE_AREA.prepend(this.createMessage(e,r.MessageType.SUCCESS,t)),n&&setTimeout(n,t)}static relaySuccess(e,t=5e3){c.c.set("relayed-message",{type:r.MessageType.SUCCESS,content:e,lifetime:t},Date.now()+1e4)}static warning(e,t=5e3,n){this.MESSAGE_AREA.childElementCount+1>this.messageLimit&&this.MESSAGE_AREA.lastChild?.remove(),this.MESSAGE_AREA.prepend(this.createMessage(e,r.MessageType.WARNING,t)),n&&setTimeout(n,t)}static relayWarning(e,t=5e3){c.c.set("relayed-message",{type:r.MessageType.WARNING,content:e,lifetime:t},Date.now()+1e4)}static error(e,t=5e3,n){this.MESSAGE_AREA.childElementCount+1>this.messageLimit&&this.MESSAGE_AREA.lastChild?.remove(),this.MESSAGE_AREA.prepend(this.createMessage(e,r.MessageType.ERROR,t)),n&&setTimeout(n,t)}static relayError(e,t=5e3){c.c.set("relayed-message",{type:r.MessageType.ERROR,content:e,lifetime:t},Date.now()+1e4)}}r=h,u.c.onDOMContentLoaded().then((()=>{r.MESSAGE_AREA=document.body.appendChild(document.createElement("div")),r.MESSAGE_AREA.id="info-messages",r.MESSAGE_AREA.classList.add("flex-rows","cross-axis-center");const e=c.c.get("relayed-message");if(e){switch(e.type){case r.MessageType.INFO:r.info(e.content,e.lifetime);break;case r.MessageType.SUCCESS:r.success(e.content,e.lifetime);break;case r.MessageType.WARNING:r.warning(e.content,e.lifetime);break;case r.MessageType.ERROR:r.error(e.content,e.lifetime)}c.c.remove("relayed-message")}})),function(e){e.MessageType=i}(h||(h={}));const d=h},8392:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});class r{static equal(e,t){return e.length===t.length&&e.every(((e,n)=>e===t[n]))}static containSame(e,t){return e.every((e=>t.includes(e)))&&t.every((t=>e.includes(t)))}static intersection(e,t){return e.filter((e=>t.includes(e)))}static union(e,t,n=!1){return n?[...e,...this.difference(t,e)]:[...e,...t]}static difference(e,t){return e.filter((e=>!t.includes(e)))}static symmetricDifference(e,t){return[...this.difference(e,t),...this.difference(t,e)]}static sortAlphabetically(e){return e.toSorted(((e,t)=>e.localeCompare(t)))}static remove(e,t,n=!1){let r=!1;if(n){let n=e.indexOf(t);for(;-1!==n;)e.splice(n,1),n=e.indexOf(t),r=!0}else{let n=e.indexOf(t);-1!==n&&(e.splice(n,1),n=e.indexOf(t),r=!0)}return r}static uniqueElements(e){const t=[...e];for(let e=0;e<t.length;e++){const n=t[e];for(let r=e+1;r<t.length;r++)for(;r<t.length&&t[r]===n;)t.splice(r,1)}return t}static batch(e,t){e=[...e];const n=[];for(;0!==e.length;)n.push(e.splice(0,t));return n}static count(e,t){let n=0;for(let r=0;r<e.length;r++)n+=t(e[r],r,e)?1:0;return n}static includesAll(e,...t){return t.every((t=>e.includes(t)))}static interlace(e,t){const n=[];for(const r of e)0!==n.length&&n.push(t),n.push(r);return n}}},8440:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var r=n(1244);class i{static isHex(e){return"string"==typeof e&&e.startsWith("#")}static isRGB(e){return Array.isArray(e)&&3===e.length&&e.every((e=>0<=e&&e<=255))}static isRGBString(e){return"string"==typeof e&&e.startsWith("rgb(")&&e.endsWith(")")&&e.substring(4,e.length-1).split(", ").every(((e,t,n)=>3===n.length&&r.c.isInt(e)&&r.c.isBetween(Number.parseInt(e),0,255)))}static toRGB(e){if(this.isHex(e)){const t=Number.parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]}return this.isRGBString(e)?e.substring(4,e.length-1).split(", ").map((e=>Number.parseInt(e))):e}static toHex(e){if(this.isRGB(e)){const[t,n,r]=e;return`#${t.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`}return this.isRGBString(e)?this.toHex(this.toRGB(e)):e}static getContrast(e,t){return[e,t]=[this.toRGB(e),this.toRGB(t)],e=[.299*e[0],.587*e[1],.114*e[2]],t=[.299*t[0],.587*t[1],.114*t[2]],((e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2)**.5}static getMostContrasting(e,...t){let n=-1,r=-1/0;return t.forEach(((t,i)=>{const s=this.getContrast(e,t);s>r&&([n,r]=[i,s])})),this.toHex(t[n])}static mix(e,t,n){e=this.toRGB(e),t=this.toRGB(t);const i=1-(n=r.c.clamp(n,0,1)),s=[Math.floor(e[0]*n+t[0]*i),Math.floor(e[1]*n+t[1]*i),Math.floor(e[2]*n+t[2]*i)];return this.toHex(s)}static getStringColor(e){if(!e)return this.DEFAULT_COLOR;e=e.toLowerCase();let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n);return this.STRING_COLORS[Math.abs(t)%this.STRING_COLORS.length]}}i.DEFAULT_COLOR="#a8c9f5",i.STRING_COLORS=["#FF0000","#FF8700","#FFD300","#DEFF0A","#A1FF0A","#0AFF99","#0AEFFF","#147DF5","#580AFF","#BE0AFF"];const s=i},784:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r,i=n(9684);class s{static get FIRST(){return new Date(-864e13)}static get LAST(){return new Date(864e13)}}r=s,s.Days={firstBefore(e,t){const n=r.WEEK_DAY_INDICES[t],i=new Date(e);for(;i.getDay()!==n;)i.setDate(i.getDate()-1);return i.setHours(0,0,0,0),i},firstAfter(e,t){const n=r.WEEK_DAY_INDICES[t],i=new Date(e);for(;i.getDay()!==n;)i.setDate(i.getDate()+1);return i.setHours(0,0,0,0),i},isSame:(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),isWeekend:e=>0===e.getDay()||6===e.getDay(),isBetween:(e,t,n)=>([e,t,n]=[e,t,n].map(r.Timestamps.copy),t.setHours(0,0,0,0),n.setHours(23,59,59,999),e>=t&&e<=n),earlierThan:(e,t)=>e.getFullYear()<t.getFullYear()||e.getFullYear()===t.getFullYear()&&e.getMonth()<t.getMonth()||e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()<t.getDate(),earlierOrSame(e,t){return this.isSame(e,t)||this.earlierThan(e,t)},laterThan:(e,t)=>e.getFullYear()>t.getFullYear()||e.getFullYear()===t.getFullYear()&&e.getMonth()>t.getMonth()||e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()>t.getDate(),laterOrSame(e,t){return this.isSame(e,t)||this.laterThan(e,t)},spanInDays(e,t){e>t&&([e,t]=[t,e]);const n=new Date(e);let i=1;for(;!r.Days.isSame(n,t);)i++,n.setDate(n.getDate()+1);return i},getRange(e,t){if((e=new Date(e)).setHours(0,0,0,0),"number"==typeof t){const n=t;(t=new Date(e)).setDate(t.getDate()+n)}else t=new Date(t);if(e>t)return[];const n=[];do{n.push(new Date(e)),e.setDate(e.getDate()+1)}while(!r.Days.isSame(e,t));return n}},s.Timespans={overlap:(e,t)=>t[1]>=e[0]&&t[0]<=e[1],daysOverlap:(e,t)=>r.Days.laterOrSame(t[1],e[0])&&r.Days.earlierOrSame(t[0],e[1]),areFullDays(e,t=!1){const[n,r]=e;return!(0!==n.getHours()||0!==n.getMinutes()||0!==n.getSeconds()||t&&0!==n.getMilliseconds()||23!==r.getHours()||59!==r.getMinutes()||59!==r.getSeconds()||t&&999!==r.getMilliseconds())}},s.Timestamps={earliest(...e){let t=e[0];for(let n=1;n<e.length;n++)t=e[n]<t?e[n]:t;return t},latest(...e){let t=e[0];for(let n=1;n<e.length;n++)t=e[n]>t?e[n]:t;return t},clamp:(e,t=r.FIRST,n=r.LAST)=>e<t?new Date(t):e>n?new Date(n):new Date(e),justBefore:e=>((e=new Date(e)).setMilliseconds(e.getMilliseconds()-1),e),justAfter:e=>((e=new Date(e)).setMilliseconds(e.getMilliseconds()+1),e),fromInputs(e,t){if(e instanceof HTMLInputElement){if("date"!==e.type)throw new Error(`parameter 'date' is not a date input (is "${e.type}" instead)`);e=e.value}if(t instanceof HTMLInputElement){if("time"!==t.type)throw new Error(`parameter 'time' is not a time input (is "${t.type}" instead)`);t=t.value}let[n,r,i]=e.split("-").map((e=>Number.parseInt(e))).filter((e=>!isNaN(e)));n||(n=1970),r||(r=1),r--,i||(i=1);let[s,o,a,c]=t.split(":").map((e=>Number.parseInt(e))).filter((e=>!isNaN(e)));return s||(s=0),o||(o=0),a||(a=0),c||(c=0),new Date(n,r,i,s,o,a,c)},setInputValue(e,t){if(!this.isValid(t))throw new Error("value is invalid Date object");if((t=this.copy(t)).setMinutes(t.getMinutes()-t.getTimezoneOffset()),"datetime-local"===e.type){const n=t.toISOString();return e.value=n.includes(".")?n.substring(0,n.indexOf(".")):n}if("date"===e.type){const n=`${t.getFullYear().toString().padStart(4,"0")}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`;return e.value=n}throw new Error(`invalid input type: ${e.type}`)},copy:e=>new Date(e),isValid:e=>null!==e&&(e="string"==typeof e?new Date(e):e,!isNaN(e.getTime()))},s.DATE_FORMATS={DAY:{SHORT_NO_YEAR:(e,t="nl-NL")=>e.toLocaleDateString(t,{day:"numeric",month:"short"}),SHORT:(e,t="nl-NL")=>e.toLocaleDateString(t,{day:"numeric",month:"short",year:"numeric"}),MEDIUM:(e,t="nl-NL")=>e.toLocaleDateString(t,{dateStyle:"medium"}),LONG:(e,t="nl-NL")=>e.toLocaleDateString(t,{weekday:"long",day:"numeric",month:"long"})},TIME:{SHORT:(e,t="nl-NL")=>e.toLocaleTimeString(t,{timeStyle:"short"})},DAY_AND_TIME:{SHORT_NO_YEAR:(e,t="nl-NL")=>`${r.DATE_FORMATS.DAY.SHORT_NO_YEAR(e,t)} (${r.DATE_FORMATS.TIME.SHORT(e,t)})`,SHORT:(e,t="nl-NL")=>`${r.DATE_FORMATS.DAY.SHORT(e,t)} (${r.DATE_FORMATS.TIME.SHORT(e,t)})`},DURATION:{HOURS_AND_MINUTES:(e,t)=>{let n=t.getTime()-e.getTime();const r=Math.floor(n/36e5);return n%=36e5,`${r} uur en ${Math.round(n/6e4)} minuten`}}},i.c.deepFreeze(r.Days),i.c.deepFreeze(r.Timespans),i.c.deepFreeze(r.Timestamps),i.c.deepFreeze(r.DATE_FORMATS),function(e){e.WEEK_DAY_INDICES={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:0},Object.freeze(e.WEEK_DAY_INDICES)}(s||(s={}));const o=s},6316:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});var r=n(992);class i{static getAttrAsNumber(e,t,n=!1){const r=e.hasAttribute(t)?Number.parseFloat(e.getAttribute(t)):null;return null===r||!n&&isNaN(r)?null:r}static getAttrAs(e,t,n){if(!e.hasAttribute(t))return null;const r=e.getAttribute(t);return n?n(r)?r:null:r}static queryAncestors(e,t,n=!1){if(null===e)return[];{const r=[];n&&e instanceof Element&&e.matches(t)&&r.push(e);let i=e.parentNode;for(;null!==i;)i instanceof Element&&i.matches(t)&&r.push(i),i=i.parentNode;return r}}static isChain(e){return!!r.c.isEmpty(e)||1===e.childElementCount&&this.isChain(e.firstElementChild)}static getChainEnd(e){return r.c.isEmpty(e)?e:1===e.childElementCount?this.getChainEnd(e.firstElementChild):e}static isAtScrollTop(e,t=1){return e.scrollTop<=t}static isAtScrollBottom(e,t=1){return e.scrollHeight-e.scrollTop-e.clientHeight<=t}static isReplacedElement(e){return e instanceof HTMLIFrameElement||e instanceof HTMLVideoElement||e instanceof HTMLEmbedElement||e instanceof HTMLImageElement}}},4440:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});class r{static setDelayedCallback(e,t){const n=this.delayedCallbacks.findIndex((t=>t[0]===e));-1!==n&&(clearTimeout(this.delayedCallbacks[n][1]),this.delayedCallbacks.splice(n,1));const r=setTimeout((()=>{e();const t=this.delayedCallbacks.findIndex((t=>t[0]===e));this.delayedCallbacks.splice(t,1)}),t);this.delayedCallbacks.push([e,r])}}r.delayedCallbacks=[];const i=r},992:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});class r{static isEmpty(e){return Array.from(e.childNodes).every((e=>e.nodeType===Node.TEXT_NODE&&0===e.textContent.length))}static empty(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}static limitWords(e,t){if(e.nodeType===Node.TEXT_NODE)if(t<=0)e.textContent="";else{const n=e.textContent.split(" ",isFinite(t)?t:void 0);t-=n.length,e.textContent=n.join(" ")}else e.childNodes.forEach((e=>t=this.limitWords(e,t))),e.normalize();return t}static extractChildren(e){const t=[];for(;e.firstChild;)t.push(e.removeChild(e.firstChild));return t}static swap(e,t){const[n,r]=[document.createTextNode(""),document.createTextNode("")];e.replaceWith(n),t.replaceWith(r),n.replaceWith(t),r.replaceWith(e)}static getLeafNodes(e){if(0===e.childNodes.length)return[e];{const t=[];return e.childNodes.forEach((e=>t.push(...this.getLeafNodes(e)))),t}}static getChildIndex(e,t){let[n,r]=[e.firstChild,0];for(;null!==n;){if(n===t)return r;[n,r]=[n.nextSibling,r+1]}return-1}static whenInsertedIn(e,t){return new Promise(((n,r)=>{if(t.contains(e))n(e);else{const r=new MutationObserver((i=>{t.contains(e)&&(n(e),r.disconnect())}));r.observe(t,{childList:!0,subtree:!0})}}))}static onEach(e,t){e.childNodes.forEach((e=>this.onEach(e,t))),t(e)}static deepReplaceAll(e,t,n){if(e.nodeType===Node.TEXT_NODE){const r=e,i=r.textContent.indexOf(t);-1!==i&&r.replaceData(i,t.length,n)}else e.childNodes.forEach((e=>this.deepReplaceAll(e,t,n)))}}},1244:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});class r{static clamp(e,t=-1/0,n=1/0,r=!1){return r&&isNaN(e)?t:Math.max(t,Math.min(n,e))}static isBetween(e,t=-1/0,n=1/0,r=!0){return r?t<=e&&e<=n:t<e&&e<n}static isNumber(e){return!isNaN(Number.parseFloat(e))}static isInt(e){return!isNaN(Number.parseInt(e))&&Number.parseInt(e)===Number.parseFloat(e)}static parse(e,t=0){const n=Number.parseFloat(e);return isNaN(n)?t:n}static range(e,t,n=1,r=!1){const i=[];if(n=Math.abs(n),e<t)if(r)for(let r=e;r<=t;r+=n)i.push(r);else for(let r=e;r<t;r+=n)i.push(r);else if(r)for(let r=e;r>=t;r-=n)i.push(r);else for(let r=e;r>t;r-=n)i.push(r);return i}static closest(e,t){if(0===t.length)throw new Error('parameter "options" must contain at least one element');let n=Math.abs(e-t[0]),r=t[0];for(let i=1;i<t.length;i++){const s=Math.abs(e-t[i]);s<n&&([n,r]=[s,t[i]])}return r}}},9684:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});class r{static sizeOf(e){let t=0;for(const n in e)t++;return t}static keys(e){return Object.keys(e)}static values(e){return Object.values(e)}static deepCopy(e){if("object"==typeof e){if(Array.isArray(e))return[...e].map((e=>this.deepCopy(e)));if(e instanceof Date)return new Date(e);{const t={};for(const n in e)t[n]=this.deepCopy(e[n]);return t}}return e}static deepFreeze(e){for(const t of Object.keys(e)){const n=e[t];"object"==typeof n&&this.deepFreeze(n)}Object.freeze(e)}static deepEquals(e,t){return e===t||typeof e==typeof t&&("object"==typeof e&&"object"==typeof t?null!==e&&null!==t&&(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(((e,n)=>this.deepEquals(e,t[n]))):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():Object.keys(e).every((n=>n in t&&this.deepEquals(e[n],t[n])))&&Object.keys(t).every((n=>n in e&&this.deepEquals(t[n],e[n])))):e===t)}static mapToObject(e,t){const n={};return e.forEach(((e,r,i)=>n[e]=t(e,r,i))),n}static mapToArray(e,t){const n=[];for(const r in e)n.push(t(r,e[r],e));return n}static some(e,t){for(const n in e)if(t(n,e[n],e))return!0;return!1}static every(e,t){for(const n in e)if(!t(n,e[n],e))return!1;return!0}static forEach(e,t){let n=0;for(const r in e)t(r,e[r],n,e),n++}}},8036:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});class r{static generateID(e=20,t=!1){let n="";if(t){const t=new Uint16Array(e);crypto.getRandomValues(t),t.forEach((e=>n+=this.ID_CHARS[e%this.ID_CHARS.length]))}else for(;n.length<e;)n+=this.ID_CHARS[Math.floor(Math.random()*this.ID_CHARS.length)];return n}static capitalize(e){return e.slice(0,1).toUpperCase()+e.slice(1)}static normalize(e){return e.normalize("NFD").replace(/\p{Diacritic}/gu,"").toLocaleLowerCase().trim()}}r.ID_CHARS="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";const i=r},8356:(e,t,n)=>{"use strict";n.d(t,{O:()=>r,c:()=>o});var r,i=n(784),s=n(1244);!function(e){const t=["application/x-freearc","application/x-bzip","application/x-bzip2","application/gzip","application/vnd.rar","application/x-tar","application/zip","application/x-7z-compressed"];e.fromContentType=function(e){return t.some((t=>e.startsWith(t)))?"compressed-folder":e.startsWith("application/pdf")?"pdf":e.substring(0,e.indexOf("/"))}}(r||(r={}));class o{static toURL(e){if(e instanceof URL)return e;try{return new URL(e)}catch{if(e){if(e.startsWith("/"))return new URL(location.origin+e);{e.startsWith("./")&&(e=e.substring(2));const t=location.href.substring(0,location.href.lastIndexOf("/"));return new URL(`${t}/${e}`)}}return new URL(location.href)}}static createLinkBackURL(e,t=location.href){return e=this.toURL(e),t=this.toURL(t),e.searchParams.append("return-to",t.toString()),e}static isLocal(e){try{return(e=this.toURL(e)).origin===location.origin}catch{return!1}}static getType(e){return new Promise(((t,n)=>{this.getInfo(e).then((e=>t(e.fileType))).catch(n)}))}static getInfo(e){return new Promise(((t,n)=>{try{const o=this.toURL(e),a=new XMLHttpRequest;a.timeout=2500,a.onerror=e=>n(404===a.status?new Error("Kan bestand niet vinden",{cause:"not found"}):new Error("Er ging iets mis",{cause:"unknown"})),a.ontimeout=e=>n(new Error("Kan bestand niet vinden",{cause:"timeout"})),a.onload=()=>{if(200<=a.status&&a.status<300){const e={contentType:a.getResponseHeader("content-type"),contentLength:a.getResponseHeader("content-length"),lastModified:a.getResponseHeader("last-modified")},n=o.href,c=o.pathname.substring(o.pathname.lastIndexOf("/")+1),l=e.contentType??"unknown/unknown";let u=r.fromContentType(l);const h=e.contentLength&&s.c.isInt(e.contentLength)?Number.parseInt(e.contentLength):void 0,d=e.lastModified&&i.c.Timestamps.isValid(e.lastModified)?new Date(e.lastModified):void 0;t({href:n,name:c,contentType:l,fileType:u,size:h,lastModified:d})}else n(new Error("Er ging iets mis",{cause:"unknown"}))},a.open("HEAD",o,!0),a.send()}catch{n(new Error("URL is ongeldig",{cause:"invalid url"}))}}))}static getHashProperties(e=location){const t=e.hash.substring(1).split(","),n={};for(const e of t){const[t,r]=e.split("=");n[t]=r}return n}static setHashProperty(e,t){const n=this.getHashProperties(),r=n[e]??null;null===t?delete n[e]:n[e]=t;let i="#";for(const e in n)i+=(i.length>1?",":"")+`${e}=${n[e]}`;return history.replaceState(null,"",i),r}static getLinkIcon(e){try{const t=o.toURL(e);return o.isLocal(t)?["/","","/index"].includes(t.pathname)?"home":t.pathname.startsWith("/inloggen")?"login":t.pathname.startsWith("/artikel")?"newsmode":t.pathname.startsWith("/agenda")?t.searchParams.has("id")?"event_note":"calendar_month":t.pathname.startsWith("/administratiepaneel")?"admin_panel_settings":"link":"open_in_new"}catch{return"error"}}}},9796:(e,t,n)=>{"use strict";var r,i;n.d(t,{c:()=>r,s:()=>i}),function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e[e.FULL=3]="FULL"}(r||(r={})),function(e){e.checkType=function(t){return e.LOW<=t&&t<=e.FULL},e.toString=function(t){switch(t){case e.LOW:return"low";case e.MEDIUM:return"medium";case e.HIGH:return"high";case e.FULL:return"full"}},e.fromString=function(t){switch(t){case"low":return e.LOW;case"medium":return e.MEDIUM;case"high":return e.HIGH;case"full":return e.FULL;default:return}}}(r||(r={})),function(e){e.checkType=function(e){return"firebase-storage-public"===e||"firebase-storage-protected"===e||"external"===e}}(i||(i={}))},996:(e,t,n)=>{"use strict";var r=n(9928),i=n(908),s=n(8828),o=n(2824),a=n(8860),c=n(96);const l=new a.c;var u;i.c.useDynamicContent((u=l,new Promise(((e,t)=>{r.c.getAndRefresh("sponsor-links",u.getSponsorLinks()).then((t=>e(c.c.div("split-view").children(new o.c("split-view-content"),c.c.div("news-letters","boxed","flex-rows","cross-axis-center").children(c.c.h2("Nieuwsbrieven").class("section-name"),document.getElementsByClassName("display_archive")[0]).onMake((e=>{const t=e.lastElementChild;t.classList.add("flex-rows","in-section-gap"),t.childNodes.forEach((e=>{e.firstChild?.remove();const t=e.firstChild;t.addEventListener("click",(()=>location.href=t.href))}))})),c.c.div("sponsors","boxed","flex-rows").children(c.c.h2("Onze sponsoren").class("section-name"),c.c.div(void 0,"logos","flex-rows","main-axis-space-between","cross-axis-center").children(...t.sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>c.c.a(e.href).openInNewTab(!0).class("center-content").children(new s.c(e.origin,e.src)).tooltip(e.name).onMake((t=>{const n=t.firstElementChild;n.alt=e.name,n.classList.add("click-action")}))))))).make()))).catch(t)}))),(e=>{const t=document.getElementsByClassName("content")[0];if(!t)throw new Error("split-view insertion failed: no content element found");t.replaceWith(e),o.c.replaceWith("split-view-content",t)}))},4216:(e,t,n)=>{"use strict";var r=n(7588),i=n.n(r),s=n(5245),o=n(96),a=n(4388),c=n(8144),l=n(3935),u=n(2464),h=n(9928),d=n(8860),f=n(8596),p=n(8828),m=n(908),g=n(992),y=n(8392);n(5752);const v=new d.c;function _(e,t){let n=!1;try{n=new URL(t).hostname!==window.location.hostname}catch(e){}return o.c.a(t).class("link").openInNewTab(n).children(o.c.h5(e).children(n?o.c.span(" open_in_new").class("icon"):null)).make()}function w(e,t=0){const n=[];for(const r in e){const i=e[r];if("string"==typeof i)n.push(_(r,i));else{const e=new s.c(r,0===t?"down":"right","absolute",200);e.append(...w(i,t+1)),n.push(e)}}return n}var b;m.c.useDynamicContent((b=v,new Promise(((e,t)=>{h.c.getAndRefresh("navbar-links",b.getNavbarLinks()).then((t=>{let n,r,d;const p=o.c.header().class("page-header").children(o.c.div("header-container","flex-columns","main-axis-space-between","cross-axis-center").children(o.c.div().class("desc","flex-rows","main-axis-center").children(o.c.a("/").children(o.c.h3("Den Geitenwollen Soc.")),o.c.p("Studievereniging Sociologie Nijmegen").class("subtitle")),o.c.div().class("links","flex-columns","main-axis-center","cross-axis-baseline").children(...w(t)),o.c.div().class("quick-actions","center-content","main-axis-space-between","cross-axis-center").children(n=o.c.p("search").class("search-button","icon","click-action").on("click",((e,t)=>{t.textContent="none"===r.style.display?"search_off":"search",i()(r).stop().slideToggle(200)})).onMake((e=>{document.body.addEventListener("click",(t=>{t.target instanceof Node&&!r.contains(t.target)&&t.target!==e&&(e.textContent="search",i()(r).stop().slideUp(200))})),a.c.onChange((()=>e.hidden=a.c.isSlimmerOrEq(a.c.Viewport.MOBILE_PORTRAIT)))})).make(),o.c.p("admin_panel_settings").class("icon","click-action").tooltip("Administratie-paneel").on("click",(()=>location.href="/administratiepaneel.html")).onMake((e=>{(0,l.kL)(u.c.Permission.VIEW_ADMIN_PANEL,(t=>e.style.display=t?"":"none"),!0,!0)})),o.c.p("login").class("icon","click-action").tooltip("Inloggen").on("click",(()=>location.href="/inloggen.html")).onMake((e=>{(0,c.o1)((t=>e.style.display=t?"none":""),!0),c.wX.onAuthStateChanged((t=>e.style.display=t?"none":""))})),o.c.p("logout").class("icon","click-action").tooltip("Uitloggen").on("click",(()=>{c.wX.signOut(),h.c.remove("is-logged-in"),h.c.remove("do-login-expiry"),h.c.remove(`permissions-${h.c.get("own-id")}`),h.c.remove("own-id"),location.reload()})).onMake((e=>{(0,c.o1)((t=>e.style.display=t?"":"none"),!0),c.wX.onAuthStateChanged((t=>e.style.display=t?"":"none"))})),o.c.p("menu").id("open-menu-button").class("icon","click-action").style({display:"none"}).on("click",(()=>{_.hasAttribute("shown")?m():(i()(v).stop().fadeIn(200),_.setAttribute("shown",""),b.textContent="menu_open",document.body.classList.add("no-scroll"))}))),r=o.c.div(void 0,"search-box","flex-columns","main-axis-space-between","cross-axis-center","section-gap").style({display:"none"}).children(d=o.c.div(void 0,"results","flex-columns","cross-axis-center","in-section-gap").children(document.createElement("p")).make(),o.c.input.text().placeholder("Zoeken...").class("query-input").onValueChanged((e=>{if(g.c.empty(d),e=e.trim()){const n=f.C.search(t,e);d.append(...y.c.interlace(n.map((([e,t])=>o.c.a(t,e).class("subtitle").make())),"•"))}d.appendChild(document.createElement("p"))}))).make()),o.c.div("sidebar-container").children(o.c.div("sidebar","links")).on("click",((e,t)=>{e.target===t&&m()}))).make();function m(){i()(v).stop().fadeOut(200),_.removeAttribute("shown"),b.textContent="menu",document.body.classList.remove("no-scroll")}e(p);const v=p.querySelector("#sidebar-container"),_=p.querySelector("#sidebar"),b=p.querySelector("#open-menu-button"),E=p.querySelector(".links"),T=p.querySelector("#sidebar"),S=Array.from(p.querySelectorAll(".links > *"));a.c.onChange((()=>{a.c.isSlimmerOrEq(a.c.Viewport.DESKTOP_SLIM)?(T.prepend(...S),S.forEach((e=>{e instanceof s.c&&(e.foldDir="right")}))):(E.prepend(...S),m(),S.forEach((e=>{e instanceof s.c&&(e.foldDir="down")})))}),!0)})).catch(t)}))),(e=>document.body.prepend(e))),m.c.useDynamicContent(function e(t){return new Promise(((n,r)=>{m.c.markLoadStart(e),h.c.getAndRefresh("social-media-links",t.getSocialMediaLinks()).then((e=>n(o.c.footer().class("page-footer","flex-rows","cross-axis-center").children(o.c.h4("Je vindt ons ook op").id("link-text"),o.c.div().class("social-media-links","flex-columns","main-axis-space-between").children(...e.map((e=>o.c.a(e.href).openInNewTab(!0).children(new p.c(e.origin,e.src)).onMake((t=>{const n=t.firstElementChild;n.alt=e.name,n.classList.add("click-action")}))))),o.c.h5(`© ${(new Date).getFullYear()} Den Geitenwollen Soc.`).class("copyright-notice")).make()))).catch(r).finally((()=>m.c.markLoadEnd(e)))}))}(v),(e=>document.body.append(e)))},4376:(e,t,n)=>{"use strict";n.d(t,{kx:()=>s.kx,Sg:()=>M,U5:()=>O,q4:()=>R,WE:()=>U,mg:()=>F,Kk:()=>B});var r=n(392),i=n(4212),s=n(6900);const o=(e,t)=>t.some((t=>e instanceof t));let a,c;const l=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap;let p={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||h.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return g(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(c||(c=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(y(this),e),g(l.get(this))}:function(...e){return g(t.apply(y(this),e))}:function(e,...n){const r=t.call(y(this),e,...n);return h.set(r,e.sort?e.sort():[e]),g(r)}:(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));u.set(e,t)}(e),o(e,a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,p):e);var t}function g(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(g(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&l.set(t,e)})).catch((()=>{})),f.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=m(e);return t!==e&&(d.set(e,t),f.set(t,e)),t}const y=e=>f.get(e),v=["get","getKey","getAll","getAllKeys","count"],_=["put","add","delete","clear"],w=new Map;function b(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=_.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!v.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return w.set(t,s),s}var E;E=p,p={...E,get:(e,t,n)=>b(e,t)||E.get(e,t,n),has:(e,t)=>!!b(e,t)||E.has(e,t)};class T{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const S="@firebase/app",C="0.9.27",A=new i.YJ("@firebase/app"),k="[DEFAULT]",I={[S]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},x=new Map,D=new Map;function N(e,t){try{e.container.addComponent(t)}catch(n){A.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function R(e){const t=e.name;if(D.has(t))return A.debug(`There were multiple attempts to register component ${t}.`),!1;D.set(t,e);for(const t of x.values())N(t,e);return!0}function O(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const L=new s.UR("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class P{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.Yl("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw L.create("app-deleted",{appName:this._name})}}const M="10.8.0";function F(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:k,automaticDataCollectionEnabled:!1},t),o=i.name;if("string"!=typeof o||!o)throw L.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.Yd)()),!n)throw L.create("no-options");const a=x.get(o);if(a){if((0,s.IN)(n,a.options)&&(0,s.IN)(i,a.config))return a;throw L.create("duplicate-app",{appName:o})}const c=new r.op(o);for(const e of D.values())c.addComponent(e);const l=new P(n,i,c);return x.set(o,l),l}function U(e=k){const t=x.get(e);if(!t&&e===k&&(0,s.Yd)())return F();if(!t)throw L.create("no-app",{appName:e});return t}function B(e,t,n){var i;let s=null!==(i=I[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void A.warn(e.join(" "))}R(new r.Yl(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const j="firebase-heartbeat-database",V=1,z="firebase-heartbeat-store";let H=null;function q(){return H||(H=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=g(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(g(o.result),e.oldVersion,e.newVersion,g(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(j,V,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(z)}catch(e){console.warn(e)}}}).catch((e=>{throw L.create("idb-open",{originalErrorMessage:e.message})}))),H}async function W(e,t){try{const n=(await q()).transaction(z,"readwrite"),r=n.objectStore(z);await r.put(t,$(e)),await n.done}catch(e){if(e instanceof s.kx)A.warn(e.message);else{const t=L.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});A.warn(t.message)}}}function $(e){return`${e.name}!${e.options.appId}`}class G{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Y(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=K();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=K(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),X(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),X(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,s.Wg)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function K(){return(new Date).toISOString().substring(0,10)}class Y{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.yy)()&&(0,s.A3)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await q()).transaction(z),n=await t.objectStore(z).get($(e));return await t.done,n}catch(e){if(e instanceof s.kx)A.warn(e.message);else{const t=L.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});A.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return W(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return W(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function X(e){return(0,s.Wg)(JSON.stringify({version:2,heartbeats:e})).length}R(new r.Yl("platform-logger",(e=>new T(e)),"PRIVATE")),R(new r.Yl("heartbeat",(e=>new G(e)),"PRIVATE")),B(S,C,""),B(S,C,"esm2017"),B("fire-js","")},392:(e,t,n)=>{"use strict";n.d(t,{Yl:()=>i,op:()=>a});var r=n(6900);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.o9;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=s){return this.instances.has(e)}getOptions(e=s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===s?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=s){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},4212:(e,t,n)=>{"use strict";n.d(t,{Ge:()=>i,YJ:()=>l});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},c=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class l{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}},8824:(e,t,n)=>{"use strict";n.d(t,{kx:()=>r.kx,mg:()=>r.mg});var r=n(4376);(0,r.Kk)("firebase","10.8.0","app")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(4216),n(996);var e=n(96),t=n(7152),r=n(7480);function i(e,t){var n=t.attribute;return e=e.replace(s,"&amp;").replace(o,"&gt;").replace(a,"&lt;"),n&&(e=e.replace(c,"&apos;").replace(l,"&quot;")),e}var s=/&/g,o=/>/g,a=/</g,c=/'/g,l=/"/g,u=/((?:[\0-\x08\x0B\f\x0E-\x1F\uFFFD\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/g,h=new RegExp("([\\x7F-\\x84]|[\\x86-\\x9F]|[\\uFDD0-\\uFDEF]|(?:\\uD83F[\\uDFFE\\uDFFF])|(?:\\uD87F[\\uDFFE\\uDFFF])|(?:\\uD8BF[\\uDFFE\\uDFFF])|(?:\\uD8FF[\\uDFFE\\uDFFF])|(?:\\uD93F[\\uDFFE\\uDFFF])|(?:\\uD97F[\\uDFFE\\uDFFF])|(?:\\uD9BF[\\uDFFE\\uDFFF])|(?:\\uD9FF[\\uDFFE\\uDFFF])|(?:\\uDA3F[\\uDFFE\\uDFFF])|(?:\\uDA7F[\\uDFFE\\uDFFF])|(?:\\uDABF[\\uDFFE\\uDFFF])|(?:\\uDAFF[\\uDFFE\\uDFFF])|(?:\\uDB3F[\\uDFFE\\uDFFF])|(?:\\uDB7F[\\uDFFE\\uDFFF])|(?:\\uDBBF[\\uDFFE\\uDFFF])|(?:\\uDBFF[\\uDFFE\\uDFFF])(?:[\\0-\\t\\x0B\\f\\x0E-\\u2027\\u202A-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]))","g");function d(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).removeDiscouragedCharacters,n=void 0===t||t;return e=e.replace(u,""),n&&(e=e.replace(h,"")),e}function f(e){return i(d(e),{attribute:!1})}function p(e,t){return"".concat(g(e)).concat(t)}var m=26;function g(e){if("number"!=typeof e)return"";var t=Math.floor(e/m),n=String.fromCharCode(97+e%m).toUpperCase();return 0===t?n:g(t-1)+n}var y=25569,v=864e5;function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t,n,r,i,s){if(null===n&&!i)return"";var o='<c r="'.concat(p(t,e),'"');if(i&&(o+=' s="'.concat(i,'"')),null===n)return o+"/>";if(r===Date&&!i)throw new Error('No "format" has been specified for a Date cell');n=function(e,t,n){switch(e){case String:if("string"!=typeof t)throw new Error("Invalid cell value: ".concat(t,". Expected a string"));return n(t);case Number:if("number"!=typeof t)throw new Error("Invalid cell value: ".concat(t,". Expected a number"));return String(t);case Date:if(!(t instanceof Date))throw new Error("Invalid cell value: ".concat(t,". Expected a Date"));return String(t.getTime()/v+y);case Boolean:if("boolean"!=typeof t)throw new Error("Invalid cell value: ".concat(t,". Expected a boolean"));return t?"1":"0";case"Formula":if("string"!=typeof t)throw new Error("Invalid cell value: ".concat(t,". Expected a string"));return f(t);default:throw new Error("Unknown schema type: ".concat(e&&e.name||e))}}(r,n,s),(r=function(e){switch(e){case String:return"s";case Number:case Date:return;case Boolean:return"b";case"Formula":return"f";default:throw new Error("Unknown schema type: ".concat(e&&e.name||e))}}(r))&&(o+=' t="'.concat(r,'"'));var a,c,l,u,h=(l=function(e){switch(e){case"inlineStr":return"<is><t>";case"f":return"<f>";default:return"<v>"}}(r),u=l.replace(b,"</"),[l,u]),d=(c=2,function(e){if(Array.isArray(e))return e}(a=h)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(a,c)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(a,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return o+">"+d[0]+n+d[1]+"</c>"}var b=/</g;function E(e){var t=e.align,n=e.alignVertical,r=e.textRotation,i=e.wrap,s=e.fontFamily,o=e.fontSize,a=e.fontWeight,c=e.fontStyle,l=e.color,u=e.backgroundColor,h=e.borderColor,d=e.borderStyle,f=e.leftBorderColor,p=e.leftBorderStyle,m=e.rightBorderColor,g=e.rightBorderStyle,y=e.topBorderColor,v=e.topBorderStyle,_=e.bottomBorderColor,w=e.bottomBorderStyle;if(t||n||r||i||s||o||a||c||l||u||h||d||f||p||m||g||y||v||_||w)return function(e){var t={};for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}({align:t,alignVertical:n,textRotation:r,wrap:i,fontFamily:s,fontSize:o,fontWeight:a,fontStyle:c,color:l,backgroundColor:u,borderColor:h,borderStyle:d,leftBorderColor:f,leftBorderStyle:p,rightBorderColor:m,rightBorderStyle:g,topBorderColor:y,topBorderStyle:v,bottomBorderColor:_,bottomBorderStyle:w})}function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I={fontWeight:"bold"},x=14;function D(e,t){if(!e)return"";if(e.type!==Date||e.width||(e.width=x),!e.width)return"";var n=t+1;return'<col min="'.concat(n,'" max="').concat(n,'" width="').concat(e.width,'" customWidth="1"/>')}function N(e){var t=e.data,n=e.rowIndex,r=e.columnIndex,i=e.span,s=e.rowSpan,o=e.cloneData,a=E(t[n][r]);a&&(t=o());for(var c=n;c<=n+(s-1);){for(var l=r;l<=r+(i-1);){var u=t[c][l];if(c>n||l>r){if(null!=u)throw new Error("[write-excel-file] When using `span` or `rowSpan` parameters, all hidden overlapped cells should be represented by `null`s or `undefined`s. Cell at row ".concat(n+1," and column ").concat(r+1," is configured with `span` ").concat(i," and `rowSpan` ").concat(s,". Cell at row ").concat(c+1," and column ").concat(l+1," is neither `null` nor `undefined`: ").concat(JSON.stringify(u)));a&&(t[c][l]=a)}l++}c++}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e){return i(d(e),{attribute:!0})}var L='<?xml version="1.0" ?>\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:mv="urn:schemas-microsoft-com:mac:vml" xmlns:mx="http://schemas.microsoft.com/office/mac/excel/2008/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xm="http://schemas.microsoft.com/office/excel/2006/main">{views}{columnsDescription}<sheetData>{data}</sheetData>{mergedCellsDescription}{layout}</worksheet>';function P(e,t){var n=t.schema,r=t.columns,i=t.headerStyle,s=t.getStyle,o=t.getSharedString,a=t.customFont,c=t.dateFormat,l=t.orientation,u=t.stickyRowsCount,h=t.stickyColumnsCount,d=t.sheetId;!function(e,t){if(t.schema){if(!Array.isArray(e))throw new TypeError("Expected an array of objects")}else{if(!Array.isArray(e))throw new TypeError("Expected an array of arrays");if(e.length>0&&!Array.isArray(e[0]))throw new TypeError("Expected an array of arrays")}}(e,{schema:n});var f=function(e,t){var n=[];if(t.schema)return{data:e,mergedCells:n};for(var r=function(){e=e.slice();for(var t=0;t<e.length;)e[t]=e[t].slice(),t++;return r=function(){return e},e},i=0;i<e.length;){for(var s=e[i],o=0;o<s.length;){var a=s[o];if(a){var c=a.span,l=void 0===c?1:c,u=a.rowSpan,h=void 0===u?1:u;(l>1||h>1)&&(N({data:e,rowIndex:i,columnIndex:o,span:l,rowSpan:h,cloneData:r}),n.push([[i,o],[i+(h?h-1:0),o+(l?l-1:0)]]))}o++}i++}return{data:e,mergedCells:n}}(e,{schema:n}),m=f.data,g=f.mergedCells;return L.replace("{data}",function(e,t){var n=t.schema,r=t.headerStyle,i=t.getStyle,s=t.getSharedString,o=t.customFont,a=t.dateFormat;if(n){for(var c,l=[],u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n);!(c=u()).done;)if(c.value.column){l=[n.map((function(e){return C({type:String,value:e.column,align:e.align},r||I)}))];break}e=l.concat(e.map((function(e){return n.map((function(t){return C(C({},t),{},{value:t.value(e)})}))})))}return e.map((function(e,t){return function(e,t,n){var r,i=n.getStyle,s=n.getSharedString,o=n.customFont,a=n.dateFormat,c=n.usesSchema,l=t+1,u=e.map((function(e,t){if(null==e)return"";var n,u=e.height,h=E(e),d=e.type,f=e.value,p=e.format;if(function(e){return null==e||""===e}(f)?f=null:void 0===d&&(c||(d=function(e){switch(T(e)){case"string":return String;case"number":return Number;case"boolean":return Boolean;default:if(e instanceof Date)return Date}}(f)),void 0===d&&(d=String,f=String(f))),p){if(d!==Date&&d!==Number&&"Formula"!==d)throw new Error('`format` can only be used on `Date`, `Number` or `"Formula"` cells')}else d===Date&&(p=a);return(p||o||h)&&(n=i(h||{},{format:p})),u&&(void 0===r||r<u)&&(r=u),w(l,t,f,d,n,s)})).join("");return'<row r="'.concat(l,'"')+(r?' ht="'.concat(r,'" customHeight="1"'):"")+">"+u+"</row>"}(e,t,{getStyle:i,getSharedString:s,customFont:o,dateFormat:a,usesSchema:void 0!==n})})).join("")}(m,{schema:n,headerStyle:i,getStyle:s,getSharedString:o,customFont:a,dateFormat:c})).replace("{views}",function(e){var t=e.stickyRowsCount,n=e.stickyColumnsCount;if(!t&&!n)return"";var r="";return r+="<sheetViews>",r+='<sheetView tabSelected="1" workbookViewId="0">',r+='<pane ySplit="'.concat(t||0,'" xSplit="').concat(n||0,'" topLeftCell="').concat(p(n||0,(t||0)+1),'" activePane="bottomRight" state="frozen"/>'),(r+="</sheetView>")+"</sheetViews>"}({stickyRowsCount:u,stickyColumnsCount:h})).replace("{columnsDescription}",function(e){var t=e.schema,n=e.columns;if(t||n){var r=(t||n).map(D).join("");if(r)return"<cols>".concat(r,"</cols>")}return""}({schema:n,columns:r})).replace("{mergedCellsDescription}",function(e){return 0===e.length?"":'<mergeCells count="'.concat(e.length,'">')+e.map((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(t,n)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],s=r[1],o=p(i[1],i[0]+1)+":"+p(s[1],s[0]+1);return'<mergeCell ref="'.concat(o,'"/>')})).join("")+"</mergeCells>"}(g)).replace("{layout}",function(e){var t=e.sheetId,n=e.orientation,r="";return n&&(r+="<pageMargins",r+=' left="'.concat(.7,'"'),r+=' right="'.concat(.7,'"'),r+=' top="'.concat(.75,'"'),r+=' bottom="'.concat(.75,'"'),r+=' header="'.concat(.3,'"'),r+=' footer="'.concat(.3,'"'),r+="/>"),n&&(r+="<pageSetup",r+=' paperSize="'.concat(9,'"'),r+=' orientation="'.concat(O(n),'"'),r+=' r:id="rId'.concat(t,'"'),r+="/>"),r}({sheetId:d,orientation:l}))}function M(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U=100;function B(e){if("#"!==e[0])throw new Error('Color "'.concat(e,'" must start with a "#"'));return"FF".concat(e.slice(1).toUpperCase())}function j(e){if(!(e>=-90&&e<=90))throw new Error("Unsupported text rotation angle: ".concat(e,". Values from -90 to 90 are supported."));return e}function V(e){return e<0?90-e:e}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(){var e=[],t={};return{getSharedStringsXml:function(){return function(e){var t='<?xml version="1.0"?>';t+='<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">';for(var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(n=r()).done;){var i=n.value,s=i.trim().length===i.length?"":' xml:space="preserve"';t+="<si><t".concat(s,">"),t+=f(i),t+="</t></si>"}return t+"</sst>"}(e)},getSharedString:function(n){var r=t[n];return void 0===r&&(r=String(e.length),t[n]=r,e.push(n)),r}}}var q=/[\[\]\/\\:*?]+/;function W(e){if(!e)throw new Error("Sheet name can't be empty");if(e.length>31)throw new Error('Sheet name "'.concat(e,"\" can't be longer than 31 characters"));if(q.test(e))throw new Error('Sheet name "'.concat(e,'" contains illegal characters: []/\\:*?'))}function $(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=["fileName"];function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.fileName;return function(e,n){var r=n.sheet,i=n.sheets,s=n.schema,o=n.columns,a=n.headerStyle,c=n.fontFamily,l=n.fontSize,u=n.orientation,h=n.stickyRowsCount,d=n.stickyColumnsCount,f=n.dateFormat,p=new t;p.file("_rels/.rels",'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>'),p.file("[Content_Types].xml",'<?xml version="1.0" ?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default ContentType="application/xml" Extension="xml"/><Default ContentType="application/vnd.openxmlformats-package.relationships+xml" Extension="rels"/><Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" PartName="/xl/worksheets/sheet1.xml"/><Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" PartName="/xl/workbook.xml"/><Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml" PartName="/xl/sharedStrings.xml"/><Override ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" PartName="/xl/styles.xml"/></Types>');var m=function(e){var t=e.data,n=e.sheetName,r=e.sheetNames,i=e.schema,s=e.columns,o=e.headerStyle,a=e.fontFamily,c=e.fontSize,l=e.orientation,u=e.stickyRowsCount,h=e.stickyColumnsCount,d=e.dateFormat,f=H(),p=f.getSharedStringsXml,m=f.getSharedString,g=function(e){var t=e.fontFamily,n=e.fontSize,r=Boolean(t||n);void 0===t&&(t="Calibri"),void 0===n&&(n=12);var i=[],s={},o=[],a={},c=[],l={},u=[],h={},d=[],f={};function p(e,p){var m,g=e.align,y=e.alignVertical,v=e.textRotation,_=e.wrap,w=e.fontFamily,b=e.fontSize,E=e.fontWeight,T=e.fontStyle,S=e.color,C=e.backgroundColor,A=e.borderColor,k=e.borderStyle,I=e.leftBorderColor,x=e.leftBorderStyle,D=e.rightBorderColor,N=e.rightBorderStyle,R=e.topBorderColor,O=e.topBorderStyle,L=e.bottomBorderColor,P=e.bottomBorderStyle,M=p.format,F="".concat(w||"-",":").concat(b||"-",":").concat(E||"-",":").concat(T||"-",":").concat(S||"-"),B=C||"-",j="".concat(R||A||"-",":").concat(O||k||"-")+"/"+"".concat(D||A||"-",":").concat(N||k||"-")+"/"+"".concat(L||A||"-",":").concat(P||k||"-")+"/"+"".concat(I||A||"-",":").concat(x||k||"-"),V="".concat(g||"-","/").concat(y||"-","/").concat(v||"-","/").concat(M||"-","/").concat(_||"-","/").concat(F,"/").concat(B,"/").concat(j),z=a[V];if(void 0!==z)return z;M&&void 0===(m=s[M])&&(m=s[M]=String(U+i.length),i.push(M));var H,q,W=r?0:void 0;return(w||b||E||T||S)&&void 0===(W=l[F])&&(W=l[F]=String(c.length),c.push({custom:!0,size:b||n,family:w||t,weight:E,style:T,color:S})),C&&void 0===(H=h[B])&&(H=h[B]=String(u.length),u.push({color:C})),(A||k||I||x||D||N||R||O||L||P)&&void 0===(q=f[j])&&(q=f[j]=String(d.length),d.push({left:{style:x||k,color:I||A},right:{style:N||k,color:D||A},top:{style:O||k,color:R||A},bottom:{style:P||k,color:L||A}})),o.push({fontId:W,fillId:H,borderId:q,align:g,alignVertical:y,textRotation:v,wrap:_,formatId:m}),a[V]=String(o.length-1)}return c.push({size:n,family:t,custom:r}),l["-:-"]=0,u.push({}),h["-"]=0,d.push({left:{},right:{},top:{},bottom:{}}),f["-:-/-:-/-:-/-:-"]=0,u.push({gray125:!0}),p({},{}),{getStylesXml:function(){return function(e){var t=e.formats,n=e.styles,r=e.fonts,i=e.fills,s=e.borders,o='<?xml version="1.0" ?>';if(o+='<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">',t.length>0){o+='<numFmts count="'.concat(t.length,'">');for(var a=0;a<t.length;a++)o+='<numFmt numFmtId="'.concat(U+a,'" formatCode="').concat(O(t[a]),'"/>');o+="</numFmts>"}o+='<fonts count="'.concat(r.length,'">');for(var c,l=M(r);!(c=l()).done;){var u=c.value,h=u.size,d=u.family,f=u.color,p=u.weight,m=u.style,g=u.custom;o+="<font>",o+='<sz val="'.concat(h,'"/>'),o+="<color ".concat(f?'rgb="'+O(B(f))+'"':'theme="1"',"/>"),o+='<name val="'.concat(O(d),'"/>'),o+='<family val="2"/>',g||(o+='<scheme val="minor"/>'),"bold"===p&&(o+="<b/>"),"italic"===m&&(o+="<i/>"),o+="</font>"}o+="</fonts>",o+='<fills count="'.concat(i.length,'">');for(var y,v=M(i);!(y=v()).done;){var _=y.value,w=_.color,b=_.gray125;o+="<fill>",w?(o+='<patternFill patternType="solid">',o+='<fgColor rgb="'.concat(O(B(w)),'"/>'),o+='<bgColor indexed="64"/>',o+="</patternFill>"):o+=b?'<patternFill patternType="gray125"/>':'<patternFill patternType="none"/>',o+="</fill>"}o+="</fills>",o+='<borders count="'.concat(s.length,'">');for(var E,T=M(s);!(E=T()).done;){var S=E.value,C=S.left,A=S.right,k=S.top,I=S.bottom,x=function(e,t){var n=t.style,r=t.color;r&&!n&&(n="thin");var i=!!r;return"<".concat(e)+(n?' style="'.concat(O(n),'"'):"")+(i?">":"/>")+(r?'<color rgb="'.concat(O(B(r)),'"/>'):"")+(i?"</".concat(e,">"):"")};o+="<border>",o+=x("left",C),o+=x("right",A),o+=x("top",k),o+=x("bottom",I),o+="<diagonal/>",o+="</border>"}o+="</borders>",o+='<cellXfs count="'.concat(n.length,'">');for(var D,N=M(n);!(D=N()).done;){var R=D.value,L=R.fontId,P=R.fillId,F=R.borderId,z=R.align,H=R.alignVertical,q=R.textRotation,W=R.wrap,$=R.formatId;o+="<xf "+[void 0!==$?'numFmtId="'.concat($,'"'):void 0,void 0!==$?'applyNumberFormat="1"':void 0,void 0!==L?'fontId="'.concat(L,'"'):void 0,void 0!==L?'applyFont="1"':void 0,void 0!==P?'fillId="'.concat(P,'"'):void 0,void 0!==P?'applyFill="1"':void 0,void 0!==F?'borderId="'.concat(F,'"'):void 0,void 0!==F?'applyBorder="1"':void 0,z||H||q||W?'applyAlignment="1"':void 0].filter((function(e){return e})).join(" ")+">"+(z||H||q||W?"<alignment"+(z?' horizontal="'.concat(O(z),'"'):"")+(H?' vertical="'.concat(O(H),'"'):"")+(W?' wrapText="1"':"")+(q?' textRotation="'.concat(V(j(q)),'"'):"")+"/>":"")+"</xf>"}return(o+="</cellXfs>")+"</styleSheet>"}({formats:i,styles:o,fonts:c,fills:u,borders:d})},getStyle:p}}({fontFamily:a,fontSize:c}),y=g.getStylesXml,v=g.getStyle;if(r&&s&&!Array.isArray(s[0]))throw new Error('In a "write multiple sheets" scenario, `columns` parameter must be an array of `columns` for each sheet.');r||(r=[n||"Sheet1"],t=[t],s&&(s=[s]),i&&(i=[i]));for(var _,w=$(r);!(_=w()).done;)W(_.value);for(var b,E=[],T=0,S=$(r);!(b=S()).done;)b.value,E.push(P(t[T],{schema:i&&i[T],columns:s&&s[T],headerStyle:o,getStyle:v,getSharedString:m,customFont:a||c,dateFormat:d,orientation:l,stickyRowsCount:u,stickyColumnsCount:h,sheetId:T+1})),T++;return{sheets:r.map((function(e,t){return{id:t+1,name:e,data:E[t]}})),getSharedStringsXml:p,getStylesXml:y}}({data:e,sheetName:r,sheetNames:i,schema:s,columns:o,headerStyle:a,fontFamily:c,fontSize:l,orientation:u,stickyRowsCount:h,stickyColumnsCount:d,dateFormat:f}),g=m.sheets,y=m.getSharedStringsXml,v=m.getStylesXml,_=p.folder("xl");_.file("_rels/workbook.xml.rels",function(e){var t=e.sheets;return'<?xml version="1.0" ?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">'+t.map((function(e){var t=e.id;return'<Relationship Id="rId'.concat(t,'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet').concat(t,'.xml"/>')})).join("")+'<Relationship Id="rId'.concat(t.length+1,'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/>')+'<Relationship Id="rId'.concat(t.length+2,'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/>')+"</Relationships>"}({sheets:g})),_.file("workbook.xml",function(e){return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mx="http://schemas.microsoft.com/office/mac/excel/2008/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:mv="urn:schemas-microsoft-com:mac:vml" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" xmlns:xm="http://schemas.microsoft.com/office/excel/2006/main"><workbookPr/>'+(e.stickyRowsCount||e.stickyColumnsCount?"<bookViews><workbookView/></bookViews>":"")+"<sheets>"+e.sheets.map((function(e){var t=e.id,n=e.name;return'<sheet name="'.concat(n,'" sheetId="').concat(t,'" r:id="rId').concat(t,'"/>')})).join("")+"</sheets><definedNames/><calcPr/></workbook>"}({sheets:g,stickyRowsCount:h,stickyColumnsCount:d})),_.file("styles.xml",v()),_.file("sharedStrings.xml",y());for(var w,b=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(g);!(w=b()).done;){var E=w.value,T=E.id,S=E.data;_.file("worksheets/sheet".concat(T,".xml"),S)}return p.generateAsync({type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})}(e,function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(n,K)).then((function(e){return i?r.saveAs(e,i):e}))}var Q=n(8440),J=n(784),Z=n(9684),ee=n(8036),te=n(3935),ne=n(7632),re=n(2464);class ie extends ne.S{constructor(e,t=ee.c.generateID(),n,r,i="",s,o){super(t,o),this.components=o,this.sourceDB=e,this.name=n,this.description=r,this.category=i,[this.starts_at,this.ends_at]=s}isNow(e=new Date){return this.starts_at<=e&&e<=this.ends_at}overlapsWith(e){return J.c.Timespans.overlap([this.starts_at,this.ends_at],[e.starts_at,e.ends_at])}daysOverlapsWith(e){return J.c.Timespans.daysOverlap([this.starts_at,this.ends_at],[e.starts_at,e.ends_at])}isValid(){return 0!==this.name.length&&this.starts_at<=this.ends_at&&this.components.every((e=>e.validate(this)))}copy(){return new ie(this.sourceDB,this.id,this.name,this.description,this.category,[new Date(this.starts_at),new Date(this.ends_at)],this.components.map((e=>e.copy())))}satisfies(e){if(!super.satisfies(e))return!1;if(e.range){if(e.range.from&&this.starts_at<e.range.from&&this.ends_at<e.range.from)return!1;if(e.range.to&&this.starts_at>e.range.to&&this.ends_at>e.range.to)return!1}return!e.category||this.category===e.category}equals(e){return super.equals(e)&&e.name===this.name&&e.description===this.description&&e.category===this.category&&Math.floor(e.starts_at.getTime()/1e3)===Math.floor(this.starts_at.getTime()/1e3)&&Math.floor(e.ends_at.getTime()/1e3)===Math.floor(this.ends_at.getTime()/1e3)}}!function(e){let t;!function(t){class n extends ne.S.Component{get bg(){return this._bg}set bg(e){if(!Q.c.isHex(e))throw new TypeError(`value "${e}" is now a HexColor`);this._bg=e}constructor(e){super(),this.Class=n,this.dependencies=[],this.translatedName="Achtergrondkleur",Object.freeze(this.dependencies),this.bg=e}copy(){return new n(this.bg)}validateValues(){return Q.c.isHex(this.bg)}}t.Color=n;class r extends ne.S.Component{static fetchPermissions(){return(0,te.qM)([re.c.Permission.READ_EVENT_COMMENTS,re.c.Permission.REGISTER_FOR_EVENTS,re.c.Permission.DEREGISTER_FOR_EVENTS]).then((e=>(this.CAN_READ_COMMENTS=e.READ_EVENT_COMMENTS,this.CAN_REGISTER=e.REGISTER_FOR_EVENTS,this.CAN_DEREGISTER=e.DEREGISTER_FOR_EVENTS,e)))}static checkCanReadComments(){return void 0===this.CAN_READ_COMMENTS?this.fetchPermissions().then((e=>e.READ_EVENT_COMMENTS)):Promise.resolve(this.CAN_READ_COMMENTS)}static checkCanRegister(){return void 0===this.CAN_REGISTER?this.fetchPermissions().then((e=>e.REGISTER_FOR_EVENTS)):Promise.resolve(this.CAN_REGISTER)}static checkCanDeregister(){return void 0===this.CAN_DEREGISTER?this.fetchPermissions().then((e=>e.DEREGISTER_FOR_EVENTS)):Promise.resolve(this.CAN_DEREGISTER)}get registrations(){return{...this._registrations}}get registeredNames(){return Object.values(this._registrations)}get numRegistrations(){return Z.c.sizeOf(this._registrations)}isRegistered(e){return e in this._registrations}get capacity(){return this._capacity}set capacity(e){if(void 0!==e&&e<this.numRegistrations)throw new Error("Capacity must be greater or equal to the number of registrations");this._capacity=e}constructor(e,t){super(),this.Class=r,this.dependencies=[],this.translatedName="Inschrijfbaar voor leden",this._registrations={...e},this.capacity=t}canBeRemovedFrom(e){return super.canBeRemovedFrom(e)&&0===this.numRegistrations}getCommentsFor(e){return r.checkCanReadComments().then((t=>t?e.sourceDB.getCommentsFor(e):{}))}register(e,t){return e.sourceDB.registerFor(e,t).then((([e,t])=>{this._registrations[e]=t}))}deregister(e){return e.sourceDB.deregisterFor(e).then((e=>{delete this._registrations[e]}))}copy(){return new r({...this._registrations},this.capacity)}validateValues(e){return void 0===this._capacity||Z.c.sizeOf(this._registrations)<this._capacity}}t.Registerable=r;class i extends ne.S.Component{constructor(e){super(),this.Class=i,this.dependencies=[r],this.translatedName="Startmoment voor inschrijving",this.moment=e}isNow(){return Date.now()>=this.moment.getTime()}copy(){return new i(new Date(this.moment))}validateValues(e){return this.moment<e.ends_at}}t.RegistrationStart=i;class s extends ne.S.Component{constructor(e){super(),this.Class=s,this.dependencies=[r],this.translatedName="Eindmoment voor inschrijving",this.moment=e}isNow(){return Date.now()<=this.moment.getTime()}copy(){return new s(new Date(this.moment))}validateValues(e){return this.moment<e.ends_at}}t.RegistrationEnd=s;class o extends ne.S.Component{get cost(){return this._cost}set cost(e){if(Number.isNaN(e))throw new Error("new cost cannot be NaN");if(!Number.isFinite(e))throw new Error("new cost must be finite");if(e%1!=0)throw new Error(`cost must be in whole cents (${e} is not)`);if(e<=0)throw new Error(`cost must be greater than 0 (${e} is not)`);this._cost=e}constructor(e){super(),this.Class=o,this.dependencies=[r],this.translatedName="Activiteit kost geld",this.cost=e}copy(){return new o(this.cost)}validateValues(e){return this._cost>0&&this._cost%1==0}canBeAddedTo(t){const n=t.getComponent(e.Components.Registerable);return super.canBeAddedTo(t)&&(void 0===n||0===n.numRegistrations)}}t.Cost=o}(t=e.Components||(e.Components={}))}(ie||(ie={}));class se extends ne.c{registerFor(e,t){if(e.hasComponent(ie.Components.Registerable))return this.doRegisterFor(e,t);throw new Error("event is not registerable")}deregisterFor(e){if(e.hasComponent(ie.Components.Registerable))return this.doDeregisterFor(e);throw new Error("event is not registerable")}getCommentsFor(e){if(e.hasComponent(ie.Components.Registerable))return this.fetchCommentsFor(e);throw new Error("event is not registerable")}}var oe=n(4440),ae=n(9796),ce=n(7936),le=n(8144),ue=n(8356),he=n(9368),de=n(4388),fe=n(5752),pe=n(6316),me=n(4112),ge=n(8824),ye=n(9560);class ve extends se{constructor(){var e;super(...arguments),this.converter=(e=this,{toFirestore(e){const t=e.getComponent(ie.Components.Registerable);return t?{name:e.name,description:e.description,category:e.category,...e.hasComponent(ie.Components.Color)&&{color:e.getComponent(ie.Components.Color).bg},registrations:t.registrations,...t.capacity&&{capacity:t.capacity},...e.hasComponent(ie.Components.Cost)&&{cost:e.getComponent(ie.Components.Cost).cost},starts_at:me.kR.fromDate(e.starts_at),ends_at:me.kR.fromDate(e.ends_at),...e.hasComponent(ie.Components.RegistrationStart)&&{can_register_from:me.kR.fromDate(e.getComponent(ie.Components.RegistrationStart).moment)},...e.hasComponent(ie.Components.RegistrationEnd)&&{can_register_until:me.kR.fromDate(e.getComponent(ie.Components.RegistrationEnd).moment)}}:{name:e.name,description:e.description,category:e.category,...e.hasComponent(ie.Components.Color)&&{color:e.getComponent(ie.Components.Color).bg},starts_at:me.kR.fromDate(e.starts_at),ends_at:me.kR.fromDate(e.ends_at)}},fromFirestore(t){const n=t.data(),r=[];return n.color&&r.push(new ie.Components.Color(n.color)),"registrations"in n&&(r.push(new ie.Components.Registerable(n.registrations,n.capacity)),n.can_register_from&&r.push(new ie.Components.RegistrationStart(n.can_register_from.toDate())),n.can_register_until&&r.push(new ie.Components.RegistrationEnd(n.can_register_until.toDate())),n.cost&&r.push(new ie.Components.Cost(n.cost))),new ie(e,t.id,n.name,n.description,n.category,[n.starts_at.toDate(),n.ends_at.toDate()],r)}}),this.collection=(0,me.oV)(le.AZ,"events").withConverter(this.converter)}get(e={}){return this.getEvents(e)}count(e={}){return this.getEvents(e,!0)}getRange(e,t,n){return e??(e=new Date(-864e13)),t??(t=new Date(864e13)),this.getEvents({range:{from:e,to:t},...n})}getById(e){return new Promise(((t,n)=>{const r=(0,me.UN)(this.collection,e);(0,me.i4)(r).then((e=>{e.exists()?t(e.data()):t(void 0)})).catch(n)}))}getByCategory(e,t){return this.getEvents({category:e,...t})}doRegisterFor(e,t){return(0,le.iA)().then((e=>{if(null===e)throw new ge.kx("unauthenticated","Not logged in.");return ve.USER_DB.getById(e.uid)})).then((n=>{if(n){const r=(0,me.sv)(le.AZ);if(r.update((0,me.UN)(this.collection,e.id),{[`registrations.${n.id}`]:n.fullName}),t){const i={body:t,created_at:me.kR.now()};r.set((0,me.UN)(le.AZ,"events",e.id,"comments",n.id),i)}return Promise.all([r.commit(),[n.id,n.fullName]])}throw new Error("user not found!!")})).then((([e,t])=>t))}doDeregisterFor(e){return(0,le.iA)().then((t=>{if(null===t)throw new ge.kx("unauthenticated","Not logged in.");{const n=(0,me.sv)(le.AZ);return n.update((0,me.UN)(this.collection,e.id),{[`registrations.${t.uid}`]:(0,me.cr)()}),n.delete((0,me.UN)(this.collection,e.id,"comments",t.uid)),Promise.all([n.commit(),t.uid])}})).then((([e,t])=>t))}fetchCommentsFor(e){const t=(0,me.oV)(le.AZ,"events",e.id,"comments");return(0,me.uY)(t).then((e=>{const t={};return e.forEach((e=>{const n=e.data();t[e.id]={id:e.id,created_at:n.created_at.toDate(),body:n.body}})),t}))}doWrite(...e){return new Promise(((t,n)=>{const r=(0,me.sv)(le.AZ);for(const t of e)r.set((0,me.UN)(le.AZ,"events",t.id),this.converter.toFirestore(t));r.commit().then((()=>t(e.length))).catch(n)}))}doDelete(...e){return new Promise(((t,n)=>{const r=(0,me.sv)(le.AZ);for(const t of e)r.delete((0,me.UN)(le.AZ,"events",t.id));r.commit().then((()=>t(e.length))).catch(n)}))}getEvents(e,t=!1){const n=[];void 0!==e.id&&n.push((0,me.A9)((0,me.ET)(),"==",e.id)),void 0!==e.limit&&n.push((0,me.Yf)(e.limit)),void 0!==e.notId&&n.push((0,me.A9)((0,me.ET)(),"!=",e.notId)),void 0!==e.category&&n.push((0,me.A9)("category","==",e.category));let r=[];return e.range?e.range.from&&e.range.to?r.push([(0,me.A9)("starts_at",">=",e.range.from),(0,me.A9)("starts_at","<=",e.range.to)],[(0,me.A9)("ends_at",">=",e.range.from),(0,me.A9)("ends_at","<=",e.range.to)]):e.range.from?r.push([(0,me.A9)("ends_at",">=",e.range.from)]):r.push([(0,me.A9)("starts_at","<=",e.range.to)]):r.push([]),new Promise((async(e,i)=>{const s=r.map((e=>(0,me.kt)(this.collection,...e,...n)));t&&1===s.length?(0,me.QL)(s[0]).then((t=>e(t.data().count))).catch(i):Promise.all(s.map((e=>(0,me.uY)(e)))).then((n=>{let r={};n.forEach((e=>{e.forEach((e=>r[e.id]=e.data()))})),e(t?Object.keys(r).length:Object.values(r))})).catch(i)}))}}ve.USER_DB=new ye.c;const _e=ve;class we{constructor(){}static firebase(){return new _e}static fromOrigin(e){if(e===we.Origin.FIREBASE)return this.firebase();throw new Error(`can't construct EventDatabase from origin "${e}".`)}}!function(e){let t;!function(e){e.FIREBASE="firebase"}(t=e.Origin||(e.Origin={}))}(we||(we={}));const be=we;var Ee,Te=n(1244),Se=n(908),Ce=n(992);class Ae extends HTMLElement{constructor(e,t){super(),this.info=e,this.allNames=t,this.initElement()}initElement(){this.classList.add("info-component-editor","flex-rows","cross-axis-center","in-section-gap"),this.componentEditors=this.appendChild(e.c.div(void 0,"component-editors","flex-rows","in-section-gap").children(...this.info.components.map((e=>this.makeComponentEditor(this.info,e,e.canBeRemovedFrom(this.info))))).make()),this.selector=this.appendChild(e.c.select(Z.c.mapToObject(this.allNames,(e=>{const t=this.createComponent(e);return[t.translatedName,!t.canBeAddedTo(this.info)]}))).option("+","variable_add",!0).value("+").onValueChanged((e=>{"+"!==e&&(this.addComponent(e,this.createComponent(e)),this.selector.value="+")})).tooltip("Instelling toevoegen").make())}refresh(){Ce.c.empty(this.componentEditors),this.componentEditors.append(...this.info.components.map((e=>this.makeComponentEditor(this.info,e,e.canBeRemovedFrom(this.info)))));const e=Array.from(this.selector.options);e.forEach((e=>{e.hidden="+"===e.value||!this.createComponent(e.value).canBeAddedTo(this.info)})),this.selector.hidden=e.every((e=>e.hidden))}addComponent(e,t=this.createComponent(e)){if(!t.canBeAddedTo(this.info))throw new Error(`${e} component cannot be added to info object`);this.info.components.push(t),this.componentEditors.appendChild(this.makeComponentEditor(this.info,t,t.canBeRemovedFrom(this.info))),this.refresh(),this.dispatchEvent(new Event("input")),this.dispatchEvent(new Event("change"))}removeComponent(e){const t=this.info.components.indexOf(e);if(-1===t)throw new Error("given component is part of info object");this.info.components.splice(t,1),this.refresh(),this.dispatchEvent(new Event("input")),this.dispatchEvent(new Event("change"))}}class ke extends Ae{constructor(e){super(e,["color","cost","registerable","registrationStart","registrationEnd"])}createComponent(e){return ke.creators[e](this.info)}makeComponentEditor(t,n,r){if(n instanceof ie.Components.Color)return e.c.div(void 0,"flex-columns","cross-axis-center","section-gap").children(e.c.h4("palette").class("icon","no-margin"),e.c.div(void 0,"flex-columns","center-content","in-section-gap").children(e.c.h4(n.translatedName).class("no-margin","text-center"),e.c.input.color(n.bg).onValueChanged((e=>n.bg=e))),r?e.c.iconButton("remove",(()=>this.removeComponent(n)),"Instelling verwijderen"):e.c.h4("check").class("icon","no-margin")).make();if(n instanceof ie.Components.Cost)return e.c.div(void 0,"flex-columns","cross-axis-center","section-gap").children(e.c.h4("euro_symbol").class("icon","no-margin"),e.c.div(void 0,"flex-columns","center-content","in-section-gap").children(e.c.h4("Activiteit kost €").class("no-margin","text-center"),e.c.input.number(.01*n.cost,.01,void 0,.01).disabled(0!==t.getComponent(ie.Components.Registerable).numRegistrations).on("input",((e,t)=>{try{const e=t.valueAsNumber;Number.isNaN(e)||(n.cost=Math.round(100*Te.c.clamp(e,.01)))}catch{}})).on("change",((e,t)=>{try{const e=t.valueAsNumber;Number.isNaN(e)?t.valueAsNumber=.01:n.cost=Math.round(100*Te.c.clamp(e,.01))}catch(e){console.log(e),t.valueAsNumber=.01}finally{n.cost=100*t.valueAsNumber}})).style({width:"6em"})),r?e.c.iconButton("remove",(()=>this.removeComponent(n)),"Instelling verwijderen"):e.c.h4("check").class("icon","no-margin")).make();if(n instanceof ie.Components.Registerable)return e.c.div(void 0,"flex-columns","cross-axis-center","section-gap").children(e.c.h4("how_to_reg").class("icon","no-margin"),e.c.div(void 0,"flex-columns","center-content","section-gap").children(e.c.h4(n.translatedName).class("no-margin","text-center"),e.c.div(void 0,"capacity-editor","no-margin","flex-columns","cross-axis-center","in-section-gap").children(e.c.h4("(").class("no-margin"),e.c.h4("social_distance").class("icon"),e.c.input.number(n.capacity??999,n.numRegistrations,999,1).on("input",((e,t)=>{try{const e=t.valueAsNumber;Number.isNaN(e)||(t.valueAsNumber=Te.c.clamp(e,n.numRegistrations,999))}catch{}})).on("change",((e,t)=>{try{const e=t.valueAsNumber;Number.isNaN(e)?t.value=t.max:t.valueAsNumber=Te.c.clamp(e,n.numRegistrations,999)}catch(e){console.log(e),t.valueAsNumber=999}finally{n.capacity=999===t.valueAsNumber?void 0:t.valueAsNumber}})).style({width:"5em"}),e.c.h4(")").class("no-margin")).tooltip("Maximaal aantal inschrijvingen")),r?e.c.iconButton("remove",(()=>this.removeComponent(n)),"Instelling verwijderen"):e.c.h4("check").class("icon","no-margin")).make();if(n instanceof ie.Components.RegistrationStart)return e.c.div(void 0,"flex-columns","cross-axis-center","section-gap").children(e.c.h4("line_start_square").class("icon","no-margin"),e.c.div(void 0,"flex-columns","center-content","in-section-gap").children(e.c.h4(n.translatedName).class("no-margin","text-center"),e.c.input.dateTimeLocal(n.moment,new Date,t.starts_at).on("input",((e,r)=>{try{const e=new Date(r.value);J.c.Timestamps.isValid(e)&&(n.moment=J.c.Timestamps.clamp(e,new Date,t.starts_at))}catch(e){}})).on("change",((e,r)=>{try{const e=new Date(r.value);J.c.Timestamps.isValid(e)?e<new Date?J.c.Timestamps.setInputValue(r,new Date):e>t.starts_at&&J.c.Timestamps.setInputValue(r,t.starts_at):J.c.Timestamps.setInputValue(r,n.moment)}catch(e){console.log(e),J.c.Timestamps.setInputValue(r,n.moment)}finally{n.moment=new Date(r.value)}}))),r?e.c.iconButton("remove",(()=>this.removeComponent(n)),"Instelling verwijderen"):e.c.h4("check").class("icon","no-margin")).make();if(n instanceof ie.Components.RegistrationEnd)return e.c.div(void 0,"flex-columns","cross-axis-center","section-gap").children(e.c.h4("line_end_square").class("icon","no-margin"),e.c.div(void 0,"flex-columns","center-content","in-section-gap").children(e.c.h4(n.translatedName).class("no-margin","text-center"),e.c.input.dateTimeLocal(n.moment,t.getComponent(ie.Components.RegistrationStart)?.moment??new Date,t.starts_at).on("input",((e,r)=>{try{const e=new Date(r.value),i=t.getComponent(ie.Components.RegistrationStart)?.moment??new Date;J.c.Timestamps.isValid(e)&&(n.moment=J.c.Timestamps.clamp(e,i,t.starts_at))}catch(e){}})).on("change",((e,r)=>{try{const e=new Date(r.value),i=t.getComponent(ie.Components.RegistrationStart)?.moment??new Date;J.c.Timestamps.isValid(e)?e<i?J.c.Timestamps.setInputValue(r,i):e>t.starts_at&&J.c.Timestamps.setInputValue(r,t.starts_at):J.c.Timestamps.setInputValue(r,n.moment)}catch(e){console.log(e),J.c.Timestamps.setInputValue(r,n.moment)}finally{n.moment=new Date(r.value)}}))),r?e.c.iconButton("remove",(()=>this.removeComponent(n)),"Instelling verwijderen"):e.c.h4("check").class("icon","no-margin")).make();throw new Error(`invalid component: ${n}`)}}ke.creators={color:()=>new ie.Components.Color("#FFFFFF"),registerable:()=>new ie.Components.Registerable({}),registrationStart:e=>new ie.Components.RegistrationStart(new Date),registrationEnd:e=>new ie.Components.RegistrationEnd(e.starts_at),cost:()=>new ie.Components.Cost(500)},customElements.define("event-component-editor",ke);class Ie extends HTMLElement{static onPermissionsQueried(){return new Promise((e=>{this.permissionsQueried?e():this.permissionsQueriedHandlers.push(e)}))}isVisible(e){return this.constructor.SECTIONS_VISIBLE_FROM[e]<=this.lod}get expanded(){return this._expanded}get lod(){return this._lod}set lod(e){if(e!==this.lod){this._lod=e,this.setAttribute("lod",this.lod.toString());const t=this.constructor;for(const e in t.SECTIONS_VISIBLE_FROM){const n=e,r=this[n];r&&(r.hidden=this.lod<t.SECTIONS_VISIBLE_FROM[n])}}}constructor(e,t=ae.c.MEDIUM,n=!1){super(),this._expanded=this.hasAttribute("expanded")||n;const r=pe.c.getAttrAs(this,"origin",(e=>Object.values(be.Origin).includes(e))),i=this.getAttribute("id");r&&i?be.fromOrigin(r).getById(i).then((e=>{if(!e)throw new Error(`no event with id "${i}" found in ${r} database.`);this.event=e,this.initElement(),this.lod=Te.c.clamp(pe.c.getAttrAsNumber(this,"lod",!1)??t,ae.c.LOW,ae.c.FULL),Ee.applyComponents(this,...this.event.components)})).catch(console.error):(this.event=e,this.initElement(),this.lod=Te.c.clamp(pe.c.getAttrAsNumber(this,"lod",!1)??t,ae.c.LOW,ae.c.FULL),Ee.applyComponents(this,...this.event.components))}initElement(){this.classList.add("flex-rows"),this.classList.toggle("min-section-gap",this._expanded),this.toggleAttribute("expanded",this._expanded);const t=Q.c.getStringColor(this.event.category);let n;this.style.setProperty("--background-color",t),this.style.setProperty("--text-color",Q.c.getMostContrasting(t,"#233452","#ffffff")),this.name=e.c.heading(this._expanded?1:5,this.event.name).class("name","no-margin").make(),n=this._expanded?J.c.Timespans.areFullDays([this.event.starts_at,this.event.ends_at])?J.c.Days.isSame(this.event.starts_at,this.event.ends_at)?J.c.DATE_FORMATS.DAY.SHORT(this.event.starts_at):`${J.c.DATE_FORMATS.DAY.SHORT(this.event.starts_at)} t/m ${J.c.DATE_FORMATS.DAY.SHORT(this.event.ends_at)}`:this.event.starts_at.getTime()===this.event.ends_at.getTime()?J.c.DATE_FORMATS.DAY_AND_TIME.SHORT(this.event.starts_at):`${J.c.DATE_FORMATS.DAY_AND_TIME.SHORT(this.event.starts_at)} t/m ${J.c.DATE_FORMATS.DAY_AND_TIME.SHORT(this.event.ends_at)}`:J.c.Timespans.areFullDays([this.event.starts_at,this.event.ends_at])?J.c.Days.isSame(this.event.starts_at,this.event.ends_at)?J.c.DATE_FORMATS.DAY.SHORT_NO_YEAR(this.event.starts_at):`${J.c.DATE_FORMATS.DAY.SHORT_NO_YEAR(this.event.starts_at)} t/m ${J.c.DATE_FORMATS.DAY.SHORT_NO_YEAR(this.event.ends_at)}`:this.event.starts_at.getTime()===this.event.ends_at.getTime()?J.c.DATE_FORMATS.DAY_AND_TIME.SHORT_NO_YEAR(this.event.starts_at):`${J.c.DATE_FORMATS.DAY_AND_TIME.SHORT_NO_YEAR(this.event.starts_at)} t/m ${J.c.DATE_FORMATS.DAY_AND_TIME.SHORT_NO_YEAR(this.event.ends_at)}`,this.timespan=e.c.p(n).class("timespan","subtitle","no-margin").make(),this.appendChild(e.c.div().children(this.name,this.timespan).style({width:"100%"}).make()),this.description=this.appendChild(e.c.richText(this.event.description).class("description").make()),Ee.onPermissionsQueried().then((()=>this.quickActions=this.appendChild(e.c.div(void 0,"quick-actions","flex-columns").children(Ee.CAN_DELETE&&e.c.iconButton("delete",((e,t)=>{t.hasAttribute("awaiting-confirmation")?this.event.sourceDB.delete(this.event).then((()=>{fe.c.success("Activiteit is succesvol verwijderd."),Pe.closeFullscreenNote()})).catch((()=>fe.c.error("Kon activiteit niet verwijderen, probeer het later opnieuw."))):(t.toggleAttribute("awaiting-confirmation",!0),t.textContent="delete_forever",fe.c.warning("Weet je het zeker? Een activiteit verwijderen kan niet worden teruggedraaid.",3e3),setTimeout((()=>{t.removeAttribute("awaiting-confirmation"),t.textContent="delete"}),3e3))}),"Activiteit verwijderen").class("delete-button"),Ee.CAN_UPDATE&&e.c.iconButton("edit_square",(()=>{this.replaceWith(new xe(this.event.copy(),this.lod,this._expanded))}),"Activiteit bewerken"),e.c.iconButton("share",(()=>{const e=`${location.origin}/agenda.html#id=${this.event.id}`,t={url:e,title:`GWS Activiteit - ${this.event.name}`};navigator.canShare(t)?navigator.share(t):navigator.clipboard.writeText(e).then((()=>fe.c.success("Link gekopieerd!"))).catch((()=>fe.c.error("Kan link niet kopiëren, probeer het later opnieuw.")))}),"Delen"),e.c.iconButton("close",(()=>Pe.closeFullscreenNote()))).onMake((e=>e.hidden=!this.isVisible("quickActions"))).make())))}copy(e=this._lod,t=this._expanded){return new Ee(this.event,e??this.lod,t??this._expanded)}}Ee=Ie,Ie.permissionsQueried=!1,Ie.permissionsQueriedHandlers=[],Ie.CAN_DELETE=!1,Ie.CAN_UPDATE=!1,(0,te.kL)([re.c.Permission.DELETE_EVENTS,re.c.Permission.UPDATE_EVENTS],((e,t)=>{Ee.CAN_DELETE=t.DELETE_EVENTS,Ee.CAN_UPDATE=t.UPDATE_EVENTS,Ee.permissionsQueried=!0;for(const e of Ee.permissionsQueriedHandlers)e()}),!0,!0),Ie.SECTIONS_VISIBLE_FROM={name:ae.c.LOW,timespan:ae.c.MEDIUM,description:ae.c.HIGH,quickActions:ae.c.HIGH},function(t){async function n(t,...r){Se.c.markLoadStart(t),r=r.toSorted(((e,t)=>n.ORDER.indexOf(e.Class)-n.ORDER.indexOf(t.Class)));for(const i of r)if(i instanceof ie.Components.Color)t.style.setProperty("--background-color",i.bg),t.style.setProperty("--text-color",Q.c.getMostContrasting(i.bg,"#233452","#ffffff"));else if(i instanceof ie.Components.Registerable){if(t.lod>=ae.c.FULL){const s=(i.capacity??1/0)-i.numRegistrations;await Promise.all([(0,le.iA)(),i.getCommentsFor(t.event),ie.Components.Registerable.checkCanReadComments(),ie.Components.Registerable.checkCanRegister(),ie.Components.Registerable.checkCanDeregister()]).then((([o,a,c,l,u])=>{const h=Object.keys(i.registrations).sort(((e,t)=>i.registrations[e].localeCompare(i.registrations[t]))),d=e.c.div(void 0,"registrations","flex-rows","in-section-gap").children(e.c.div().class("flex-columns",c&&de.c.isSlimmerOrEq(de.c.Viewport.DESKTOP_SLIM)?"main-axis-center":"main-axis-space-between","cross-axis-center","in-section-gap").children(e.c.heading(t.expanded?3:4,"Ingeschreven geitjes").children(Number.isFinite(s)&&e.c.span(` (${s} plekken over)`).class("subtitle")).class("no-margin"),c&&e.c.div(void 0,"flex-columns","cross-axis-center","in-section-gap").children(e.c.iconButton("download",(()=>{const e=[{value:"Naam"},{value:"Inschrijfmoment"},{value:"Opmerking"}];let[n,r]=[e[0].value.length,e[2].value.length];const s=h.map((e=>{const t=i.registrations[e];if(n=Math.max(r,t.length),e in a){const n=a[e];return r=Math.max(r,n.body.length),[{type:String,value:t},{type:Date,value:n.created_at,format:"d mmmm yyyy"},{type:String,value:n.body}]}return[{type:String,value:t}]})),o=`Inschrijvingen ${t.event.name} (${J.c.DATE_FORMATS.DAY.SHORT_NO_YEAR(t.event.starts_at)}).xlsx`;X([e,...s],{columns:[{width:n},{width:15},{width:r}],fileName:o}).catch((e=>console.error(e)))}),"Inschrijvingen downloaden"),e.c.iconButton("comment",((e,n)=>{n.toggleAttribute("selected",!t.toggleAttribute("hide-comments"))?[n.textContent,n.title]=["comment","Opmerkingen verbergen"]:[n.textContent,n.title]=["comments_disabled","Opmerkingen tonen"]}),"Opmerkingen verbergen").attr("selected").attr("can-unselect"))),e.c.div(void 0,"registrations-list","no-margin").children(...h.map((t=>{const n=i.registrations[t];return e.c.div(void 0,"flex-rows","cross-axis-center").children(e.c.p(n+(t in a?"*":"")).class("no-margin","text-center"),t in a&&e.c.div(void 0,"comment","flex-rows","cross-axis-center").children(e.c.div(void 0,"point").children(e.c.div(void 0,"inside")),e.c.p(a[t].body).class("message","no-margin","subtitle").tooltip(J.c.DATE_FORMATS.DAY_AND_TIME.SHORT_NO_YEAR(a[t].created_at))))})))).make();Array.from(t.getElementsByClassName("registrations")).forEach((e=>e.remove())),t.insertBefore(d,t.quickActions);const f=null!==o&&i.isRegistered(o.uid),p=e.c.button().class("registration-button");let m,g,y,v;const _=new Date;_>t.event.ends_at?[m,g,y,v]=["event_busy","Activiteit is al voorbij",()=>{},!0]:_>t.event.starts_at?[m,g,y,v]=["calendar_today","Activiteit is al gestart",()=>{},!0]:[m,g,y,v]=null===o?["login","Log in om je in te schrijven",()=>location.href=ue.c.createLinkBackURL("./inloggen.html").toString(),!1]:f?u?["free_cancellation","Uitschrijven",(e,s)=>{s.disabled=!0,i.deregister(t.event).then((()=>{fe.c.success("Je bent uitgeschreven!"),n(t,...r)})).catch((e=>fe.c.error((0,ce.c)(e)))).finally((()=>s.disabled=!1))},!1]:["event_available","Ingeschreven",()=>{},!0]:l?["calendar_add_on","Inschrijven",(e,s)=>{s.disabled=!0,i.register(t.event,w.value).then((()=>{fe.c.success("Je staat ingeschreven!"),n(t,...r)})).catch((e=>fe.c.error((0,ce.c)(e)))).finally((()=>s.disabled=!1))},!1]:["event_busy","Inschrijving niet mogelijk",()=>{},!0];let w=e.c.textarea().class("comment-box").placeholder("Opmerking...").maxLength(1024).spellcheck(!0).make();Array.from(t.getElementsByClassName("registration-form")).forEach((e=>e.remove())),t.insertBefore(e.c.div(void 0,"registration-form","flex-rows","center-content","in-section-gap").children(!f&&!v&&w,p.children(e.c.h4(m).class("icon","no-margin"),e.c.h4(g).class("no-margin")).attr("disabled",v?"":null).on("click",y)).make(),t.quickActions)})).catch((e=>console.error(e)))}}else if(i instanceof ie.Components.RegistrationStart){if(t.lod>=ae.c.FULL){const e=t.getElementsByClassName("registration-button")[0],n=t.getElementsByClassName("registration-form")[0];new Date<i.moment&&(e.toggleAttribute("disabled",!0),n.childNodes.forEach((t=>{t!==e&&t.remove()})),e.firstElementChild.textContent="calendar_clock",e.lastElementChild.textContent=`Inschrijven kan pas vanaf ${J.c.DATE_FORMATS.DAY_AND_TIME.SHORT_NO_YEAR(i.moment)}`)}}else if(i instanceof ie.Components.RegistrationEnd){if(t.lod>=ae.c.FULL){const e=t.getElementsByClassName("registration-button")[0],n=t.getElementsByClassName("registration-form")[0];new Date>i.moment&&(e.toggleAttribute("disabled",!0),n.childNodes.forEach((t=>{t!==e&&t.remove()})),e.firstElementChild.textContent="event_upcoming",e.lastElementChild.textContent="Inschrijving is al gesloten")}}else if(i instanceof ie.Components.Cost){if(t.lod>=ae.c.FULL){const n=t.getElementsByClassName("registration-form")[0],r=t.getElementsByClassName("registration-button")[0];r.hasAttribute("disabled")?n.prepend(e.c.p(`De inschrijfkosten bedragen €${(.01*i.cost).toFixed(2).replace(".",",")}.`).make()):await(0,le.iA)().then((s=>{if(s&&!t.event.getComponent(ie.Components.Registerable).isRegistered(s.uid)){let t=new he.c(!1,r);n.prepend(e.c.div(void 0,"payment-disclaimer","flex-columns","cross-axis-center","in-section-gap").children(e.c.p(`Ik ga akkoord met de kosten van €${(.01*i.cost).toFixed(2).replace(".",",")} voor deze activiteit.`).class("no-margin"),e.c.div(void 0,"icon-switch").children(e.c.p("euro_symbol").class("icon","no-margin"),t).tooltip(`Kosten (€${(.01*i.cost).toFixed(2).replace(".",",")}) accepteren`)).make())}}))}}else console.error(`no applicator found for ${i.Class.name}`);Se.c.markLoadEnd(t)}t.applyComponents=n,function(e){e.ORDER=[ie.Components.Color,ie.Components.Registerable,ie.Components.RegistrationStart,ie.Components.RegistrationEnd,ie.Components.Cost]}(n=t.applyComponents||(t.applyComponents={}))}(Ie||(Ie={})),Se.c.onDOMContentLoaded().then((()=>customElements.define("event-note",Ie)));class xe extends HTMLElement{replaceWithOriginal(e=this.event){this.replaceWith(new Ie(e.copy(),this.lod,this.expanded))}get savableEvent(){let[e,t]=[this.startDate,this.endDate];return e>t&&(J.c.Timespans.areFullDays([e,t])&&(t.setHours(0,0,0,0),e.setHours(23,59,59,999)),[e,t]=[t,e]),new ie(this.event.sourceDB,this.event.id,this.name.textContent??"Activiteit",this.description.value,this.category.value?this.category.value:void 0,[e,t],this.event.components.map((e=>e.copy())))}set onSave(e){this.onSaveHandlers.push(e)}get startDate(){let e=new Date(this.startsAt.value);return J.c.Timestamps.isValid(e)||(e=this.event.starts_at),this.useTime.value||e.setHours(0,0,0,0),e}get endDate(){let e=new Date(this.endsAt.value);return J.c.Timestamps.isValid(e)||(e=this.event.ends_at),this.useTime.value||e.setHours(23,59,59,999),e}constructor(e,t=ae.c.MEDIUM,n=!1,r=!1){super(),this.onSaveHandlers=[],this.originalEvent=e.copy(),this.event=e,this.lod=t,this.expanded=n,this.saveAsNew=r,this.initElement(),window.addEventListener("beforeunload",(e=>{!document.body.contains(this)||e.defaultPrevented||this.savableEvent.equals(this.event)||e.preventDefault()}))}applyComponents(){const e=this.event.getComponent(ie.Components.Color)?.bg??Q.c.getStringColor(this.category.value);this.style.setProperty("--background-color",e),this.style.setProperty("--text-color",Q.c.getMostContrasting(e,"#233452","#ffffff"))}initElement(){this.classList.add("flex-rows"),this.classList.toggle("min-section-gap",this.expanded),this.toggleAttribute("expanded",this.expanded),this.appendChild(e.c.div(void 0,"flex-columns","in-section-gap").children(this.name=e.c.heading(this.expanded?1:5,this.event.name).class("name","no-margin").attr("contenteditable","plaintext-only").make(),this.category=e.c.textarea(this.event.category).class("category").attr("no-resize").placeholder("Categorie").on("input",(()=>oe.c.setDelayedCallback((()=>this.applyComponents()),250))).make()).make());const t=J.c.Timespans.areFullDays([this.event.starts_at,this.event.ends_at]);this.appendChild(e.c.div(void 0,"timespan","flex-columns","cross-axis-center","in-section-gap").children(e.c.div(void 0,"flex-columns","main-axis-space-around","cross-axis-center","in-section-gap").children(this.startsAt=t?e.c.input.date(this.event.starts_at).make():e.c.input.dateTimeLocal(this.event.starts_at).make(),e.c.p().class("no-margin").onMake((e=>{de.c.onChange((t=>e.textContent=de.c.isSlimmerOrEq(de.c.Viewport.SQUARE)?"→":"t/m"),!0)})),this.endsAt=t?e.c.input.date(this.event.ends_at).make():e.c.input.dateTimeLocal(this.event.ends_at).make()),e.c.div(void 0,"icon-switch").children(e.c.p("more_time").class("icon","no-margin"),this.useTime=new he.c(!t)).tooltip("Tijd instellen")).make()),this.useTime.addEventListener("input",(()=>{const t=this.useTime.value?e.c.input.dateTimeLocal(this.startsAt.valueAsDate??this.event.starts_at).make():e.c.input.date(this.startsAt.valueAsDate??this.event.starts_at).make();this.startsAt.replaceWith(t),this.startsAt=t;const n=this.useTime.value?e.c.input.dateTimeLocal(this.endsAt.valueAsDate??this.event.ends_at).make():e.c.input.date(this.endsAt.valueAsDate??this.event.ends_at).make();this.endsAt.replaceWith(n),this.endsAt=n})),this.description=this.appendChild(e.c.input.richText(this.event.description,!0).class("description").placeholder("Beschrijving").make()),this.componentEditor=this.appendChild(new ke(this.event)),this.componentEditor.classList.add("component-editor"),this.componentEditor.addEventListener("change",(()=>this.applyComponents())),this.componentEditor.addEventListener("input",(()=>this.applyComponents())),this.quickActions=this.appendChild(e.c.div(void 0,"quick-actions","flex-columns").children(this.saveButton=e.c.iconButton(this.saveAsNew?"calendar_add_on":"save_as",(()=>{const e=this.savableEvent;this.event.sourceDB.write(e).then((()=>{fe.c.success("Activiteit is succesvol bijgewerkt.");for(const e of this.onSaveHandlers)e(this);this.replaceWithOriginal(e)})).catch((e=>fe.c.error((0,ce.c)(e))))}),this.saveAsNew?"Activiteit toevoegen":"Aanpassingen opslaan").make(),!this.saveAsNew&&e.c.iconButton("backspace",(()=>this.replaceWithOriginal(this.originalEvent)),"Annuleren").class("cancel-edit-button")).make()),this.applyComponents()}}Se.c.onDOMContentLoaded().then((()=>customElements.define("editable-event-note",xe)));class De extends se{constructor(e){super(),this.getCache={},this.retrievedRange={from:new Date,to:new Date},this.rangeCache={},this.idCache={},this.categoryCache={},this.commentCache={},this.relay=e,this.relay.onWrite=(...e)=>this.addToCaches(...e),this.relay.onDelete=(...e)=>this.removeFromCaches(...e)}get(e,t=!1){const n=JSON.stringify(e);return t&&delete this.getCache[n],new Promise((async(t,r)=>{n in this.getCache?t(this.getCache[n]):this.relay.get(e).then((e=>{this.addToCaches(...e),t(e)})).catch(r)}))}count(e){return this.relay.count(e)}getRange(e,t,n){const r=e?J.c.Timestamps.copy(e):J.c.FIRST,i=t?J.c.Timestamps.copy(t):J.c.LAST;return new Promise(((s,o)=>{this.retrievedRange.from<=r&&i<=this.retrievedRange.to?s(Object.values(this.rangeCache).filter((e=>e.satisfies({range:{from:r,to:i},...n})))):this.relay.getRange(e,t).then((e=>{this.retrievedRange.from=J.c.Timestamps.earliest(this.retrievedRange.from,r),this.retrievedRange.to=J.c.Timestamps.latest(this.retrievedRange.to,i),this.addToCaches(...e),s(e)})).catch(o)}))}get earliest(){let e=null;for(const t in this.idCache){const n=this.idCache[t];(null===e||n.starts_at<e.starts_at)&&(e=n)}return e}get latest(){let e=null;for(const t in this.idCache){const n=this.idCache[t];(null===e||n.ends_at>e.ends_at)&&(e=n)}return e}getById(e,t=!1){return t&&delete this.idCache[e],new Promise(((t,n)=>{e in this.idCache?t(this.idCache[e]):this.relay.getById(e).then((e=>{e&&this.addToCaches(e),t(e)})).catch(n)}))}getByCategory(e,t,n=!1){return n&&delete this.categoryCache[e],new Promise(((n,r)=>{e in this.categoryCache?n(this.categoryCache[e].filter((n=>n.satisfies({category:e,...t})))):this.relay.getByCategory(e).then((r=>{this.addToCaches(...r),n(r.filter((n=>n.satisfies({category:e,...t}))))})).catch(r)}))}doRegisterFor(e,t){return this.relay.registerFor(e,t)}doDeregisterFor(e){return this.relay.deregisterFor(e)}fetchCommentsFor(e){if(!e.hasComponent(ie.Components.Registerable))throw new Error("Event is not registerable, thus does not have any comments");return new Promise(((t,n)=>{e.id in this.commentCache?t(this.commentCache[e.id]):this.relay.getCommentsFor(e).then((n=>t(this.commentCache[e.id]=n))).catch(n)}))}set onWrite(e){this.relay.onWrite=e}addToCaches(...e){this.removeFromCaches(...e);for(const t in this.getCache){const n=JSON.parse(t);this.getCache[t].push(...e.filter((e=>e.satisfies(n))))}for(const t of e)t.satisfies({range:this.retrievedRange})&&(this.rangeCache[t.id]=t);for(const t of e)this.idCache[t.id]=t;for(const t in this.categoryCache)this.categoryCache[t].push(...e.filter((e=>e.category===t)))}doWrite(...e){return this.relay.write(...e)}set onDelete(e){this.relay.onDelete=e}removeFromCaches(...e){const t=e.map((e=>e.id));for(const e in this.getCache)this.getCache[e]=this.getCache[e].filter((e=>!t.includes(e.id)));for(const t of e)delete this.rangeCache[t.id],delete this.idCache[t.id];for(const e in this.categoryCache)this.categoryCache[e]=this.categoryCache[e].filter((e=>!t.includes(e.id)));for(const t of e)delete this.commentCache[t.id]}doDelete(...e){return this.relay.delete(...e)}}var Ne,Re=n(8332);const Oe=["Ma","Di","Wo","Do","Vr","Za","Zo"];class Le extends HTMLElement{static doTranspose(e){return"week"===e&&de.c.isSlimmerOrEq(de.c.Viewport.DESKTOP_SLIM)}static createNote(e,t,n=!1){return e instanceof Ie?e.copy(t,n):new Ie(e,t,n)}static expandNote(e){const t=this.createNote(e,ae.c.FULL,!0);Ce.c.empty(this.FULLSCREEN_EVENT_CONTAINER).appendChild(t),this.FULLSCREEN_EVENT_CONTAINER.removeAttribute("hidden"),document.body.classList.add("no-scroll"),location.hash=`id=${t.event.id}`}static closeFullscreenNote(){ue.c.setHashProperty("id",null),document.body.classList.remove("no-scroll"),this.FULLSCREEN_EVENT_CONTAINER.toggleAttribute("hidden",!0)}set viewMode(e){this._viewMode!==e&&(this._viewMode=e,this.redraw())}get viewMode(){return this._viewMode}redraw(){this.populate(this._lookingAt,this._viewMode)}set lookingAt(e){e.getTime()!==this._lookingAt.getTime()&&(this._lookingAt=e,this.redraw())}jumpToToday(){this.lookingAt=new Date}constructor(t,n=new Date,r=Ne.DEFAULT_VIEWMODES[de.c.getCurrent()]){super(),this.controls=this.appendChild(e.c.div().class("controls","center-content","main-axis-space-between").make()),this._lookingAt=new Date,this.dayCellContainer=this.appendChild(e.c.div(void 0,"day-cell-container").make());const i=pe.c.getAttrAs(this,"origin",(e=>Object.values(be.Origin).includes(e)));this.db=i?new De(be.fromOrigin(i)):t instanceof De?t:new De(t),this.db.onWrite=()=>this.redraw(),this.db.onDelete=()=>this.redraw(),this.classList.add("flex-rows","main-axis-start"),this._lookingAt=new Date(pe.c.getAttrAs(this,"looking-at",(e=>J.c.Timestamps.isValid(new Date(e))))??n),this._viewMode=pe.c.getAttrAs(this,"view-mode",(e=>Object.values(Ne.Viewmode).includes(e)))??r,this.redraw(),de.c.onChange((()=>{this.dayCellContainer.hasAttribute("transpose")!==Ne.doTranspose(this.viewMode)&&this.redraw()}));const s=ue.c.getHashProperties();"id"in s&&this.db.getById(s.id).then((e=>{e?Ne.expandNote(e):console.warn(`no event with ID "${s.id}" found.`)})).catch((e=>fe.c.error((0,ce.c)(e))))}static createDayCell(t,n,r,i={}){return{element:e.c.div().class("day-cell",...Ne.DayCell.detectAttributes(t,n,i.markedAttrs??[])).style({gridArea:i.gridArea?i.gridArea.join(" / "):"unset"}).children(e.c.p("list"===r?J.c.DATE_FORMATS.DAY.LONG(t):t.getDate().toString()).class("day-number")).make(),date:t,events:[]}}static indexToGridArea(e){const[t,n]=[e%7+1,Math.floor(e/7)+2];return[n,t,n+1,t+1]}static createDayCells(e,t){let n=new Date(e);"month"===t&&n.setDate(1),"month"!==t&&"week"!==t||(n=J.c.Days.firstBefore(n,"Monday"));const r="month"===t?42:"week"===t?7:Ne.LIST_VIEW_INITIAL_TIMESPAN_DAYS;return J.c.Days.getRange(n,r).map(((n,r)=>Ne.createDayCell(n,e,t,{gridArea:"month"===t?this.indexToGridArea(r):"week"===t?Ne.doTranspose(t)?[r+1,2,r+2,8]:[2,r+1,8,r+2]:void 0,markedAttrs:"month"===t?Object.values(Ne.DayCell.Attribute):[Ne.DayCell.Attribute.IS_TODAY,Ne.DayCell.Attribute.IS_IN_WEEKEND]})))}extendDayCells(e,t,n,r){const i=J.c.Days.getRange(t,n).map(((e,t)=>Ne.createDayCell(e,new Date,Ne.Viewmode.LIST,{markedAttrs:[Ne.DayCell.Attribute.IS_TODAY,Ne.DayCell.Attribute.IS_IN_WEEKEND]})));return e.unshift(...i),new Promise(((e,s)=>{Promise.all([this.db.getRange(t,n),this.db.count({range:"before"===r?{to:n}:{from:t}})]).then((([t,n])=>{this.insertEventNotes(t,i,Ne.Viewmode.LIST),e([i,n])})).catch(s)}))}populate(t,n){Se.c.markLoadStart(this),t=new Date(t);const r=new Date(t);Ce.c.empty(this.controls),Ce.c.empty(this.dayCellContainer),this.scrollEventListener&&this.dayCellContainer.removeEventListener("scroll",this.scrollEventListener),Ne.doTranspose(n)?this.dayCellContainer.toggleAttribute("transpose",!0):this.dayCellContainer.removeAttribute("transpose");const i=Ne.createDayCells(t,n);let s=i[0].date,o=i.at(-1).date;this.setAttribute("display",n);const a=new Re.c([Ne.Viewmode.WEEK,"calendar_view_week","Week","week"===n],[Ne.Viewmode.MONTH,"calendar_view_month","Maand","month"===n],[Ne.Viewmode.LIST,"calendar_view_day","Lijst","list"===n]);switch(a.classList.add("viewmode-controls"),a.addEventListener("change",(()=>this.viewMode=a.value)),this.controls.appendChild(a),n){case"week":this.controls.prepend(e.c.div(void 0,"timespan-controls","center-content").children(e.c.input.button("navigate_before",(()=>{r.setDate(r.getDate()-7),this.lookingAt=r})).class("nav-button","icon").make(),e.c.input.date(r).class("period-input").onValueChanged((e=>this.lookingAt=new Date(e))).make(),e.c.input.button("navigate_next",(()=>{r.setDate(r.getDate()+7),this.lookingAt=r})).class("nav-button","icon").make()).make()),Oe.forEach(((t,r)=>{this.dayCellContainer.appendChild(e.c.p(t).class("day-name").style({gridArea:Ne.doTranspose(n)?`${r+1} / 1 / ${r+2} / 2`:`1 / ${r+1} / 2 / ${r+2}`}).make())})),this.dayCellContainer.append(...i.map((e=>e.element)));break;case"month":this.controls.prepend(e.c.div(void 0,"timespan-controls","center-content").children(e.c.input.button("navigate_before",(()=>{r.setMonth(r.getMonth()-1,1),this.lookingAt=r})).class("nav-button","icon").make(),e.c.input.month(r.getFullYear(),r.getMonth()).class("period-input").onValueChanged((e=>this.lookingAt=new Date(e))).make(),e.c.input.button("navigate_next",(()=>{r.setMonth(r.getMonth()+1,1),this.lookingAt=r})).class("nav-button","icon").make()).make()),Oe.forEach(((t,n)=>{this.dayCellContainer.appendChild(e.c.p(t).class("day-name").style({gridArea:`1 / ${n+1} / 2 / ${n+2}`}).make())})),this.dayCellContainer.append(...i.map((e=>e.element)));break;case"list":this.controls.prepend(e.c.h3("Aanstaande activiteiten").make());const t=e.c.div(void 0,"subtitle","center-content","load-more","load-before").make();this.dayCellContainer.prepend(t),this.dayCellContainer.append(...i.map((e=>e.element)));const a=this.dayCellContainer.appendChild(e.c.div(void 0,"subtitle","center-content","load-more","load-after").make());Ce.c.whenInsertedIn(this.dayCellContainer,document.body).then((()=>{this.dayCellContainer.scrollBy(0,2);let e=this.dayCellContainer.scrollTop,[n,r]=[!1,!1];this.scrollEventListener=()=>{const c=e-this.dayCellContainer.scrollTop;if(e=this.dayCellContainer.scrollTop,c>0&&pe.c.isAtScrollTop(this.dayCellContainer,Ne.LOAD_MORE_SCROLL_TOLERANCE)){if(!n){n=!0;const e=new Date(s);s.setDate(s.getDate()-Ne.LOAD_MORE_TIMESPAN_DAYS),this.extendDayCells(i,s,e,"before").then((([e,r])=>{this.dayCellContainer.prepend(...e.map((e=>e.element))),this.dayCellContainer.prepend(t);const i=e.map((e=>e.element)).filter((e=>this.dayCellContainer.contains(e))).reduce(((e,t)=>e+t.clientHeight),0);this.dayCellContainer.scrollTo(0,i-2),0===r?(t.textContent=`Geen activiteiten voor ${J.c.DATE_FORMATS.DAY.LONG(e[0].date)}`,t.classList.add("no-more")):n=!1})).catch(console.warn)}}else if(c<0&&pe.c.isAtScrollBottom(this.dayCellContainer,Ne.LOAD_MORE_SCROLL_TOLERANCE)&&!r){r=!0;const e=new Date(o);o.setDate(o.getDate()+Ne.LOAD_MORE_TIMESPAN_DAYS),this.extendDayCells(i,e,o,"after").then((([e,t])=>{this.dayCellContainer.append(...e.map((e=>e.element))),this.dayCellContainer.append(a),e.map((e=>e.element)).filter((e=>this.dayCellContainer.contains(e))).reduce(((e,t)=>e+t.clientHeight),0),0===t?(a.textContent=`Geen activiteiten na ${J.c.DATE_FORMATS.DAY.LONG(e.at(-1).date)}`,a.classList.add("no-more")):r=!1})).catch(console.warn)}},this.dayCellContainer.addEventListener("scroll",this.scrollEventListener)}))}this.db.getRange(s,o).then((e=>this.insertEventNotes(e,i,n))).catch(console.error).finally((()=>Se.c.markLoadEnd(this)))}insertEventNotes(t,n,r){switch(Se.c.markLoadStart(this),r){case"week":case"month":const i=function(e){e.sort(((e,t)=>e.starts_at.getTime()-t.starts_at.getTime()));const t={};return e.forEach((n=>{for(t[n.id]=0;e.some((e=>n!==e&&n.daysOverlapsWith(e)&&t[n.id]===t[e.id]));)t[n.id]++})),t}(t);t.forEach((e=>{let t=n.findIndex((t=>J.c.Days.isBetween(t.date,e.starts_at,e.ends_at)));if(-1!==t){let s=J.c.Days.spanInDays(n[t].date,e.ends_at);for(let o=1;s>=1&&t<n.length;o++){n[t].events.push(e),n[t].element.style.zIndex=(n.length-t+1).toString();const o=n[t].element.appendChild(Ne.createNote(e,Ne.VIEWMODE_LODS[r]));o.classList.add("click-action"),o.style.setProperty("--length",s.toString()),o.style.setProperty("--offset",i[e.id].toString()),J.c.Days.earlierThan(e.starts_at,n[t].date)&&o.classList.add("starts-in-earlier-week"),o.addEventListener("click",(()=>Ne.expandNote(o)));do{t++,s--}while(s>=1&&t<n.length&&1!==n[t].date.getDay())}}})),n.forEach((e=>{e.element.style.setProperty("--max-overlap",(function(e,t,n){let r=t.filter((t=>J.c.Days.isBetween(e,t.starts_at,t.ends_at)));for(;;){const e=t.filter((e=>r.some((t=>e.daysOverlapsWith(t)))));if(e.length===r.length)return Math.max(...r.map((e=>n[e.id])));r=e}}(e.date,t,i)+1).toString())}));break;case"list":t.forEach((e=>{let t=n.findIndex((t=>J.c.Days.isBetween(t.date,e.starts_at,e.ends_at)));if(-1!==t){let i=J.c.Days.spanInDays(n[t].date,e.ends_at);for(;t<n.length&&i>=1;){n[t].events.push(e);const s=n[t].element.appendChild(Ne.createNote(e,Ne.VIEWMODE_LODS[r]));s.classList.add("click-action"),s.style.setProperty("--length","1"),s.addEventListener("click",(()=>Ne.expandNote(s))),t++,i--}}})),n.forEach((t=>{0===t.events.length&&t.element.appendChild(e.c.p("Geen activiteiten").class("no-activities","subtitle","text-center").make())}))}Se.c.markLoadEnd(this)}}Ne=Le,Le.FULLSCREEN_EVENT_CONTAINER=e.c.div("fullscreen-event-container","center-content").attr("hidden").on("click",((e,t)=>{e.target===t&&Ne.closeFullscreenNote()})).make(),Se.c.onDOMContentLoaded().then((()=>{document.body.appendChild(Ne.FULLSCREEN_EVENT_CONTAINER)})),Le.LIST_VIEW_INITIAL_TIMESPAN_DAYS=30,Le.LOAD_MORE_SCROLL_TOLERANCE=2,Le.LOAD_MORE_TIMESPAN_DAYS=15,function(e){let t,n;!function(e){e.WEEK="week",e.MONTH="month",e.LIST="list"}(t=e.Viewmode||(e.Viewmode={})),e.DEFAULT_VIEWMODES={[de.c.Viewport.DESKTOP]:t.MONTH,[de.c.Viewport.DESKTOP_SLIM]:t.MONTH,[de.c.Viewport.SQUARE]:t.MONTH,[de.c.Viewport.TABLET_PORTRAIT]:t.WEEK,[de.c.Viewport.MOBILE_PORTRAIT]:t.WEEK,[de.c.Viewport.VERY_THIN]:t.LIST},e.VIEWMODE_LODS={week:ae.c.MEDIUM,month:ae.c.MEDIUM,list:ae.c.MEDIUM},function(e){let t;!function(e){e.IS_TODAY="is-today",e.IS_IN_WEEKEND="is-in-weekend",e.IS_IN_DIFFERENT_MONTH="is-in-different-month"}(t=e.Attribute||(e.Attribute={}));const n={[t.IS_TODAY]:(e,t)=>J.c.Days.isSame(new Date,e),[t.IS_IN_WEEKEND]:e=>0===e.getDay()||6===e.getDay(),[t.IS_IN_DIFFERENT_MONTH]:(e,t)=>e.getFullYear()!==t.getFullYear()||e.getMonth()!==t.getMonth()};e.detectAttributes=function(e,r,i=Object.values(t)){const s=[];for(const t of i)n[t](e,r)&&s.push(t);return s}}(n=e.DayCell||(e.DayCell={}))}(Le||(Le={}));const Pe=Le;customElements.define("event-calendar",Le);var Me=n(2824);class Fe extends ne.S{constructor(e,t,n,r,i,s,o,a){super(t,[]),this.sourceDB=e,this.heading=n,this.body=r,this.created_at=i,this.category=s,this.show_on_homepage=o,this.only_for_members=a}copy(){return new Fe(this.sourceDB,this.id,this.heading,this.body,new Date(this.created_at),this.category,this.show_on_homepage,this.only_for_members)}satisfies(e){return!(!super.satisfies(e)||e.after&&e.after>this.created_at||e.before&&e.before<this.created_at||e.category&&e.category!==this.category||e.forHomepage&&!this.show_on_homepage)}equals(e){return super.equals(e)&&e.heading===this.heading&&e.body===this.body&&e.created_at.getTime()===this.created_at.getTime()&&e.category===this.category&&e.show_on_homepage===this.show_on_homepage&&e.only_for_members===this.only_for_members}}class Ue extends ne.c{}var Be,je=n(3236);class Ve extends HTMLElement{constructor(e,t=ae.c.MEDIUM){super(),this.article=e,this.lod=t,this.initElement()}initElement(){this.style.display="flex",this.style.position="relative",this.setAttribute("lod",ae.c.toString(this.lod)),this.heading=e.c.a(this.lod!==ae.c.FULL?Be.getLinkTo(this.article):void 0).class("heading").children(e.c.h1(this.article.heading)).make(),this.body=e.c.div(void 0,"body","rich-text","flex-rows","in-section-gap").children(...je.c.deserialize(this.article.body)).make(),Ce.c.onEach(this.body,(e=>{e instanceof Element&&e.toggleAttribute("hidden",Be.LOD_HIDDEN_ELEMENT_TYPES[this.lod].includes(e.tagName))})),Ce.c.limitWords(this.body,Be.LOD_CUTOFFS[this.lod])<=0&&(this.body.textContent+="…"),this.postDate=e.c.p("Geplaatst op "+J.c.DATE_FORMATS.DAY_AND_TIME.SHORT(this.article.created_at)).class("post-date","no-margin").make(),this.readMore=this.lod===ae.c.LOW?this.readMore=e.c.a(Be.getLinkTo(this.article),"article_shortcut").tooltip("Naar bericht gaan").class("read-more","icon").make():e.c.a(Be.getLinkTo(this.article),"Lees verder »").class("read-more").make(),this.quickActions=e.c.div(void 0,"quick-actions","flex-columns","cross-axis-center").children(this.lod===ae.c.LOW&&this.readMore,Be.CAN_UPDATE&&e.c.p("edit_square").id("edit-button").class("icon","click-action").tooltip("Bericht bewerken").on("click",((e,t)=>{this.lod===ae.c.FULL?this.replaceWith(new He(this.article,this.lod)):location.href=Be.getLinkTo(this.article,!0)})),Be.CAN_DELETE&&e.c.p("delete").id("delete-button").class("icon","click-action").tooltip("Bericht verwijderen").on("click",((e,t)=>{t.hasAttribute("awaiting-confirmation")?this.article.sourceDB.delete(this.article).then((()=>{fe.c.success("Bericht succesvol verwijderd."),location.pathname.startsWith("/artikel")?location.href="/":location.reload()})).catch((e=>fe.c.error((0,ce.c)(e)))):(t.textContent="delete_forever",t.title="Definitief verwijderen",t.setAttribute("awaiting-confirmation",""),t.classList.add("pulsate-in"),fe.c.warning("Zeker weten? Een bericht verwijderen kan niet worden teruggedraaid!",5e3),setTimeout((()=>{t.textContent="delete",t.title="Bericht verwijderen",t.classList.remove("pulsate-in"),t.removeAttribute("awaiting-confirmation")}),5e3))})),e.c.p("share").id("share-button").class("icon","click-action").tooltip("Delen").on("click",(()=>{const e=Be.getLinkTo(this.article);navigator.canShare({url:e,title:`GWS Bericht - ${this.article.heading}`})?navigator.share({url:e,title:`GWS Bericht - ${this.article.heading}`}):navigator.clipboard.writeText(e).then((()=>fe.c.success("Link gekopieerd!"))).catch((()=>fe.c.error("Kan link niet kopiëren, probeer het later opnieuw.")))}))).style({position:"absolute",right:"var(--in-section-gap)",top:"var(--in-section-gap)"}).make(),this.lod===ae.c.LOW?(this.classList.add("flex-columns","in-section-gap","main-axis-space-between","cross-axis-center"),this.append(e.c.div(void 0,"flex-rows","in-section-gap").children(this.heading,this.body,this.postDate).make(),this.quickActions)):(this.classList.add("flex-rows",this.lod===ae.c.FULL?"min-section-gap":"in-section-gap"),this.append(this.heading,this.body,this.readMore,this.postDate,this.quickActions))}static getLinkTo(e,t=!1){e instanceof Fe&&(e=e.id);let n=`${location.origin}/artikel.html?id=${e}`;return t&&(n+="&mode=edit"),n}}Be=Ve,Ve.CAN_DELETE=!1,Ve.CAN_UPDATE=!1,(0,te.kL)([re.c.Permission.DELETE_ARTICLES,re.c.Permission.UPDATE_ARTICLES],((e,t)=>{Be.CAN_DELETE=t.DELETE_ARTICLES,Be.CAN_UPDATE=t.UPDATE_ARTICLES}),!0,!0),Ve.LOD_CUTOFFS={[ae.c.FULL]:1/0,[ae.c.HIGH]:100,[ae.c.MEDIUM]:50,[ae.c.LOW]:30},Ve.LOD_HIDDEN_ELEMENT_TYPES={[ae.c.FULL]:[],[ae.c.HIGH]:[],[ae.c.MEDIUM]:["IMG","MULTISOURCE-IMAGE","MULTISOURCE-ATTACHMENT","UL","OL"],[ae.c.LOW]:["H1","H2","H3","H4","H5","H6","IMG","MULTISOURCE-IMAGE","MULTISOURCE-ATTACHMENT","UL","OL"]};const ze=Ve;Se.c.onDOMContentLoaded().then((()=>customElements.define("smart-article",Ve,{extends:"article"})));class He extends Ve{get data(){return{heading:this.heading.value.trim(),body:this.body.value,created_at:this.article.created_at,category:this.category.value.trim(),show_on_homepage:this.showOnHomepage.value,only_for_members:this.onlyForMembers.value}}constructor(e,t,n=!1){super(e,t),this.onSave=()=>{},(this.saveAsNew=n)&&(this.saveButton.textContent="post_add",this.saveButton.title="Bericht plaatsen"),window.addEventListener("beforeunload",(e=>{!document.body.contains(this)||e.defaultPrevented||He.PartialArticleInfo.equals(this.data,this.article)||e.preventDefault()}))}initElement(){this.style.display="flex",this.classList.add("flex-rows","min-section-gap"),this.setAttribute("lod",ae.c.toString(this.lod)),this.heading=this.appendChild(e.c.input.text(this.article.heading).placeholder("Koptitel").class("heading").make()),this.append(e.c.div(void 0,"category-and-switches","flex-columns","main-axis-space-evenly","cross-axis-center","in-section-gap").children(this.category=e.c.input.text(this.article.category).placeholder("Categorie").class("category").make(),e.c.div(void 0,"show-on-homepage","flex-columns","main-axis-space-between","cross-axis-center","in-section-gap").children(e.c.label("Zichtbaar op homepagina?"),this.showOnHomepage=new he.c(this.article.show_on_homepage)),e.c.div(void 0,"only-for-members","flex-columns","main-axis-space-between","cross-axis-center","in-section-gap").children(e.c.label("Alleen te lezen door leden?"),this.onlyForMembers=new he.c(this.article.only_for_members))).make()),this.body=this.appendChild(e.c.input.richText(this.article.body).placeholder("Tekst").compact(!0).make()),this.quickActions=this.appendChild(e.c.div(void 0,"quick-actions","flex-columns","cross-axis-center").children(this.saveButton=e.c.p("save_as").id("save-changes-button").class("icon","click-action").tooltip("Wijzigingen opslaan").on("click",((e,t)=>{const n=this.data;if(n.heading){const e=this.heading.value.trim();(this.saveAsNew?He.findFreeId(this.article.sourceDB,e):new Promise((e=>e(this.article.id)))).then((e=>{const t=new Fe(this.article.sourceDB,e,n.heading,n.body,n.created_at,n.category,n.show_on_homepage,n.only_for_members);this.article.sourceDB.write(t).then((()=>{fe.c.success("Wijzigingen opgeslagen!"),this.replaceWith(new Ve(t,this.lod)),this.onSave(t)})).catch((e=>fe.c.error((0,ce.c)(e))))})).catch((e=>fe.c.error((0,ce.c)(e))))}else fe.c.error("Koptitel is leeg.")})).make(),e.c.p("backspace").class("cancel-edit-button","icon","click-action").tooltip("Wijzigingen annuleren").on("click",(()=>{this.replaceWith(new Ve(this.article,this.lod))}))).style({position:"absolute",right:"var(--in-section-gap)",top:"var(--in-section-gap)"}).make())}static findFreeId(e,t){const n=[];let r="";for(let e=0;e<t.length;e++){const i=t[e];this.ALPHANUMERIC_REGEX.test(i)?r+=i:(r.length&&n.push(r),r="")}return r.length&&n.push(r),function t(n,r=0){return new Promise(((i,s)=>{const o=n+(r?`-${r}`:"");e.getById(o).then((e=>{e?t(n,r+1).then(i).catch(s):i(o)})).catch(s)}))}(n.join("-"))}}He.ALPHANUMERIC_REGEX=/[a-zA-Z0-9]/,function(e){let t;!function(e){e.equals=function(e,t){return e.heading===t.heading&&e.body===t.body&&e.created_at.getTime()===t.created_at.getTime()&&e.category===t.category&&e.only_for_members===t.only_for_members&&e.show_on_homepage===t.show_on_homepage}}(t=e.PartialArticleInfo||(e.PartialArticleInfo={}))}(He||(He={})),Se.c.onDOMContentLoaded().then((()=>customElements.define("editable-smart-article",He)));const qe="Agenda",We=new class extends Ue{constructor(){var e;super(...arguments),this.converter=(e=this,{toFirestore:e=>({heading:e.heading,body:e.body,category:e.category,created_at:me.kR.fromDate(e.created_at),show_on_homepage:e.show_on_homepage,only_for_members:e.only_for_members}),fromFirestore(t){const n=t.data();return new Fe(e,t.id,n.heading,n.body,n.created_at.toDate(),n.category,n.show_on_homepage,n.only_for_members)}}),this.COLLECTION=(0,me.oV)(le.AZ,"articles").withConverter(this.converter)}get(e={}){return this.getArticles({sortByCreatedAt:"descending",...e})}count(e={}){return this.getArticles({...e},!0)}getById(e){return new Promise(((t,n)=>{const r=(0,me.UN)(this.COLLECTION,e);(0,me.i4)(r).then((e=>{e.exists()?t(e.data()):t(void 0)})).catch(n)}))}getByCategory(e,t){return this.getArticles({category:e,...t})}getNext(e,t){return new Promise(((n,r)=>{this.getArticles({after:e.created_at,limit:1,sortByCreatedAt:"ascending",...t}).then((e=>n(e.length>0?e[0]:void 0)))}))}getPrevious(e,t){return new Promise(((n,r)=>{this.getArticles({before:e.created_at,limit:1,sortByCreatedAt:"descending",...t}).then((e=>n(e.length>0?e[0]:void 0)))}))}doWrite(...e){return new Promise(((t,n)=>{const r=(0,me.sv)(le.AZ);for(const t of e)r.set((0,me.UN)(le.AZ,"articles",t.id),this.converter.toFirestore(t));r.commit().then((()=>t(e.length))).catch(n)}))}doDelete(...e){return new Promise(((t,n)=>{const r=(0,me.sv)(le.AZ);for(const t of e)r.delete((0,me.UN)(le.AZ,"articles",t.id));r.commit().then((()=>t(e.length))).catch(n)}))}getArticles(e,t=!1){const n=[];return e.limit&&n.push((0,me.Yf)(e.limit)),e.id&&n.push((0,me.A9)((0,me.ET)(),"==",e.id)),e.notId&&n.push((0,me.A9)((0,me.ET)(),"!=",e.notId)),e.sortByCreatedAt&&n.push((0,me.k$)("created_at","ascending"===e.sortByCreatedAt?"asc":"desc")),e.before&&n.push((0,me.A9)("created_at","<",me.kR.fromDate(e.before))),e.after&&n.push((0,me.A9)("created_at",">",me.kR.fromDate(e.after))),"string"==typeof e.category&&n.push((0,me.A9)("category","==",e.category)),void 0!==e.forHomepage&&n.push((0,me.A9)("show_on_homepage","==",e.forHomepage)),void 0!==e.forMembers&&n.push((0,me.A9)("only_for_members","==",e.forMembers)),new Promise((async(e,r)=>{const i=(0,me.kt)(this.COLLECTION,...n);t?(0,me.QL)(i).then((t=>e(t.data().count))).catch(r):(0,me.uY)(i).then((t=>{const n=[];t.forEach((e=>n.push(e.data()))),e(n)})).catch(r)}))}};Se.c.useDynamicContent(We.getById(qe),(e=>{e?Me.c.replaceWith("article",new ze(e,ae.c.FULL)):console.error(`article with ID "${qe}" was now found`)}));const $e=new Pe(new _e,new Date);Se.c.onDOMContentLoaded().then((()=>{Me.c.replaceWith("event-calendar",$e)}))})()})();