/*! For license information please see header-and-footer.js.LICENSE.txt */
(()=>{var e={7088:(e,t,n)=>{"use strict";n.d(t,{Iv:()=>Yt});var r=n(6900),i=n(4376),s=n(4212);function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var a=n(392);const c=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},l=new r.UR("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),u=new s.YJ("@firebase/auth");function h(e,...t){u.logLevel<=s.Ge.ERROR&&u.error(`Auth (${i.Sg}): ${e}`,...t)}function d(e,...t){throw p(e,...t)}function f(e,...t){return p(e,...t)}function p(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return l.create(e,...t)}function g(e,t,...n){if(!e)throw p(t,...n)}function m(e){const t="INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function y(e,t){e||m(t)}function v(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function E(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class w{constructor(e,t){this.shortDelay=e,this.longDelay=t,y(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,r.AV)()||(0,r.AL)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===E()||"https:"===E()||(0,r.Cc)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function _(e,t){y(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class b{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void m("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void m("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void m("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const T={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},S=new w(3e4,6e4);function I(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function A(e,t,n,i,s={}){return C(e,s,(async()=>{let s={},o={};i&&("GET"===t?o=i:s={body:JSON.stringify(i)});const a=(0,r.ik)(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),b.fetch()(N(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},s))}))}async function C(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},T),t);try{const t=new x(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw R(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const t=s.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw R(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw R(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw R(e,"user-disabled",o);const l=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw function(e,t,n){const i=Object.assign(Object.assign({},c()),{[t]:n});return new r.UR("auth","Firebase",i).create(t,{appName:e.name})}(e,l,a);d(e,l)}}catch(t){if(t instanceof r.kx)throw t;d(e,"network-request-failed",{message:String(t)})}}async function k(e,t,n,r,i={}){const s=await A(e,t,n,r,i);return"mfaPendingCredential"in s&&d(e,"multi-factor-auth-required",{_serverResponse:s}),s}function N(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?_(e.config,i):`${e.config.apiScheme}://${i}`}function D(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class x{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(f(this.auth,"network-request-failed"))),S.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function R(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=f(e,t,r);return i.customData._tokenResponse=n,i}function O(e){return void 0!==e&&void 0!==e.enterprise}class L{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return D(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}function U(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function P(e){return 1e3*Number(e)}function M(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return h("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,r.WW)(n);return e?JSON.parse(e):(h("Failed to decode base64 JWT payload"),null)}catch(e){return h("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function F(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof r.kx&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class j{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class V{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=U(this.lastLoginAt),this.creationTime=U(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function B(e){var t;const n=e.auth,r=await e.getIdToken(),i=await F(e,async function(e,t){return A(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));g(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=(l=e.providerData,u=a,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const h=e.isAnonymous,d=!(e.email&&s.passwordHash||(null==c?void 0:c.length)),f=!!h&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new V(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(e,p)}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){g(e.idToken,"internal-error"),g(void 0!==e.idToken,"internal-error"),g(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=M(e);return g(t,"internal-error"),g(void 0!==t.exp,"internal-error"),g(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return g(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await async function(e,t){const n=await C(e,{},(async()=>{const n=(0,r.ik)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=N(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",b.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new q;return n&&(g("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(g("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(g("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return m("not implemented")}}function H(e,t){g("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ${constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new j(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new V(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await F(this,this.stsTokenManager.getToken(this.auth,e));return g(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=(0,r.Yj)(e),i=await n.getIdToken(t),s=M(i);g(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:U(P(s.auth_time)),issuedAtTime:U(P(s.iat)),expirationTime:U(P(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,r.Yj)(e);await B(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(g(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){g(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await B(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await F(this,async function(e,t){return A(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,y=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:E,emailVerified:w,isAnonymous:_,providerData:b,stsTokenManager:T}=t;g(E&&T,e,"internal-error");const S=q.fromJSON(this.name,T);g("string"==typeof E,e,"internal-error"),H(u,e.name),H(h,e.name),g("boolean"==typeof w,e,"internal-error"),g("boolean"==typeof _,e,"internal-error"),H(d,e.name),H(f,e.name),H(p,e.name),H(m,e.name),H(y,e.name),H(v,e.name);const I=new $({uid:E,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:y,lastLoginAt:v});return b&&Array.isArray(b)&&(I.providerData=b.map((e=>Object.assign({},e)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t,n=!1){const r=new q;r.updateFromServerResponse(t);const i=new $({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await B(i),i}}const z=new Map;function W(e){y(e instanceof Function,"Expected a class definition");let t=z.get(e);return t?(y(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,z.set(e,t),t)}class G{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}G.type="NONE";const K=G;function Y(e,t,n){return`firebase:${e}:${t}:${n}`}class X{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Y(this.userKey,r.apiKey,i),this.fullPersistenceKey=Y("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new X(W(K),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||W(K);const s=Y(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=$._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new X(i,e,n)):new X(i,e,n)}}function Q(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(te(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(J(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(re(t))return"Blackberry";if(ie(t))return"Webos";if(Z(t))return"Safari";if((t.includes("chrome/")||ee(t))&&!t.includes("edge/"))return"Chrome";if(ne(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function J(e=(0,r.Su)()){return/firefox\//i.test(e)}function Z(e=(0,r.Su)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ee(e=(0,r.Su)()){return/crios\//i.test(e)}function te(e=(0,r.Su)()){return/iemobile/i.test(e)}function ne(e=(0,r.Su)()){return/android/i.test(e)}function re(e=(0,r.Su)()){return/blackberry/i.test(e)}function ie(e=(0,r.Su)()){return/webos/i.test(e)}function se(e=(0,r.Su)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function oe(e=(0,r.Su)()){return se(e)||ne(e)||ie(e)||re(e)||/windows phone/i.test(e)||te(e)}function ae(e,t=[]){let n;switch(e){case"Browser":n=Q((0,r.Su)());break;case"Worker":n=`${Q((0,r.Su)())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${i.Sg}/${s}`}class ce{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class le{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ue{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new de(this),this.idTokenSubscription=new de(this),this.beforeStateQueue=new ce(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=l,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=W(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await X.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return g(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await B(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,r.Yj)(e):null;return t&&g(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&g(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(W(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return A(e,"GET","/v2/passwordPolicy",I(e,t))}(this),t=new le(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.UR("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return A(e,"POST","/v2/accounts:revokeToken",I(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&W(e)||this._popupRedirectResolver;g(t,this,"argument-error"),this.redirectPersistenceManager=await X.create(this,[W(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(g(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return g(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){u.logLevel<=s.Ge.WARN&&u.warn(`Auth (${i.Sg}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function he(e){return(0,r.Yj)(e)}class de{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,r.my)((e=>this.observer=e))}get next(){return g(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fe={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pe(e){return fe.loadJS(e)}function ge(e){return`__${e}${Math.floor(1e6*Math.random())}`}class me{constructor(e){this.type="recaptcha-enterprise",this.auth=he(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;O(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return A(e,"GET","/v2/recaptchaConfig",I(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new L(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&O(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=fe.recaptchaEnterpriseScript;0!==t.length&&(t+=i),pe(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ye(e,t,n,r=!1){const i=new me(e);let s;try{s=await i.verify(n)}catch(e){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ve(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ye(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await ye(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Ee(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function we(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class _e{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return m("not implemented")}_getIdTokenResponse(e){return m("not implemented")}_linkToIdToken(e,t){return m("not implemented")}_getReauthenticationResolver(e){return m("not implemented")}}async function be(e,t){return A(e,"POST","/v1/accounts:signUp",t)}async function Te(e,t){return k(e,"POST","/v1/accounts:signInWithPassword",I(e,t))}class Se extends _e{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Se(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Se(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ve(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Te);case"emailLink":return async function(e,t){return k(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{email:this._email,oobCode:this._password});default:d(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ve(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",be);case"emailLink":return async function(e,t){return k(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:d(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ie(e,t){return k(e,"POST","/v1/accounts:signInWithIdp",I(e,t))}class Ae extends _e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ae(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):d("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ae(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ie(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ie(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ie(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,r.ik)(t)}return e}}const Ce={USER_NOT_FOUND:"user-not-found"};class ke extends _e{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ke({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ke({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return k(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await k(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t));if(n.temporaryProof)throw R(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return k(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ce)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ke({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ne{constructor(e){var t,n,i,s,o,a;const c=(0,r.aw)((0,r.kF)(e)),l=null!==(t=c.apiKey)&&void 0!==t?t:null,u=null!==(n=c.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);g(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,r.aw)((0,r.kF)(e)).link,n=t?(0,r.aw)((0,r.kF)(t)).deep_link_id:null,i=(0,r.aw)((0,r.kF)(e)).deep_link_id;return(i?(0,r.aw)((0,r.kF)(i)).link:null)||i||n||t||e}(e);try{return new Ne(t)}catch(e){return null}}}class De{constructor(){this.providerId=De.PROVIDER_ID}static credential(e,t){return Se._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ne.parseLink(t);return g(n,"argument-error"),Se._fromEmailAndCode(e,n.code,n.tenantId)}}De.PROVIDER_ID="password",De.EMAIL_PASSWORD_SIGN_IN_METHOD="password",De.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class xe{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Re extends xe{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Oe extends Re{constructor(){super("facebook.com")}static credential(e){return Ae._fromParams({providerId:Oe.PROVIDER_ID,signInMethod:Oe.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oe.credentialFromTaggedObject(e)}static credentialFromError(e){return Oe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Oe.credential(e.oauthAccessToken)}catch(e){return null}}}Oe.FACEBOOK_SIGN_IN_METHOD="facebook.com",Oe.PROVIDER_ID="facebook.com";class Le extends Re{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ae._fromParams({providerId:Le.PROVIDER_ID,signInMethod:Le.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Le.credentialFromTaggedObject(e)}static credentialFromError(e){return Le.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Le.credential(t,n)}catch(e){return null}}}Le.GOOGLE_SIGN_IN_METHOD="google.com",Le.PROVIDER_ID="google.com";class Ue extends Re{constructor(){super("github.com")}static credential(e){return Ae._fromParams({providerId:Ue.PROVIDER_ID,signInMethod:Ue.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ue.credentialFromTaggedObject(e)}static credentialFromError(e){return Ue.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ue.credential(e.oauthAccessToken)}catch(e){return null}}}Ue.GITHUB_SIGN_IN_METHOD="github.com",Ue.PROVIDER_ID="github.com";class Pe extends Re{constructor(){super("twitter.com")}static credential(e,t){return Ae._fromParams({providerId:Pe.PROVIDER_ID,signInMethod:Pe.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Pe.credentialFromTaggedObject(e)}static credentialFromError(e){return Pe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Pe.credential(t,n)}catch(e){return null}}}Pe.TWITTER_SIGN_IN_METHOD="twitter.com",Pe.PROVIDER_ID="twitter.com";class Me{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await $._fromIdTokenResponse(e,n,r),s=Fe(n);return new Me({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Fe(n);return new Me({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Fe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class je extends r.kx{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,je.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new je(e,t,n,r)}}function Ve(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw je._fromErrorAndOperation(e,n,t,r);throw n}))}new WeakMap;const Be="__sak";class qe{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Be,"1"),this.storage.removeItem(Be),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class He extends qe{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,r.Su)();return Z(e)||se(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=oe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,r.Uv)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}He.type="LOCAL";const $e=He;class ze extends qe{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ze.type="SESSION";const We=ze;class Ge{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ge(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ke(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Ge.receivers=[];class Ye{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=Ke("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Xe(){return window}function Qe(){return void 0!==Xe().WorkerGlobalScope&&"function"==typeof Xe().importScripts}const Je="firebaseLocalStorageDb",Ze="firebaseLocalStorage",et="fbase_key";class tt{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function nt(e,t){return e.transaction([Ze],t?"readwrite":"readonly").objectStore(Ze)}function rt(){const e=indexedDB.open(Je,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ze,{keyPath:et})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ze)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Je);return new tt(e).toPromise()}(),t(await rt()))}))}))}async function it(e,t,n){const r=nt(e,!0).put({[et]:t,value:n});return new tt(r).toPromise()}function st(e,t){const n=nt(e,!0).delete(t);return new tt(n).toPromise()}class ot{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await rt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ge._getInstance(Qe()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ye(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rt();return await it(e,Be,"1"),await st(e,Be),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>it(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=nt(e,!1).get(t),r=await new tt(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>st(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=nt(e,!1).getAll();return new tt(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ot.type="LOCAL";const at=ot;ge("rcb"),new w(3e4,6e4);class ct{constructor(e){this.providerId=ct.PROVIDER_ID,this.auth=he(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var r;const i=await n.verify();try{let s;if(g("string"==typeof i,e,"argument-error"),g("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){g("enroll"===t.type,e,"internal-error");const n=await function(e,t){return A(e,"POST","/v2/accounts/mfaEnrollment:start",I(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{g("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;g(n,e,"missing-multi-factor-info");const o=await function(e,t){return A(e,"POST","/v2/accounts/mfaSignIn:start",I(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return A(e,"POST","/v1/accounts:sendVerificationCode",I(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}(this.auth,e,(0,r.Yj)(t))}static credential(e,t){return ke._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ct.credentialFromTaggedObject(t)}static credentialFromError(e){return ct.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ke._fromTokenResponse(t,n):null}}ct.PROVIDER_ID="phone",ct.PHONE_SIGN_IN_METHOD="phone";class lt extends _e{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ie(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ie(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ie(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ut(e){return async function(e,t,n=!1){const r="signIn",i=await Ve(e,r,t),s=await Me._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}(e.auth,new lt(e),e.bypassAuthState)}function ht(e){const{auth:t,user:n}=e;return g(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await F(e,Ve(r,i,t,e),n);g(s.idToken,r,"internal-error");const o=M(s.idToken);g(o,r,"internal-error");const{sub:a}=o;return g(e.uid===a,r,"user-mismatch"),Me._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&d(r,"user-mismatch"),e}}(n,new lt(e),e.bypassAuthState)}async function dt(e){const{auth:t,user:n}=e;return g(n,t,"internal-error"),async function(e,t,n=!1){const r=await F(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Me._forOperation(e,"link",r)}(n,new lt(e),e.bypassAuthState)}class ft{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ut;case"linkViaPopup":case"linkViaRedirect":return dt;case"reauthViaPopup":case"reauthViaRedirect":return ht;default:d(this.auth,"internal-error")}}resolve(e){y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pt=new w(2e3,1e4);class gt extends ft{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,gt.currentPopupAction&&gt.currentPopupAction.cancel(),gt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return g(e,this.auth,"internal-error"),e}async onExecution(){y(1===this.filter.length,"Popup operations only handle one event");const e=Ke();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(f(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(f(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,pt.get())};e()}}gt.currentPopupAction=null;const mt="pendingRedirect",yt=new Map;class vt extends ft{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=yt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Y(mt,e.config.apiKey,e.name)}(t),r=function(e){return W(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}yt.set(this.auth._key(),e)}return this.bypassAuthState||yt.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Et(e,t){yt.set(e._key(),t)}async function wt(e,t,n=!1){const r=he(e),i=function(e,t){return t?W(t):(g(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),s=new vt(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class _t{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tt(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Tt(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(f(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bt(e))}saveEventToCache(e){this.cachedEventUids.add(bt(e)),this.lastProcessedEventTime=Date.now()}}function bt(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Tt({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const St=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,It=/^https?/;function At(e){const t=v(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!It.test(n))return!1;if(St.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ct=new w(3e4,6e4);function kt(){const e=Xe().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function Nt(e){return new Promise(((t,n)=>{var r,i,s;function o(){kt(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{kt(),n(f(e,"network-request-failed"))},timeout:Ct.get()})}if(null===(i=null===(r=Xe().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Xe().gapi)||void 0===s?void 0:s.load)){const t=ge("iframefcb");return Xe()[t]=()=>{gapi.load?o():n(f(e,"network-request-failed"))},pe(`${fe.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Dt=null,e}))}let Dt=null;const xt=new w(5e3,15e3),Rt="__/auth/iframe",Ot="emulator/auth/iframe",Lt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ut=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pt(e){const t=e.config;g(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_(t,Ot):`https://${e.config.authDomain}/${Rt}`,s={apiKey:t.apiKey,appName:e.name,v:i.Sg},o=Ut.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,r.ik)(s).slice(1)}`}const Mt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ft{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const jt=encodeURIComponent("fac");async function Vt(e,t,n,s,o,a){g(e.config.authDomain,e,"auth-domain-config-required"),g(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:i.Sg,eventId:o};if(t instanceof xe){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",(0,r.t7)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(t instanceof Re){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const l=c;for(const e of Object.keys(l))void 0===l[e]&&delete l[e];const u=await e._getAppCheckToken(),h=u?`#${jt}=${encodeURIComponent(u)}`:"";return`${function({config:e}){return e.emulator?_(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,r.ik)(l).slice(1)}${h}`}const Bt="webStorageSupport",qt=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=We,this._completeRedirectFn=wt,this._overrideRedirectResult=Et}async _openPopup(e,t,n,i){var s;return y(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const l=Object.assign(Object.assign({},Mt),{width:i.toString(),height:s.toString(),top:o,left:a}),u=(0,r.Su)().toLowerCase();n&&(c=ee(u)?"_blank":n),J(u)&&(t=t||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=(0,r.Su)()){var t;return se(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new Ft(null);const d=window.open(t||"",c,h);g(d,e,"popup-blocked");try{d.focus()}catch(e){}return new Ft(d)}(e,await Vt(e,t,n,v(),i),Ke())}async _openRedirect(e,t,n,r){return await this._originValidation(e),i=await Vt(e,t,n,v(),r),Xe().location.href=i,new Promise((()=>{}));var i}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(y(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await function(e){return Dt=Dt||Nt(e),Dt}(e),n=Xe().gapi;return g(n,e,"internal-error"),t.open({where:document.body,url:Pt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Lt,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=f(e,"network-request-failed"),s=Xe().setTimeout((()=>{r(i)}),xt.get());function o(){Xe().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new _t(e);return t.register("authEvent",(t=>(g(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bt,{type:Bt},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Bt];void 0!==i&&t(!!i),d(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return A(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(At(e))return}catch(e){}d(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oe()||Z()||se()}};var Ht="@firebase/auth",$t="1.6.0";class zt{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){g(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Wt=(0,r.sX)("authIdTokenMaxAge")||300;let Gt=null;const Kt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Wt)return;const i=null==n?void 0:n.token;Gt!==i&&(Gt=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Yt(e=(0,i.WE)()){const t=(0,i.U5)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,i.U5)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),i=n.getOptions();if((0,r.IN)(i,null!=t?t:{}))return e;d(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:qt,persistence:[at,$e,We]}),s=(0,r.sX)("authTokenSyncURL");if(s){const e=Kt(s);!function(e,t,n){(0,r.Yj)(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(t,n,i,s){(0,r.Yj)(t).onIdTokenChanged((t=>e(t)),void 0,void 0)}(n)}const o=(0,r.EB)("auth");return o&&function(e,t,n){const r=he(e);g(r._canInitEmulator,r,"emulator-config-failed"),g(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=Ee(t),{host:o,port:a}=function(e){const t=Ee(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:we(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:we(t)}}}(t),c=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${o}`),n}var Xt;fe={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=f("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Xt="Browser",(0,i.q4)(new a.Yl("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;g(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:Xt,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ae(Xt)},c=new ue(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(W);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(c,t),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),(0,i.q4)(new a.Yl("auth-internal",(e=>{return t=he(e.getProvider("auth").getImmediate()),new zt(t);var t}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,i.Kk)(Ht,$t,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Xt)),(0,i.Kk)(Ht,$t,"esm2017")},4112:(e,t,n)=>{"use strict";n.d(t,{kR:()=>Zr,oV:()=>du,UN:()=>fu,ET:()=>Tu,QL:()=>vh,i4:()=>fh,uY:()=>gh,gZ:()=>mu,Yf:()=>nh,k$:()=>eh,kt:()=>Yu,Sm:()=>mh,A9:()=>Qu,sv:()=>_h});var r,i=n(4376),s=n(392),o=n(4212),a=n(6900),c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l={},u=u||{},h=c||self;function d(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var p="closure_uid_"+(1e9*Math.random()>>>0),g=0;function m(e,t,n){return e.call.apply(e.bind,arguments)}function y(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function v(e,t,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:y).apply(null,arguments)}function E(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function w(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function _(){this.s=this.s,this.o=this.o}_.prototype.s=!1,_.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,p)&&e[p]||(e[p]=++g))},_.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const b=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function T(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function S(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(d(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function I(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};h.addEventListener("test",e,t),h.removeEventListener("test",e,t)}catch(e){}return e}();function C(e){return/^[\s\xa0]*$/.test(e)}function k(){var e=h.navigator;return e&&(e=e.userAgent)?e:""}function N(e){return-1!=k().indexOf(e)}function D(e){return D[" "](e),e}D[" "]=function(){};var x,R,O,L=N("Opera"),U=N("Trident")||N("MSIE"),P=N("Edge"),M=P||U,F=N("Gecko")&&!(-1!=k().toLowerCase().indexOf("webkit")&&!N("Edge"))&&!(N("Trident")||N("MSIE"))&&!N("Edge"),j=-1!=k().toLowerCase().indexOf("webkit")&&!N("Edge");function V(){var e=h.document;return e?e.documentMode:void 0}e:{var B="",q=(R=k(),F?/rv:([^\);]+)(\)|;)/.exec(R):P?/Edge\/([\d\.]+)/.exec(R):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(R):j?/WebKit\/(\S+)/.exec(R):L?/(?:Version)[ \/]?(\S+)/.exec(R):void 0);if(q&&(B=q?q[1]:""),U){var H=V();if(null!=H&&H>parseFloat(B)){x=String(H);break e}}x=B}h.document&&U?O=V()||parseInt(x,10)||void 0:O=void 0;var $=O;function z(e,t){if(I.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(F){e:{try{D(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:W[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&z.$.h.call(this)}}w(z,I);var W={2:"touch",3:"pen",4:"mouse"};z.prototype.h=function(){z.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),K=0;function Y(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++K,this.fa=this.ia=!1}function X(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Q(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function J(e){const t={};for(const n in e)t[n]=e[n];return t}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<Z.length;t++)n=Z[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function te(e){this.src=e,this.g={},this.h=0}function ne(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=b(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(X(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function re(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}te.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=re(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Y(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var ie="closure_lm_"+(1e6*Math.random()|0),se={};function oe(e,t,n,r,i){if(r&&r.once)return ce(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)oe(e,t[s],n,r,i);return null}return n=ge(n),e&&e[G]?e.O(t,n,f(r)?!!r.capture:!!r,i):ae(e,t,n,!1,r,i)}function ae(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=f(i)?!!i.capture:!!i,a=fe(e);if(a||(e[ie]=a=new te(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){const e=de;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)A||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(he(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ce(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ce(e,t[s],n,r,i);return null}return n=ge(n),e&&e[G]?e.P(t,n,f(r)?!!r.capture:!!r,i):ae(e,t,n,!0,r,i)}function le(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)le(e,t[s],n,r,i);else r=f(r)?!!r.capture:!!r,n=ge(n),e&&e[G]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=re(s=e.g[t],n,r,i))&&(X(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=fe(e))&&(t=e.g[t.toString()],e=-1,t&&(e=re(t,n,r,i)),(n=-1<e?t[e]:null)&&ue(n))}function ue(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[G])ne(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(he(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=fe(t))?(ne(n,e),0==n.h&&(n.src=null,t[ie]=null)):X(e)}}}function he(e){return e in se?se[e]:se[e]="on"+e}function de(e,t){if(e.fa)e=!0;else{t=new z(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ue(e),e=n.call(r,t)}return e}function fe(e){return(e=e[ie])instanceof te?e:null}var pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ge(e){return"function"==typeof e?e:(e[pe]||(e[pe]=function(t){return e.handleEvent(t)}),e[pe])}function me(){_.call(this),this.i=new te(this),this.S=this,this.J=null}function ye(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new I(t,e);else if(t instanceof I)t.target=t.target||e;else{var i=t;ee(t=new I(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ve(o,r,!0,t)&&i}if(i=ve(o=t.g=e,r,!0,t)&&i,i=ve(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ve(o=t.g=n[s],r,!1,t)&&i}function ve(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ne(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}w(me,_),me.prototype[G]=!0,me.prototype.removeEventListener=function(e,t,n,r){le(this,e,t,n,r)},me.prototype.N=function(){if(me.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)X(n[r]);delete t.g[e],t.h--}}this.J=null},me.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},me.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ee=h.JSON.stringify;function we(){var e=Ce;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _e=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new be),(e=>e.reset()));class be{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Te(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Se(e){h.setTimeout((()=>{throw e}),0)}let Ie,Ae=!1,Ce=new class{constructor(){this.h=this.g=null}add(e,t){const n=_e.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},ke=()=>{const e=h.Promise.resolve(void 0);Ie=()=>{e.then(Ne)}};var Ne=()=>{for(var e;e=we();){try{e.h.call(e.g)}catch(e){Se(e)}var t=_e;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ae=!1};function De(e,t){me.call(this),this.h=e||1,this.g=t||h,this.j=v(this.qb,this),this.l=Date.now()}function xe(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Re(e,t,n){if("function"==typeof e)n&&(e=v(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=v(e.handleEvent,e)}return 2147483647<Number(t)?-1:h.setTimeout(e,t||0)}function Oe(e){e.g=Re((()=>{e.g=null,e.i&&(e.i=!1,Oe(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}w(De,me),(r=De.prototype).ga=!1,r.T=null,r.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ye(this,"tick"),this.ga&&(xe(this),this.start()))}},r.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.N=function(){De.$.N.call(this),xe(this),delete this.g};class Le extends _{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Oe(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ue(e){_.call(this),this.h=e,this.g={}}w(Ue,_);var Pe=[];function Me(e,t,n,r){Array.isArray(n)||(n&&(Pe[0]=n.toString()),n=Pe);for(var i=0;i<n.length;i++){var s=oe(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Fe(e){Q(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ue(e)}),e),e.g={}}function je(){this.g=!0}function Ve(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ee(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Ue.prototype.N=function(){Ue.$.N.call(this),Fe(this)},Ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},je.prototype.Ea=function(){this.g=!1},je.prototype.info=function(){};var Be={},qe=null;function He(){return qe=qe||new me}function $e(e){I.call(this,Be.Ta,e)}function ze(e){const t=He();ye(t,new $e(t))}function We(e,t){I.call(this,Be.STAT_EVENT,e),this.stat=t}function Ge(e){const t=He();ye(t,new We(t,e))}function Ke(e,t){I.call(this,Be.Ua,e),this.size=t}function Ye(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){e()}),t)}Be.Ta="serverreachability",w($e,I),Be.STAT_EVENT="statevent",w(We,I),Be.Ua="timingevent",w(Ke,I);var Xe={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qe={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Je(){}function Ze(e){return e.h||(e.h=e.i())}function et(){}Je.prototype.h=null;var tt,nt={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rt(){I.call(this,"d")}function it(){I.call(this,"c")}function st(){}function ot(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Ue(this),this.P=ct,e=M?125:void 0,this.V=new De(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new at}function at(){this.i=null,this.g="",this.h=!1}w(rt,I),w(it,I),w(st,Je),st.prototype.g=function(){return new XMLHttpRequest},st.prototype.i=function(){return{}},tt=new st;var ct=45e3,lt={},ut={};function ht(e,t,n){e.L=1,e.A=Dt(It(t)),e.u=n,e.S=!0,dt(e,null)}function dt(e,t){e.G=Date.now(),mt(e),e.B=It(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Ht(n.i,"t",r),e.o=0,n=e.l.J,e.h=new at,e.g=$n(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Le(v(e.Pa,e,e.g),e.O)),Me(e.U,e.g,"readystatechange",e.nb),t=e.I?J(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),ze(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ft(e){return!!e.g&&"GET"==e.v&&2!=e.L&&e.l.Ha}function pt(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=gt(e,n),r==ut){4==t&&(e.s=4,Ge(14),i=!1),Ve(e.j,e.m,null,"[Incomplete Response]");break}if(r==lt){e.s=4,Ge(15),Ve(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ve(e.j,e.m,r,null),_t(e,r)}ft(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Ge(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Pn(t),t.M=!0,Ge(11))):(Ve(e.j,e.m,n,"[Invalid Chunked Response]"),wt(e),Et(e))}function gt(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?ut:(n=Number(t.substring(n,r)),isNaN(n)?lt:(r+=1)+n>t.length?ut:(t=t.slice(r,r+n),e.o=r+n,t))}function mt(e){e.Y=Date.now()+e.P,yt(e,e.P)}function yt(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Ye(v(e.lb,e),t)}function vt(e){e.C&&(h.clearTimeout(e.C),e.C=null)}function Et(e){0==e.l.H||e.J||jn(e.l,e)}function wt(e){vt(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,xe(e.V),Fe(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function _t(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Xt(n.i,e)))if(!e.K&&Xt(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Fn(n),kn(n)}Un(n),Ge(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ye(v(n.ib,n),6e3));if(1>=Yt(n.i)&&n.oa){try{n.oa()}catch(e){}n.oa=void 0}}else Bn(n,11)}else if((e.K||n.g==e)&&Fn(n),!C(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Qt(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Nt(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Hn(r,r.J?r.pa:null,r.Y),o.K){Jt(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(vt(a),mt(a)),r.g=o}else Ln(r);0<n.j.length&&Dn(n)}else"stop"!=l[0]&&"close"!=l[0]||Bn(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Bn(n,7):Cn(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}ze()}catch(e){}}function bt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(d(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(d(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(d(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(r=ot.prototype).setTimeout=function(e){this.P=e},r.nb=function(e){e=e.target;const t=this.M;t&&3==_n(e)?t.l():this.Pa(e)},r.Pa=function(e){try{if(e==this.g)e:{const u=_n(this.g);var t=this.g.Ia();if(this.g.da(),!(3>u)&&(3!=u||M||this.g&&(this.h.h||this.g.ja()||bn(this.g)))){this.J||4!=u||7==t||ze(),vt(this);var n=this.g.da();this.ca=n;t:if(ft(this)){var r=bn(this.g);e="";var i=r.length,s=4==_n(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){wt(this),Et(this);var o="";break t}this.h.i=new h.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Ge(12),wt(this),Et(this);break e}Ve(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_t(this,n)}this.S?(pt(this,u,o),M&&this.i&&3==u&&(Me(this.U,this.V,"tick",this.mb),this.V.start())):(Ve(this.j,this.m,o,null),_t(this,o)),4==u&&wt(this),this.i&&!this.J&&(4==u?jn(this.l,this):(this.i=!1,mt(this)))}else(function(e){const t={};e=(e.g&&2<=_n(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(C(e[r]))continue;var n=Te(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),wt(this),Et(this)}}}catch(e){}},r.mb=function(){if(this.g){var e=_n(this.g),t=this.g.ja();this.o<t.length&&(vt(this),pt(this,e,t),this.i&&4!=e&&mt(this))}},r.cancel=function(){this.J=!0,wt(this)},r.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(ze(),Ge(17)),wt(this),this.s=2,Et(this)):yt(this,this.Y-e)};var Tt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function St(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof St){this.h=e.h,At(this,e.j),this.s=e.s,this.g=e.g,Ct(this,e.m),this.l=e.l;var t=e.i,n=new jt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),kt(this,n),this.o=e.o}else e&&(t=String(e).match(Tt))?(this.h=!1,At(this,t[1]||"",!0),this.s=xt(t[2]||""),this.g=xt(t[3]||"",!0),Ct(this,t[4]),this.l=xt(t[5]||"",!0),kt(this,t[6]||"",!0),this.o=xt(t[7]||"")):(this.h=!1,this.i=new jt(null,this.h))}function It(e){return new St(e)}function At(e,t,n){e.j=n?xt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ct(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function kt(e,t,n){t instanceof jt?(e.i=t,function(e,t){t&&!e.j&&(Vt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Bt(this,t),Ht(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Rt(t,Mt)),e.i=new jt(t,e.h))}function Nt(e,t,n){e.i.set(t,n)}function Dt(e){return Nt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Rt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ot),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ot(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}St.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Rt(t,Lt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Rt(t,Lt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Rt(n,"/"==n.charAt(0)?Pt:Ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Rt(n,Ft)),e.join("")};var Lt=/[#\/\?@]/g,Ut=/[#\?:]/g,Pt=/[#\?]/g,Mt=/[#\?@]/g,Ft=/#/g;function jt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Vt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Bt(e,t){Vt(e),t=$t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function qt(e,t){return Vt(e),t=$t(e,t),e.g.has(t)}function Ht(e,t,n){Bt(e,t),0<n.length&&(e.i=null,e.g.set($t(e,t),T(n)),e.h+=n.length)}function $t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=jt.prototype).add=function(e,t){Vt(this),this.i=null,e=$t(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){Vt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},r.ta=function(){Vt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},r.Z=function(e){Vt(this);let t=[];if("string"==typeof e)qt(this,e)&&(t=t.concat(this.g.get($t(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},r.set=function(e,t){return Vt(this),this.i=null,qt(this,e=$t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var zt=class{constructor(e,t){this.g=e,this.map=t}};function Wt(e){this.l=e||Gt,e=h.PerformanceNavigationTiming?0<(e=h.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(h.g&&h.g.Ka&&h.g.Ka()&&h.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Gt=10;function Kt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Yt(e){return e.h?1:e.g?e.g.size:0}function Xt(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qt(e,t){e.g?e.g.add(t):e.h=t}function Jt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Zt(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return T(e.i)}Wt.prototype.cancel=function(){if(this.i=Zt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var en=class{stringify(e){return h.JSON.stringify(e,void 0)}parse(e){return h.JSON.parse(e,void 0)}};function tn(){this.g=new en}function nn(e,t,n){const r=n||"";try{bt(e,(function(e,n){let i=e;f(e)&&(i=Ee(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function rn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function sn(e){this.l=e.ec||null,this.j=e.ob||!1}function on(e,t){me.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=an,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}w(sn,Je),sn.prototype.g=function(){return new on(this.l,this.j)},sn.prototype.i=function(e){return function(){return e}}({}),w(on,me);var an=0;function cn(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ln(e){e.readyState=4,e.l=null,e.j=null,e.A=null,un(e)}function un(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=on.prototype).open=function(e,t){if(this.readyState!=an)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,un(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||h).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ln(this)),this.readyState=an},r.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,un(this)),this.g&&(this.readyState=3,un(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==h.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cn(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},r.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ln(this):un(this),3==this.readyState&&cn(this)}},r.Za=function(e){this.g&&(this.response=this.responseText=e,ln(this))},r.Ya=function(e){this.g&&(this.response=e,ln(this))},r.ka=function(){this.g&&ln(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(on.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var hn=h.JSON.parse;function dn(e){me.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=fn,this.L=this.M=!1}w(dn,me);var fn="",pn=/^https?$/i,gn=["POST","PUT"];function mn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,yn(e),En(e)}function yn(e){e.F||(e.F=!0,ye(e,"complete"),ye(e,"error"))}function vn(e){if(e.h&&void 0!==u&&(!e.C[1]||4!=_n(e)||2!=e.da()))if(e.v&&4==_n(e))Re(e.La,0,e);else if(ye(e,"readystatechange"),4==_n(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(Tt)[1]||null;!i&&h.self&&h.self.location&&(i=h.self.location.protocol.slice(0,-1)),r=!pn.test(i?i.toLowerCase():"")}n=r}if(n)ye(e,"complete"),ye(e,"success");else{e.m=6;try{var s=2<_n(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.da()+"]",yn(e)}}finally{En(e)}}}function En(e,t){if(e.g){wn(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ye(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function wn(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(h.clearTimeout(e.A),e.A=null)}function _n(e){return e.g?e.g.readyState:0}function bn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case fn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Tn(e){let t="";return Q(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Sn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Tn(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Nt(e,t,n))}function In(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function An(e){this.Ga=0,this.j=[],this.l=new je,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=In("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=In("baseRetryDelayMs",5e3,e),this.hb=In("retryDelaySeedMs",1e4,e),this.eb=In("forwardChannelMaxRetries",2,e),this.xa=In("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Wt(e&&e.concurrentRequestLimit),this.Ja=new tn,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Cn(e){if(Nn(e),3==e.H){var t=e.W++,n=It(e.I);if(Nt(n,"SID",e.K),Nt(n,"RID",t),Nt(n,"TYPE","terminate"),Rn(e,n),(t=new ot(e,e.l,t)).L=2,t.A=Dt(It(n)),n=!1,h.navigator&&h.navigator.sendBeacon)try{n=h.navigator.sendBeacon(t.A.toString(),"")}catch(e){}!n&&h.Image&&((new Image).src=t.A,n=!0),n||(t.g=$n(t.l,null),t.g.ha(t.A)),t.G=Date.now(),mt(t)}qn(e)}function kn(e){e.g&&(Pn(e),e.g.cancel(),e.g=null)}function Nn(e){kn(e),e.u&&(h.clearTimeout(e.u),e.u=null),Fn(e),e.i.cancel(),e.m&&("number"==typeof e.m&&h.clearTimeout(e.m),e.m=null)}function Dn(e){if(!Kt(e.i)&&!e.m){e.m=!0;var t=e.Na;Ie||ke(),Ae||(Ie(),Ae=!0),Ce.add(t,e),e.C=0}}function xn(e,t){var n;n=t?t.m:e.W++;const r=It(e.I);Nt(r,"SID",e.K),Nt(r,"RID",n),Nt(r,"AID",e.V),Rn(e,r),e.o&&e.s&&Sn(r,e.o,e.s),n=new ot(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=On(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Qt(e.i,n),ht(n,r,t)}function Rn(e,t){e.na&&Q(e.na,(function(e,n){Nt(t,n,e)})),e.h&&bt({},(function(e,n){Nt(t,n,e)}))}function On(e,t,n){n=Math.min(e.j.length,n);var r=e.h?v(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{nn(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Ln(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Ie||ke(),Ae||(Ie(),Ae=!0),Ce.add(t,e),e.A=0}}function Un(e){return!(e.g||e.u||3<=e.A||(e.ba++,e.u=Ye(v(e.Ma,e),Vn(e,e.A)),e.A++,0))}function Pn(e){null!=e.B&&(h.clearTimeout(e.B),e.B=null)}function Mn(e){e.g=new ot(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=It(e.wa);Nt(t,"RID","rpc"),Nt(t,"SID",e.K),Nt(t,"AID",e.V),Nt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Nt(t,"TO",e.qa),Nt(t,"TYPE","xmlhttp"),Rn(e,t),e.o&&e.s&&Sn(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Dt(It(t)),n.u=null,n.S=!0,dt(n,e)}function Fn(e){null!=e.v&&(h.clearTimeout(e.v),e.v=null)}function jn(e,t){var n=null;if(e.g==t){Fn(e),Pn(e),e.g=null;var r=2}else{if(!Xt(e.i,t))return;n=t.F,Jt(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;ye(r=He(),new Ke(r,n)),Dn(e)}else Ln(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Yt(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=Ye(v(e.Na,e,t),Vn(e,e.C)),e.C++,0)))}(e,t)||2==r&&Un(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Bn(e,5);break;case 4:Bn(e,10);break;case 3:Bn(e,6);break;default:Bn(e,2)}}function Vn(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Bn(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=v(e.pb,e);n||(n=new St("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||At(n,"https"),Dt(n)),function(e,t){const n=new je;if(h.Image){const r=new Image;r.onload=E(rn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=E(rn,n,r,"TestLoadImage: error",!1,t),r.onabort=E(rn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=E(rn,n,r,"TestLoadImage: timeout",!1,t),h.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ge(2);e.H=0,e.h&&e.h.za(t),qn(e),Nn(e)}function qn(e){if(e.H=0,e.ma=[],e.h){const t=Zt(e.i);0==t.length&&0==e.j.length||(S(e.ma,t),S(e.ma,e.j),e.i.i.length=0,T(e.j),e.j.length=0),e.h.ya()}}function Hn(e,t,n){var r=n instanceof St?It(n):new St(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ct(r,r.m);else{var i=h.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new St(null);r&&At(s,r),t&&(s.g=t),i&&Ct(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Nt(r,n,t),Nt(r,"VER",e.ra),Rn(e,r),r}function $n(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new dn(new sn({ob:n})):new dn(e.va)).Oa(e.J),t}function zn(){}function Wn(){if(U&&!(10<=Number($)))throw Error("Environmental error: no available transport.")}function Gn(e,t){me.call(this),this.g=new An(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!C(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!C(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Xn(this)}function Kn(e){rt.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Yn(){it.call(this),this.status=1}function Xn(e){this.g=e}function Qn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Jn(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Zn(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(r=dn.prototype).Oa=function(e){this.M=e},r.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():tt.g(),this.C=this.u?Ze(this.u):Ze(tt),this.g.onreadystatechange=v(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(e){return void mn(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=h.FormData&&e instanceof h.FormData,!(0<=b(gn,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wn(this),0<this.B&&((this.L=function(e){return U&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=v(this.ua,this)):this.A=Re(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){mn(this,e)}},r.ua=function(){void 0!==u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ye(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ye(this,"complete"),ye(this,"abort"),En(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),En(this,!0)),dn.$.N.call(this)},r.La=function(){this.s||(this.G||this.v||this.l?vn(this):this.kb())},r.kb=function(){vn(this)},r.isActive=function(){return!!this.g},r.da=function(){try{return 2<_n(this)?this.g.status:-1}catch(e){return-1}},r.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},r.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),hn(t)}},r.Ia=function(){return this.m},r.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(r=An.prototype).ra=8,r.H=1,r.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ot(this,this.l,e);let s=this.s;if(this.U&&(s?(s=J(s),ee(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=On(this,i,t),Nt(n=It(this.I),"RID",e),Nt(n,"CVER",22),this.F&&Nt(n,"X-HTTP-Session-Id",this.F),Rn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Tn(s)))+"&"+t:this.o&&Sn(n,this.o,s)),Qt(this.i,i),this.bb&&Nt(n,"TYPE","init"),this.P?(Nt(n,"$req",t),Nt(n,"SID","null"),i.aa=!0,ht(i,n,null)):ht(i,n,t),this.H=2}}else 3==this.H&&(e?xn(this,e):0==this.j.length||Kt(this.i)||xn(this))},r.Ma=function(){if(this.u=null,Mn(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ye(v(this.jb,this),e)}},r.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ge(10),kn(this),Mn(this))},r.ib=function(){null!=this.v&&(this.v=null,kn(this),Un(this),Ge(19))},r.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ge(2)):(this.l.info("Failed to ping google.com"),Ge(1))},r.isActive=function(){return!!this.h&&this.h.isActive(this)},(r=zn.prototype).Ba=function(){},r.Aa=function(){},r.za=function(){},r.ya=function(){},r.isActive=function(){return!0},r.Va=function(){},Wn.prototype.g=function(e,t){return new Gn(e,t)},w(Gn,me),Gn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ge(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Hn(e,null,e.Y),Dn(e)},Gn.prototype.close=function(){Cn(this.g)},Gn.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ee(e),e=n);t.j.push(new zt(t.fb++,e)),3==t.H&&Dn(t)},Gn.prototype.N=function(){this.g.h=null,delete this.j,Cn(this.g),delete this.g,Gn.$.N.call(this)},w(Kn,rt),w(Yn,it),w(Xn,zn),Xn.prototype.Ba=function(){ye(this.g,"a")},Xn.prototype.Aa=function(e){ye(this.g,new Kn(e))},Xn.prototype.za=function(e){ye(this.g,new Yn)},Xn.prototype.ya=function(){ye(this.g,"b")},w(Qn,(function(){this.blockSize=-1})),Qn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Qn.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Jn(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Jn(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Jn(this,r),i=0;break}}this.h=i,this.i+=t},Qn.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var er={};function tr(e){return-128<=e&&128>e?function(e,t){var n=er;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=function(e){return new Zn([0|e],0>e?-1:0)}(e)}(e):new Zn([0|e],0>e?-1:0)}function nr(e){if(isNaN(e)||!isFinite(e))return ir;if(0>e)return lr(nr(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=rr;return new Zn(t,0)}var rr=4294967296,ir=tr(0),sr=tr(1),or=tr(16777216);function ar(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function cr(e){return-1==e.h}function lr(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Zn(n,~e.h).add(sr)}function ur(e,t){return e.add(lr(t))}function hr(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function dr(e,t){this.g=e,this.h=t}function fr(e,t){if(ar(t))throw Error("division by zero");if(ar(e))return new dr(ir,ir);if(cr(e))return t=fr(lr(e),t),new dr(lr(t.g),lr(t.h));if(cr(t))return t=fr(e,lr(t)),new dr(lr(t.g),t.h);if(30<e.g.length){if(cr(e)||cr(t))throw Error("slowDivide_ only works with positive integers.");for(var n=sr,r=t;0>=r.X(e);)n=pr(n),r=pr(r);var i=gr(n,1),s=gr(r,1);for(r=gr(r,2),n=gr(n,2);!ar(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=gr(r,1),n=gr(n,1)}return t=ur(e,i.R(t)),new dr(i,t)}for(i=ir;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=nr(n)).R(t);cr(o)||0<o.X(e);)o=(s=nr(n-=r)).R(t);ar(s)&&(s=sr),i=i.add(s),e=ur(e,o)}return new dr(i,e)}function pr(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Zn(n,e.h)}function gr(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Zn(i,e.h)}(r=Zn.prototype).ea=function(){if(cr(this))return-lr(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:rr+r)*t,t*=rr}return e},r.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ar(this))return"0";if(cr(this))return"-"+lr(this).toString(e);for(var t=nr(Math.pow(e,6)),n=this,r="";;){var i=fr(n,t).g,s=((0<(n=ur(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ar(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},r.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},r.X=function(e){return cr(e=ur(this,e))?-1:ar(e)?0:1},r.abs=function(){return cr(this)?lr(this):this},r.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Zn(n,-2147483648&n[n.length-1]?-1:0)},r.R=function(e){if(ar(this)||ar(e))return ir;if(cr(this))return cr(e)?lr(this).R(lr(e)):lr(lr(this).R(e));if(cr(e))return lr(this.R(lr(e)));if(0>this.X(or)&&0>e.X(or))return nr(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,hr(n,2*r+2*i),n[2*r+2*i+1]+=s*c,hr(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,hr(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,hr(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Zn(n,0)},r.gb=function(e){return fr(this,e).h},r.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Zn(n,this.h&e.h)},r.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Zn(n,this.h|e.h)},r.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Zn(n,this.h^e.h)},Wn.prototype.createWebChannel=Wn.prototype.g,Gn.prototype.send=Gn.prototype.u,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,Xe.NO_ERROR=0,Xe.TIMEOUT=8,Xe.HTTP_ERROR=6,Qe.COMPLETE="complete",et.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",me.prototype.listen=me.prototype.O,dn.prototype.listenOnce=dn.prototype.P,dn.prototype.getLastError=dn.prototype.Sa,dn.prototype.getLastErrorCode=dn.prototype.Ia,dn.prototype.getStatus=dn.prototype.da,dn.prototype.getResponseJson=dn.prototype.Wa,dn.prototype.getResponseText=dn.prototype.ja,dn.prototype.send=dn.prototype.ha,dn.prototype.setWithCredentials=dn.prototype.Oa,Qn.prototype.digest=Qn.prototype.l,Qn.prototype.reset=Qn.prototype.reset,Qn.prototype.update=Qn.prototype.j,Zn.prototype.add=Zn.prototype.add,Zn.prototype.multiply=Zn.prototype.R,Zn.prototype.modulo=Zn.prototype.gb,Zn.prototype.compare=Zn.prototype.X,Zn.prototype.toNumber=Zn.prototype.ea,Zn.prototype.toString=Zn.prototype.toString,Zn.prototype.getBits=Zn.prototype.D,Zn.fromNumber=nr,Zn.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return lr(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=nr(Math.pow(n,8)),i=ir,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=nr(Math.pow(n,o)),i=i.R(o).add(nr(a))):i=(i=i.R(r)).add(nr(a))}return i};var mr=l.createWebChannelTransport=function(){return new Wn},yr=l.getStatEventTarget=function(){return He()},vr=l.ErrorCode=Xe,Er=l.EventType=Qe,wr=l.Event=Be,_r=l.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},br=(l.FetchXmlHttpFactory=sn,l.WebChannel=et),Tr=l.XhrIo=dn,Sr=l.Md5=Qn,Ir=l.Integer=Zn;const Ar="@firebase/firestore";class Cr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");let kr="10.8.0";const Nr=new o.YJ("@firebase/firestore");function Dr(){return Nr.logLevel}function xr(e,...t){if(Nr.logLevel<=o.Ge.DEBUG){const n=t.map(Lr);Nr.debug(`Firestore (${kr}): ${e}`,...n)}}function Rr(e,...t){if(Nr.logLevel<=o.Ge.ERROR){const n=t.map(Lr);Nr.error(`Firestore (${kr}): ${e}`,...n)}}function Or(e,...t){if(Nr.logLevel<=o.Ge.WARN){const n=t.map(Lr);Nr.warn(`Firestore (${kr}): ${e}`,...n)}}function Lr(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ur(e="Unexpected state"){const t=`FIRESTORE (${kr}) INTERNAL ASSERTION FAILED: `+e;throw Rr(t),new Error(t)}function Pr(e,t){e||Ur()}function Mr(e,t){return e}const Fr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class jr extends a.kx{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Br{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cr.UNAUTHENTICATED)))}shutdown(){}}class Hr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $r{constructor(e){this.t=e,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vr,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{xr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(xr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vr)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(xr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Pr("string"==typeof t.accessToken),new Br(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pr(null===e||"string"==typeof e),new Cr(e)}}class zr{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Wr{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new zr(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Cr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kr{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&xr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,xr("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{xr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):xr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Pr("string"==typeof e.token),this.R=e.token,new Gr(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Yr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class Xr{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Yr(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Qr(e,t){return e<t?-1:e>t?1:0}function Jr(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Zr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new jr(Fr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new jr(Fr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new jr(Fr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new jr(Fr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zr.fromMillis(Date.now())}static fromDate(e){return Zr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Zr(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qr(this.nanoseconds,e.nanoseconds):Qr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ei{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ei(e)}static min(){return new ei(new Zr(0,0))}static max(){return new ei(new Zr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ti{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ur(),void 0===n?n=e.length-t:n>e.length-t&&Ur(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ti.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ti?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ni extends ti{construct(e,t,n){return new ni(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new jr(Fr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new ni(t)}static emptyPath(){return new ni([])}}const ri=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ii extends ti{construct(e,t,n){return new ii(e,t,n)}static isValidIdentifier(e){return ri.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ii.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ii(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new jr(Fr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new jr(Fr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new jr(Fr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new jr(Fr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ii(t)}static emptyPath(){return new ii([])}}class si{constructor(e){this.path=e}static fromPath(e){return new si(ni.fromString(e))}static fromName(e){return new si(ni.fromString(e).popFirst(5))}static empty(){return new si(ni.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ni.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ni.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new si(new ni(e.slice()))}}function oi(e){return new ai(e.readTime,e.key,-1)}class ai{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ai(ei.min(),si.empty(),-1)}static max(){return new ai(ei.max(),si.empty(),-1)}}function ci(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=si.comparator(e.documentKey,t.documentKey),0!==n?n:Qr(e.largestBatchId,t.largestBatchId))}const li="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ui{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function hi(e){if(e.code!==Fr.FAILED_PRECONDITION||e.message!==li)throw e;xr("LocalStore","Unexpectedly lost primary lease")}class di{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ur(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new di(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof di?t:di.resolve(t)}catch(e){return di.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):di.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):di.reject(t)}static resolve(e){return new di(((t,n)=>{t(e)}))}static reject(e){return new di(((t,n)=>{n(e)}))}static waitFor(e){return new di(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=di.resolve(!1);for(const n of e)t=t.next((e=>e?di.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new di(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new di(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class fi{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Vr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new mi(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=_i(t.target.error);this.V.reject(new mi(e,n))}}static open(e,t,n,r){try{return new fi(t,e.transaction(r,n))}catch(e){throw new mi(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(xr("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new vi(t)}}class pi{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===pi.S((0,a.Su)())&&Rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xr("SimpleDb","Removing database:",e),Ei(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,a.yy)())return!1;if(pi.C())return!0;const e=(0,a.Su)(),t=pi.S(e),n=0<t&&t<10,r=pi.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(xr("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new mi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new jr(Fr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new jr(Fr.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new mi(e,r))},r.onupgradeneeded=e=>{xr("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{xr("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=fi.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),di.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(xr("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class gi{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ei(this.k.delete())}}class mi extends jr{constructor(e,t){super(Fr.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yi(e){return"IndexedDbTransactionError"===e.name}class vi{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(xr("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(xr("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ei(n)}add(e){return xr("SimpleDb","ADD",this.store.name,e,e),Ei(this.store.add(e))}get(e){return Ei(this.store.get(e)).next((t=>(void 0===t&&(t=null),xr("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return xr("SimpleDb","DELETE",this.store.name,e),Ei(this.store.delete(e))}count(){return xr("SimpleDb","COUNT",this.store.name),Ei(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new di(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new di(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){xr("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new di(((n,r)=>{t.onerror=e=>{const t=_i(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new di(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new gi(i),o=t(i.primaryKey,i.value,s);if(o instanceof di){const e=o.catch((e=>(s.done(),di.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>di.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ei(e){return new di(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=_i(e.target.error);n(t)}}))}let wi=!1;function _i(e){const t=pi.S((0,a.Su)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new jr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wi||(wi=!0,setTimeout((()=>{throw e}),0)),e}}return e}class bi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Ti(e){return null==e}function Si(e){return 0===e&&1/e==-1/0}bi._e=-1;function Ii(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ai(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ci(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ki{constructor(e,t){this.comparator=e,this.root=t||Di.EMPTY}insert(e,t){return new ki(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Di.BLACK,null,null))}remove(e){return new ki(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Di.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ni(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ni(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ni(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ni(this.root,e,this.comparator,!0)}}class Ni{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Di{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Di.RED,this.left=null!=r?r:Di.EMPTY,this.right=null!=i?i:Di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Di(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Di.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ur();if(this.right.isRed())throw Ur();const e=this.left.check();if(e!==this.right.check())throw Ur();return e+(this.isRed()?0:1)}}Di.EMPTY=null,Di.RED=!0,Di.BLACK=!1,Di.EMPTY=new class{constructor(){this.size=0}get key(){throw Ur()}get value(){throw Ur()}get color(){throw Ur()}get left(){throw Ur()}get right(){throw Ur()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Di(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xi{constructor(e){this.comparator=e,this.data=new ki(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ri(this.data.getIterator())}getIteratorFrom(e){return new Ri(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof xi))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new xi(this.comparator);return t.data=e,t}}class Ri{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Oi{constructor(e){this.fields=e,e.sort(ii.comparator)}static empty(){return new Oi([])}unionWith(e){let t=new xi(ii.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jr(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Li extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ui{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Li("Invalid base64 string: "+e):e}}(e);return new Ui(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ui(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ui.EMPTY_BYTE_STRING=new Ui("");const Pi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mi(e){if(Pr(!!e),"string"==typeof e){let t=0;const n=Pi.exec(e);if(Pr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Fi(e.seconds),nanos:Fi(e.nanos)}}function Fi(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ji(e){return"string"==typeof e?Ui.fromBase64String(e):Ui.fromUint8Array(e)}function Vi(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bi(e){const t=e.mapValue.fields.__previous_value__;return Vi(t)?Bi(t):t}function qi(e){const t=Mi(e.mapValue.fields.__local_write_time__.timestampValue);return new Zr(t.seconds,t.nanos)}class Hi{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class $i{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $i("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $i&&e.projectId===this.projectId&&e.database===this.database}}const zi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Wi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Vi(e)?4:os(e)?9007199254740991:10:Ur()}function Gi(e,t){if(e===t)return!0;const n=Wi(e);if(n!==Wi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qi(e).isEqual(qi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Mi(e.timestampValue),r=Mi(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ji(e.bytesValue).isEqual(ji(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Fi(e.geoPointValue.latitude)===Fi(t.geoPointValue.latitude)&&Fi(e.geoPointValue.longitude)===Fi(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Fi(e.integerValue)===Fi(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Fi(e.doubleValue),r=Fi(t.doubleValue);return n===r?Si(n)===Si(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Jr(e.arrayValue.values||[],t.arrayValue.values||[],Gi);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ii(n)!==Ii(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!Gi(n[e],r[e])))return!1;return!0}(e,t);default:return Ur()}}function Ki(e,t){return void 0!==(e.values||[]).find((e=>Gi(e,t)))}function Yi(e,t){if(e===t)return 0;const n=Wi(e),r=Wi(t);if(n!==r)return Qr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Fi(e.integerValue||e.doubleValue),r=Fi(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Xi(e.timestampValue,t.timestampValue);case 4:return Xi(qi(e),qi(t));case 5:return Qr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ji(e),r=ji(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=Qr(n[e],r[e]);if(0!==t)return t}return Qr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Qr(Fi(e.latitude),Fi(t.latitude));return 0!==n?n:Qr(Fi(e.longitude),Fi(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Yi(n[e],r[e]);if(t)return t}return Qr(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===zi.mapValue&&t===zi.mapValue)return 0;if(e===zi.mapValue)return 1;if(t===zi.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=Qr(r[e],s[e]);if(0!==t)return t;const o=Yi(n[r[e]],i[s[e]]);if(0!==o)return o}return Qr(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Ur()}}function Xi(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qr(e,t);const n=Mi(e),r=Mi(t),i=Qr(n.seconds,r.seconds);return 0!==i?i:Qr(n.nanos,r.nanos)}function Qi(e){return Ji(e)}function Ji(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Mi(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ji(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return si.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ji(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ji(e.fields[i])}`;return n+"}"}(e.mapValue):Ur()}function Zi(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function es(e){return!!e&&"integerValue"in e}function ts(e){return!!e&&"arrayValue"in e}function ns(e){return!!e&&"nullValue"in e}function rs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function is(e){return!!e&&"mapValue"in e}function ss(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ai(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ss(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ss(e.arrayValue.values[n]);return t}return Object.assign({},e)}function os(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class as{constructor(e){this.value=e}static empty(){return new as({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!is(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ss(t)}setAll(e){let t=ii.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ss(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());is(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];is(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ai(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new as(ss(this.value))}}function cs(e){const t=[];return Ai(e.fields,((e,n)=>{const r=new ii([e]);if(is(n)){const e=cs(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Oi(t)}class ls{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ls(e,0,ei.min(),ei.min(),ei.min(),as.empty(),0)}static newFoundDocument(e,t,n,r){return new ls(e,1,t,ei.min(),n,r,0)}static newNoDocument(e,t){return new ls(e,2,t,ei.min(),ei.min(),as.empty(),0)}static newUnknownDocument(e,t){return new ls(e,3,t,ei.min(),ei.min(),as.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ei.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=as.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=as.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ei.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ls&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ls(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class us{constructor(e,t){this.position=e,this.inclusive=t}}function hs(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?si.comparator(si.fromName(o.referenceValue),n.key):Yi(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ds(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Gi(e.position[n],t.position[n]))return!1;return!0}class fs{constructor(e,t="asc"){this.field=e,this.dir=t}}function ps(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class gs{}class ms extends gs{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ts(e,t,n):"array-contains"===t?new Cs(e,n):"in"===t?new ks(e,n):"not-in"===t?new Ns(e,n):"array-contains-any"===t?new Ds(e,n):new ms(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ss(e,n):new Is(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Yi(t,this.value)):null!==t&&Wi(this.value)===Wi(t)&&this.matchesComparison(Yi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ur()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ys extends gs{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new ys(e,t)}matches(e){return vs(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function vs(e){return"and"===e.op}function Es(e){return function(e){for(const t of e.filters)if(t instanceof ys)return!1;return!0}(e)&&vs(e)}function ws(e){if(e instanceof ms)return e.field.canonicalString()+e.op.toString()+Qi(e.value);if(Es(e))return e.filters.map((e=>ws(e))).join(",");{const t=e.filters.map((e=>ws(e))).join(",");return`${e.op}(${t})`}}function _s(e,t){return e instanceof ms?function(e,t){return t instanceof ms&&e.op===t.op&&e.field.isEqual(t.field)&&Gi(e.value,t.value)}(e,t):e instanceof ys?function(e,t){return t instanceof ys&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&_s(n,t.filters[r])),!0)}(e,t):void Ur()}function bs(e){return e instanceof ms?function(e){return`${e.field.canonicalString()} ${e.op} ${Qi(e.value)}`}(e):e instanceof ys?function(e){return e.op.toString()+" {"+e.getFilters().map(bs).join(" ,")+"}"}(e):"Filter"}class Ts extends ms{constructor(e,t,n){super(e,t,n),this.key=si.fromName(n.referenceValue)}matches(e){const t=si.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ss extends ms{constructor(e,t){super(e,"in",t),this.keys=As(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Is extends ms{constructor(e,t){super(e,"not-in",t),this.keys=As(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function As(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>si.fromName(e.referenceValue)))}class Cs extends ms{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ts(t)&&Ki(t.arrayValue,this.value)}}class ks extends ms{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ki(this.value.arrayValue,t)}}class Ns extends ms{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ki(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ki(this.value.arrayValue,t)}}class Ds extends ms{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ts(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ki(this.value.arrayValue,e)))}}class xs{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Rs(e,t=null,n=[],r=[],i=null,s=null,o=null){return new xs(e,t,n,r,i,s,o)}function Os(e){const t=Mr(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ws(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ti(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Qi(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Qi(e))).join(",")),t.ce=e}return t.ce}function Ls(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ps(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!_s(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ds(e.startAt,t.startAt)&&ds(e.endAt,t.endAt)}function Us(e){return si.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ps{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Ms(e){return new Ps(e)}function Fs(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function js(e){return null!==e.collectionGroup}function Vs(e){const t=Mr(e);if(null===t.le){t.le=[];const e=new Set;for(const n of t.explicitOrderBy)t.le.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new xi(ii.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new fs(r,n))})),e.has(ii.keyField().canonicalString())||t.le.push(new fs(ii.keyField(),n))}return t.le}function Bs(e){const t=Mr(e);return t.he||(t.he=qs(t,Vs(e))),t.he}function qs(e,t){if("F"===e.limitType)return Rs(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new fs(e.field,t)}));const n=e.endAt?new us(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new us(e.startAt.position,e.startAt.inclusive):null;return Rs(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Hs(e,t){const n=e.filters.concat([t]);return new Ps(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function $s(e,t,n){return new Ps(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zs(e,t){return Ls(Bs(e),Bs(t))&&e.limitType===t.limitType}function Ws(e){return`${Os(Bs(e))}|lt:${e.limitType}`}function Gs(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>bs(e))).join(", ")}]`),Ti(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Qi(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Qi(e))).join(",")),`Target(${t})`}(Bs(e))}; limitType=${e.limitType})`}function Ks(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):si.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Vs(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=hs(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Vs(e),t)||e.endAt&&!function(e,t,n){const r=hs(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Vs(e),t))}(e,t)}function Ys(e){return(t,n)=>{let r=!1;for(const i of Vs(e)){const e=Xs(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Xs(e,t,n){const r=e.field.isKeyField()?si.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Yi(r,i):Ur()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ur()}}class Qs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ai(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return Ci(this.inner)}size(){return this.innerSize}}const Js=new ki(si.comparator);function Zs(){return Js}const eo=new ki(si.comparator);function to(...e){let t=eo;for(const n of e)t=t.insert(n.key,n);return t}function no(e){let t=eo;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function ro(){return so()}function io(){return so()}function so(){return new Qs((e=>e.toString()),((e,t)=>e.isEqual(t)))}const oo=new ki(si.comparator),ao=new xi(si.comparator);function co(...e){let t=ao;for(const n of e)t=t.add(n);return t}const lo=new xi(Qr);function uo(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Si(t)?"-0":t}}function ho(e){return{integerValue:""+e}}function fo(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Si(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?ho(t):uo(e,t)}class po{constructor(){this._=void 0}}function go(e,t,n){return e instanceof vo?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Vi(t)&&(t=Bi(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Eo?wo(e,t):e instanceof _o?bo(e,t):function(e,t){const n=yo(e,t),r=So(n)+So(e.Ie);return es(n)&&es(e.Ie)?ho(r):uo(e.serializer,r)}(e,t)}function mo(e,t,n){return e instanceof Eo?wo(e,t):e instanceof _o?bo(e,t):n}function yo(e,t){return e instanceof To?function(e){return es(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class vo extends po{}class Eo extends po{constructor(e){super(),this.elements=e}}function wo(e,t){const n=Io(t);for(const t of e.elements)n.some((e=>Gi(e,t)))||n.push(t);return{arrayValue:{values:n}}}class _o extends po{constructor(e){super(),this.elements=e}}function bo(e,t){let n=Io(t);for(const t of e.elements)n=n.filter((e=>!Gi(e,t)));return{arrayValue:{values:n}}}class To extends po{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function So(e){return Fi(e.integerValue||e.doubleValue)}function Io(e){return ts(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ao{constructor(e,t){this.version=e,this.transformResults=t}}class Co{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Co}static exists(e){return new Co(void 0,e)}static updateTime(e){return new Co(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ko(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class No{}function Do(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Vo(e.key,Co.none()):new Uo(e.key,e.data,Co.none());{const n=e.data,r=as.empty();let i=new xi(ii.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Po(e.key,r,new Oi(i.toArray()),Co.none())}}function xo(e,t,n){e instanceof Uo?function(e,t,n){const r=e.value.clone(),i=Fo(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Po?function(e,t,n){if(!ko(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Fo(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Mo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ro(e,t,n,r){return e instanceof Uo?function(e,t,n,r){if(!ko(e.precondition,t))return n;const i=e.value.clone(),s=jo(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Po?function(e,t,n,r){if(!ko(e.precondition,t))return n;const i=jo(e.fieldTransforms,r,t),s=t.data;return s.setAll(Mo(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return ko(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Oo(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=yo(r.transform,e||null);null!=i&&(null===n&&(n=as.empty()),n.set(r.field,i))}return n||null}function Lo(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Jr(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Eo&&t instanceof Eo||e instanceof _o&&t instanceof _o?Jr(e.elements,t.elements,Gi):e instanceof To&&t instanceof To?Gi(e.Ie,t.Ie):e instanceof vo&&t instanceof vo}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Uo extends No{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Po extends No{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Mo(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Fo(e,t,n){const r=new Map;Pr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,mo(o,a,n[i]))}return r}function jo(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,go(e,s,t))}return r}class Vo extends No{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bo extends No{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qo{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&xo(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ro(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ro(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=io();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Do(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ei.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),co())}isEqual(e){return this.batchId===e.batchId&&Jr(this.mutations,e.mutations,((e,t)=>Lo(e,t)))&&Jr(this.baseMutations,e.baseMutations,((e,t)=>Lo(e,t)))}}class Ho{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Pr(e.mutations.length===n.length);let r=oo;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Ho(e,t,n,r)}}class $o{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class zo{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class Wo{constructor(e,t){this.count=e,this.unchangedNames=t}}var Go,Ko;function Yo(e){if(void 0===e)return Rr("GRPC error has no .code"),Fr.UNKNOWN;switch(e){case Go.OK:return Fr.OK;case Go.CANCELLED:return Fr.CANCELLED;case Go.UNKNOWN:return Fr.UNKNOWN;case Go.DEADLINE_EXCEEDED:return Fr.DEADLINE_EXCEEDED;case Go.RESOURCE_EXHAUSTED:return Fr.RESOURCE_EXHAUSTED;case Go.INTERNAL:return Fr.INTERNAL;case Go.UNAVAILABLE:return Fr.UNAVAILABLE;case Go.UNAUTHENTICATED:return Fr.UNAUTHENTICATED;case Go.INVALID_ARGUMENT:return Fr.INVALID_ARGUMENT;case Go.NOT_FOUND:return Fr.NOT_FOUND;case Go.ALREADY_EXISTS:return Fr.ALREADY_EXISTS;case Go.PERMISSION_DENIED:return Fr.PERMISSION_DENIED;case Go.FAILED_PRECONDITION:return Fr.FAILED_PRECONDITION;case Go.ABORTED:return Fr.ABORTED;case Go.OUT_OF_RANGE:return Fr.OUT_OF_RANGE;case Go.UNIMPLEMENTED:return Fr.UNIMPLEMENTED;case Go.DATA_LOSS:return Fr.DATA_LOSS;default:return Ur()}}(Ko=Go||(Go={}))[Ko.OK=0]="OK",Ko[Ko.CANCELLED=1]="CANCELLED",Ko[Ko.UNKNOWN=2]="UNKNOWN",Ko[Ko.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ko[Ko.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ko[Ko.NOT_FOUND=5]="NOT_FOUND",Ko[Ko.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ko[Ko.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ko[Ko.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ko[Ko.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ko[Ko.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ko[Ko.ABORTED=10]="ABORTED",Ko[Ko.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ko[Ko.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ko[Ko.INTERNAL=13]="INTERNAL",Ko[Ko.UNAVAILABLE=14]="UNAVAILABLE",Ko[Ko.DATA_LOSS=15]="DATA_LOSS";const Xo=new Ir([4294967295,4294967295],0);function Qo(e){const t=(new TextEncoder).encode(e),n=new Sr;return n.update(t),new Uint8Array(n.digest())}function Jo(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ir([n,r],0),new Ir([i,s],0)]}class Zo{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ea(`Invalid padding: ${t}`);if(n<0)throw new ea(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ea(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ea(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Ir.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Ir.fromNumber(n)));return 1===r.compare(Xo)&&(r=new Ir([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Qo(e),[n,r]=Jo(t);for(let e=0;e<this.hashCount;e++){const t=this.de(n,r,e);if(!this.Ae(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Zo(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Qo(e),[n,r]=Jo(t);for(let e=0;e<this.hashCount;e++){const t=this.de(n,r,e);this.Re(t)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ta{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,na.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ta(ei.min(),r,new ki(Qr),Zs(),co())}}class na{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new na(n,t,co(),co(),co())}}class ra{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class ia{constructor(e,t){this.targetId=e,this.fe=t}}class sa{constructor(e,t,n=Ui.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class oa{constructor(){this.ge=0,this.pe=la(),this.ye=Ui.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=co(),t=co(),n=co();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ur()}})),new na(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=la()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Pr(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class aa{constructor(e){this.Le=e,this.ke=new Map,this.qe=Zs(),this.Qe=ca(),this.Ke=new ki(Qr)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Ur()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Us(i))if(0===n){const e=new si(i.path);this.We(t,e,ls.newNoDocument(e,ei.min()))}else Pr(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=ji(n).toUint8Array()}catch(e){if(e instanceof Li)return Or("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Zo(s,r,i)}catch(e){return Or(e instanceof ea?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Us(i.target)){const t=new si(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,ls.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=co();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new ta(e,t,this.Ke,this.qe,n);return this.qe=Zs(),this.Qe=ca(),this.Ke=new ki(Qr),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new oa,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new xi(Qr),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||xr("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new oa),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ca(){return new ki(si.comparator)}function la(){return new ki(si.comparator)}const ua={asc:"ASCENDING",desc:"DESCENDING"},ha={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},da={and:"AND",or:"OR"};class fa{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pa(e,t){return e.useProto3Json||Ti(t)?t:{value:t}}function ga(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ma(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ya(e,t){return ga(e,t.toTimestamp())}function va(e){return Pr(!!e),ei.fromTimestamp(function(e){const t=Mi(e);return new Zr(t.seconds,t.nanos)}(e))}function Ea(e,t){return wa(e,t).canonicalString()}function wa(e,t){const n=function(e){return new ni(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function _a(e){const t=ni.fromString(e);return Pr(ja(t)),t}function ba(e,t){return Ea(e.databaseId,t.path)}function Ta(e,t){const n=_a(t);if(n.get(1)!==e.databaseId.projectId)throw new jr(Fr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new jr(Fr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new si(Aa(n))}function Sa(e,t){return Ea(e.databaseId,t)}function Ia(e){return new ni(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Aa(e){return Pr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ca(e,t,n){return{name:ba(e,t),fields:n.value.mapValue.fields}}function ka(e,t){return{documents:[Sa(e,t.path)]}}function Na(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Sa(e,i);const s=function(e){if(0!==e.length)return Ma(ys.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ua(e.field),direction:Ra(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=pa(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Da(e){let t=function(e){const t=_a(e);return 4===t.length?ni.emptyPath():Aa(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pr(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=xa(e);return t instanceof ys&&Es(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new fs(Pa(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ti(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new us(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new us(n,t)}(n.endAt)),function(e,t,n,r,i,s,o,a){return new Ps(e,t,n,r,i,s,o,a)}(t,i,o,s,a,"F",c,l)}function xa(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Pa(e.unaryFilter.field);return ms.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Pa(e.unaryFilter.field);return ms.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Pa(e.unaryFilter.field);return ms.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Pa(e.unaryFilter.field);return ms.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ur()}}(e):void 0!==e.fieldFilter?function(e){return ms.create(Pa(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ur()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ys.create(e.compositeFilter.filters.map((e=>xa(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ur()}}(e.compositeFilter.op))}(e):Ur()}function Ra(e){return ua[e]}function Oa(e){return ha[e]}function La(e){return da[e]}function Ua(e){return{fieldPath:e.canonicalString()}}function Pa(e){return ii.fromServerFormat(e.fieldPath)}function Ma(e){return e instanceof ms?function(e){if("=="===e.op){if(rs(e.value))return{unaryFilter:{field:Ua(e.field),op:"IS_NAN"}};if(ns(e.value))return{unaryFilter:{field:Ua(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rs(e.value))return{unaryFilter:{field:Ua(e.field),op:"IS_NOT_NAN"}};if(ns(e.value))return{unaryFilter:{field:Ua(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ua(e.field),op:Oa(e.op),value:e.value}}}(e):e instanceof ys?function(e){const t=e.getFilters().map((e=>Ma(e)));return 1===t.length?t[0]:{compositeFilter:{op:La(e.op),filters:t}}}(e):Ur()}function Fa(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ja(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Va{constructor(e,t,n,r,i=ei.min(),s=ei.min(),o=Ui.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Va(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ba{constructor(e){this.ct=e}}function qa(e){const t=Da({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?$s(t,t.limit,"L"):t}class Ha{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Fi(e.integerValue));else if("doubleValue"in e){const n=Fi(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Si(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At(`${n.seconds||""}`),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(ji(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?os(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ur()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const e of Object.keys(n))this.Rt(e,t),this.It(n[e],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const e of n)this.It(e,t)}gt(e,t){this.Et(t,37),si.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}Ha.bt=new Ha;class $a{constructor(){this._n=new za}addToCollectionParentIndex(e,t){return this._n.add(t),di.resolve()}getCollectionParents(e,t){return di.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return di.resolve()}deleteFieldIndex(e,t){return di.resolve()}deleteAllFieldIndexes(e){return di.resolve()}createTargetIndexes(e,t){return di.resolve()}getDocumentsMatchingTarget(e,t){return di.resolve(null)}getIndexType(e,t){return di.resolve(0)}getFieldIndexes(e,t){return di.resolve([])}getNextCollectionGroupToUpdate(e){return di.resolve(null)}getMinOffset(e,t){return di.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,t){return di.resolve(ai.min())}updateCollectionGroup(e,t,n){return di.resolve()}updateIndexEntries(e,t){return di.resolve()}}class za{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xi(ni.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new xi(ni.comparator)).toArray()}}new Uint8Array(0);class Wa{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Wa(e,Wa.DEFAULT_COLLECTION_PERCENTILE,Wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Wa.DEFAULT_COLLECTION_PERCENTILE=10,Wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wa.DEFAULT=new Wa(41943040,Wa.DEFAULT_COLLECTION_PERCENTILE,Wa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wa.DISABLED=new Wa(-1,0,0);class Ga{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ga(0)}static Bn(){return new Ga(-1)}}class Ka{constructor(){this.changes=new Qs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ls.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?di.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ya{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Xa{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Ro(n.mutation,e,Oi.empty(),Zr.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,co()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=co()){const r=ro();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=to();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=ro();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,co())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Zs();const s=so(),o=so();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Po)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Ro(o.mutation,t,o.mutation.getFieldMask(),Zr.now())):s.set(t.key,Oi.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Ya(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=so();let r=new ki(((e,t)=>e-t)),i=co();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Oi.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||co()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=io();c.forEach((e=>{if(!i.has(e)){const r=Do(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return di.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return si.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):js(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):di.resolve(ro());let o=-1,a=i;return s.next((t=>di.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?di.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,co()))).next((e=>({batchId:o,changes:no(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new si(t)).next((e=>{let t=to();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=to();return this.indexManager.getCollectionParents(e,i).next((o=>di.forEach(o,(o=>{const a=function(e,t){return new Ps(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ls.newInvalidDocument(r)))}));let n=to();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Ro(s.mutation,r,Oi.empty(),Zr.now()),Ks(t,r)&&(n=n.insert(e,r))})),n}))}}class Qa{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return di.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:va(e.createTime)}}(t)),di.resolve()}getNamedQuery(e,t){return di.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:qa(e.bundledQuery),readTime:va(e.readTime)}}(t)),di.resolve()}}class Ja{constructor(){this.overlays=new ki(si.comparator),this.hr=new Map}getOverlay(e,t){return di.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ro();return di.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),di.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),di.resolve()}getOverlaysForCollection(e,t,n){const r=ro(),i=t.length+1,s=new si(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return di.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ki(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ro(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=ro(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return di.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new $o(t,n));let i=this.hr.get(t);void 0===i&&(i=co(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Za{constructor(){this.Pr=new xi(ec.Ir),this.Tr=new xi(ec.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new ec(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new ec(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new si(new ni([])),n=new ec(t,e),r=new ec(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new si(new ni([])),n=new ec(t,e),r=new ec(t,e+1);let i=co();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new ec(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ec{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return si.comparator(e.key,t.key)||Qr(e.pr,t.pr)}static Er(e,t){return Qr(e.pr,t.pr)||si.comparator(e.key,t.key)}}class tc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new xi(ec.Ir)}checkEmpty(e){return di.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new qo(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.wr=this.wr.add(new ec(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return di.resolve(s)}lookupMutationBatch(e,t){return di.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return di.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return di.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return di.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ec(t,0),r=new ec(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),di.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new xi(Qr);return t.forEach((e=>{const t=new ec(e,0),r=new ec(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),di.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;si.isDocumentKey(i)||(i=i.child(""));const s=new ec(new si(i),0);let o=new xi(Qr);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),di.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Pr(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return di.forEach(t.mutations,(r=>{const i=new ec(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new ec(t,0),r=this.wr.firstAfterOrEqual(n);return di.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,di.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nc{constructor(e){this.vr=e,this.docs=new ki(si.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return di.resolve(n?n.document.mutableCopy():ls.newInvalidDocument(t))}getEntries(e,t){let n=Zs();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ls.newInvalidDocument(e))})),di.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Zs();const s=t.path,o=new si(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ci(oi(o),n)<=0||(r.has(o.key)||Ks(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return di.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ur()}Fr(e,t){return di.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new rc(this)}getSize(e){return di.resolve(this.size)}}class rc extends Ka{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),di.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class ic{constructor(e){this.persistence=e,this.Mr=new Qs((e=>Os(e)),Ls),this.lastRemoteSnapshotVersion=ei.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Za,this.targetCount=0,this.Br=Ga.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),di.resolve()}getLastRemoteSnapshotVersion(e){return di.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return di.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),di.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),di.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Ga(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,di.resolve()}updateTargetData(e,t){return this.qn(t),di.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,di.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),di.waitFor(i).next((()=>r))}getTargetCount(e){return di.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return di.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),di.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),di.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),di.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return di.resolve(n)}containsKey(e,t){return di.resolve(this.Nr.containsKey(t))}}class sc{constructor(e,t){this.Lr={},this.overlays={},this.kr=new bi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ic(this),this.indexManager=new $a,this.remoteDocumentCache=function(e){return new nc(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Ba(t),this.$r=new Qa(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ja,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new tc(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){xr("MemoryPersistence","Starting transaction:",e);const r=new oc(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return di.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class oc extends ui{constructor(e){super(),this.currentSequenceNumber=e}}class ac{constructor(e){this.persistence=e,this.zr=new Za,this.jr=null}static Hr(e){return new ac(e)}get Jr(){if(this.jr)return this.jr;throw Ur()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),di.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),di.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),di.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return di.forEach(this.Jr,(n=>{const r=si.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,ei.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return di.or([()=>di.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class cc{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=co(),r=co();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new cc(e,t.fromCache,n,r)}}class lc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class uc{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,a.qk)()?8:pi.v((0,a.Su)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new lc;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Dr()<=o.Ge.DEBUG&&xr("QueryEngine","SDK will not create cache indexes for query:",Gs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),di.resolve()):(Dr()<=o.Ge.DEBUG&&xr("QueryEngine","Query:",Gs(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Dr()<=o.Ge.DEBUG&&xr("QueryEngine","The SDK decides to create cache indexes for query:",Gs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bs(t))):di.resolve())}ji(e,t){if(Fs(t))return di.resolve(null);let n=Bs(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=$s(t,null,"F"),n=Bs(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=co(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,$s(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Fs(t)||r.isEqual(ei.min())?di.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?di.resolve(null):(Dr()<=o.Ge.DEBUG&&xr("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gs(t)),this.es(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ei.fromTimestamp(1e9===r?new Zr(n+1,0):new Zr(n,r));return new ai(i,si.empty(),t)}(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new xi(Ys(e));return t.forEach(((t,r)=>{Ks(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Dr()<=o.Ge.DEBUG&&xr("QueryEngine","Using full collection scan to execute query:",Gs(t)),this.zi.getDocumentsMatchingQuery(e,t,ai.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class hc{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new ki(Qr),this.rs=new Qs((e=>Os(e)),Ls),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xa(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}async function dc(e,t){const n=Mr(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=co();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function fc(e){const t=Mr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function pc(e,t){const n=Mr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function gc(e,t,n){const r=Mr(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!yi(e))throw e;xr("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function mc(e,t,n){const r=Mr(e);let i=ei.min(),s=co();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Mr(e),i=r.rs.get(n);return void 0!==i?di.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Bs(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:ei.min(),n?s:co()))).next((e=>(function(e,t,n){let r=e.ss.get(t)||ei.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,hs:s})))))}class yc{constructor(){this.activeTargetIds=lo}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vc{constructor(){this.no=new yc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new yc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ec{io(e){}shutdown(){}}class wc{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){xr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){xr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _c=null;function bc(){return null===_c?_c=268435456+Math.round(2147483648*Math.random()):_c++,"0x"+_c.toString(16)}const Tc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sc{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Ic="WebChannelConnection";class Ac extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po=`projects/${n}/databases/${r}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get wo(){return!1}So(e,t,n,r,i){const s=bc(),o=this.bo(e,t.toUriEncodedString());xr("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(xr("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Or("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+kr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Tc[e];return`${this.fo}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=bc();return new Promise(((s,o)=>{const a=new Tr;a.setWithCredentials(!0),a.listenOnce(Er.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case vr.NO_ERROR:const t=a.getResponseJson();xr(Ic,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case vr.TIMEOUT:xr(Ic,`RPC '${e}' ${i} timed out`),o(new jr(Fr.DEADLINE_EXCEEDED,"Request time out"));break;case vr.HTTP_ERROR:const n=a.getStatus();if(xr(Ic,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Fr).indexOf(t)>=0?t:Fr.UNKNOWN}(t.status);o(new jr(e,t.message))}else o(new jr(Fr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new jr(Fr.UNAVAILABLE,"Connection failed."));break;default:Ur()}}finally{xr(Ic,`RPC '${e}' ${i} completed.`)}}));const c=JSON.stringify(r);xr(Ic,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",c,n,15)}))}Fo(e,t,n){const r=bc(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=mr(),o=yr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");xr(Ic,`Creating RPC '${e}' stream ${r}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new Sc({lo:t=>{d?xr(Ic,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(xr(Ic,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),xr(Ic,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,br.EventType.OPEN,(()=>{d||xr(Ic,`RPC '${e}' stream ${r} transport opened.`)})),p(u,br.EventType.CLOSE,(()=>{d||(d=!0,xr(Ic,`RPC '${e}' stream ${r} transport closed`),f.Vo())})),p(u,br.EventType.ERROR,(t=>{d||(d=!0,Or(Ic,`RPC '${e}' stream ${r} transport errored:`,t),f.Vo(new jr(Fr.UNAVAILABLE,"The operation could not be completed")))})),p(u,br.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Pr(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){xr(Ic,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Go[e];if(void 0!==t)return Yo(t)}(t),i=o.message;void 0===n&&(n=Fr.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new jr(n,i)),u.close()}else xr(Ic,`RPC '${e}' stream ${r} received:`,i),f.mo(i)}})),p(o,wr.STAT_EVENT,(t=>{t.stat===_r.PROXY?xr(Ic,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===_r.NOPROXY&&xr(Ic,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.Ro()}),0),f}}function Cc(){return"undefined"!=typeof document?document:null}function kc(e){return new fa(e,!0)}class Nc{constructor(e,t,n=1e3,r=1.5,i=6e4){this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&xr("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Dc{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Nc(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Fr.RESOURCE_EXHAUSTED?(Rr(t.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Fr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Wo===t&&this.o_(e,n)}),(t=>{e((()=>{const e=new jr(Fr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return xr("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(xr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xc extends Dc{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ur()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Pr(void 0===t||"string"==typeof t),Ui.fromBase64String(t||"")):(Pr(void 0===t||t instanceof Uint8Array),Ui.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Fr.UNKNOWN:Yo(e.code);return new jr(t,e.message||"")}(o);n=new sa(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ta(e,r.document.name),s=va(r.document.updateTime),o=r.document.createTime?va(r.document.createTime):ei.min(),a=new as({mapValue:{fields:r.document.fields}}),c=ls.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new ra(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ta(e,r.document),s=r.readTime?va(r.readTime):ei.min(),o=ls.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ra([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ta(e,r.document),s=r.removedTargetIds||[];n=new ra([],s,i,null)}else{if(!("filter"in t))return Ur();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Wo(r,i),o=e.targetId;n=new ia(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ei.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ei.min():t.readTime?va(t.readTime):ei.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Ia(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Us(r)?{documents:ka(e,r)}:{query:Na(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ma(e,t.resumeToken);const r=pa(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ei.min())>0){n.readTime=ga(e,t.snapshotVersion.toTimestamp());const r=pa(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ur()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Ia(this.serializer),t.removeTarget=e,this.t_(t)}}class Rc extends Dc{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Pr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Pr(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?va(e.updateTime):va(t);return n.isEqual(ei.min())&&(n=va(t)),new Ao(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=va(e.commitTime);return this.listener.T_(n,t)}return Pr(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Ia(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof Uo)n={update:Ca(e,t.key,t.value)};else if(t instanceof Vo)n={delete:ba(e,t.key)};else if(t instanceof Po)n={update:Ca(e,t.key,t.data),updateMask:Fa(t.fieldMask)};else{if(!(t instanceof Bo))return Ur();n={verify:ba(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof vo)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Eo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _o)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof To)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Ur()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ya(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ur()}(e,t.precondition)),n}(this.serializer,e)))};this.t_(t)}}class Oc extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new jr(Fr.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.So(e,wa(t,n),r,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Fr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new jr(Fr.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.vo(e,wa(t,n),r,s,o,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Fr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new jr(Fr.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Lc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Rr(t),this.g_=!1):xr("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Uc{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{$c(this)&&(xr("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Mr(e);t.v_.add(4),await Mc(t),t.x_.set("Unknown"),t.v_.delete(4),await Pc(t)}(this))}))})),this.x_=new Lc(n,r)}}async function Pc(e){if($c(e))for(const t of e.F_)await t(!0)}async function Mc(e){for(const t of e.F_)await t(!1)}function Fc(e,t){const n=Mr(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Hc(n)?qc(n):al(n).Jo()&&Vc(n,t))}function jc(e,t){const n=Mr(e),r=al(n);n.C_.delete(t),r.Jo()&&Bc(n,t),0===n.C_.size&&(r.Jo()?r.Xo():$c(n)&&n.x_.set("Unknown"))}function Vc(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ei.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}al(e).c_(t)}function Bc(e,t){e.O_.Oe(t),al(e).l_(t)}function qc(e){e.O_=new aa({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),al(e).start(),e.x_.p_()}function Hc(e){return $c(e)&&!al(e).Ho()&&e.C_.size>0}function $c(e){return 0===Mr(e).v_.size}function zc(e){e.O_=void 0}async function Wc(e){e.C_.forEach(((t,n)=>{Vc(e,t)}))}async function Gc(e,t){zc(e),Hc(e)?(e.x_.S_(t),qc(e)):e.x_.set("Unknown")}async function Kc(e,t,n){if(e.x_.set("Online"),t instanceof sa&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){xr("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Yc(e,n)}else if(t instanceof ra?e.O_.$e(t):t instanceof ia?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(ei.min()))try{const t=await fc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Ui.EMPTY_BYTE_STRING,r.snapshotVersion)),Bc(e,t);const i=new Va(r.target,t,n,r.sequenceNumber);Vc(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){xr("RemoteStore","Failed to raise snapshot:",t),await Yc(e,t)}}async function Yc(e,t,n){if(!yi(t))throw t;e.v_.add(1),await Mc(e),e.x_.set("Offline"),n||(n=()=>fc(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{xr("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Pc(e)}))}function Xc(e,t){return t().catch((n=>Yc(e,n,t)))}async function Qc(e){const t=Mr(e),n=cl(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Jc(t);)try{const e=await pc(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,Zc(t,e)}catch(e){await Yc(t,e)}el(t)&&tl(t)}function Jc(e){return $c(e)&&e.D_.length<10}function Zc(e,t){e.D_.push(t);const n=cl(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function el(e){return $c(e)&&!cl(e).Ho()&&e.D_.length>0}function tl(e){cl(e).start()}async function nl(e){cl(e).d_()}async function rl(e){const t=cl(e);for(const n of e.D_)t.I_(n.mutations)}async function il(e,t,n){const r=e.D_.shift(),i=Ho.from(r,t,n);await Xc(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Qc(e)}async function sl(e,t){t&&cl(e).P_&&await async function(e,t){if(function(e){return function(e){switch(e){default:return Ur();case Fr.CANCELLED:case Fr.UNKNOWN:case Fr.DEADLINE_EXCEEDED:case Fr.RESOURCE_EXHAUSTED:case Fr.INTERNAL:case Fr.UNAVAILABLE:case Fr.UNAUTHENTICATED:return!1;case Fr.INVALID_ARGUMENT:case Fr.NOT_FOUND:case Fr.ALREADY_EXISTS:case Fr.PERMISSION_DENIED:case Fr.FAILED_PRECONDITION:case Fr.ABORTED:case Fr.OUT_OF_RANGE:case Fr.UNIMPLEMENTED:case Fr.DATA_LOSS:return!0}}(e)&&e!==Fr.ABORTED}(t.code)){const n=e.D_.shift();cl(e).Zo(),await Xc(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Qc(e)}}(e,t),el(e)&&tl(e)}async function ol(e,t){const n=Mr(e);n.asyncQueue.verifyOperationInProgress(),xr("RemoteStore","RemoteStore received new credentials");const r=$c(n);n.v_.add(3),await Mc(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Pc(n)}function al(e){return e.N_||(e.N_=function(e,t,n){const r=Mr(e);return r.R_(),new xc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Wc.bind(null,e),To:Gc.bind(null,e),u_:Kc.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),Hc(e)?qc(e):e.x_.set("Unknown")):(await e.N_.stop(),zc(e))}))),e.N_}function cl(e){return e.B_||(e.B_=function(e,t,n){const r=Mr(e);return r.R_(),new Rc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:nl.bind(null,e),To:sl.bind(null,e),E_:rl.bind(null,e),T_:il.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await Qc(e)):(await e.B_.stop(),e.D_.length>0&&(xr("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))}))),e.B_}class ll{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new ll(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new jr(Fr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ul(e,t){if(Rr("AsyncQueue",`${t}: ${e}`),yi(e))return new jr(Fr.UNAVAILABLE,`${t}: ${e}`);throw e}class hl{constructor(e){this.comparator=e?(t,n)=>e(t,n)||si.comparator(t.key,n.key):(e,t)=>si.comparator(e.key,t.key),this.keyedMap=to(),this.sortedSet=new ki(this.comparator)}static emptySet(e){return new hl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hl))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new hl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class dl{constructor(){this.L_=new ki(si.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Ur():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class fl{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new fl(e,t,hl.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class pl{constructor(){this.q_=void 0,this.Q_=[]}}class gl{constructor(){this.queries=new Qs((e=>Ws(e)),zs),this.onlineState="Unknown",this.K_=new Set}}async function ml(e,t){const n=Mr(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new pl),i)try{s.q_=await n.onListen(r)}catch(e){const n=ul(e,`Initialization of query '${Gs(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&wl(n)}async function yl(e,t){const n=Mr(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function vl(e,t){const n=Mr(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.Q_)t.W_(e)&&(r=!0);i.q_=e}}r&&wl(n)}function El(e,t,n){const r=Mr(e),i=r.queries.get(t);if(i)for(const e of i.Q_)e.onError(n);r.queries.delete(t)}function wl(e){e.K_.forEach((e=>{e.next()}))}class _l{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new fl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class bl{constructor(e){this.key=e}}class Tl{constructor(e){this.key=e}}class Sl{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=co(),this.mutatedKeys=co(),this.ua=Ys(e),this.ca=new hl(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new dl,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=Ks(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||c&&this.ua(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ur()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const o=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,c=a!==this._a;return this._a=a,0!==s.length||c?{snapshot:new fl(this.query,e.ca,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new dl,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=co(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new Tl(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new bl(n))})),t}Ra(e){this.oa=e.hs,this.aa=co();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return fl.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Il{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Al{constructor(e){this.key=e,this.ma=!1}}class Cl{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Qs((e=>Ws(e)),zs),this.pa=new Map,this.ya=new Set,this.wa=new ki(si.comparator),this.Sa=new Map,this.ba=new Za,this.Da={},this.Ca=new Map,this.va=Ga.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function kl(e,t){const n=function(e){const t=Mr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dl.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$l.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Rl.bind(null,t),t.fa.u_=vl.bind(null,t.eventManager),t.fa.xa=El.bind(null,t.eventManager),t}(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await function(e,t){const n=Mr(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,di.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Va(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}(n.localStore,Bs(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await async function(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await mc(e.localStore,t.query,!1).then((({documents:e})=>t.view.ha(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return jl(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const s=await mc(e.localStore,t,!0),o=new Sl(t,s.hs),a=o.ha(s.documents),c=na.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);jl(e,n,l.da);const u=new Il(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),l.snapshot}(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Fc(n.remoteStore,e)}return i}async function Nl(e,t){const n=Mr(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!zs(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await gc(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),jc(n.remoteStore,r.targetId),Ml(n,r.targetId)})).catch(hi)):(Ml(n,r.targetId),await gc(n.localStore,r.targetId,!0))}async function Dl(e,t){const n=Mr(e);try{const e=await function(e,t){const n=Mr(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Ui.EMPTY_BYTE_STRING,ei.min()).withLastLimboFreeSnapshotVersion(ei.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(e,l))}));let a=Zs(),c=co();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(function(e,t,n){let r=co(),i=co();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Zs();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ei.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):xr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(ei.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return di.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(Pr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?Pr(r.ma):e.removedDocuments.size>0&&(Pr(r.ma),r.ma=!1))})),await ql(n,e,t)}catch(e){await hi(e)}}function xl(e,t,n){const r=Mr(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Mr(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.Q_)e.U_(t)&&(r=!0)})),r&&wl(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Rl(e,t,n){const r=Mr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new ki(si.comparator);e=e.insert(s,ls.newNoDocument(s,ei.min()));const n=co().add(s),i=new ta(ei.min(),new Map,new ki(Qr),e,n);await Dl(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),Bl(r)}else await gc(r.localStore,t,!1).then((()=>Ml(r,t,n))).catch(hi)}async function Ol(e,t){const n=Mr(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Mr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=di.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Pr(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=co();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Pl(n,r,null),Ul(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ql(n,e)}catch(e){await hi(e)}}async function Ll(e,t,n){const r=Mr(e);try{const e=await function(e,t){const n=Mr(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Pr(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Pl(r,t,n),Ul(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ql(r,e)}catch(n){await hi(n)}}function Ul(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function Pl(e,t,n){const r=Mr(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function Ml(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||Fl(e,t)}))}function Fl(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(jc(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Bl(e))}function jl(e,t,n){for(const r of n)r instanceof bl?(e.ba.addReference(r.key,t),Vl(e,r)):r instanceof Tl?(xr("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||Fl(e,r.key)):Ur()}function Vl(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(xr("SyncEngine","New document in limbo: "+n),e.ya.add(r),Bl(e))}function Bl(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new si(ni.fromString(t)),r=e.va.next();e.Sa.set(r,new Al(n)),e.wa=e.wa.insert(n,r),Fc(e.remoteStore,new Va(Bs(Ms(n.path)),r,"TargetPurposeLimboResolution",bi._e))}}async function ql(e,t,n){const r=Mr(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{o.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=cc.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.fa.u_(i),await async function(e,t){const n=Mr(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>di.forEach(t,(t=>di.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>di.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!yi(e))throw e;xr("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.ns.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(t,i)}}}(r.localStore,s))}async function Hl(e,t){const n=Mr(e);if(!n.currentUser.isEqual(t)){xr("SyncEngine","User change. New user:",t.toKey());const e=await dc(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new jr(Fr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ca.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ql(n,e.us)}}function $l(e,t){const n=Mr(e),r=n.Sa.get(t);if(r&&r.ma)return co().add(r.key);{let e=co();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}function zl(e){const t=Mr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ol.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ll.bind(null,t),t}class Wl{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=kc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function(e,t,n,r){return new hc(e,t,n,r)}(this.persistence,new uc,e.initialUser,this.serializer)}createPersistence(e){return new sc(ac.Hr,this.serializer)}createSharedClientState(e){return new vc}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Gl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>xl(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hl.bind(null,this.syncEngine),await async function(e,t){const n=Mr(e);t?(n.v_.delete(2),await Pc(n)):t||(n.v_.add(2),await Mc(n),n.x_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new gl}createDatastore(e){const t=kc(e.databaseInfo.databaseId),n=function(e){return new Ac(e)}(e.databaseInfo);return function(e,t,n,r){return new Oc(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Uc(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>xl(this.syncEngine,e,0)),wc.D()?new wc:new Ec)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Cl(e,t,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Mr(e);xr("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Mc(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class Kl{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Yl{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Cr.UNAUTHENTICATED,this.clientId=Xr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{xr("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(xr("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new jr(Fr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ul(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Xl(e,t){e.asyncQueue.verifyOperationInProgress(),xr("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await dc(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Ql(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){xr("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xl(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Fr.FAILED_PRECONDITION||e.code===Fr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Or("Error using user provided cache. Falling back to memory cache: "+n),await Xl(e,new Wl)}}else xr("FirestoreClient","Using default OfflineComponentProvider"),await Xl(e,new Wl);return e._offlineComponents}(e);xr("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>ol(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ol(t.remoteStore,n))),e._onlineComponents=t}async function Jl(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(xr("FirestoreClient","Using user provided OnlineComponentProvider"),await Ql(e,e._uninitializedComponentsProvider._online)):(xr("FirestoreClient","Using default OnlineComponentProvider"),await Ql(e,new Gl))),e._onlineComponents}async function Zl(e){const t=await Jl(e),n=t.eventManager;return n.onListen=kl.bind(null,t.syncEngine),n.onUnlisten=Nl.bind(null,t.syncEngine),n}function eu(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const tu=new Map;function nu(e,t,n){if(!n)throw new jr(Fr.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ru(e){if(!si.isDocumentKey(e))throw new jr(Fr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function iu(e){if(si.isDocumentKey(e))throw new jr(Fr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function su(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ur()}function ou(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new jr(Fr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=su(e);throw new jr(Fr.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class au{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new jr(Fr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new jr(Fr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new jr(Fr.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eu(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new jr(Fr.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new jr(Fr.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new jr(Fr.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new au({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new jr(Fr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new jr(Fr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new au(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new qr;switch(e.type){case"firstParty":return new Wr(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new jr(Fr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=tu.get(e);t&&(xr("ComponentProvider","Removing Datastore"),tu.delete(e),t.terminate())}(this),Promise.resolve()}}class lu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new lu(this.firestore,e,this._query)}}class uu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new uu(this.firestore,e,this._key)}}class hu extends lu{constructor(e,t,n){super(e,t,Ms(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new uu(this.firestore,null,new si(e))}withConverter(e){return new hu(this.firestore,e,this._path)}}function du(e,t,...n){if(e=(0,a.Yj)(e),nu("collection","path",t),e instanceof cu){const r=ni.fromString(t,...n);return iu(r),new hu(e,null,r)}{if(!(e instanceof uu||e instanceof hu))throw new jr(Fr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ni.fromString(t,...n));return iu(r),new hu(e.firestore,null,r)}}function fu(e,t,...n){if(e=(0,a.Yj)(e),1===arguments.length&&(t=Xr.newId()),nu("doc","path",t),e instanceof cu){const r=ni.fromString(t,...n);return ru(r),new uu(e,null,new si(r))}{if(!(e instanceof uu||e instanceof hu))throw new jr(Fr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ni.fromString(t,...n));return ru(r),new uu(e.firestore,e instanceof hu?e.converter:null,new si(r))}}class pu{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Nc(this,"async_queue_retry"),this._u=()=>{const e=Cc();e&&xr("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=Cc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Cc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new Vr;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!yi(e))throw e;xr("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Rr("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=ll.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&Ur()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}class gu extends cu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new pu,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vu(this),this._firestoreClient.terminate()}}function mu(e,t){const n="object"==typeof e?e:(0,i.WE)(),r="string"==typeof e?e:t||"(default)",s=(0,i.U5)(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(0,a.on)("firestore");e&&function(e,t,n,r={}){var i;const s=(e=ou(e,cu))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Cr.MOCK_USER;else{t=(0,a.YD)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new jr(Fr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Cr(s)}e._authCredentials=new Hr(new Br(t,n))}}(s,...e)}return s}function yu(e){return e._firestoreClient||vu(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function vu(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Hi(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,eu(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Yl(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Eu{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class wu{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class _u{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _u(Ui.fromBase64String(e))}catch(e){throw new jr(Fr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new _u(Ui.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new jr(Fr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Tu(){return new bu("__name__")}class Su{constructor(e){this._methodName=e}}class Iu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new jr(Fr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new jr(Fr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qr(this._lat,e._lat)||Qr(this._long,e._long)}}const Au=/^__.*__$/;class Cu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Po(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uo(e,this.data,t,this.fieldTransforms)}}class ku{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Po(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ur()}}class Du{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Du(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return qu(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(Nu(this.du)&&Au.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class xu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||kc(e)}Su(e,t,n,r=!1){return new Du({du:e,methodName:t,wu:n,path:ii.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ru(e){const t=e._freezeSettings(),n=kc(e._databaseId);return new xu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ou(e,t,n,r,i,s={}){const o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);Fu("Data must be an object, but it was:",o,r);const a=Pu(r,o);let c,l;if(s.merge)c=new Oi(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ju(t,r,n);if(!o.contains(i))throw new jr(Fr.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Hu(e,i)||e.push(i)}c=new Oi(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Cu(new as(a),c,l)}class Lu extends Su{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lu}}function Uu(e,t){if(Mu(e=(0,a.Yj)(e)))return Fu("Unsupported field value:",t,e),Pu(e,t);if(e instanceof Su)return function(e,t){if(!Nu(t.du))throw t.pu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.pu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Uu(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,a.Yj)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fo(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Zr.fromDate(e);return{timestampValue:ga(t.serializer,n)}}if(e instanceof Zr){const n=new Zr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ga(t.serializer,n)}}if(e instanceof Iu)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof _u)return{bytesValue:ma(t.serializer,e._byteString)};if(e instanceof uu){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ea(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu(`Unsupported field value: ${su(e)}`)}(e,t)}function Pu(e,t){const n={};return Ci(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ai(e,((e,r)=>{const i=Uu(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Mu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Zr||e instanceof Iu||e instanceof _u||e instanceof uu||e instanceof Su)}function Fu(e,t,n){if(!Mu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=su(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function ju(e,t,n){if((t=(0,a.Yj)(t))instanceof bu)return t._internalPath;if("string"==typeof t)return Bu(e,t);throw qu("Field path arguments must be of type string or ",e,!1,void 0,n)}const Vu=new RegExp("[~\\*/\\[\\]]");function Bu(e,t,n){if(t.search(Vu)>=0)throw qu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new bu(...t.split("."))._internalPath}catch(r){throw qu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function qu(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new jr(Fr.INVALID_ARGUMENT,a+e+c)}function Hu(e,t){return e.some((e=>e.isEqual(t)))}class $u{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new uu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new zu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class zu extends $u{data(){return super.data()}}function Wu(e,t){return"string"==typeof t?Bu(e,t):t instanceof bu?t._internalPath:t._delegate._internalPath}class Gu{}class Ku extends Gu{}function Yu(e,t,...n){let r=[];t instanceof Gu&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof Ju)).length,n=e.filter((e=>e instanceof Xu)).length;if(t>1||t>0&&n>0)throw new jr(Fr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const t of r)e=t._apply(e);return e}class Xu extends Ku{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Xu(e,t,n)}_apply(e){const t=this._parse(e);return sh(e._query,t),new lu(e.firestore,e.converter,Hs(e._query,t))}_parse(e){const t=Ru(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new jr(Fr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){ih(o,s);const t=[];for(const n of o)t.push(rh(r,e,n));a={arrayValue:{values:t}}}else a=rh(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||ih(o,s),a=function(e,t,n,r=!1){return Uu(n,e.Su(r?4:3,t))}(n,"where",o,"in"===s||"not-in"===s);return ms.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Qu(e,t,n){const r=t,i=Wu("where",e);return Xu._create(i,r,n)}class Ju extends Gu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ju(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ys.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)sh(n,e),n=Hs(n,e)}(e._query,t),new lu(e.firestore,e.converter,Hs(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Zu extends Ku{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zu(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new jr(Fr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new jr(Fr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fs(t,n)}(e._query,this._field,this._direction);return new lu(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ps(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function eh(e,t="asc"){const n=t,r=Wu("orderBy",e);return Zu._create(r,n)}class th extends Ku{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new th(e,t,n)}_apply(e){return new lu(e.firestore,e.converter,$s(e._query,this._limit,this._limitType))}}function nh(e){return function(e,t){if(t<=0)throw new jr(Fr.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}("limit",e),th._create("limit",e,"F")}function rh(e,t,n){if("string"==typeof(n=(0,a.Yj)(n))){if(""===n)throw new jr(Fr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!js(t)&&-1!==n.indexOf("/"))throw new jr(Fr.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ni.fromString(n));if(!si.isDocumentKey(r))throw new jr(Fr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zi(e,new si(r))}if(n instanceof uu)return Zi(e,n._key);throw new jr(Fr.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${su(n)}.`)}function ih(e,t){if(!Array.isArray(e)||0===e.length)throw new jr(Fr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function sh(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new jr(Fr.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new jr(Fr.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class oh{convertValue(e,t="none"){switch(Wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ur()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ai(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Iu(Fi(e.latitude),Fi(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Bi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(qi(e));default:return null}}convertTimestamp(e){const t=Mi(e);return new Zr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ni.fromString(e);Pr(ja(n));const r=new $i(n.get(1),n.get(3)),i=new si(n.popFirst(5));return r.isEqual(t)||Rr(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function ah(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ch{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lh extends $u{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Wu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class uh extends lh{data(e={}){return super.data(e)}}class hh{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ch(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new uh(this._firestore,this._userDataWriter,n.key,n,new ch(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new jr(Fr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new uh(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ch(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new uh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ch(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:dh(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function dh(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ur()}}function fh(e){e=ou(e,uu);const t=ou(e.firestore,gu);return function(e,t,n={}){const r=new Vr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Kl({next:s=>{t.enqueueAndForget((()=>yl(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new jr(Fr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new jr(Fr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new _l(Ms(n.path),s,{includeMetadataChanges:!0,Z_:!0});return ml(e,o)}(await Zl(e),e.asyncQueue,t,n,r))),r.promise}(yu(t),e._key).then((n=>function(e,t,n){const r=n.docs.get(t._key),i=new ph(e);return new lh(e,i,t._key,r,new ch(n.hasPendingWrites,n.fromCache),t.converter)}(t,e,n)))}class ph extends oh{constructor(e){super(),this.firestore=e}convertBytes(e){return new _u(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new uu(this.firestore,null,t)}}function gh(e){e=ou(e,lu);const t=ou(e.firestore,gu),n=yu(t),r=new ph(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new jr(Fr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),function(e,t,n={}){const r=new Vr;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Kl({next:n=>{t.enqueueAndForget((()=>yl(e,o))),n.fromCache&&"server"===r.source?i.reject(new jr(Fr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new _l(n,s,{includeMetadataChanges:!0,Z_:!0});return ml(e,o)}(await Zl(e),e.asyncQueue,t,n,r))),r.promise}(n,e._query).then((n=>new hh(t,r,e,n)))}function mh(e,t,n){e=ou(e,uu);const r=ou(e.firestore,gu),i=ah(e.converter,t,n);return yh(r,[Ou(Ru(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Co.none())])}function yh(e,t){return function(e,t){const n=new Vr;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=zl(e);try{const e=await function(e,t){const n=Mr(e),r=Zr.now(),i=t.reduce(((e,t)=>e.add(t.key)),co());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Zs(),c=co();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Oo(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Po(e.key,t,cs(t.value.mapValue),Co.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:no(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new ki(Qr)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await ql(r,e.changes),await Qc(r.remoteStore)}catch(e){const t=ul(e,"Failed to persist write");n.reject(t)}}(await function(e){return Jl(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(yu(e),t)}function vh(e){return function(e,t){const n=ou(e.firestore,gu),r=yu(n),i=function(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r));return n}(t,((e,t)=>new zo(t,e.aggregateType,e._internalFieldPath)));return function(e,t,n){const r=new Vr;return e.asyncQueue.enqueueAndForget((async()=>{try{const i=await function(e){return Jl(e).then((e=>e.datastore))}(e);r.resolve(async function(e,t,n){var r;const i=Mr(e),{request:s,V_:o,parent:a}=function(e,t,n){const{ut:r,parent:i}=Na(e,t),s={},o=[];let a=0;return n.forEach((e=>{const t="aggregate_"+a++;s[t]=e.alias,"count"===e.aggregateType?o.push({alias:t,count:{}}):"avg"===e.aggregateType?o.push({alias:t,avg:{field:Ua(e.fieldPath)}}):"sum"===e.aggregateType&&o.push({alias:t,sum:{field:Ua(e.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:r.structuredQuery},parent:r.parent},V_:s,parent:i}}(i.serializer,function(e){const t=Mr(e);return t.Pe||(t.Pe=qs(t,e.explicitOrderBy)),t.Pe}(t),n);i.connection.wo||delete s.parent;const c=(await i.vo("RunAggregationQuery",i.serializer.databaseId,a,s,1)).filter((e=>!!e.result));Pr(1===c.length);const l=null===(r=c[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(l).reduce(((e,t)=>(e[o[t]]=l[t],e)),{})}(i,t,n))}catch(e){r.reject(e)}})),r.promise}(r,e._query,i).then((t=>function(e,t,n){const r=new ph(e);return new wu(t,r,n)}(n,e,t)))}(e,{count:new Eu("count")})}class Eh{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ru(e)}set(e,t,n){this._verifyNotCommitted();const r=wh(e,this._firestore),i=ah(r.converter,t,n),s=Ou(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Co.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=wh(e,this._firestore);let s;return s="string"==typeof(t=(0,a.Yj)(t))||t instanceof bu?function(e,t,n,r,i,s){const o=e.Su(1,t,n),c=[ju(t,r,n)],l=[i];if(s.length%2!=0)throw new jr(Fr.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)c.push(ju(t,s[e])),l.push(s[e+1]);const u=[],h=as.empty();for(let e=c.length-1;e>=0;--e)if(!Hu(u,c[e])){const t=c[e];let n=l[e];n=(0,a.Yj)(n);const r=o.fu(t);if(n instanceof Lu)u.push(t);else{const e=Uu(n,r);null!=e&&(u.push(t),h.set(t,e))}}const d=new Oi(u);return new ku(h,d,o.fieldTransforms)}(this._dataReader,"WriteBatch.update",i._key,t,n,r):function(e,t,n,r){const i=e.Su(1,t,n);Fu("Data must be an object, but it was:",i,r);const s=[],o=as.empty();Ai(r,((e,r)=>{const c=Bu(t,e,n);r=(0,a.Yj)(r);const l=i.fu(c);if(r instanceof Lu)s.push(c);else{const e=Uu(r,l);null!=e&&(s.push(c),o.set(c,e))}}));const c=new Oi(s);return new ku(o,c,i.fieldTransforms)}(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Co.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wh(e,this._firestore);return this._mutations=this._mutations.concat(new Vo(t._key,Co.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new jr(Fr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wh(e,t){if((e=(0,a.Yj)(e)).firestore!==t)throw new jr(Fr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function _h(e){return yu(e=ou(e,gu)),new Eh(e,(t=>yh(e,t)))}new WeakMap,function(e,t=!0){!function(e){kr=e}(i.Sg),(0,i.q4)(new s.Yl("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new gu(new $r(e.getProvider("auth-internal")),new Kr(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new jr(Fr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $i(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),(0,i.Kk)(Ar,"4.4.2",e),(0,i.Kk)(Ar,"4.4.2","esm2017")}()},4296:(e,t,n)=>{"use strict";n.d(t,{Gf:()=>m,Kq:()=>ne,GO:()=>te,wv:()=>ie,IL:()=>re});var r=n(4376);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=i>>2,u=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==a||null==c)throw new o;const l=i<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==c){const e=a<<6&192|c;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&function(e){try{return s.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},l=e=>{const t=(e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]};class u extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,h.prototype.create)}}class h{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(d,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new u(r,o,n)}}const d=/\{\$([^}]+)}/g;function f(e){return e&&e._delegate?e._delegate:e}const p="firebasestorage.googleapis.com",g="storageBucket";class m extends u{constructor(e,t,n=0){super(E(e),`Firebase Storage: ${t} (${E(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,m.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return E(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var y,v;function E(e){return"storage/"+e}function w(){return new m(y.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function _(e){return new m(y.INVALID_ARGUMENT,e)}function b(){return new m(y.APP_DELETED,"The Firebase app was deleted.")}function T(e){throw new m(y.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(y||(y={}));class S{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=S.makeFromUrl(e,t)}catch(t){return new S(e,"")}if(""===n.path)return n;throw r=e,new m(y.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===p?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let t=0;t<a.length;t++){const r=a[t],i=r.regex.exec(e);if(i){const e=i[r.indices.bucket];let t=i[r.indices.path];t||(t=""),n=new S(e,t),r.postModify(n);break}}if(null==n)throw function(e){return new m(y.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class I{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function A(e){return"string"==typeof e||e instanceof String}function C(e,t,n,r){if(r<t)throw _(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw _(`Invalid value for '${e}'. Expected ${n} or less.`)}function k(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function N(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(v||(v={}));class D{constructor(e,t,n,r,i,s,o,a,c,l,u,h=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(e){r(e)}else if(null!==i){const e=w();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else t.canceled?r(this.appDelete_?b():new m(y.CANCELED,"User canceled the upload/download.")):r(new m(y.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new x(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(...e){l||(l=!0,t.apply(null,e))}function h(t){i=setTimeout((()=>{i=null,e(f,c())}),t)}function d(){s&&clearTimeout(s)}function f(e,...t){if(l)return void d();if(e)return d(),void u.call(null,e,...t);if(c()||o)return d(),void u.call(null,e,...t);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),h(n)}let p=!1;function g(e){p||(p=!0,d(),l||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(((e,t)=>{if(t)return void e(!1,new x(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===v.NO_ERROR,i=n.getStatus();if(!t||function(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===v.ABORT;return void e(!1,new x(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new x(s,n))}))}),e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class x{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function R(e){let t;try{t=JSON.parse(e)}catch(e){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t;var n}function O(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function L(e,t){return t}class U{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||L}}let P=null;function M(){if(P)return P;const e=[];e.push(new U("bucket")),e.push(new U("generation")),e.push(new U("metageneration")),e.push(new U("name","fullPath",!0));const t=new U("name");t.xform=function(e,t){return function(e){return!A(e)||e.length<2?e:O(e)}(t)},e.push(t);const n=new U("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new U("timeCreated")),e.push(new U("updated")),e.push(new U("md5Hash",null,!0)),e.push(new U("cacheControl",null,!0)),e.push(new U("contentDisposition",null,!0)),e.push(new U("contentEncoding",null,!0)),e.push(new U("contentLanguage",null,!0)),e.push(new U("contentType",null,!0)),e.push(new U("metadata","customMetadata",!0)),P=e,P}function F(e,t,n){const r=R(t);return null===r?null:function(e,t,n){const r={type:"file"},i=n.length;for(let e=0;e<i;e++){const i=n[e];r[i.local]=i.xform(r,t[i.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new S(n,r);return t._makeStorageReference(i)}})}(r,e),r}(e,r,n)}class j{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function V(e){if(!e)throw w()}function B(e){const t=function(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new m(y.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new m(y.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new m(y.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new m(y.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new m(y.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function q(e,t,n){const r=k(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new j(r,"GET",function(e,t){return function(n,r){const i=F(e,r,t);return V(null!==i),i}}(e,n),i);return s.errorHandler=B(t),s}let H=null;class ${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=v.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=v.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=v.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw T("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const e in r)r.hasOwnProperty(e)&&this.xhr_.setRequestHeader(e,r[e].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw T("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw T("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw T("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw T("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class z extends ${initXhr(){this.xhr_.responseType="text"}}function W(){return H?H():new z}class G{constructor(e,t){this._service=e,this._location=t instanceof S?t:S.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new G(e,t)}get root(){const e=new S(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return O(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new S(this._location.bucket,e);return new G(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new m(y.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function K(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=k(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new j(r,"GET",function(e,t){return function(n,r){const i=F(e,r,t);return V(null!==i),function(e,t,n,r){const i=R(t);if(null===i)return null;if(!A(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return k("/b/"+o(i)+"/o/"+o(s),n,r)+N({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}(e,n),i);return s.errorHandler=B(t),s}(e.storage,e._location,M());return e.storage.makeRequestWithTokens(t,W).then((e=>{if(null===e)throw new m(y.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Y(e,t){if(e instanceof Q){const n=e;if(null==n._bucket)throw new m(y.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+g+"' property when initializing the app?");const r=new G(n,n._bucket);return null!=t?Y(r,t):r}return void 0!==t?function(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new S(e._location.bucket,n);return new G(e.storage,r)}(e,t):e}function X(e,t){const n=null==t?void 0:t[g];return null==n?null:S.makeFromBucketSpec(n,e)}class Q{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=p,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?S.makeFromBucketSpec(r,this._host):X(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=S.makeFromBucketSpec(this._url,e):this._bucket=X(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){C("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){C("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new G(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new I(b());{const s=function(e,t,n,r,i,s,o=!0){const a=N(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new D(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const J="@firebase/storage",Z="0.11.2",ee="storage";function te(e){return function(e){e._throwIfRoot("getMetadata");const t=q(e.storage,e._location,M());return e.storage.makeRequestWithTokens(t,W)}(e=f(e))}function ne(e){return K(e=f(e))}function re(e,t){return function(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Q)return new G(e,t);throw _("To use ref(service, url), the first argument must be a Storage instance.")}return Y(e,t)}(e=f(e),t)}function ie(e=(0,r.WE)(),t){e=f(e);const n=(0,r.U5)(e,ee).getImmediate({identifier:t}),i=l("storage");return i&&function(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}(i,e.app.options.projectId))}(e,t,n,r)}(n,...i),n}(0,r.q4)(new class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}(ee,(function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Q(n,i,s,t,r.Sg)}),"PUBLIC").setMultipleInstances(!0)),(0,r.Kk)(J,Z,""),(0,r.Kk)(J,Z,"esm2017")},6900:(e,t,n)=>{"use strict";n.d(t,{A3:()=>b,AL:()=>v,AV:()=>m,Cc:()=>y,EB:()=>l,IN:()=>C,Su:()=>g,UR:()=>S,Uv:()=>E,WW:()=>a,Wg:()=>o,YD:()=>p,Yd:()=>h,Yj:()=>U,aw:()=>D,ik:()=>N,kF:()=>x,kx:()=>T,my:()=>R,o9:()=>f,on:()=>u,qk:()=>w,sX:()=>d,t7:()=>A,yy:()=>_});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=i>>2,u=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],o=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==o||null==a||null==c)throw new s;const l=i<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==c){const e=a<<6&192|c;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return i.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},c=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},l=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},u=e=>{const t=l(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},d=e=>{var t;return null===(t=c())||void 0===t?void 0:t[`_${e}`]};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function y(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function E(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function w(){return!function(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _(){try{return"object"==typeof indexedDB}catch(e){return!1}}function b(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}class T extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S.prototype.create)}}class S{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(I,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new T(r,o,n)}}const I=/\{\$([^}]+)}/g;function A(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function C(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(k(n)&&k(s)){if(!C(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function k(e){return null!==e&&"object"==typeof e}function N(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function D(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function x(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function R(e,t){const n=new O(e,t);return n.subscribe.bind(n)}class O{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function L(){}function U(e){return e&&e._delegate?e._delegate:e}},7588:function(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(r,i){"use strict";var s=[],o=Object.getPrototypeOf,a=s.slice,c=s.flat?function(e){return s.flat.call(e)}:function(e){return s.concat.apply([],e)},l=s.push,u=s.indexOf,h={},d=h.toString,f=h.hasOwnProperty,p=f.toString,g=p.call(Object),m={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},v=function(e){return null!=e&&e===e.window},E=r.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function _(e,t,n){var r,i,s=(n=n||E).createElement("script");if(s.text=e,t)for(r in w)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&s.setAttribute(r,i);n.head.appendChild(s).parentNode.removeChild(s)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[d.call(e)]||"object":typeof e}var T="3.7.1",S=/HTML$/i,I=function(e,t){return new I.fn.init(e,t)};function A(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!y(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function C(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}I.fn=I.prototype={jquery:T,constructor:I,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=I.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return I.each(this,e)},map:function(e){return this.pushStack(I.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(I.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(I.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:s.sort,splice:s.splice},I.extend=I.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},a=1,c=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||y(o)||(o={}),a===c&&(o=this,a--);a<c;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(l&&r&&(I.isPlainObject(r)||(i=Array.isArray(r)))?(n=o[t],s=i&&!Array.isArray(n)?[]:i||I.isPlainObject(n)?n:{},i=!1,o[t]=I.extend(l,s,r)):void 0!==r&&(o[t]=r));return o},I.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e)||(t=o(e))&&("function"!=typeof(n=f.call(t,"constructor")&&t.constructor)||p.call(n)!==g))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){_(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(A(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r++];)n+=I.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(A(Object(e))?I.merge(n,"string"==typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!S.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,s=e.length,o=!n;i<s;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,s=0,o=[];if(A(e))for(r=e.length;s<r;s++)null!=(i=t(e[s],s,n))&&o.push(i);else for(s in e)null!=(i=t(e[s],s,n))&&o.push(i);return c(o)},guid:1,support:m}),"function"==typeof Symbol&&(I.fn[Symbol.iterator]=s[Symbol.iterator]),I.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var k=s.pop,N=s.sort,D=s.splice,x="[\\x20\\t\\r\\n\\f]",R=new RegExp("^"+x+"+|((?:^|[^\\\\])(?:\\\\.)*)"+x+"+$","g");I.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var O=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function L(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}I.escapeSelector=function(e){return(e+"").replace(O,L)};var U=E,P=l;!function(){var e,t,n,i,o,c,l,h,d,p,g=P,y=I.expando,v=0,E=0,w=ee(),_=ee(),b=ee(),T=ee(),S=function(e,t){return e===t&&(o=!0),0},A="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",O="(?:\\\\[\\da-fA-F]{1,6}"+x+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",L="\\["+x+"*("+O+")(?:"+x+"*([*^$|!~]?=)"+x+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+x+"*\\]",M=":("+O+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+L+")*)|.*)\\)|)",F=new RegExp(x+"+","g"),j=new RegExp("^"+x+"*,"+x+"*"),V=new RegExp("^"+x+"*([>+~]|"+x+")"+x+"*"),B=new RegExp(x+"|>"),q=new RegExp(M),H=new RegExp("^"+O+"$"),$={ID:new RegExp("^#("+O+")"),CLASS:new RegExp("^\\.("+O+")"),TAG:new RegExp("^("+O+"|[*])"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+M),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+x+"*(even|odd|(([+-]|)(\\d*)n|)"+x+"*(?:([+-]|)"+x+"*(\\d+)|))"+x+"*\\)|)","i"),bool:new RegExp("^(?:"+A+")$","i"),needsContext:new RegExp("^"+x+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+x+"*((?:-\\d)?\\d*)"+x+"*\\)|)(?=[^-]|$)","i")},z=/^(?:input|select|textarea|button)$/i,W=/^h\d$/i,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Y=new RegExp("\\\\[\\da-fA-F]{1,6}"+x+"?|\\\\([^\\r\\n\\f])","g"),X=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Q=function(){ce()},J=de((function(e){return!0===e.disabled&&C(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{g.apply(s=a.call(U.childNodes),U.childNodes),s[U.childNodes.length].nodeType}catch(e){g={apply:function(e,t){P.apply(e,a.call(t))},call:function(e){P.apply(e,a.call(arguments,1))}}}function Z(e,t,n,r){var i,s,o,a,l,u,f,p=t&&t.ownerDocument,v=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==v&&9!==v&&11!==v)return n;if(!r&&(ce(t),t=t||c,h)){if(11!==v&&(l=G.exec(e)))if(i=l[1]){if(9===v){if(!(o=t.getElementById(i)))return n;if(o.id===i)return g.call(n,o),n}else if(p&&(o=p.getElementById(i))&&Z.contains(t,o)&&o.id===i)return g.call(n,o),n}else{if(l[2])return g.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&t.getElementsByClassName)return g.apply(n,t.getElementsByClassName(i)),n}if(!(T[e+" "]||d&&d.test(e))){if(f=e,p=t,1===v&&(B.test(e)||V.test(e))){for((p=K.test(e)&&ae(t.parentNode)||t)==t&&m.scope||((a=t.getAttribute("id"))?a=I.escapeSelector(a):t.setAttribute("id",a=y)),s=(u=ue(e)).length;s--;)u[s]=(a?"#"+a:":scope")+" "+he(u[s]);f=u.join(",")}try{return g.apply(n,p.querySelectorAll(f)),n}catch(t){T(e,!0)}finally{a===y&&t.removeAttribute("id")}}}return ve(e.replace(R,"$1"),t,n,r)}function ee(){var e=[];return function n(r,i){return e.push(r+" ")>t.cacheLength&&delete n[e.shift()],n[r+" "]=i}}function te(e){return e[y]=!0,e}function ne(e){var t=c.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return C(t,"input")&&t.type===e}}function ie(e){return function(t){return(C(t,"input")||C(t,"button"))&&t.type===e}}function se(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&J(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function oe(e){return te((function(t){return t=+t,te((function(n,r){for(var i,s=e([],n.length,t),o=s.length;o--;)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))}))}))}function ae(e){return e&&void 0!==e.getElementsByTagName&&e}function ce(e){var n,r=e?e.ownerDocument||e:U;return r!=c&&9===r.nodeType&&r.documentElement?(l=(c=r).documentElement,h=!I.isXMLDoc(c),p=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,l.msMatchesSelector&&U!=c&&(n=c.defaultView)&&n.top!==n&&n.addEventListener("unload",Q),m.getById=ne((function(e){return l.appendChild(e).id=I.expando,!c.getElementsByName||!c.getElementsByName(I.expando).length})),m.disconnectedMatch=ne((function(e){return p.call(e,"*")})),m.scope=ne((function(){return c.querySelectorAll(":scope")})),m.cssHas=ne((function(){try{return c.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),m.getById?(t.filter.ID=function(e){var t=e.replace(Y,X);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(Y,X);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n,r,i,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(i=t.getElementsByName(e),r=0;s=i[r++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),t.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(e)},d=[],ne((function(e){var t;l.appendChild(e).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+x+"*(?:value|"+A+")"),e.querySelectorAll("[id~="+y+"-]").length||d.push("~="),e.querySelectorAll("a#"+y+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=c.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),l.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=c.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+x+"*name"+x+"*="+x+"*(?:''|\"\")")})),m.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),S=function(e,t){if(e===t)return o=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!m.sortDetached&&t.compareDocumentPosition(e)===n?e===c||e.ownerDocument==U&&Z.contains(U,e)?-1:t===c||t.ownerDocument==U&&Z.contains(U,t)?1:i?u.call(i,e)-u.call(i,t):0:4&n?-1:1)},c):c}for(e in Z.matches=function(e,t){return Z(e,null,null,t)},Z.matchesSelector=function(e,t){if(ce(e),h&&!T[t+" "]&&(!d||!d.test(t)))try{var n=p.call(e,t);if(n||m.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){T(t,!0)}return Z(t,c,null,[e]).length>0},Z.contains=function(e,t){return(e.ownerDocument||e)!=c&&ce(e),I.contains(e,t)},Z.attr=function(e,n){(e.ownerDocument||e)!=c&&ce(e);var r=t.attrHandle[n.toLowerCase()],i=r&&f.call(t.attrHandle,n.toLowerCase())?r(e,n,!h):void 0;return void 0!==i?i:e.getAttribute(n)},Z.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},I.uniqueSort=function(e){var t,n=[],r=0,s=0;if(o=!m.sortStable,i=!m.sortStable&&a.call(e,0),N.call(e,S),o){for(;t=e[s++];)t===e[s]&&(r=n.push(s));for(;r--;)D.call(e,n[r],1)}return i=null,e},I.fn.uniqueSort=function(){return this.pushStack(I.uniqueSort(a.apply(this)))},t=I.expr={cacheLength:50,createPseudo:te,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Y,X),e[3]=(e[3]||e[4]||e[5]||"").replace(Y,X),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Z.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Z.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=ue(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Y,X).toLowerCase();return"*"===e?function(){return!0}:function(e){return C(e,t)}},CLASS:function(e){var t=w[e+" "];return t||(t=new RegExp("(^|"+x+")"+e+"("+x+"|$)"))&&w(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=Z.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var l,u,h,d,f,p=s!==o?"nextSibling":"previousSibling",g=t.parentNode,m=a&&t.nodeName.toLowerCase(),E=!c&&!a,w=!1;if(g){if(s){for(;p;){for(h=t;h=h[p];)if(a?C(h,m):1===h.nodeType)return!1;f=p="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&E){for(w=(d=(l=(u=g[y]||(g[y]={}))[e]||[])[0]===v&&l[1])&&l[2],h=d&&g.childNodes[d];h=++d&&h&&h[p]||(w=d=0)||f.pop();)if(1===h.nodeType&&++w&&h===t){u[e]=[v,d,w];break}}else if(E&&(w=d=(l=(u=t[y]||(t[y]={}))[e]||[])[0]===v&&l[1]),!1===w)for(;(h=++d&&h&&h[p]||(w=d=0)||f.pop())&&(!(a?C(h,m):1===h.nodeType)||!++w||(E&&((u=h[y]||(h[y]={}))[e]=[v,w]),h!==t)););return(w-=i)===r||w%r==0&&w/r>=0}}},PSEUDO:function(e,n){var r,i=t.pseudos[e]||t.setFilters[e.toLowerCase()]||Z.error("unsupported pseudo: "+e);return i[y]?i(n):i.length>1?(r=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var r,s=i(e,n),o=s.length;o--;)e[r=u.call(e,s[o])]=!(t[r]=s[o])})):function(e){return i(e,0,r)}):i}},pseudos:{not:te((function(e){var t=[],n=[],r=ye(e.replace(R,"$1"));return r[y]?te((function(e,t,n,i){for(var s,o=r(e,null,i,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))})):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}})),has:te((function(e){return function(t){return Z(e,t).length>0}})),contains:te((function(e){return e=e.replace(Y,X),function(t){return(t.textContent||I.text(t)).indexOf(e)>-1}})),lang:te((function(e){return H.test(e||"")||Z.error("unsupported lang: "+e),e=e.replace(Y,X).toLowerCase(),function(t){var n;do{if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===l},focus:function(e){return e===function(){try{return c.activeElement}catch(e){}}()&&c.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:se(!1),disabled:se(!0),checked:function(e){return C(e,"input")&&!!e.checked||C(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return W.test(e.nodeName)},input:function(e){return z.test(e.nodeName)},button:function(e){return C(e,"input")&&"button"===e.type||C(e,"button")},text:function(e){var t;return C(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:oe((function(){return[0]})),last:oe((function(e,t){return[t-1]})),eq:oe((function(e,t,n){return[n<0?n+t:n]})),even:oe((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:oe((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:oe((function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:oe((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=re(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=ie(e);function le(){}function ue(e,n){var r,i,s,o,a,c,l,u=_[e+" "];if(u)return n?0:u.slice(0);for(a=e,c=[],l=t.preFilter;a;){for(o in r&&!(i=j.exec(a))||(i&&(a=a.slice(i[0].length)||a),c.push(s=[])),r=!1,(i=V.exec(a))&&(r=i.shift(),s.push({value:r,type:i[0].replace(R," ")}),a=a.slice(r.length)),t.filter)!(i=$[o].exec(a))||l[o]&&!(i=l[o](i))||(r=i.shift(),s.push({value:r,type:o,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?Z.error(e):_(e,c).slice(0)}function he(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function de(e,t,n){var r=t.dir,i=t.next,s=i||r,o=n&&"parentNode"===s,a=E++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,c){var l,u,h=[v,a];if(c){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,c))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(u=t[y]||(t[y]={}),i&&C(t,i))t=t[r]||t;else{if((l=u[s])&&l[0]===v&&l[1]===a)return h[2]=l[2];if(u[s]=h,h[2]=e(t,n,c))return!0}return!1}}function fe(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function pe(e,t,n,r,i){for(var s,o=[],a=0,c=e.length,l=null!=t;a<c;a++)(s=e[a])&&(n&&!n(s,r,i)||(o.push(s),l&&t.push(a)));return o}function ge(e,t,n,r,i,s){return r&&!r[y]&&(r=ge(r)),i&&!i[y]&&(i=ge(i,s)),te((function(s,o,a,c){var l,h,d,f,p=[],m=[],y=o.length,v=s||function(e,t,n){for(var r=0,i=t.length;r<i;r++)Z(e,t[r],n);return n}(t||"*",a.nodeType?[a]:a,[]),E=!e||!s&&t?v:pe(v,p,e,a,c);if(n?n(E,f=i||(s?e:y||r)?[]:o,a,c):f=E,r)for(l=pe(f,m),r(l,[],a,c),h=l.length;h--;)(d=l[h])&&(f[m[h]]=!(E[m[h]]=d));if(s){if(i||e){if(i){for(l=[],h=f.length;h--;)(d=f[h])&&l.push(E[h]=d);i(null,f=[],l,c)}for(h=f.length;h--;)(d=f[h])&&(l=i?u.call(s,d):p[h])>-1&&(s[l]=!(o[l]=d))}}else f=pe(f===o?f.splice(y,f.length):f),i?i(null,o,f,c):g.apply(o,f)}))}function me(e){for(var r,i,s,o=e.length,a=t.relative[e[0].type],c=a||t.relative[" "],l=a?1:0,h=de((function(e){return e===r}),c,!0),d=de((function(e){return u.call(r,e)>-1}),c,!0),f=[function(e,t,i){var s=!a&&(i||t!=n)||((r=t).nodeType?h(e,t,i):d(e,t,i));return r=null,s}];l<o;l++)if(i=t.relative[e[l].type])f=[de(fe(f),i)];else{if((i=t.filter[e[l].type].apply(null,e[l].matches))[y]){for(s=++l;s<o&&!t.relative[e[s].type];s++);return ge(l>1&&fe(f),l>1&&he(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(R,"$1"),i,l<s&&me(e.slice(l,s)),s<o&&me(e=e.slice(s)),s<o&&he(e))}f.push(i)}return fe(f)}function ye(e,r){var i,s=[],o=[],a=b[e+" "];if(!a){for(r||(r=ue(e)),i=r.length;i--;)(a=me(r[i]))[y]?s.push(a):o.push(a);a=b(e,function(e,r){var i=r.length>0,s=e.length>0,o=function(o,a,l,u,d){var f,p,m,y=0,E="0",w=o&&[],_=[],b=n,T=o||s&&t.find.TAG("*",d),S=v+=null==b?1:Math.random()||.1,A=T.length;for(d&&(n=a==c||a||d);E!==A&&null!=(f=T[E]);E++){if(s&&f){for(p=0,a||f.ownerDocument==c||(ce(f),l=!h);m=e[p++];)if(m(f,a||c,l)){g.call(u,f);break}d&&(v=S)}i&&((f=!m&&f)&&y--,o&&w.push(f))}if(y+=E,i&&E!==y){for(p=0;m=r[p++];)m(w,_,a,l);if(o){if(y>0)for(;E--;)w[E]||_[E]||(_[E]=k.call(u));_=pe(_)}g.apply(u,_),d&&!o&&_.length>0&&y+r.length>1&&I.uniqueSort(u)}return d&&(v=S,n=b),w};return i?te(o):o}(o,s)),a.selector=e}return a}function ve(e,n,r,i){var s,o,a,c,l,u="function"==typeof e&&e,d=!i&&ue(e=u.selector||e);if(r=r||[],1===d.length){if((o=d[0]=d[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===n.nodeType&&h&&t.relative[o[1].type]){if(!(n=(t.find.ID(a.matches[0].replace(Y,X),n)||[])[0]))return r;u&&(n=n.parentNode),e=e.slice(o.shift().value.length)}for(s=$.needsContext.test(e)?0:o.length;s--&&(a=o[s],!t.relative[c=a.type]);)if((l=t.find[c])&&(i=l(a.matches[0].replace(Y,X),K.test(o[0].type)&&ae(n.parentNode)||n))){if(o.splice(s,1),!(e=i.length&&he(o)))return g.apply(r,i),r;break}}return(u||ye(e,d))(i,n,!h,r,!n||K.test(e)&&ae(n.parentNode)||n),r}le.prototype=t.filters=t.pseudos,t.setFilters=new le,m.sortStable=y.split("").sort(S).join("")===y,ce(),m.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(c.createElement("fieldset"))})),I.find=Z,I.expr[":"]=I.expr.pseudos,I.unique=I.uniqueSort,Z.compile=ye,Z.select=ve,Z.setDocument=ce,Z.tokenize=ue,Z.escape=I.escapeSelector,Z.getText=I.text,Z.isXML=I.isXMLDoc,Z.selectors=I.expr,Z.support=I.support,Z.uniqueSort=I.uniqueSort}();var M=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&I(e).is(n))break;r.push(e)}return r},F=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},j=I.expr.match.needsContext,V=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function B(e,t,n){return y(t)?I.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?I.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?I.grep(e,(function(e){return u.call(t,e)>-1!==n})):I.filter(t,e,n)}I.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?I.find.matchesSelector(r,e)?[r]:[]:I.find.matches(e,I.grep(t,(function(e){return 1===e.nodeType})))},I.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(I(e).filter((function(){for(t=0;t<r;t++)if(I.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)I.find(e,i[t],n);return r>1?I.uniqueSort(n):n},filter:function(e){return this.pushStack(B(this,e||[],!1))},not:function(e){return this.pushStack(B(this,e||[],!0))},is:function(e){return!!B(this,"string"==typeof e&&j.test(e)?I(e):e||[],!1).length}});var q,H=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(I.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:H.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof I?t[0]:t,I.merge(this,I.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),V.test(r[1])&&I.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(I):I.makeArray(e,this)}).prototype=I.fn,q=I(E);var $=/^(?:parents|prev(?:Until|All))/,z={children:!0,contents:!0,next:!0,prev:!0};function W(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}I.fn.extend({has:function(e){var t=I(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(I.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,s=[],o="string"!=typeof e&&I(e);if(!j.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&I.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?I.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?u.call(I(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(I.uniqueSort(I.merge(this.get(),I(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),I.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return M(e,"parentNode")},parentsUntil:function(e,t,n){return M(e,"parentNode",n)},next:function(e){return W(e,"nextSibling")},prev:function(e){return W(e,"previousSibling")},nextAll:function(e){return M(e,"nextSibling")},prevAll:function(e){return M(e,"previousSibling")},nextUntil:function(e,t,n){return M(e,"nextSibling",n)},prevUntil:function(e,t,n){return M(e,"previousSibling",n)},siblings:function(e){return F((e.parentNode||{}).firstChild,e)},children:function(e){return F(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(C(e,"template")&&(e=e.content||e),I.merge([],e.childNodes))}},(function(e,t){I.fn[e]=function(n,r){var i=I.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=I.filter(r,i)),this.length>1&&(z[e]||I.uniqueSort(i),$.test(e)&&i.reverse()),this.pushStack(i)}}));var G=/[^\x20\t\r\n\f]+/g;function K(e){return e}function Y(e){throw e}function X(e,t,n,r){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(n):e&&y(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}I.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return I.each(e.match(G)||[],(function(e,n){t[n]=!0})),t}(e):I.extend({},e);var t,n,r,i,s=[],o=[],a=-1,c=function(){for(i=i||e.once,r=t=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=s.length,n=!1);e.memory||(n=!1),t=!1,i&&(s=n?[]:"")},l={add:function(){return s&&(n&&!t&&(a=s.length-1,o.push(n)),function t(n){I.each(n,(function(n,r){y(r)?e.unique&&l.has(r)||s.push(r):r&&r.length&&"string"!==b(r)&&t(r)}))}(arguments),n&&!t&&c()),this},remove:function(){return I.each(arguments,(function(e,t){for(var n;(n=I.inArray(t,s,n))>-1;)s.splice(n,1),n<=a&&a--})),this},has:function(e){return e?I.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return i=o=[],n||t||(s=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},I.extend({Deferred:function(e){var t=[["notify","progress",I.Callbacks("memory"),I.Callbacks("memory"),2],["resolve","done",I.Callbacks("once memory"),I.Callbacks("once memory"),0,"resolved"],["reject","fail",I.Callbacks("once memory"),I.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return I.Deferred((function(n){I.each(t,(function(t,r){var i=y(e[r[4]])&&e[r[4]];s[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,i){var s=0;function o(e,t,n,i){return function(){var a=this,c=arguments,l=function(){var r,l;if(!(e<s)){if((r=n.apply(a,c))===t.promise())throw new TypeError("Thenable self-resolution");l=r&&("object"==typeof r||"function"==typeof r)&&r.then,y(l)?i?l.call(r,o(s,t,K,i),o(s,t,Y,i)):(s++,l.call(r,o(s,t,K,i),o(s,t,Y,i),o(s,t,K,t.notifyWith))):(n!==K&&(a=void 0,c=[r]),(i||t.resolveWith)(a,c))}},u=i?l:function(){try{l()}catch(r){I.Deferred.exceptionHook&&I.Deferred.exceptionHook(r,u.error),e+1>=s&&(n!==Y&&(a=void 0,c=[r]),t.rejectWith(a,c))}};e?u():(I.Deferred.getErrorHook?u.error=I.Deferred.getErrorHook():I.Deferred.getStackHook&&(u.error=I.Deferred.getStackHook()),r.setTimeout(u))}}return I.Deferred((function(r){t[0][3].add(o(0,r,y(i)?i:K,r.notifyWith)),t[1][3].add(o(0,r,y(e)?e:K)),t[2][3].add(o(0,r,y(n)?n:Y))})).promise()},promise:function(e){return null!=e?I.extend(e,i):i}},s={};return I.each(t,(function(e,r){var o=r[2],a=r[5];i[r[1]]=o.add,a&&o.add((function(){n=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(r[3].fire),s[r[0]]=function(){return s[r[0]+"With"](this===s?void 0:this,arguments),this},s[r[0]+"With"]=o.fireWith})),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,n=t,r=Array(n),i=a.call(arguments),s=I.Deferred(),o=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?a.call(arguments):n,--t||s.resolveWith(r,i)}};if(t<=1&&(X(e,s.done(o(n)).resolve,s.reject,!t),"pending"===s.state()||y(i[n]&&i[n].then)))return s.then();for(;n--;)X(i[n],o(n),s.reject);return s.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;I.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&Q.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},I.readyException=function(e){r.setTimeout((function(){throw e}))};var J=I.Deferred();function Z(){E.removeEventListener("DOMContentLoaded",Z),r.removeEventListener("load",Z),I.ready()}I.fn.ready=function(e){return J.then(e).catch((function(e){I.readyException(e)})),this},I.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--I.readyWait:I.isReady)||(I.isReady=!0,!0!==e&&--I.readyWait>0||J.resolveWith(E,[I]))}}),I.ready.then=J.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?r.setTimeout(I.ready):(E.addEventListener("DOMContentLoaded",Z),r.addEventListener("load",Z));var ee=function(e,t,n,r,i,s,o){var a=0,c=e.length,l=null==n;if("object"===b(n))for(a in i=!0,n)ee(e,t,a,n[a],!0,s,o);else if(void 0!==r&&(i=!0,y(r)||(o=!0),l&&(o?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(I(e),n)})),t))for(;a<c;a++)t(e[a],n,o?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):c?t(e[0],n):s},te=/^-ms-/,ne=/-([a-z])/g;function re(e,t){return t.toUpperCase()}function ie(e){return e.replace(te,"ms-").replace(ne,re)}var se=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function oe(){this.expando=I.expando+oe.uid++}oe.uid=1,oe.prototype={cache:function(e){var t=e[this.expando];return t||(t={},se(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[ie(t)]=n;else for(r in t)i[ie(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ie(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(ie):(t=ie(t))in r?[t]:t.match(G)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||I.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!I.isEmptyObject(t)}};var ae=new oe,ce=new oe,le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ue=/[A-Z]/g;function he(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ue,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:le.test(e)?JSON.parse(e):e)}(n)}catch(e){}ce.set(e,t,n)}else n=void 0;return n}I.extend({hasData:function(e){return ce.hasData(e)||ae.hasData(e)},data:function(e,t,n){return ce.access(e,t,n)},removeData:function(e,t){ce.remove(e,t)},_data:function(e,t,n){return ae.access(e,t,n)},_removeData:function(e,t){ae.remove(e,t)}}),I.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(i=ce.get(s),1===s.nodeType&&!ae.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=ie(r.slice(5)),he(s,r,i[r]));ae.set(s,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){ce.set(this,e)})):ee(this,(function(t){var n;if(s&&void 0===t)return void 0!==(n=ce.get(s,e))||void 0!==(n=he(s,e))?n:void 0;this.each((function(){ce.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ce.remove(this,e)}))}}),I.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ae.get(e,t),n&&(!r||Array.isArray(n)?r=ae.access(e,t,I.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=I.queue(e,t),r=n.length,i=n.shift(),s=I._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,(function(){I.dequeue(e,t)}),s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ae.get(e,n)||ae.access(e,n,{empty:I.Callbacks("once memory").add((function(){ae.remove(e,[t+"queue",n])}))})}}),I.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?I.queue(this[0],e):void 0===t?this:this.each((function(){var n=I.queue(this,e,t);I._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&I.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){I.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=I.Deferred(),s=this,o=this.length,a=function(){--r||i.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=ae.get(s[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fe=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),pe=["Top","Right","Bottom","Left"],ge=E.documentElement,me=function(e){return I.contains(e.ownerDocument,e)},ye={composed:!0};ge.getRootNode&&(me=function(e){return I.contains(e.ownerDocument,e)||e.getRootNode(ye)===e.ownerDocument});var ve=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&me(e)&&"none"===I.css(e,"display")};function Ee(e,t,n,r){var i,s,o=20,a=r?function(){return r.cur()}:function(){return I.css(e,t,"")},c=a(),l=n&&n[3]||(I.cssNumber[t]?"":"px"),u=e.nodeType&&(I.cssNumber[t]||"px"!==l&&+c)&&fe.exec(I.css(e,t));if(u&&u[3]!==l){for(c/=2,l=l||u[3],u=+c||1;o--;)I.style(e,t,u+l),(1-s)*(1-(s=a()/c||.5))<=0&&(o=0),u/=s;u*=2,I.style(e,t,u+l),n=n||[]}return n&&(u=+u||+c||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=u,r.end=i)),i}var we={};function _e(e){var t,n=e.ownerDocument,r=e.nodeName,i=we[r];return i||(t=n.body.appendChild(n.createElement(r)),i=I.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),we[r]=i,i)}function be(e,t){for(var n,r,i=[],s=0,o=e.length;s<o;s++)(r=e[s]).style&&(n=r.style.display,t?("none"===n&&(i[s]=ae.get(r,"display")||null,i[s]||(r.style.display="")),""===r.style.display&&ve(r)&&(i[s]=_e(r))):"none"!==n&&(i[s]="none",ae.set(r,"display",n)));for(s=0;s<o;s++)null!=i[s]&&(e[s].style.display=i[s]);return e}I.fn.extend({show:function(){return be(this,!0)},hide:function(){return be(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ve(this)?I(this).show():I(this).hide()}))}});var Te,Se,Ie=/^(?:checkbox|radio)$/i,Ae=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;Te=E.createDocumentFragment().appendChild(E.createElement("div")),(Se=E.createElement("input")).setAttribute("type","radio"),Se.setAttribute("checked","checked"),Se.setAttribute("name","t"),Te.appendChild(Se),m.checkClone=Te.cloneNode(!0).cloneNode(!0).lastChild.checked,Te.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!Te.cloneNode(!0).lastChild.defaultValue,Te.innerHTML="<option></option>",m.option=!!Te.lastChild;var ke={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ne(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&C(e,t)?I.merge([e],n):n}function De(e,t){for(var n=0,r=e.length;n<r;n++)ae.set(e[n],"globalEval",!t||ae.get(t[n],"globalEval"))}ke.tbody=ke.tfoot=ke.colgroup=ke.caption=ke.thead,ke.th=ke.td,m.option||(ke.optgroup=ke.option=[1,"<select multiple='multiple'>","</select>"]);var xe=/<|&#?\w+;/;function Re(e,t,n,r,i){for(var s,o,a,c,l,u,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((s=e[f])||0===s)if("object"===b(s))I.merge(d,s.nodeType?[s]:s);else if(xe.test(s)){for(o=o||h.appendChild(t.createElement("div")),a=(Ae.exec(s)||["",""])[1].toLowerCase(),c=ke[a]||ke._default,o.innerHTML=c[1]+I.htmlPrefilter(s)+c[2],u=c[0];u--;)o=o.lastChild;I.merge(d,o.childNodes),(o=h.firstChild).textContent=""}else d.push(t.createTextNode(s));for(h.textContent="",f=0;s=d[f++];)if(r&&I.inArray(s,r)>-1)i&&i.push(s);else if(l=me(s),o=Ne(h.appendChild(s),"script"),l&&De(o),n)for(u=0;s=o[u++];)Ce.test(s.type||"")&&n.push(s);return h}var Oe=/^([^.]*)(?:\.(.+)|)/;function Le(){return!0}function Ue(){return!1}function Pe(e,t,n,r,i,s){var o,a;if("object"==typeof t){for(a in"string"!=typeof n&&(r=r||n,n=void 0),t)Pe(e,a,n,r,t[a],s);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ue;else if(!i)return e;return 1===s&&(o=i,i=function(e){return I().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=I.guid++)),e.each((function(){I.event.add(this,t,i,r,n)}))}function Me(e,t,n){n?(ae.set(e,t,!1),I.event.add(e,t,{namespace:!1,handler:function(e){var n,r=ae.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(I.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=a.call(arguments),ae.set(this,t,r),this[t](),n=ae.get(this,t),ae.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(ae.set(this,t,I.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Le)}})):void 0===ae.get(e,t)&&I.event.add(e,t,Le)}I.event={global:{},add:function(e,t,n,r,i){var s,o,a,c,l,u,h,d,f,p,g,m=ae.get(e);if(se(e))for(n.handler&&(n=(s=n).handler,i=s.selector),i&&I.find.matchesSelector(ge,i),n.guid||(n.guid=I.guid++),(c=m.events)||(c=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return void 0!==I&&I.event.triggered!==t.type?I.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(G)||[""]).length;l--;)f=g=(a=Oe.exec(t[l])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=I.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=I.event.special[f]||{},u=I.extend({type:f,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&I.expr.match.needsContext.test(i),namespace:p.join(".")},s),(d=c[f])||((d=c[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,p,o)||e.addEventListener&&e.addEventListener(f,o)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,u):d.push(u),I.event.global[f]=!0)},remove:function(e,t,n,r,i){var s,o,a,c,l,u,h,d,f,p,g,m=ae.hasData(e)&&ae.get(e);if(m&&(c=m.events)){for(l=(t=(t||"").match(G)||[""]).length;l--;)if(f=g=(a=Oe.exec(t[l])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=I.event.special[f]||{},d=c[f=(r?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)u=d[s],!i&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(d.splice(s,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,m.handle)||I.removeEvent(e,f,m.handle),delete c[f])}else for(f in c)I.event.remove(e,f+t[l],n,r,!0);I.isEmptyObject(c)&&ae.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,s,o,a=new Array(arguments.length),c=I.event.fix(e),l=(ae.get(this,"events")||Object.create(null))[c.type]||[],u=I.event.special[c.type]||{};for(a[0]=c,t=1;t<arguments.length;t++)a[t]=arguments[t];if(c.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,c)){for(o=I.event.handlers.call(this,c,l),t=0;(i=o[t++])&&!c.isPropagationStopped();)for(c.currentTarget=i.elem,n=0;(s=i.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==s.namespace&&!c.rnamespace.test(s.namespace)||(c.handleObj=s,c.data=s.data,void 0!==(r=((I.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,a))&&!1===(c.result=r)&&(c.preventDefault(),c.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,r,i,s,o,a=[],c=t.delegateCount,l=e.target;if(c&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(s=[],o={},n=0;n<c;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?I(i,this).index(l)>-1:I.find(i,this,null,[l]).length),o[i]&&s.push(r);s.length&&a.push({elem:l,handlers:s})}return l=this,c<t.length&&a.push({elem:l,handlers:t.slice(c)}),a},addProp:function(e,t){Object.defineProperty(I.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[I.expando]?e:new I.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Ie.test(t.type)&&t.click&&C(t,"input")&&Me(t,"click",!0),!1},trigger:function(e){var t=this||e;return Ie.test(t.type)&&t.click&&C(t,"input")&&Me(t,"click"),!0},_default:function(e){var t=e.target;return Ie.test(t.type)&&t.click&&C(t,"input")&&ae.get(t,"click")||C(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},I.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},I.Event=function(e,t){if(!(this instanceof I.Event))return new I.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Le:Ue,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&I.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[I.expando]=!0},I.Event.prototype={constructor:I.Event,isDefaultPrevented:Ue,isPropagationStopped:Ue,isImmediatePropagationStopped:Ue,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Le,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Le,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Le,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},I.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},I.event.addProp),I.each({focus:"focusin",blur:"focusout"},(function(e,t){function n(e){if(E.documentMode){var n=ae.get(this,"handle"),r=I.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else I.event.simulate(t,e.target,I.event.fix(e))}I.event.special[e]={setup:function(){var r;if(Me(this,e,!0),!E.documentMode)return!1;(r=ae.get(this,t))||this.addEventListener(t,n),ae.set(this,t,(r||0)+1)},trigger:function(){return Me(this,e),!0},teardown:function(){var e;if(!E.documentMode)return!1;(e=ae.get(this,t)-1)?ae.set(this,t,e):(this.removeEventListener(t,n),ae.remove(this,t))},_default:function(t){return ae.get(t.target,e)},delegateType:t},I.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=E.documentMode?this:r,s=ae.get(i,t);s||(E.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),ae.set(i,t,(s||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=E.documentMode?this:r,s=ae.get(i,t)-1;s?ae.set(i,t,s):(E.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),ae.remove(i,t))}}})),I.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){I.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||I.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}})),I.fn.extend({on:function(e,t,n,r){return Pe(this,e,t,n,r)},one:function(e,t,n,r){return Pe(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,I(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ue),this.each((function(){I.event.remove(this,e,n,t)}))}});var Fe=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,Ve=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Be(e,t){return C(e,"table")&&C(11!==t.nodeType?t:t.firstChild,"tr")&&I(e).children("tbody")[0]||e}function qe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function He(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function $e(e,t){var n,r,i,s,o,a;if(1===t.nodeType){if(ae.hasData(e)&&(a=ae.get(e).events))for(i in ae.remove(t,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)I.event.add(t,i,a[i][n]);ce.hasData(e)&&(s=ce.access(e),o=I.extend({},s),ce.set(t,o))}}function ze(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ie.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function We(e,t,n,r){t=c(t);var i,s,o,a,l,u,h=0,d=e.length,f=d-1,p=t[0],g=y(p);if(g||d>1&&"string"==typeof p&&!m.checkClone&&je.test(p))return e.each((function(i){var s=e.eq(i);g&&(t[0]=p.call(this,i,s.html())),We(s,t,n,r)}));if(d&&(s=(i=Re(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=s),s||r)){for(a=(o=I.map(Ne(i,"script"),qe)).length;h<d;h++)l=i,h!==f&&(l=I.clone(l,!0,!0),a&&I.merge(o,Ne(l,"script"))),n.call(e[h],l,h);if(a)for(u=o[o.length-1].ownerDocument,I.map(o,He),h=0;h<a;h++)l=o[h],Ce.test(l.type||"")&&!ae.access(l,"globalEval")&&I.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?I._evalUrl&&!l.noModule&&I._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):_(l.textContent.replace(Ve,""),l,u))}return e}function Ge(e,t,n){for(var r,i=t?I.filter(t,e):e,s=0;null!=(r=i[s]);s++)n||1!==r.nodeType||I.cleanData(Ne(r)),r.parentNode&&(n&&me(r)&&De(Ne(r,"script")),r.parentNode.removeChild(r));return e}I.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,s,o,a=e.cloneNode(!0),c=me(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||I.isXMLDoc(e)))for(o=Ne(a),r=0,i=(s=Ne(e)).length;r<i;r++)ze(s[r],o[r]);if(t)if(n)for(s=s||Ne(e),o=o||Ne(a),r=0,i=s.length;r<i;r++)$e(s[r],o[r]);else $e(e,a);return(o=Ne(a,"script")).length>0&&De(o,!c&&Ne(e,"script")),a},cleanData:function(e){for(var t,n,r,i=I.event.special,s=0;void 0!==(n=e[s]);s++)if(se(n)){if(t=n[ae.expando]){if(t.events)for(r in t.events)i[r]?I.event.remove(n,r):I.removeEvent(n,r,t.handle);n[ae.expando]=void 0}n[ce.expando]&&(n[ce.expando]=void 0)}}}),I.fn.extend({detach:function(e){return Ge(this,e,!0)},remove:function(e){return Ge(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?I.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return We(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Be(this,e).appendChild(e)}))},prepend:function(){return We(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Be(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(I.cleanData(Ne(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return I.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Fe.test(e)&&!ke[(Ae.exec(e)||["",""])[1].toLowerCase()]){e=I.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(I.cleanData(Ne(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return We(this,arguments,(function(t){var n=this.parentNode;I.inArray(this,e)<0&&(I.cleanData(Ne(this)),n&&n.replaceChild(t,this))}),e)}}),I.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){I.fn[e]=function(e){for(var n,r=[],i=I(e),s=i.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),I(i[o])[t](n),l.apply(r,n.get());return this.pushStack(r)}}));var Ke=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),Ye=/^--/,Xe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Qe=function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=s[i];return r},Je=new RegExp(pe.join("|"),"i");function Ze(e,t,n){var r,i,s,o,a=Ye.test(t),c=e.style;return(n=n||Xe(e))&&(o=n.getPropertyValue(t)||n[t],a&&o&&(o=o.replace(R,"$1")||void 0),""!==o||me(e)||(o=I.style(e,t)),!m.pixelBoxStyles()&&Ke.test(o)&&Je.test(t)&&(r=c.width,i=c.minWidth,s=c.maxWidth,c.minWidth=c.maxWidth=c.width=o,o=n.width,c.width=r,c.minWidth=i,c.maxWidth=s)),void 0!==o?o+"":o}function et(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ge.appendChild(l).appendChild(u);var e=r.getComputedStyle(u);n="1%"!==e.top,c=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),i=36===t(e.width),u.style.position="absolute",s=12===t(u.offsetWidth/3),ge.removeChild(l),u=null}}function t(e){return Math.round(parseFloat(e))}var n,i,s,o,a,c,l=E.createElement("div"),u=E.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,I.extend(m,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),s},reliableTrDimensions:function(){var e,t,n,i;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",ge.appendChild(e).appendChild(t).appendChild(n),i=r.getComputedStyle(t),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,ge.removeChild(e)),a}}))}();var tt=["Webkit","Moz","ms"],nt=E.createElement("div").style,rt={};function it(e){return I.cssProps[e]||rt[e]||(e in nt?e:rt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=tt.length;n--;)if((e=tt[n]+t)in nt)return e}(e)||e)}var st=/^(none|table(?!-c[ea]).+)/,ot={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function ct(e,t,n){var r=fe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function lt(e,t,n,r,i,s){var o="width"===t?1:0,a=0,c=0,l=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=I.css(e,n+pe[o],!0,i)),r?("content"===n&&(c-=I.css(e,"padding"+pe[o],!0,i)),"margin"!==n&&(c-=I.css(e,"border"+pe[o]+"Width",!0,i))):(c+=I.css(e,"padding"+pe[o],!0,i),"padding"!==n?c+=I.css(e,"border"+pe[o]+"Width",!0,i):a+=I.css(e,"border"+pe[o]+"Width",!0,i));return!r&&s>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-c-a-.5))||0),c+l}function ut(e,t,n){var r=Xe(e),i=(!m.boxSizingReliable()||n)&&"border-box"===I.css(e,"boxSizing",!1,r),s=i,o=Ze(e,t,r),a="offset"+t[0].toUpperCase()+t.slice(1);if(Ke.test(o)){if(!n)return o;o="auto"}return(!m.boxSizingReliable()&&i||!m.reliableTrDimensions()&&C(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===I.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===I.css(e,"boxSizing",!1,r),(s=a in e)&&(o=e[a])),(o=parseFloat(o)||0)+lt(e,t,n||(i?"border":"content"),s,r,o)+"px"}function ht(e,t,n,r,i){return new ht.prototype.init(e,t,n,r,i)}I.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,a=ie(t),c=Ye.test(t),l=e.style;if(c||(t=it(a)),o=I.cssHooks[t]||I.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:l[t];"string"==(s=typeof n)&&(i=fe.exec(n))&&i[1]&&(n=Ee(e,t,i),s="number"),null!=n&&n==n&&("number"!==s||c||(n+=i&&i[3]||(I.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(c?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,s,o,a=ie(t);return Ye.test(t)||(t=it(a)),(o=I.cssHooks[t]||I.cssHooks[a])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=Ze(e,t,r)),"normal"===i&&t in at&&(i=at[t]),""===n||n?(s=parseFloat(i),!0===n||isFinite(s)?s||0:i):i}}),I.each(["height","width"],(function(e,t){I.cssHooks[t]={get:function(e,n,r){if(n)return!st.test(I.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ut(e,t,r):Qe(e,ot,(function(){return ut(e,t,r)}))},set:function(e,n,r){var i,s=Xe(e),o=!m.scrollboxSize()&&"absolute"===s.position,a=(o||r)&&"border-box"===I.css(e,"boxSizing",!1,s),c=r?lt(e,t,r,a,s):0;return a&&o&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-lt(e,t,"border",!1,s)-.5)),c&&(i=fe.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=I.css(e,t)),ct(0,n,c)}}})),I.cssHooks.marginLeft=et(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ze(e,"marginLeft"))||e.getBoundingClientRect().left-Qe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),I.each({margin:"",padding:"",border:"Width"},(function(e,t){I.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+pe[r]+t]=s[r]||s[r-2]||s[0];return i}},"margin"!==e&&(I.cssHooks[e+t].set=ct)})),I.fn.extend({css:function(e,t){return ee(this,(function(e,t,n){var r,i,s={},o=0;if(Array.isArray(t)){for(r=Xe(e),i=t.length;o<i;o++)s[t[o]]=I.css(e,t[o],!1,r);return s}return void 0!==n?I.style(e,t,n):I.css(e,t)}),e,t,arguments.length>1)}}),I.Tween=ht,ht.prototype={constructor:ht,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||I.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(I.cssNumber[n]?"":"px")},cur:function(){var e=ht.propHooks[this.prop];return e&&e.get?e.get(this):ht.propHooks._default.get(this)},run:function(e){var t,n=ht.propHooks[this.prop];return this.options.duration?this.pos=t=I.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ht.propHooks._default.set(this),this}},ht.prototype.init.prototype=ht.prototype,ht.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=I.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){I.fx.step[e.prop]?I.fx.step[e.prop](e):1!==e.elem.nodeType||!I.cssHooks[e.prop]&&null==e.elem.style[it(e.prop)]?e.elem[e.prop]=e.now:I.style(e.elem,e.prop,e.now+e.unit)}}},ht.propHooks.scrollTop=ht.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},I.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},I.fx=ht.prototype.init,I.fx.step={};var dt,ft,pt=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;function mt(){ft&&(!1===E.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(mt):r.setTimeout(mt,I.fx.interval),I.fx.tick())}function yt(){return r.setTimeout((function(){dt=void 0})),dt=Date.now()}function vt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=pe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Et(e,t,n){for(var r,i=(wt.tweeners[t]||[]).concat(wt.tweeners["*"]),s=0,o=i.length;s<o;s++)if(r=i[s].call(n,t,e))return r}function wt(e,t,n){var r,i,s=0,o=wt.prefilters.length,a=I.Deferred().always((function(){delete c.elem})),c=function(){if(i)return!1;for(var t=dt||yt(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),s=0,o=l.tweens.length;s<o;s++)l.tweens[s].run(r);return a.notifyWith(e,[l,r,n]),r<1&&o?n:(o||a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:I.extend({},t),opts:I.extend(!0,{specialEasing:{},easing:I.easing._default},n),originalProperties:t,originalOptions:n,startTime:dt||yt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=I.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(a.notifyWith(e,[l,1,0]),a.resolveWith(e,[l,t])):a.rejectWith(e,[l,t]),this}}),u=l.props;for(function(e,t){var n,r,i,s,o;for(n in e)if(i=t[r=ie(n)],s=e[n],Array.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),(o=I.cssHooks[r])&&"expand"in o)for(n in s=o.expand(s),delete e[r],s)n in e||(e[n]=s[n],t[n]=i);else t[r]=i}(u,l.opts.specialEasing);s<o;s++)if(r=wt.prefilters[s].call(l,e,u,l.opts))return y(r.stop)&&(I._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return I.map(u,Et,l),y(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),I.fx.timer(I.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l}I.Animation=I.extend(wt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return Ee(n.elem,e,fe.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(G);for(var n,r=0,i=e.length;r<i;r++)n=e[r],wt.tweeners[n]=wt.tweeners[n]||[],wt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,s,o,a,c,l,u,h="width"in t||"height"in t,d=this,f={},p=e.style,g=e.nodeType&&ve(e),m=ae.get(e,"fxshow");for(r in n.queue||(null==(o=I._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,I.queue(e,"fx").length||o.empty.fire()}))}))),t)if(i=t[r],pt.test(i)){if(delete t[r],s=s||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}f[r]=m&&m[r]||I.style(e,r)}if((c=!I.isEmptyObject(t))||!I.isEmptyObject(f))for(r in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=m&&m.display)&&(l=ae.get(e,"display")),"none"===(u=I.css(e,"display"))&&(l?u=l:(be([e],!0),l=e.style.display||l,u=I.css(e,"display"),be([e]))),("inline"===u||"inline-block"===u&&null!=l)&&"none"===I.css(e,"float")&&(c||(d.done((function(){p.display=l})),null==l&&(u=p.display,l="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),c=!1,f)c||(m?"hidden"in m&&(g=m.hidden):m=ae.access(e,"fxshow",{display:l}),s&&(m.hidden=!g),g&&be([e],!0),d.done((function(){for(r in g||be([e]),ae.remove(e,"fxshow"),f)I.style(e,r,f[r])}))),c=Et(g?m[r]:0,r,d),r in m||(m[r]=c.start,g&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?wt.prefilters.unshift(e):wt.prefilters.push(e)}}),I.speed=function(e,t,n){var r=e&&"object"==typeof e?I.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return I.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in I.fx.speeds?r.duration=I.fx.speeds[r.duration]:r.duration=I.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&I.dequeue(this,r.queue)},r},I.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ve).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=I.isEmptyObject(e),s=I.speed(t,n,r),o=function(){var t=wt(this,I.extend({},e),s);(i||ae.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",s=I.timers,o=ae.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&gt.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));!t&&n||I.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=ae.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=I.timers,o=r?r.length:0;for(n.finish=!0,I.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),I.each(["toggle","show","hide"],(function(e,t){var n=I.fn[t];I.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(vt(t,!0),e,r,i)}})),I.each({slideDown:vt("show"),slideUp:vt("hide"),slideToggle:vt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){I.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),I.timers=[],I.fx.tick=function(){var e,t=0,n=I.timers;for(dt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||I.fx.stop(),dt=void 0},I.fx.timer=function(e){I.timers.push(e),I.fx.start()},I.fx.interval=13,I.fx.start=function(){ft||(ft=!0,mt())},I.fx.stop=function(){ft=null},I.fx.speeds={slow:600,fast:200,_default:400},I.fn.delay=function(e,t){return e=I.fx&&I.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}}))},function(){var e=E.createElement("input"),t=E.createElement("select").appendChild(E.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=E.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var _t,bt=I.expr.attrHandle;I.fn.extend({attr:function(e,t){return ee(this,I.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){I.removeAttr(this,e)}))}}),I.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?I.prop(e,t,n):(1===s&&I.isXMLDoc(e)||(i=I.attrHooks[t.toLowerCase()]||(I.expr.match.bool.test(t)?_t:void 0)),void 0!==n?null===n?void I.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=I.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&C(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(G);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),_t={set:function(e,t,n){return!1===t?I.removeAttr(e,n):e.setAttribute(n,n),n}},I.each(I.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=bt[t]||I.find.attr;bt[t]=function(e,t,r){var i,s,o=t.toLowerCase();return r||(s=bt[o],bt[o]=i,i=null!=n(e,t,r)?o:null,bt[o]=s),i}}));var Tt=/^(?:input|select|textarea|button)$/i,St=/^(?:a|area)$/i;function It(e){return(e.match(G)||[]).join(" ")}function At(e){return e.getAttribute&&e.getAttribute("class")||""}function Ct(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(G)||[]}I.fn.extend({prop:function(e,t){return ee(this,I.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[I.propFix[e]||e]}))}}),I.extend({prop:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&I.isXMLDoc(e)||(t=I.propFix[t]||t,i=I.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=I.find.attr(e,"tabindex");return t?parseInt(t,10):Tt.test(e.nodeName)||St.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(I.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),I.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){I.propFix[this.toLowerCase()]=this})),I.fn.extend({addClass:function(e){var t,n,r,i,s,o;return y(e)?this.each((function(t){I(this).addClass(e.call(this,t,At(this)))})):(t=Ct(e)).length?this.each((function(){if(r=At(this),n=1===this.nodeType&&" "+It(r)+" "){for(s=0;s<t.length;s++)i=t[s],n.indexOf(" "+i+" ")<0&&(n+=i+" ");o=It(n),r!==o&&this.setAttribute("class",o)}})):this},removeClass:function(e){var t,n,r,i,s,o;return y(e)?this.each((function(t){I(this).removeClass(e.call(this,t,At(this)))})):arguments.length?(t=Ct(e)).length?this.each((function(){if(r=At(this),n=1===this.nodeType&&" "+It(r)+" "){for(s=0;s<t.length;s++)for(i=t[s];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");o=It(n),r!==o&&this.setAttribute("class",o)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,i,s,o=typeof e,a="string"===o||Array.isArray(e);return y(e)?this.each((function(n){I(this).toggleClass(e.call(this,n,At(this),t),t)})):"boolean"==typeof t&&a?t?this.addClass(e):this.removeClass(e):(n=Ct(e),this.each((function(){if(a)for(s=I(this),i=0;i<n.length;i++)r=n[i],s.hasClass(r)?s.removeClass(r):s.addClass(r);else void 0!==e&&"boolean"!==o||((r=At(this))&&ae.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":ae.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+It(At(n))+" ").indexOf(t)>-1)return!0;return!1}});var kt=/\r/g;I.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=y(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,I(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=I.map(i,(function(e){return null==e?"":e+""}))),(t=I.valHooks[this.type]||I.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=I.valHooks[i.type]||I.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(kt,""):null==n?"":n:void 0}}),I.extend({valHooks:{option:{get:function(e){var t=I.find.attr(e,"value");return null!=t?t:It(I.text(e))}},select:{get:function(e){var t,n,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],c=o?s+1:i.length;for(r=s<0?c:o?s:0;r<c;r++)if(((n=i[r]).selected||r===s)&&!n.disabled&&(!n.parentNode.disabled||!C(n.parentNode,"optgroup"))){if(t=I(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,s=I.makeArray(t),o=i.length;o--;)((r=i[o]).selected=I.inArray(I.valHooks.option.get(r),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),I.each(["radio","checkbox"],(function(){I.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=I.inArray(I(e).val(),t)>-1}},m.checkOn||(I.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var Nt=r.location,Dt={guid:Date.now()},xt=/\?/;I.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||I.error("Invalid XML: "+(n?I.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Rt=/^(?:focusinfocus|focusoutblur)$/,Ot=function(e){e.stopPropagation()};I.extend(I.event,{trigger:function(e,t,n,i){var s,o,a,c,l,u,h,d,p=[n||E],g=f.call(e,"type")?e.type:e,m=f.call(e,"namespace")?e.namespace.split("."):[];if(o=d=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!Rt.test(g+I.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),l=g.indexOf(":")<0&&"on"+g,(e=e[I.expando]?e:new I.Event(g,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:I.makeArray(t,[e]),h=I.event.special[g]||{},i||!h.trigger||!1!==h.trigger.apply(n,t))){if(!i&&!h.noBubble&&!v(n)){for(c=h.delegateType||g,Rt.test(c+g)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||r)}for(s=0;(o=p[s++])&&!e.isPropagationStopped();)d=o,e.type=s>1?c:h.bindType||g,(u=(ae.get(o,"events")||Object.create(null))[e.type]&&ae.get(o,"handle"))&&u.apply(o,t),(u=l&&o[l])&&u.apply&&se(o)&&(e.result=u.apply(o,t),!1===e.result&&e.preventDefault());return e.type=g,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),t)||!se(n)||l&&y(n[g])&&!v(n)&&((a=n[l])&&(n[l]=null),I.event.triggered=g,e.isPropagationStopped()&&d.addEventListener(g,Ot),n[g](),e.isPropagationStopped()&&d.removeEventListener(g,Ot),I.event.triggered=void 0,a&&(n[l]=a)),e.result}},simulate:function(e,t,n){var r=I.extend(new I.Event,n,{type:e,isSimulated:!0});I.event.trigger(r,null,t)}}),I.fn.extend({trigger:function(e,t){return this.each((function(){I.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return I.event.trigger(e,t,n,!0)}});var Lt=/\[\]$/,Ut=/\r?\n/g,Pt=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;function Ft(e,t,n,r){var i;if(Array.isArray(t))I.each(t,(function(t,i){n||Lt.test(e)?r(e,i):Ft(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==b(t))r(e,t);else for(i in t)Ft(e+"["+i+"]",t[i],n,r)}I.param=function(e,t){var n,r=[],i=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!I.isPlainObject(e))I.each(e,(function(){i(this.name,this.value)}));else for(n in e)Ft(n,e[n],t,i);return r.join("&")},I.fn.extend({serialize:function(){return I.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=I.prop(this,"elements");return e?I.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!I(this).is(":disabled")&&Mt.test(this.nodeName)&&!Pt.test(e)&&(this.checked||!Ie.test(e))})).map((function(e,t){var n=I(this).val();return null==n?null:Array.isArray(n)?I.map(n,(function(e){return{name:t.name,value:e.replace(Ut,"\r\n")}})):{name:t.name,value:n.replace(Ut,"\r\n")}})).get()}});var jt=/%20/g,Vt=/#.*$/,Bt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:GET|HEAD)$/,$t=/^\/\//,zt={},Wt={},Gt="*/".concat("*"),Kt=E.createElement("a");function Yt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(G)||[];if(y(n))for(;r=s[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Xt(e,t,n,r){var i={},s=e===Wt;function o(a){var c;return i[a]=!0,I.each(e[a]||[],(function(e,a){var l=a(t,n,r);return"string"!=typeof l||s||i[l]?s?!(c=l):void 0:(t.dataTypes.unshift(l),o(l),!1)})),c}return o(t.dataTypes[0])||!i["*"]&&o("*")}function Qt(e,t){var n,r,i=I.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&I.extend(!0,e,r),e}Kt.href=Nt.href,I.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Nt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Nt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":I.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Qt(Qt(e,I.ajaxSettings),t):Qt(I.ajaxSettings,e)},ajaxPrefilter:Yt(zt),ajaxTransport:Yt(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,s,o,a,c,l,u,h,d,f=I.ajaxSetup({},t),p=f.context||f,g=f.context&&(p.nodeType||p.jquery)?I(p):I.event,m=I.Deferred(),y=I.Callbacks("once memory"),v=f.statusCode||{},w={},_={},b="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(l){if(!o)for(o={};t=qt.exec(s);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(e,t){return null==l&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==l&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)T.always(e[T.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||b;return n&&n.abort(t),S(0,t),this}};if(m.promise(T),f.url=((e||f.url||Nt.href)+"").replace($t,Nt.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(G)||[""],null==f.crossDomain){c=E.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Kt.protocol+"//"+Kt.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=I.param(f.data,f.traditional)),Xt(zt,f,t,T),l)return T;for(h in(u=I.event&&f.global)&&0==I.active++&&I.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ht.test(f.type),i=f.url.replace(Vt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(jt,"+")):(d=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(xt.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Bt,"$1"),d=(xt.test(i)?"&":"?")+"_="+Dt.guid+++d),f.url=i+d),f.ifModified&&(I.lastModified[i]&&T.setRequestHeader("If-Modified-Since",I.lastModified[i]),I.etag[i]&&T.setRequestHeader("If-None-Match",I.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&T.setRequestHeader("Content-Type",f.contentType),T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Gt+"; q=0.01":""):f.accepts["*"]),f.headers)T.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,T,f)||l))return T.abort();if(b="abort",y.add(f.complete),T.done(f.success),T.fail(f.error),n=Xt(Wt,f,t,T)){if(T.readyState=1,u&&g.trigger("ajaxSend",[T,f]),l)return T;f.async&&f.timeout>0&&(a=r.setTimeout((function(){T.abort("timeout")}),f.timeout));try{l=!1,n.send(w,S)}catch(e){if(l)throw e;S(-1,e)}}else S(-1,"No Transport");function S(e,t,o,c){var h,d,E,w,_,b=t;l||(l=!0,a&&r.clearTimeout(a),n=void 0,s=c||"",T.readyState=e>0?4:0,h=e>=200&&e<300||304===e,o&&(w=function(e,t,n){for(var r,i,s,o,a=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){c.unshift(i);break}if(c[0]in n)s=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==c[0]&&c.unshift(s),n[s]}(f,T,o)),!h&&I.inArray("script",f.dataTypes)>-1&&I.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),w=function(e,t,n,r){var i,s,o,a,c,l={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o];for(s=u.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=s,s=u.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(!(o=l[c+" "+s]||l["* "+s]))for(i in l)if((a=i.split(" "))[1]===s&&(o=l[c+" "+a[0]]||l["* "+a[0]])){!0===o?o=l[i]:!0!==l[i]&&(s=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+c+" to "+s}}}return{state:"success",data:t}}(f,w,T,h),h?(f.ifModified&&((_=T.getResponseHeader("Last-Modified"))&&(I.lastModified[i]=_),(_=T.getResponseHeader("etag"))&&(I.etag[i]=_)),204===e||"HEAD"===f.type?b="nocontent":304===e?b="notmodified":(b=w.state,d=w.data,h=!(E=w.error))):(E=b,!e&&b||(b="error",e<0&&(e=0))),T.status=e,T.statusText=(t||b)+"",h?m.resolveWith(p,[d,b,T]):m.rejectWith(p,[T,b,E]),T.statusCode(v),v=void 0,u&&g.trigger(h?"ajaxSuccess":"ajaxError",[T,f,h?d:E]),y.fireWith(p,[T,b]),u&&(g.trigger("ajaxComplete",[T,f]),--I.active||I.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return I.get(e,t,n,"json")},getScript:function(e,t){return I.get(e,void 0,t,"script")}}),I.each(["get","post"],(function(e,t){I[t]=function(e,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),I.ajax(I.extend({url:e,type:t,dataType:i,data:n,success:r},I.isPlainObject(e)&&e))}})),I.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),I._evalUrl=function(e,t,n){return I.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){I.globalEval(e,t,n)}})},I.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=I(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){I(this).wrapInner(e.call(this,t))})):this.each((function(){var t=I(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(n){I(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){I(this).replaceWith(this.childNodes)})),this}}),I.expr.pseudos.hidden=function(e){return!I.expr.pseudos.visible(e)},I.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},I.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Jt={0:200,1223:204},Zt=I.ajaxSettings.xhr();m.cors=!!Zt&&"withCredentials"in Zt,m.ajax=Zt=!!Zt,I.ajaxTransport((function(e){var t,n;if(m.cors||Zt&&!e.crossDomain)return{send:function(i,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(t=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Jt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),n=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),I.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),I.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return I.globalEval(e),e}}}),I.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),I.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=I("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),E.head.appendChild(t[0])},abort:function(){n&&n()}}}));var en,tn=[],nn=/(=)\?(?=&|$)|\?\?/;I.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tn.pop()||I.expando+"_"+Dt.guid++;return this[e]=!0,e}}),I.ajaxPrefilter("json jsonp",(function(e,t,n){var i,s,o,a=!1!==e.jsonp&&(nn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(nn,"$1"+i):!1!==e.jsonp&&(e.url+=(xt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||I.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=r[i],r[i]=function(){o=arguments},n.always((function(){void 0===s?I(r).removeProp(i):r[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,tn.push(i)),o&&y(s)&&s(o[0]),o=s=void 0})),"script"})),m.createHTMLDocument=((en=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===en.childNodes.length),I.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),s=!n&&[],(i=V.exec(e))?[t.createElement(i[1])]:(i=Re([e],t,s),s&&s.length&&I(s).remove(),I.merge([],i.childNodes)));var r,i,s},I.fn.load=function(e,t,n){var r,i,s,o=this,a=e.indexOf(" ");return a>-1&&(r=It(e.slice(a)),e=e.slice(0,a)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),o.length>0&&I.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){s=arguments,o.html(r?I("<div>").append(I.parseHTML(e)).find(r):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,s||[e.responseText,t,e])}))}),this},I.expr.pseudos.animated=function(e){return I.grep(I.timers,(function(t){return e===t.elem})).length},I.offset={setOffset:function(e,t,n){var r,i,s,o,a,c,l=I.css(e,"position"),u=I(e),h={};"static"===l&&(e.style.position="relative"),a=u.offset(),s=I.css(e,"top"),c=I.css(e,"left"),("absolute"===l||"fixed"===l)&&(s+c).indexOf("auto")>-1?(o=(r=u.position()).top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(c)||0),y(t)&&(t=t.call(e,n,I.extend({},a))),null!=t.top&&(h.top=t.top-a.top+o),null!=t.left&&(h.left=t.left-a.left+i),"using"in t?t.using.call(e,h):u.css(h)}},I.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){I.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===I.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===I.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=I(e).offset()).top+=I.css(e,"borderTopWidth",!0),i.left+=I.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-I.css(r,"marginTop",!0),left:t.left-i.left-I.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===I.css(e,"position");)e=e.offsetParent;return e||ge}))}}),I.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;I.fn[e]=function(r){return ee(this,(function(e,r,i){var s;if(v(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===i)return s?s[t]:e[r];s?s.scrollTo(n?s.pageXOffset:i,n?i:s.pageYOffset):e[r]=i}),e,r,arguments.length)}})),I.each(["top","left"],(function(e,t){I.cssHooks[t]=et(m.pixelPosition,(function(e,n){if(n)return n=Ze(e,t),Ke.test(n)?I(e).position()[t]+"px":n}))})),I.each({Height:"height",Width:"width"},(function(e,t){I.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){I.fn[r]=function(i,s){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===s?"margin":"border");return ee(this,(function(t,n,i){var s;return v(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?I.css(t,n,a):I.style(t,n,i,a)}),t,o?i:void 0,o)}}))})),I.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){I.fn[t]=function(e){return this.on(t,e)}})),I.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),I.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){I.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;I.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return r=a.call(arguments,2),i=function(){return e.apply(t||this,r.concat(a.call(arguments)))},i.guid=e.guid=e.guid||I.guid++,i},I.holdReady=function(e){e?I.readyWait++:I.ready(!0)},I.isArray=Array.isArray,I.parseJSON=JSON.parse,I.nodeName=C,I.isFunction=y,I.isWindow=v,I.camelCase=ie,I.type=b,I.now=Date.now,I.isNumeric=function(e){var t=I.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},I.trim=function(e){return null==e?"":(e+"").replace(rn,"$1")},void 0===(n=function(){return I}.apply(t,[]))||(e.exports=n);var sn=r.jQuery,on=r.$;return I.noConflict=function(e){return r.$===I&&(r.$=on),e&&r.jQuery===I&&(r.jQuery=sn),I},void 0===i&&(r.jQuery=r.$=I),I}))},9928:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});class r{static has(e){return null!==this.get(e)}static get(e,t=!1){if(null===localStorage.getItem(e))return null;{const n=JSON.parse(localStorage.getItem(e)),r=Date.now()>n[1];return r&&localStorage.removeItem(e),!r||t?n[0]:null}}static getAndRefresh(e,t,n=216e5){const r=this.get(e,!0);return null===r?t.then((t=>(this.set(e,t,Date.now()+n),t))):(this.has(e)||t.then((t=>this.set(e,t,Date.now()+n))).catch(console.error),Promise.resolve(r))}static set(e,t,n=r.MAX_VALID_TIMESTAMP){const i=this.get(e),s=[t,n instanceof Date?n.getTime():n];return localStorage.setItem(e,JSON.stringify(s)),i}static remove(e){const t=this.get(e);return localStorage.removeItem(e),t}}r.MAX_VALID_TIMESTAMP=864e13;const i=r},908:(e,t,n)=>{"use strict";n.d(t,{c:()=>c});var r,i,s=n(9928);function o(e){let t,n=3,r=e%19+1,i=1+~~(e/100),s=~~(3*i/4)-12,o=(11*r+20+~~((8*i+5)/25)-5-s)%30;return o<0&&(o+=30),(25==o&&r>11||24==o)&&o++,(t=44-o)<21&&(t+=30),(t+=7-(~~(5*e/4)-s-10+t)%7)>31&&(t-=31,n=4),[e,n,t]}!function(e){let t;!function(e){e.evaluate=function(e,t=new Date){switch(e[0]){case"date is":return t.getMonth()+1===e[1]&&t.getDate()===e[2];case"is Easter Sunday":const n=o(t.getFullYear());return t.getMonth()+1===n[1]&&t.getDate()===n[2];case"is Easter Monday":const r=o(t.getFullYear()),i=new Date(r[0],r[1]-1,r[2]+1);return t.getMonth()===i.getMonth()&&t.getDate()===i.getDate()}}}(t=e.Condition||(e.Condition={}))}(i||(i={}));class a{static getSequence(e=new Date){const t=this.EMOJI_CONFIG.filter((({condition:t})=>i.Condition.evaluate(t,e))),n=0===t.length?this.DEFAULT_SEQUENCES:t.reduce(((e,t)=>({...e,...t.sequences})),{}),r=Object.values(n).reduce(((e,t)=>e+t),0);let s=Math.random()*r;for(const e in n){const t=n[e];if(s<=t)return e;s-=t}return Object.keys(n).at(-1)}static showLoadingScreen(e,t=!1){Array.from(this.loadingScreen.childNodes).forEach((e=>{e instanceof HTMLParagraphElement&&e.remove()})),this.onDOMContentLoaded().then((()=>document.body.toggleAttribute("loading",!0))),this.loadingScreen.classList.remove("fading");for(const t of new Intl.Segmenter("en-US",{granularity:"grapheme"}).segment(e)){const e=document.createElement("p");e.textContent=t.segment,this.loadingScreen.appendChild(e)}if(t)setTimeout((()=>{this.loadingScreen.classList.add("fading"),document.body.removeAttribute("loading")}),3e3);else{const e=Date.now(),t=setInterval((()=>{if(0===this.numLoading){document.body.removeAttribute("loading");const n=document.getElementById("split-view");n&&(n.style.opacity="1"),Array.from(document.getElementsByClassName("content")).forEach((e=>{e instanceof HTMLElement&&(e.style.opacity="1")})),this.loadingScreen.classList.add("fading"),clearInterval(t),console.log(`Loading done: ${Date.now()-e}ms`)}else console.info(`${this.numLoading} things still loading...`,...this.currentlyLoading)}),50)}}static get numLoading(){return this.currentlyLoading.length}static markLoadStart(e){this.currentlyLoading.push(e)}static markLoadEnd(e){const t=this.currentlyLoading.lastIndexOf(e);-1!==t&&this.currentlyLoading.splice(t,1)}static getElementsById(e){const t={};for(const n in e){const r=document.getElementById(n);if(null===r)throw new Error(`no element with id "${n}" found`);if(!(r instanceof e[n]))throw new Error(`element with id "${n}" exists, but is ${r}, not ${e[n].name}`);t[n]=r}return t}static onDOMContentLoaded(e={}){return this.DOMContentLoaded?Promise.resolve(this.getElementsById(e)):new Promise((t=>window.addEventListener("DOMContentLoaded",(()=>t(this.getElementsById(e))))))}static useDynamicContent(e,t,n=(e=>console.error(e))){this.markLoadStart(e),Promise.all([e,this.onDOMContentLoaded]).then((([n,r])=>{t(n),this.markLoadEnd(e)})).catch((e=>n(e)))}}r=a,a.DEFAULT_SEQUENCES={"🐐🧶🧦":1},a.EMOJI_CONFIG=s.c.get("loading-screen-config-fixed",!0)??[],s.c.has("loading-screen-config-fixed")||Promise.resolve().then(n.bind(n,8860)).then((e=>{(new e.default).getLoadingScreenConfig().then((e=>s.c.set("loading-screen-config-fixed",e,Date.now()+36e5)))})),a.loadingScreen=document.createElement("div"),(()=>{r.loadingScreen.id="loading-screen";const e=document.createElement("style");e.innerHTML='@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.0.woff2") format("woff2");unicode-range:U+1f1e6-1f1ff}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.1.woff2") format("woff2");unicode-range:U+200d,U+2620,U+26a7,U+fe0f,U+1f308,U+1f38c,U+1f3c1,U+1f3f3-1f3f4,U+1f6a9,U+e0062-e0063,U+e0065,U+e0067,U+e006c,U+e006e,U+e0073-e0074,U+e0077,U+e007f}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.2.woff2") format("woff2");unicode-range:U+23,U+2a,U+a9,U+ae,U+200d,U+203c,U+2049,U+20e3,U+2122,U+2139,U+2194-2199,U+21a9-21aa,U+23cf,U+23e9-23ef,U+23f8-23fa,U+24c2,U+25aa-25ab,U+25b6,U+25c0,U+25fb-25fe,U+2611,U+2622-2623,U+2626,U+262a,U+262e-262f,U+2638,U+2640,U+2642,U+2648-2653,U+2660,U+2663,U+2665-2666,U+2668,U+267b,U+267e-267f,U+2695,U+269b-269c,U+26a0,U+26a7,U+26aa-26ab,U+26ce,U+26d4,U+2705,U+2714,U+2716,U+271d,U+2721,U+2733-2734,U+2747,U+274c,U+274e,U+2753-2755,U+2757,U+2764,U+2795-2797,U+27a1,U+27b0,U+27bf,U+2934-2935,U+2b05-2b07,U+2b1b-2b1c,U+2b55,U+3030,U+303d,U+3297,U+3299,U+fe0f,U+1f170-1f171,U+1f17e-1f17f,U+1f18e,U+1f191-1f19a,U+1f201-1f202,U+1f21a,U+1f22f,U+1f232-1f23a,U+1f250-1f251,U+1f310,U+1f3a6,U+1f3b5-1f3b6,U+1f3bc,U+1f3e7,U+1f441,U+1f499-1f49c,U+1f49f-1f4a0,U+1f4a2,U+1f4ac-1f4ad,U+1f4b1-1f4b2,U+1f4b9,U+1f4db,U+1f4f2-1f4f6,U+1f500-1f50a,U+1f515,U+1f518-1f524,U+1f52f-1f53d,U+1f549,U+1f54e,U+1f5a4,U+1f5e8,U+1f5ef,U+1f6ab,U+1f6ad-1f6b1,U+1f6b3,U+1f6b7-1f6bc,U+1f6be,U+1f6c2-1f6c5,U+1f6d0-1f6d1,U+1f6d7,U+1f6dc,U+1f7e0-1f7eb,U+1f7f0,U+1f90d-1f90e,U+1f9e1,U+1fa75-1fa77,U+1faaf}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.3.woff2") format("woff2");unicode-range:U+231a-231b,U+2328,U+23f0-23f3,U+2602,U+260e,U+2692,U+2694,U+2696-2697,U+2699,U+26b0-26b1,U+26cf,U+26d1,U+26d3,U+2702,U+2709,U+270f,U+2712,U+fe0f,U+1f302,U+1f321,U+1f392-1f393,U+1f3a9,U+1f3bd,U+1f3ee,U+1f3f7,U+1f3fa,U+1f451-1f462,U+1f484,U+1f489-1f48a,U+1f48c-1f48e,U+1f4a1,U+1f4a3,U+1f4b0,U+1f4b3-1f4b8,U+1f4bb-1f4da,U+1f4dc-1f4f1,U+1f4ff,U+1f50b-1f514,U+1f516-1f517,U+1f526-1f529,U+1f52c-1f52e,U+1f550-1f567,U+1f56f-1f570,U+1f576,U+1f587,U+1f58a-1f58d,U+1f5a5,U+1f5a8,U+1f5b1-1f5b2,U+1f5c2-1f5c4,U+1f5d1-1f5d3,U+1f5dc-1f5de,U+1f5e1,U+1f5f3,U+1f6aa,U+1f6ac,U+1f6bd,U+1f6bf,U+1f6c1,U+1f6cb,U+1f6cd-1f6cf,U+1f6d2,U+1f6e0-1f6e1,U+1f6f0,U+1f97b-1f97f,U+1f9af,U+1f9ba,U+1f9e2-1f9e6,U+1f9ea-1f9ec,U+1f9ee-1f9f4,U+1f9f7-1f9ff,U+1fa71-1fa74,U+1fa79-1fa7b,U+1fa86,U+1fa91-1fa93,U+1fa96,U+1fa99-1faa0,U+1faa2-1faa7,U+1faaa-1faae}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.4.woff2") format("woff2");unicode-range:U+265f,U+26bd-26be,U+26f3,U+26f8,U+fe0f,U+1f004,U+1f0cf,U+1f380-1f384,U+1f386-1f38b,U+1f38d-1f391,U+1f396-1f397,U+1f399-1f39b,U+1f39e-1f39f,U+1f3a3-1f3a5,U+1f3a7-1f3a9,U+1f3ab-1f3b4,U+1f3b7-1f3bb,U+1f3bd-1f3c0,U+1f3c5-1f3c6,U+1f3c8-1f3c9,U+1f3cf-1f3d3,U+1f3f8-1f3f9,U+1f47e,U+1f4e2,U+1f4f7-1f4fd,U+1f52b,U+1f579,U+1f58c-1f58d,U+1f5bc,U+1f6f7,U+1f6f9,U+1f6fc,U+1f93f,U+1f941,U+1f945,U+1f947-1f94f,U+1f9e7-1f9e9,U+1f9f5-1f9f6,U+1fa70-1fa71,U+1fa80-1fa81,U+1fa83-1fa85,U+1fa87-1fa88,U+1fa94-1fa95,U+1fa97-1fa98,U+1faa1,U+1faa9}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.5.woff2") format("woff2");unicode-range:U+2693,U+26e9-26ea,U+26f1-26f2,U+26f4-26f5,U+26fa,U+26fd,U+2708,U+fe0f,U+1f301,U+1f303,U+1f306-1f307,U+1f309,U+1f310,U+1f3a0-1f3a2,U+1f3aa,U+1f3cd-1f3ce,U+1f3d5,U+1f3d7-1f3db,U+1f3df-1f3e6,U+1f3e8-1f3ed,U+1f3ef-1f3f0,U+1f488,U+1f492,U+1f4ba,U+1f54b-1f54d,U+1f5fa-1f5ff,U+1f680-1f6a2,U+1f6a4-1f6a8,U+1f6b2,U+1f6d1,U+1f6d5-1f6d6,U+1f6dd-1f6df,U+1f6e2-1f6e5,U+1f6e9,U+1f6eb-1f6ec,U+1f6f3-1f6f6,U+1f6f8,U+1f6fa-1f6fb,U+1f9bc-1f9bd,U+1f9ed,U+1f9f3,U+1fa7c}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.6.woff2") format("woff2");unicode-range:U+2615,U+fe0f,U+1f32d-1f330,U+1f336,U+1f33d,U+1f345-1f37f,U+1f382,U+1f52a,U+1f942-1f944,U+1f950-1f96f,U+1f99e,U+1f9aa,U+1f9c0-1f9cb,U+1fad0-1fadb}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.7.woff2") format("woff2");unicode-range:U+200d,U+2600-2601,U+2603-2604,U+2614,U+2618,U+26a1,U+26c4-26c5,U+26c8,U+26f0,U+2728,U+2744,U+2b1b,U+2b50,U+fe0f,U+1f300,U+1f304-1f305,U+1f308,U+1f30a-1f30f,U+1f311-1f321,U+1f324-1f32c,U+1f331-1f335,U+1f337-1f33c,U+1f33e-1f344,U+1f3d4,U+1f3d6,U+1f3dc-1f3de,U+1f3f5,U+1f400-1f43f,U+1f490,U+1f4a7,U+1f4ab,U+1f4ae,U+1f525,U+1f54a,U+1f573,U+1f577-1f578,U+1f648-1f64a,U+1f940,U+1f980-1f9ae,U+1f9ba,U+1fa90,U+1faa8,U+1fab0-1fabd,U+1fabf,U+1face-1facf,U+1fae7}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.8.woff2") format("woff2");unicode-range:U+200d,U+2640,U+2642,U+2695-2696,U+26f7,U+26f9,U+2708,U+2764,U+fe0f,U+1f33e,U+1f373,U+1f37c,U+1f384-1f385,U+1f393,U+1f3a4,U+1f3a8,U+1f3c2-1f3c4,U+1f3c7,U+1f3ca-1f3cc,U+1f3eb,U+1f3ed,U+1f3fb-1f3ff,U+1f466-1f478,U+1f47c,U+1f481-1f483,U+1f486-1f487,U+1f48b,U+1f48f,U+1f491,U+1f4bb-1f4bc,U+1f527,U+1f52c,U+1f574-1f575,U+1f57a,U+1f645-1f647,U+1f64b,U+1f64d-1f64e,U+1f680,U+1f692,U+1f6a3,U+1f6b4-1f6b6,U+1f6c0,U+1f6cc,U+1f91d,U+1f926,U+1f930-1f931,U+1f934-1f93a,U+1f93c-1f93e,U+1f977,U+1f9af-1f9b3,U+1f9b8-1f9b9,U+1f9bc-1f9bd,U+1f9cc-1f9cf,U+1f9d1-1f9df,U+1fa82,U+1fac3-1fac5}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.9.woff2") format("woff2");unicode-range:U+200d,U+261d,U+2620,U+2639-263a,U+2665,U+270a-270d,U+2728,U+2763-2764,U+2b50,U+fe0f,U+1f31a-1f31f,U+1f32b,U+1f383,U+1f389,U+1f3fb-1f3ff,U+1f440-1f450,U+1f463-1f465,U+1f479-1f47b,U+1f47d-1f480,U+1f485,U+1f48b-1f48c,U+1f493-1f49f,U+1f4a4-1f4a6,U+1f4a8-1f4ab,U+1f4af,U+1f525,U+1f573,U+1f590,U+1f595-1f596,U+1f5a4,U+1f5e3,U+1f600-1f644,U+1f648-1f64a,U+1f64c,U+1f64f,U+1f90c-1f925,U+1f927-1f92f,U+1f932-1f933,U+1f970-1f976,U+1f978-1f97a,U+1f9a0,U+1f9b4-1f9b7,U+1f9bb,U+1f9be-1f9bf,U+1f9d0,U+1f9e0-1f9e1,U+1fa75-1fa79,U+1fac0-1fac2,U+1fae0-1fae6,U+1fae8,U+1faf0-1faf8}@font-face{font-family:"Noto Color Emoji";font-style:normal;font-weight:400;font-display:swap;src:url("../fonts/emojis/Yq6P-KqIXTD0t4D9z1ESnKM3-HpFabsE4tq3luCC7p-aXxcn.10.woff2") format("woff2");unicode-range:U+200d,U+2194-2195,U+2640,U+2642,U+26d3,U+27a1,U+fe0f,U+1f344,U+1f34b,U+1f3c3,U+1f3fb-1f3ff,U+1f426,U+1f468-1f469,U+1f4a5,U+1f525,U+1f642,U+1f6b6,U+1f7e9,U+1f7eb,U+1f9af,U+1f9bc-1f9bd,U+1f9ce,U+1f9d1-1f9d2}:root{--google-font-color-notocoloremoji:colrv1}#loading-screen{position:fixed;top:0px;left:0px;width:100vw;height:100vh;display:flex;flex-direction:row;justify-content:center;align-items:center;gap:1em;font-size:4em;background:#fff;background:radial-gradient(circle, rgb(255, 255, 255) 0%, rgb(255, 255, 255) 66%, rgb(226, 226, 226) 100%);user-select:none;z-index:999}#loading-screen>*{font-size:4rem;margin:0px;user-select:none;font-family:"Noto Color Emoji" !important;--anim-easing: cubic-bezier(0.445, 0.05, 0.55, 0.95)}#loading-screen>*:nth-child(3n-2){animation:jiggle 1s var(--anim-easing) 0ms infinite normal forwards}#loading-screen>*:nth-child(3n-1){animation:jiggle 1s var(--anim-easing) -333ms infinite normal forwards}#loading-screen>*:nth-child(3n){animation:jiggle 1s var(--anim-easing) -666ms infinite normal forwards}#loading-screen.fading{animation:fade-out 200ms ease-out 0ms 1 normal both}@keyframes jiggle{0%,100%{transform:translateY(-2rem)}50%{transform:translateY(2rem)}}@keyframes fade-out{0%{opacity:1}100%{opacity:0;display:none;pointer-events:none}}@media(max-aspect-ratio: 3/4){@keyframes jiggle{0%,100%{transform:translateX(-2rem)}50%{transform:translateX(2rem)}}#loading-screen{flex-direction:column}}',r.loadingScreen.appendChild(e)})(),(()=>{document.body.appendChild(r.loadingScreen);const e=new Date;r.showLoadingScreen(r.getSequence(e))})(),a.currentlyLoading=[],a.DOMContentLoaded=!1,r.markLoadStart(window),window.addEventListener("DOMContentLoaded",(()=>{r.DOMContentLoaded=!0,r.markLoadEnd(window)}));const c=a},5245:(e,t,n)=>{"use strict";n.d(t,{c:()=>l});var r=n(7588),i=n.n(r),s=n(6928),o=n(4388),a=n(6316);class c extends HTMLElement{static useClickInteraction(){return o.c.isSlimmerOrEq(o.c.Viewport.DESKTOP_SLIM)}set foldDir(e){this._foldDir=e,this.arrow.textContent="chevron_right"}set heading(e){const t=this._heading;e!==t&&(t.replaceWith(e),this._heading=e)}get heading(){return this._heading}set arrowHidden(e){e?this.arrow.setAttribute("hidden",""):this.arrow.removeAttribute("hidden")}get contents(){return this._contents}get contentsPosition(){return this._contentsPosition}set contentsPosition(e){this._contents.classList.remove("absolute","static"),this._contents.classList.add(e),this._contentsPosition=e}get isOpen(){return this.hasAttribute("open")}constructor(e,t,n,r,l,u){super(),this.style.position="relative",this.style.display="block",this._foldDir=t??(this.hasAttribute("fold-dir")?this.getAttribute("fold-dir"):null)??"right",this.closingDelay=r??a.c.getAttrAsNumber(this,"closing-delay")??0;const h=Array.from(this.children);this._heading=s.c.h4(e??this.getAttribute("heading")??"").class("heading").make(),this.arrow=s.c.h4("chevron_right").class("arrow","light-weight","icon").make(),this.topper=super.appendChild(s.c.div().class("topper","flex-columns","cross-axis-center").children(this._heading,this.arrow).make()),n??(n=a.c.getAttrAs(this,"contents-position",(e=>"absolute"===e||"static"===e))??"absolute"),this._contents=super.appendChild(s.c.div().class("contents",n).children(...h).make()),this.contentsPosition=n,l??(l=a.c.getAttrAs(this,"open-on")??"mouseenter"),u??(u=a.c.getAttrAs(this,"close-on")??"mouseleave"),i()(this._contents).hide(),l===u?this.topper.addEventListener(l,(()=>this.isOpen?this.close():this.open())):(this.topper.addEventListener(l,(()=>{c.useClickInteraction()||this.open()})),this.topper.addEventListener("click",(e=>{c.useClickInteraction()&&(this.isOpen?this.close():this.open(),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())})),this.addEventListener(l,(()=>clearTimeout(this.closingTimeout))),this.addEventListener(u,(()=>{c.useClickInteraction()||(this.closingTimeout=setTimeout((()=>this.close()),c.useClickInteraction()?0:this.closingDelay))})),document.body.addEventListener("click",(e=>{c.useClickInteraction()&&e.target instanceof Node&&!this.contains(e.target)&&(this.close(),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}))),o.c.onChange((()=>this.topper.classList.toggle("click-action",c.useClickInteraction())),!0)}appendChild(e){return this._contents.appendChild(e)}append(...e){return this._contents.append(...e)}open(){if(!this.hasAttribute("disabled")){switch(this._heading.getBoundingClientRect(),this._foldDir){case"down":this._contents.style.left="0px",this._contents.style.top=this.clientHeight+"px",this.arrow.style.rotate="90deg";break;case"right":this._contents.style.left=this.parentElement.getBoundingClientRect().right-this.getBoundingClientRect().left+"px",this._contents.style.top="0px",this.arrow.style.rotate="90deg"}if(this._contents.style.setProperty("--top",this._contents.style.top??"0px"),"absolute"===this.contentsPosition){let e=c.topFolderContentZIndex+1;e>=300&&(e=280),this.contents.style.zIndex=(c.topFolderContentZIndex=e).toString()}i()(this._contents).stop().slideDown(200,(()=>this._contents.style.height="")),this.setAttribute("open","")}}close(){i()(this._contents).stop().slideUp(200),this.arrow.style.rotate="0deg",this.removeAttribute("open")}}c.topFolderContentZIndex=280;const l=c;customElements.define("folder-element",c)},8332:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});var r=n(6928);class i extends HTMLElement{get value(){return this._value}set value(e){this._value!==e&&(this.optionElements.forEach(((t,n)=>{this.options[n][0]===e?t.setAttribute("selected",""):t.removeAttribute("selected")})),this._value=e,this.dispatchEvent(new Event("input")),this.dispatchEvent(new Event("change")))}constructor(...e){if(super(),0===e.length)this.classList.add("flex-columns","cross-axis-center"),this.options=[],this.optionElements=[],this._value=void 0;else{if(e.map((e=>e[0])).some(((e,t,n)=>n.indexOf(e)!==t)))throw new Error(`duplicate value: ${e.map((e=>e[0])).find(((e,t,n)=>n.indexOf(e)!==t))}`);this.options=e.map((e=>[e[0],e[1]])),this._value=(e.find((e=>e[3]))??e[0])[0],this.classList.add("flex-columns","cross-axis-center"),this.optionElements=e.map((e=>r.c.p(e[1]).class("icon","option","click-action").attr("selected",this._value===e[0]?"":null).tooltip(e[2]??null).on("click",(()=>this.value=e[0])).make())),this.optionElements.forEach(((e,t)=>{this.appendChild(e),t!==this.optionElements.length-1&&this.appendChild(r.c.div(void 0,"separator").make())}))}}addOption(e,t,n,i=!1){const s=e;return 0!==this.options.length&&this.append(r.c.div(void 0,"separator").make()),this.options.push([s,t]),this.optionElements.push(this.appendChild(r.c.p(t).class("icon","option","click-action").tooltip(n??null).on("click",(()=>this.value=s)).make())),i&&(this.optionElements.forEach(((e,t)=>{this.options[t][0]===s?e.setAttribute("selected",""):e.removeAttribute("selected")})),this._value=s),this}}customElements.define("icon-selector",i)},3868:(e,t,n)=>{"use strict";n.d(t,{c:()=>p});var r,i=n(4296),s=n(3935),o=n(2464),a=n(8144),c=n(8356),l=n(6316),u=n(6928),h=n(9796),d=n(908);class f extends HTMLElement{static getFileSizeString(e){let t=0,n=e;for(;n>=1e3;)[t,n]=[t+1,n/1e3];return n.toFixed(1)+this.FILE_SIZE_UNITS[t]}get origin(){return this._origin}set origin(e){e!==this._origin&&(this._origin=e,this.setAttribute("origin",e),this.refresh())}get src(){return this._src}set src(e){e!==this._src&&(this._src=e,this.setAttribute("src",e),this.refresh())}refresh(){const e="external"===this.origin?c.c.getInfo(this.src):"firebase-storage-protected"===this.origin?r.getInfoFromFirebase("beveiligd",this.src):r.getInfoFromFirebase("openbaar",this.src);return d.c.markLoadStart(this),e.then((e=>{this.classList.remove("error"),this.filetypeIcon.textContent=r.FILE_TYPE_ICONS[e.fileType],this.fileNameLabel.textContent=e.name,this.fileSizeLabel.textContent=e.size?r.getFileSizeString(e.size):"",this.downloadButton.textContent="download",this.downloadButton.title="Bestand downloaden",this.downloadButton.classList.add("click-action"),this.downloadButton.setAttribute("href",e.href),this.downloadButton.setAttribute("download",""),d.c.markLoadEnd(this)})).catch((e=>{this.classList.add("error"),this.filetypeIcon.textContent="error",this.fileNameLabel.textContent=e instanceof Error?e.message:"Er ging iets mis",this.fileSizeLabel.textContent="",this.downloadButton.textContent="file_download_off",this.downloadButton.title="",this.downloadButton.classList.remove("click-action"),this.downloadButton.removeAttribute("href"),this.downloadButton.removeAttribute("download"),d.c.markLoadEnd(this)}))}constructor(e,t){super(),this.initElement(),this._origin=e??l.c.getAttrAs(this,"origin",h.s.checkType)??"firebase-storage-public",this._src=t??this.getAttribute("src")??"",this.refresh()}initElement(){this.style.display="flex",this.classList.add("flex-columns","cross-axis-center","in-section-gap"),this.filetypeIcon=this.appendChild(u.c.p("collections_bookmark").class("icon","file-type-icon").make()),this.appendChild(u.c.div(void 0,"file-info","flex-rows").children(this.fileNameLabel=u.c.p("Bestandsnaam").class("file-name","no-margin").make(),this.fileSizeLabel=u.c.p("Bestandsgrootte").class("file-size","no-margin").make()).make()),this.downloadButton=this.appendChild(u.c.a(void 0,"download").openInNewTab(!0).tooltip("Bestand downloaden").class("icon","click-action","download-icon").on("click",((e,t)=>{if(!this.classList.contains("error")){const n=t.getAttribute("href");n&&(e.preventDefault(),window.open(n,"_blank"))}})).make())}static getInfoFromFirebase(e,...t){if("beveiligd"!==e||this.CAN_DOWNLOAD_PROTECTED_ATTACHMENTS){const n=[e,...t].join("/"),r=(0,i.IL)(a.mw,n);return Promise.all([(0,i.GO)(r),(0,i.Kq)(r)]).then((([e,t])=>({href:t,name:e.name,contentType:e.contentType??"unknown/unknown",fileType:c.O.fromContentType(e.contentType??"unknown/unknown"),size:e.size,lastModified:new Date(e.updated)}))).catch((e=>{if(!(e instanceof i.Gf))throw e;switch(e.code){case"storage/object-not-found":throw new Error("Kan bestand niet vinden",{cause:"not found"});case"storage/unauthorized":throw new Error("Geen toegang tot bestand",{cause:"missing permissions"});default:throw new Error("Er ging iets mis",{cause:"unknown"})}}))}return Promise.reject(new Error("Geen toegang tot bestand",{cause:"missing permissions"}))}}r=f,f.CAN_DOWNLOAD_PROTECTED_ATTACHMENTS=!1,(0,s.kL)(o.c.Permission.DOWNLOAD_PROTECTED_FILES,(e=>r.CAN_DOWNLOAD_PROTECTED_ATTACHMENTS=e),!0,!0),f.FILE_SIZE_UNITS=["B","kB","MB","GB","TB","PB","YB"],f.FILE_TYPE_ICONS={image:"photo_library",application:"collections_bookmark",audio:"library_music",example:"quiz",font:"font_download",model:"deployed_code",text:"library_books",video:"video_library",unknown:"quiz","compressed-folder":"folder_zip",pdf:"picture_as_pdf"};const p=f;d.c.onDOMContentLoaded().then((()=>customElements.define("multisource-attachment",f))),Error},8828:(e,t,n)=>{"use strict";n.d(t,{c:()=>f});var r,i=n(4296),s=n(3935),o=n(2464),a=n(8144),c=n(6316),l=n(9796),u=n(6928),h=n(908);class d extends HTMLElement{get origin(){return this._origin}set origin(e){e!==this._origin&&(this._origin=e,this.setAttribute("origin",e),this.refresh())}get src(){return this._src}set src(e){e!==this._src&&(this._src=e,this.setAttribute("src",e),this.refresh())}set alt(e){this.image.alt=e}showError(e){this.classList.add("error"),this.image.removeAttribute("src"),this.image.toggleAttribute("hidden",!0),this.errorMessage.lastChild.textContent=e??"Er ging iets mis.",this.errorMessage.removeAttribute("hidden")}refresh(){h.c.markLoadStart(this),("external"===this.origin?Promise.resolve(this.src):"firebase-storage-protected"===this.origin?r.getSrcFromFirebase("beveiligd",this.src):r.getSrcFromFirebase("openbaar",this.src)).then((e=>{this.classList.remove("error"),h.c.markLoadStart(this.image),this.image.addEventListener("error",(()=>{this.showError("Kan afbeelding niet vinden"),h.c.markLoadEnd(this.image)}),{once:!0}),this.image.addEventListener("load",(()=>{const t=!new URL(e).pathname.endsWith(".svg")&&(this.image.naturalWidth>this.sizeWarning||this.image.naturalHeight>this.sizeWarning);this.image.classList.toggle("flashing",t)?this.image.title="Dit bestand is waarschijnlijk te groot, het wordt geadviseerd op een kleiner formaat te gebruiken!":this.image.title="",h.c.markLoadEnd(this.image)}),{once:!0}),this.image.src=e,this.image.removeAttribute("hidden"),this.errorMessage.toggleAttribute("hidden",!0)})).catch((e=>{this.showError(e instanceof Error?e.message:"Er ging iets mis.")})).finally((()=>{h.c.markLoadEnd(this)}))}constructor(e,t,n=1/0){super(),this.initElement(),this._origin=e??c.c.getAttrAs(this,"origin",l.s.checkType)??"firebase-storage-public",this._src=t??this.getAttribute("src")??"",this.sizeWarning=n,this.refresh()}initElement(){this.style.display="flex",this.classList.add("flex-rows","main-axis-center","cross-axis-center"),this.image=this.appendChild(u.c.img().attr("hidden").make()),this.errorMessage=this.appendChild(u.c.div(void 0,"error-message","no-margin","flex-columns","main-axis-center","cross-axis-center","in-section-gap").attr("hidden").children(u.c.p("broken_image").class("icon"),u.c.p().class("no-margin").make()).make())}static getSrcFromFirebase(e,...t){if("beveiligd"!==e||this.CAN_DOWNLOAD_PROTECTED_FILES){const n=[e,...t].join("/"),r=(0,i.IL)(a.mw,n);return Promise.all([(0,i.GO)(r),(0,i.Kq)(r)]).then((([e,t])=>{if(e.contentType?.startsWith("image/"))return t;throw new Error("Bestand is geen afbeelding",{cause:"non-image file"})})).catch((e=>{if(!(e instanceof i.Gf))throw e;switch(e.code){case"storage/object-not-found":throw new Error("Kan afbeelding niet vinden",{cause:"not found"});case"storage/unauthorized":throw new Error("Geen toegang tot afbeelding",{cause:"missing permissions"});default:throw new Error("Er ging iets mis",{cause:"unknown"})}}))}return Promise.reject(new Error("Geen toegang tot afbeelding",{cause:"missing permissions"}))}}r=d,d.CAN_DOWNLOAD_PROTECTED_FILES=!1,(0,s.kL)(o.c.Permission.DOWNLOAD_PROTECTED_FILES,(e=>r.CAN_DOWNLOAD_PROTECTED_FILES=e),!0,!0);const f=d;customElements.define("multisource-image",d)},9368:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(6928),i=n(908),s=n(6316);class o extends HTMLElement{get value(){return this._value}get checked(){return this._value}set value(e){if(e!==this._value){this._value=e,e?this.setAttribute("on",""):this.removeAttribute("on"),this.indicator&&(this.indicator.textContent=e?"check":"close");for(const t of this.dependants)e!==this.inverted?s.c.enable(t):s.c.disable(t);this.dispatchEvent(new InputEvent("input",{bubbles:!0})),this.dispatchEvent(new Event("change",{bubbles:!0}))}}get disabled(){return this.hasAttribute("disabled")}set disabled(e){this.toggleAttribute("disabled",e)}constructor(e=!1,t,n=!1){super(),this.dependants=[],this.inverted=n||this.hasAttribute("inverted"),t??(t=this.getAttribute("dependants")??void 0),t&&(Array.isArray(t)||(t=[t]),t.forEach((e=>{"string"==typeof e?e.split(",").map((e=>e.trim())).forEach((e=>{const t=document.getElementById(e);t&&this.dependants.push(t)})):this.dependants.push(e)}))),e||(e=this.hasAttribute("on")),[this.value,this._value]=[e,e],this.initElement()}initElement(){this.appendChild(r.c.div(void 0,"knob","click-action").make()),this.indicator=this.appendChild(r.c.h4(this._value?"check":"close").class("icon","indicator").make()),this.addEventListener("click",(()=>this.toggle()))}toggle(){return this.value=!this.value,this.value}}i.c.onDOMContentLoaded().then((()=>customElements.define("switch-input",o)))},1176:(e,t,n)=>{"use strict";n.d(t,{c:()=>O});var r=n(6928),i=n(6316),s=n(992),o=n(9684);class a{static isInStyleTag(e,t){return null!==this.getContainingStyleTag(e,t)}static getContainingStyleTag(e,t){const n=getSelection();if(n&&0!==n.rangeCount){const r=n.getRangeAt(0);return i.c.queryAncestors(r.commonAncestorContainer,`.${e}`,!0).filter((e=>void 0===t||e.getAttribute("value")===t))[0]??null}return null}static makeTempTextNode(e,t=(()=>{}),n=(()=>{})){const i=r.c.text("​"),s=()=>{if(0!==i.textContent.replace("​","").length){const n=i.textContent.indexOf("​");-1!==n&&i.replaceData(n,1,""),t(),e.removeEventListener("keyup",o),e.removeEventListener("focusout",o),e.removeEventListener("input",s)}};e.addEventListener("input",s);const o=t=>{if(!t.defaultPrevented){const r=0===(i.textContent??"").replace("​","").length,a=getSelection(),c=null!==a&&0!==a.rangeCount&&a.getRangeAt(0).commonAncestorContainer.contains(i);!r||t instanceof KeyboardEvent&&c||(i.remove(),n(),e.removeEventListener("keyup",o),e.removeEventListener("focusout",o),e.removeEventListener("input",s))}};return e.addEventListener("keyup",o),e.addEventListener("focusout",o),i}static getStyleMap(e,t=a.DEFAULT_VALUES_BY_CLASS[e]){switch(e){case"small":case"big":case"bold":case"italic":case"underlined":case"strikethrough":default:return{};case"text-color":return{color:t};case"background-color":return{backgroundColor:t}}}static applyStyleTag(e,t,n=a.DEFAULT_VALUES_BY_CLASS[t]){let o=!1;s.c.deepReplaceAll(e,"​","");const c=getSelection();if(c&&0!==c.rangeCount){const l=c.getRangeAt(0),u=l.collapsed,h=l.commonAncestorContainer,d=i.c.queryAncestors(h,`.${t}`,!0)[0],f=void 0!==d;o=f&&d.getAttribute("value")!==n;let p=Array.from(l.extractContents().childNodes);const g=[];if(f)if(i.c.isChain(d))p.toReversed().forEach((e=>l.insertNode(e))),d.replaceWith(...Array.from(d.childNodes));else{const t=i.c.getChainEnd(d),n=document.createElement("div");l.insertNode(n);const r=Array.from(t.childNodes);d.replaceWith(...Array.from(d.childNodes)),r.forEach((t=>{const r=d.cloneNode();if(u&&n.previousSibling===t){g.push(r),s.c.swap(t,r),r.appendChild(t);const n=r.parentElement.insertBefore(this.makeTempTextNode(e),r.nextSibling);l.selectNode(n),l.collapse()}else s.c.swap(t,r),r.appendChild(t)})),n.parentElement?.replaceWith(...p)}else{const i=r.c.span().class(t).attr("value",n).style(this.getStyleMap(t,n)).children(...p).make();if(l.insertNode(i),0===p.length){const t=i.appendChild(this.makeTempTextNode(e,(()=>{}),(()=>{i.remove(),e.normalize()})));l.selectNode(t),l.collapse()}else l.selectNodeContents(i)}p=p.flatMap((e=>s.c.getLeafNodes(e)));for(const t of a.STYLE_TAG_CLASSES)Array.from(e.getElementsByClassName(t)).forEach((e=>{0!==i.c.queryAncestors(e,`.${t}`).length&&e.replaceWith(...Array.from(e.childNodes))}));let m,y;u&&(m=document.createElement("div"),y=Array.from(l.extractContents().childNodes),l.insertNode(m));for(const t of a.STYLE_TAG_CLASSES)Array.from(e.getElementsByClassName(t)).forEach((e=>{if(!g.includes(e)){let n=e.nextSibling;for(;null!==n&&n.nodeType===Node.TEXT_NODE&&0===n.textContent.length;)n=n.nextSibling;n instanceof Element&&n.classList.contains(t)&&n.getAttribute("value")===e.getAttribute("value")&&(n.prepend(...Array.from(e.childNodes)),e.remove())}}));u&&(l.setStartAfter(m),l.setEndAfter(m),m.replaceWith(...y));const v=e.getElementsByTagName("span");Array.from(v).forEach((e=>{e.textContent||e.remove()})),0!==p.length&&(l.setStartBefore(p[0]),l.setEndAfter(p.at(-1))),e.normalize(),s.c.onEach(e,(e=>{if(e.nodeType===Node.TEXT_NODE&&e.textContent.length>1){const t=e,n=t.textContent.indexOf("​");-1!==n&&t.deleteData(n,1)}}))}return o?this.applyStyleTag(e,t,n):this.isInStyleTag(t,n)}}!function(e){e.DEFAULT_VALUES_BY_CLASS={small:null,big:null,bold:null,italic:null,underlined:null,strikethrough:null,"text-color":"#000000","background-color":"#000000"},e.STYLE_TAG_CLASSES=o.c.keys(e.DEFAULT_VALUES_BY_CLASS)}(a||(a={}));const c=a;var l=n(8392),u=n(8440),h=n(4440),d=n(1244),f=n(3236),p=n(3868),g=n(8828),m=n(9368);class y extends HTMLElement{constructor(e){super(),this.src=this.getAttribute("src")??e,this.initElement()}initElement(){this.contents=this.appendChild(document.createElement("iframe")),this.contents.classList.add("contents"),this.contents.src=this.src,this.setAttribute("src",this.src)}}customElements.define("iframe-container",y);var v=n(908),E=n(4388),w=n(7936),_=n(3935),b=n(928),T=n(1724),S=n(2464),I=n(9560),A=n(8144),C=n(5752),k=n(8036),N=n(8356);class D extends HTMLElement{constructor(){super(),this.initElement()}initElement(){this.classList.add("boxed","flex-rows","center-content","in-section-gap"),this.appendChild(r.c.div(void 0,"flex-columns","main-axis-space-between","cross-axis-center","min-section-gap").children(r.c.p("Anonieme suggestie?").class("italic","no-margin"),this.anonymousSwitch=new m.c(!1)).make()),this.anonymousSwitch.addEventListener("input",(()=>this.feedbackText.lastElementChild.toggleAttribute("hidden",this.anonymousSwitch.value))),this.subjectInput=this.appendChild(r.c.input.text().class("subject-input").attr("invalid").placeholder("Onderwerp...").maxLength(128).make()),this.bodyInput=this.appendChild(r.c.textarea().class("message-input").attr("invalid").placeholder("Bericht...").maxLength(5096).attr("no-resize").make()),this.submitButton=this.appendChild(r.c.button().class("flex-columns","cross-axis-center","in-section-gap").attr("disabled").children(r.c.h4("Versturen"),r.c.h4("send").class("icon")).make()),this.feedbackText=this.appendChild(r.c.div(void 0,"feedback","flex-rows","center-content","in-section-gap","section-padding").attr("hidden").children(r.c.h4("Bedankt voor je suggestie!").class("no-margin"),r.c.h4("We zullen z.s.m. contact met je opnemen.").class("subtitle","no-margin")).make()),Promise.all([(0,A.iA)(),(0,_.qM)(S.c.Permission.CREATE_IDEA_BOX_SUBMISSIONS)]).then((([e,t])=>{e?t.CREATE_IDEA_BOX_SUBMISSIONS?(this.addEventListener("input",(()=>{this.submitButton.disabled=!this.subjectInput.value||!this.bodyInput.value,this.subjectInput.toggleAttribute("invalid",0===this.subjectInput.value.length),this.bodyInput.toggleAttribute("invalid",0===this.bodyInput.value.length)})),this.submitButton.addEventListener("click",(()=>{this.submitButton.disabled=!0,D.USER_DB.getById(e.uid).then((t=>{if(t){const n=new T.O(k.c.generateID(),this.anonymousSwitch.value?"anonymous":{id:e.uid,name:`${t?.first_name} ${t?.family_name}`},new Date,this.subjectInput.value,this.bodyInput.value);D.SUBMISSION_DB.write(n).then((()=>{this.childNodes.forEach((e=>{e instanceof HTMLElement&&(e.hidden=!0),this.feedbackText.hidden=!1}))})).catch((e=>{C.c.error((0,w.c)(e)),this.submitButton.disabled=!1}))}else C.c.error((0,w.c)(void 0)),this.submitButton.disabled=!1})).catch((e=>{C.c.error((0,w.c)(e)),this.submitButton.disabled=!1}))}))):(this.anonymousSwitch.disabled=this.subjectInput.disabled=this.bodyInput.disabled=!0,this.submitButton.firstChild.textContent="Versturen niet mogelijk",this.submitButton.lastChild.textContent="cancel_schedule_send"):(this.anonymousSwitch.disabled=this.subjectInput.disabled=this.bodyInput.disabled=!0,this.submitButton.firstChild.textContent="Log in om te gebruiken",this.submitButton.lastChild.textContent="login",this.submitButton.addEventListener("click",(()=>location.href=N.c.createLinkBackURL("/inloggen.html",location.href).toString())))}))}}D.SUBMISSION_DB=new b.c,D.USER_DB=new I.c;const x=D;customElements.define("idea-box",D);class R extends HTMLElement{set isCompact(e){this.toggleAttribute("compact",e)}get isCompact(){return this.hasAttribute("compact")}get value(){return f.c.serialize(this.body)}set value(e){this.selectedElement=null,s.c.empty(this.body);const t=f.c.deserialize(e);for(const e of t)e instanceof HTMLElement?this.insert(R.inferSectionName(e),e,[this.body,1/0]):e.nodeType===Node.TEXT_NODE?this.insert("paragraph",r.c.p(e.textContent).make(),[this.body,1/0]):this.body.appendChild(e)}get placeholder(){return this.style.getPropertyValue("--placeholder")}set placeholder(e){this.style.setProperty("--placeholder",`"${e}"`)}set selectedElement(e){const t=this._selectedElement;t?.removeAttribute("selected"),this._selectedElement=e,e?.toggleAttribute("selected",!0)}get selectedElement(){return this.body.contains(this._selectedElement)||(this.selectedElement=null),this._selectedElement}get insertionPosition(){if(this.selectedElement){let e=this.selectedElement;for(;e.parentNode!==this.body;)e=e.parentNode;return[this.body,s.c.getChildIndex(this.body,e)+1]}return[this.body,1/0]}insert(e,t,n){let i;if(t.setAttribute("do-serialize",""),t.setAttribute("type",e),t instanceof HTMLAnchorElement)i=r.c.div(void 0,"specialized-container","element-container","flex-rows","in-section-gap").children((()=>{const e=[t];r.c.input.url(t.getAttribute("href")??"").onValueChanged((e=>t.href=e)).placeholder("Koppeling...").onMake((t=>e.push(t))).make();const n=new m.c("_blank"===t.target);return n.addEventListener("input",(()=>{n.value?t.setAttribute("target","_blank"):t.removeAttribute("target")})),e.push(r.c.div(void 0,"flex-columns","cross-axis-center","in-section-gap").children(r.c.label("In nieuw tabblad openen?"),n).make()),e})).make();else if("MULTISOURCE-ATTACHMENT"===t.tagName||"MULTISOURCE-IMAGE"===t.tagName){const e=t;i=r.c.div(void 0,"specialized-container","element-container","flex-rows","in-section-gap").children((()=>{const n=[t];let i;r.c.div(void 0,"origin-selector","flex-columns","cross-axis-center","in-section-gap").children(r.c.label("Bron"),i=r.c.select({"firebase-storage-public":"Firebase cloud-opslag (openbaar)","firebase-storage-protected":"Firebase cloud-opslag (beveiligd)",external:"Directe link"}).value(e.getAttribute("origin")).onValueChanged((t=>{e.origin=t,o.placeholder="external"===t?"Link naar bestand...":"Bestandspad..."})).make()).onMake((e=>n.push(e))).make();const s=()=>e.src=o.value,o=r.c.input.text().class("src-input").placeholder("Bestandspad...").value(e.getAttribute("src")??"").on("input",(()=>{h.c.setDelayedCallback(s,500)})).onMake((e=>n.push(e))).make();if("MULTISOURCE-IMAGE"===t.tagName){let e;r.c.div(void 0,"width-selector","flex-columns","cross-axis-center","in-section-gap").children(e=r.c.label(`Breedte (${t.style.width||"100%"})`).make(),r.c.input.range(d.c.parse(t.style.width.slice(0,-1),100),0,100,1).onValueChanged((n=>{t.style.width=`${n}%`,e.textContent=`Breedte (${n}%)`}))).onMake((e=>n.push(e))).make()}return n})).make()}else"IDEA-BOX"===t.tagName?(t.style.pointerEvents="none",i=t):i=t;i.style.flexGrow="1";const o=r.c.div(void 0,"element-container","flex-columns","main-axis-space-between","cross-axis-center","in-section-gap").children(i,r.c.div(void 0,"controls","flex-columns","in-section-gap").children(r.c.iconButton("move_up",(()=>{o.previousElementSibling&&s.c.swap(o,o.previousElementSibling)}),"Naar boven"),r.c.iconButton("move_down",(()=>{o.nextElementSibling&&s.c.swap(o,o.nextElementSibling)}),"Naar beneden"),r.c.iconButton("remove",(()=>o.remove()),"Verwijderen"))).make();if(function(e,...t){const[n,r]=e;if(r<=0)for(const e of t)n.insertBefore(e,n.firstChild);else if(r>=n.childNodes.length)for(const e of t)n.appendChild(e);else for(const e of t)n.insertBefore(e,n.childNodes[r])}(n,o),R.ALL_TEXT.includes(e)&&(t.classList.add("text-input"),t.setAttribute("contenteditable","plaintext-only"),t.setAttribute("supports-style-tags",""),t.addEventListener("keydown",(e=>{i.textContent||"Backspace"!==e.key||o.remove()})),t.focus()),e in R.EXCLUDED_INSERTABLE_SUBSECTIONS){t.setAttribute("insertion-target","");const n=s.c.extractChildren(t);for(const e of n)e instanceof HTMLElement?this.insert(R.inferSectionName(e),e,[t,1/0]):t.appendChild(e);t.prepend(this.makeSectionTypes((()=>{if(this.selectedElement&&t.contains(this.selectedElement)){let e=this.selectedElement;for(;e.parentNode!==t;)e=e.parentNode;return[t,s.c.getChildIndex(t,e)+1]}return[t,1/0]}),R.EXCLUDED_INSERTABLE_SUBSECTIONS[e]))}}stylableElementSelected(){const e=getSelection();if(e&&0!==e.rangeCount){const t=e.getRangeAt(0);return this.body.contains(t.commonAncestorContainer)&&0!==i.c.queryAncestors(t.commonAncestorContainer,"[supports-style-tags]",!0).length}return!1}constructor(e){super(),this._selectedElement=null,this.initElement(),void 0!==e&&(this.value=e)}makeStyleTagToggle(e,t,n,i,s){const o=()=>{s&&c.isInStyleTag(s)&&c.applyStyleTag(this.body,s),c.applyStyleTag(this.body,e)},a=r.c.iconButton(t,((e,t)=>{t.hasAttribute("disabled")||o()}),n).attr("can-unselect").attr("disabled").onMake((t=>{const n=()=>{t.toggleAttribute("disabled",!this.stylableElementSelected()||!this.body.contains(document.activeElement)),t.toggleAttribute("selected",c.isInStyleTag(e)&&this.body.contains(document.activeElement))};document.addEventListener("selectionchange",n),document.addEventListener("focusout",n)})).make();return i&&this.addEventListener("keydown",(e=>{(!i[1]||"alt"===i[1]&&e.altKey||"ctrl"===i[1]&&e.ctrlKey||"shift"===i[1]&&e.shiftKey)&&e.key.toLowerCase()===i[0].toLowerCase()&&!a.hasAttribute("disabled")&&(e.preventDefault(),o())})),a}makeColorBulb(e,t){return r.c.div().class("color-bulb","click-action","center-content").attr("value",e).children(r.c.p("⬤").class("color-bulb-indicator","no-margin").style({color:e})).on("click",(()=>t(e)))}makeColorPicker(e,t,n,i){return r.c.folderElement("down",250,!0).heading(r.c.p(t).class("icon").tooltip(n)).class("color-picker","category").attr("disabled").noFocus().canSelect(!1).children(r.c.div(void 0,"color-category","flex-columns").children(...d.c.range(R.PICKER_BASE_COLORS.length-1,0,1,!0).map((t=>this.makeColorBulb(u.c.mix("#000000","#ffffff",t/(R.PICKER_BASE_COLORS.length-1)),e)))),r.c.div(void 0,"color-category","flex-columns").children(...R.PICKER_BASE_COLORS.map((t=>this.makeColorBulb(t,e)))),...R.PICKER_SHADE_RATIOS.map((t=>r.c.div(void 0,"color-category","flex-columns").children(...R.PICKER_BASE_COLORS.map((n=>this.makeColorBulb(u.c.mix(n,"#ffffff",t),e)))))),...R.PICKER_SHADE_RATIOS.toReversed().map((t=>r.c.div(void 0,"color-category","flex-columns").children(...R.PICKER_BASE_COLORS.map((n=>this.makeColorBulb(u.c.mix(n,"#000000",t),e))))))).onMake((e=>{const t=()=>{const t=c.getContainingStyleTag(i)?.getAttribute("value")?.toLowerCase();Array.from(e.getElementsByClassName("color-bulb")).forEach((e=>{const n=e.getAttribute("value");e.toggleAttribute("selected",n===t)})),e.heading.style.color=t??"#000000",e.toggleAttribute("disabled",!this.stylableElementSelected()||!this.body.contains(document.activeElement))};document.addEventListener("selectionchange",t),document.addEventListener("focusout",t)})).make()}initElement(){let e,t;this.classList.add("boxed","flex-rows","cross-axis-center","section-gap"),this.toolbar=this.appendChild(r.c.div(void 0,"toolbar","flex-columns","main-axis-space-evenly","section-gap").canSelect(!1).children(r.c.div(void 0,"styling","flex-columns","in-section-gap").children(this.makeStyleTagToggle("small","text_decrease","Kleiner (ctrl+<)",["<","ctrl"],"big"),this.makeStyleTagToggle("big","text_increase","Groter (ctrl+>)",[">","ctrl"],"small"),this.makeStyleTagToggle("bold","format_bold","Dikgedrukt (ctrl+b)",["b","ctrl"]),this.makeStyleTagToggle("italic","format_italic","Cursief (ctrl+i)",["i","ctrl"]),this.makeStyleTagToggle("underlined","format_underlined","Onderstreept (ctrl+u)",["u","ctrl"]),this.makeStyleTagToggle("strikethrough","format_strikethrough","Doorgestreept (ctrl+s)",["s","ctrl"]),this.makeColorPicker((e=>c.applyStyleTag(this.body,"text-color",e)),"format_color_text","Tekstkleur","text-color"),this.makeColorPicker((e=>c.applyStyleTag(this.body,"background-color",e)),"format_ink_highlighter","Markeringskleur","background-color"),e=r.c.folderElement("down",250).class("category").tooltip("Tekst uitlijnen").heading(r.c.p("format_align_justify").class("icon")).children(r.c.div(void 0,"flex-columns").children(...t=[r.c.iconButton("format_align_left",(()=>{}),"Links uitlijnen").attr("selected").attr("value","align-left").make(),r.c.iconButton("format_align_center",(()=>{}),"Centreren").attr("value","align-center").make(),r.c.iconButton("format_align_right",(()=>{}),"Rechts uitlijnen").attr("value","align-right").make(),r.c.iconButton("format_align_justify",(()=>{}),"Spreiden").attr("value","align-justify").make()])).onMake((n=>{for(const n of t)n.addEventListener("click",(r=>{for(const e of t)e.toggleAttribute("selected",n===e);e.heading.textContent=n.textContent,this.selectedElement&&(this.selectedElement.classList.remove(...t.map((e=>e.getAttribute("value")))),this.selectedElement.classList.add(n.getAttribute("value")))}))})).make()),this.makeSectionTypes((()=>this.insertionPosition))).make()),this.body=this.appendChild(r.c.div(void 0,"body","rich-text","flex-rows").on("focusin",(n=>{let r=n.target;if(r instanceof HTMLElement){let n=r;for(;!n.hasAttribute("do-serialize");){const e=n.querySelector("[do-serialize]");if(e instanceof HTMLElement)n=e;else{if(!n.parentElement){n=null;break}n=n.parentElement}}if(this.selectedElement=n,this.selectedElement){for(const e of t)e.removeAttribute("selected");const n=t.find((e=>this.selectedElement.classList.contains(e.getAttribute("value"))));n?.setAttribute("selected",""),e.heading.textContent=n?.textContent??"format_align_left"}}})).on("input",(()=>{const e=this.body.getElementsByTagName("span");Array.from(e).forEach((e=>{e.textContent||e.remove()}))})).make()),document.addEventListener("focusin",(e=>{e.target instanceof Node&&!this.contains(e.target)&&(this.selectedElement=null)})),document.addEventListener("scroll",(()=>{requestAnimationFrame((()=>{const e=this.toolbar.getBoundingClientRect(),t=this.getBoundingClientRect();this.toolbar.style.top=E.c.isSlimmerOrEq(E.c.Viewport.DESKTOP_SLIM)?`clamp(var(--in-section-gap), calc(${-t.top}px + 4rem), calc(${t.height-e.height}px - var(--in-section-gap) / 2))`:`clamp(var(--in-section-gap), ${-t.top}px, calc(${t.height-e.height}px - var(--in-section-gap) / 2))`}))})),new ResizeObserver((()=>requestAnimationFrame((()=>{this.style.paddingTop=`calc(${this.toolbar.getBoundingClientRect().height}px + 2 * var(--in-section-gap))`})))).observe(document.body)}makeSectionTypes(e,t=[]){return r.c.div(void 0,"section-types","flex-columns","cross-axis-center","in-section-gap","no-bullet").canSelect(!1).children(!t.includes("shortcut")&&r.c.iconButton("add_link",(()=>{this.insert("shortcut",r.c.a().class("align-justify").style({fontSize:"16px"}).make(),e())}),"Snelkoppeling toevoegen"),!t.includes("attachment")&&r.c.iconButton("attach_file_add",(()=>{const t=new p.c;t.classList.add("align-justify"),this.insert("attachment",t,e())}),"Bijlage toevoegen"),!t.includes("image")&&r.c.iconButton("add_photo_alternate",(()=>{const t=new g.c;t.classList.add("align-center"),this.insert("image",t,e())}),"Afbeelding toevoegen"),!l.c.includesAll(t,...R.ALL_HEADERS)&&r.c.folderElement().class("category").foldDir("down").closingDelay(250).heading((n=>t.includes("title")?n.contents.firstElementChild:r.c.iconButton("title",(()=>{this.insert("title",r.c.h1().class("title","align-justify").style({fontSize:"40px"}).make(),e())}),"Titel toevoegen"))).children(!t.includes("h1")&&r.c.iconButton("format_h1",(()=>{this.insert("h1",r.c.h1().class("align-justify").style({fontSize:"32px"}).make(),e())}),"Nieuwe kop 1"),!t.includes("h2")&&r.c.iconButton("format_h2",(()=>{this.insert("h2",r.c.h2().class("align-justify").style({fontSize:"24px"}).make(),e())}),"Nieuwe kop 2"),!t.includes("h3")&&r.c.iconButton("format_h3",(()=>{this.insert("h3",r.c.h3().class("align-justify").style({fontSize:"18.5px"}).make(),e())}),"Nieuwe kop 3")).tooltip("Nieuwe kop/titel"),!t.includes("paragraph")&&r.c.iconButton("subject",(()=>{this.insert("paragraph",r.c.p().class("align-justify").style({fontSize:"16px"}).make(),e())}),"Nieuwe paragraaf"),!t.includes("list")&&r.c.iconButton("format_list_bulleted",(()=>{this.insert("list",r.c.ul().make(),e())}),"Nieuwe lijst"),!t.includes("numbered-list")&&r.c.iconButton("format_list_numbered",(()=>{this.insert("numbered-list",r.c.ol().make(),e())}),"Nieuwe genummerde lijst"),!l.c.includesAll(t,...R.ALL_WIDGETS)&&r.c.folderElement("down",250).class("category").heading(r.c.p("widgets").class("icon").tooltip("Widgets")).children(!t.includes("newspaper")&&r.c.iconButton("newspaper",(()=>{const t=new y(R.NEWSPAPER_SRC);t.classList.add("newspaper"),t.classList.add("align-center"),this.insert("newspaper",t,e())}),"Verenigingsblad toevoegen"),!t.includes("idea-box")&&r.c.iconButton("emoji_objects",(()=>{const t=new x;t.classList.add("align-center"),this.insert("idea-box",t,e())}),"Ideeënbox toevoegen"))).make()}}R.PICKER_BASE_COLORS=["#FF0000","#FF8700","#FFD300","#DEFF0A","#A1FF0A","#0AFF99","#0AEFFF","#147DF5","#580AFF","#BE0AFF"],R.PICKER_SHADE_RATIOS=[.25,.5,.75],function(e){const t=["shortcut","attachment","image","title","h1","h2","h3","paragraph","list","numbered-list","newspaper","idea-box"];e.isRichTextSectionName=function(e){return t.some((t=>e===t))},e.ALL_HEADERS=["title","h1","h2","h3"],e.ALL_TEXT=[...e.ALL_HEADERS,"paragraph","shortcut"],e.ALL_WIDGETS=["newspaper","idea-box"],e.NEWSPAPER_SRC="https://www.bladnl.nl/bladen/tblaadje/pluginfull",e.EXCLUDED_INSERTABLE_SUBSECTIONS={list:["list","numbered-list"],"numbered-list":["list","numbered-list"]},e.inferSectionName=function(e){if("A"===e.tagName)return"shortcut";if("MULTISOURCE-ATTACHMENT"===e.tagName)return"attachment";if("MULTISOURCE-IMAGE"===e.tagName)return"image";if(e instanceof HTMLHeadingElement)return"H1"===e.tagName?e.classList.contains("title")?"title":"h1":"H2"===e.tagName?"h2":"h3";if(e instanceof HTMLParagraphElement)return"paragraph";if(e instanceof HTMLUListElement)return"list";if(e instanceof HTMLOListElement)return"numbered-list";if("IFRAME-CONTAINER"===e.tagName&&e.classList.contains("newspaper"))return"newspaper";if("IDEA-BOX"===e.tagName)return"idea-box";throw Error(`could not infer section type of ${e.outerHTML}`)}}(R||(R={}));const O=R;v.c.onDOMContentLoaded().then((()=>customElements.define("rich-text-input",R)))},3236:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var r=n(992),i=n(1176);const s=["onfullscreenchange","onfullscreenerror","onabort","onanimationcancel","onanimationend","onanimationiteration","onanimationstart","onauxclick","onbeforeinput","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncompositionend","oncompositionstart","oncompositionupdate","oncontextmenu","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","onformdata","ongotpointercapture","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onlostpointercapture","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onpaste","onpause","onplay","onplaying","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","onprogress","onratechange","onreset","onresize","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onselectionchange","onselectstart","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontransitioncancel","ontransitionend","ontransitionrun","ontransitionstart","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel"];class o{static escape(e){for(const t in this.ESCAPE_CONFIG)e=e.replaceAll(t,this.ESCAPE_CONFIG[t]);return e}static unescape(e){for(const t in this.ESCAPE_CONFIG)e=e.replaceAll(this.ESCAPE_CONFIG[t],t);return e}static serialize(e){let t="";return e.childNodes.forEach((e=>{const n=this.finalize(e);for(const e of n)t+=e instanceof Element?e.outerHTML:e.textContent??""})),t}static getStrippedClone(e){const t=e.cloneNode();for(;0!==t.attributes.length;)t.removeAttribute(t.attributes[0].name);for(;t.firstChild;)t.firstChild.remove();return["left","center","right","justify"].forEach((n=>{e.classList.contains(`align-${n}`)&&t.classList.add(`align-${n}`)})),t}static finalize(e){if(e.nodeType===Node.TEXT_NODE)return[document.createTextNode(e.textContent??"")];if(e instanceof HTMLElement){if(e.hasAttribute("do-serialize")){const t=e.getAttribute("type"),n=this.getStrippedClone(e);if(t&&i.c.isRichTextSectionName(t)){switch(t){case"attachment":case"image":return n.setAttribute("origin",e.getAttribute("origin")??"firebase-storage-public"),n.setAttribute("src",e.getAttribute("src")??""),n.style.width=e.style.width,[n];case"title":n.classList.add("title");case"shortcut":e.hasAttribute("href")&&n.setAttribute("href",e.getAttribute("href")),"_blank"===e.getAttribute("target")&&n.setAttribute("target","_blank");case"h1":case"h2":case"h3":case"paragraph":return e.childNodes.forEach((e=>n.appendChild(e.cloneNode(!0)))),r.c.onEach(n,(e=>{e instanceof Element&&e.removeAttribute("value")})),e.style.fontSize&&(n.style.fontSize=e.style.fontSize),n.innerHTML=n.innerHTML.replaceAll("\n","<br>"),[n];case"list":case"numbered-list":return e.childNodes.forEach((e=>n.append(...this.finalize(e)))),[n];case"newspaper":return n.setAttribute("src",e.getAttribute("src")??""),n.classList.add("newspaper"),[n];case"idea-box":return[n]}throw new o.SerializationError(`no finalization implementation found for section type "${t}"`)}throw null===t?new o.SerializationError("element was marked with do-serialize attribute, but no type was provided."):new o.SerializationError(`unrecognized section type "${t}".`)}return e.classList.contains("element-container")?Array.from(e.childNodes).filter((e=>e instanceof Element&&(e.hasAttribute("do-serialize")||e.classList.contains("element-container")))).flatMap((e=>this.finalize(e))):[]}throw new o.SerializationError("given node is not a text, nor an element.")}static deserialize(e){try{const t=(new DOMParser).parseFromString(e,"text/html");return r.c.onEach(t,(e=>{e instanceof Element&&("SCRIPT"===e.tagName?e.remove():e instanceof HTMLAnchorElement&&e.addEventListener("click",(()=>{e.href&&!e.hasAttribute("download")&&("_blank"===e.target?open(e.href):location.href=e.href)})),s.forEach((t=>e.removeAttribute(t))),Array.from(e.attributes).forEach((t=>{t.value.toLowerCase().includes("javascript:")&&e.removeAttribute(t.name)})))})),Array.from(t.body.childNodes)}catch(e){throw new o.DeserializationError(e instanceof Error?e.message:"unknown cause")}}}o.ESCAPE_CONFIG={"<":"&lt;",">":"&gt;",'"':"&quot;","=":"&#61;"},function(e){class t extends Error{constructor(e){super(`failed to serialize: ${e}`)}}e.SerializationError=t;class n extends Error{constructor(e){super(`failed to deserialize: ${e}`)}}e.DeserializationError=n}(o||(o={}));const a=o},7936:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r=n(8824);const i="Er ging iets mis, probeer het later opnieuw.",s={"auth/invalid-credential":"Onjuiste inloggegevens, check je e-mailadres en/of wachtwoord.","auth/email-already-in-use":"Er is al een account geregistreerd met dat e-mailadres, gebruik a.u.b. een andere.","auth/insufficient-permission":"Je hebt geen toestemming om dit te doen.","auth/invalid-email":"Het gegeven e-mailadres is ongeldig.","auth/too-many-requests":"Te veel inlogpogingen, probeer het later opnieuw.","already-exists":"Bestand bestaat al.",cancelled:"Geannuleerd.","not-found":"Het opgevraagde bestand bestaat niet (meer).","permission-denied":"Je bent niet gemachtigd om dit uit te voeren.",unauthenticated:"Je identiteit kon niet geverifieerd worden. Probeer (opnieuw) in te loggen.",unavailable:"Onze database is momenteel niet beschikbaar, probeer het later opnieuw.",unknown:i};function o(e){return console.log(e),e&&e instanceof r.kx?(console.log(e.code),e.code in s?s[e.code]:i):i}},3935:(e,t,n)=>{"use strict";n.d(t,{kL:()=>h,qM:()=>u});var r=n(8144),i=n(9560),s=n(9928),o=n(9684);function a(e){return Array.isArray(e)?e:[e]}n(908);const c=new i.c;function l(e,t,n){if(n){const n=s.c.get(`permissions-${t}`);return null===n?Promise.reject(new Error(`useCache is true, but permissions of user ${t} are not in the cache`)):Promise.resolve(o.c.mapToObject(e,(e=>n.includes(e))))}return c.getById(t).then((t=>{const n=t?.permissions??[];return o.c.mapToObject(e,(e=>n.includes(e)))}))}function u(e,t=!1){const n=a(e);return(0,r.iA)().then((e=>e?t?l(n,e.uid,!0).catch((()=>l(n,e.uid,!1))):l(n,e.uid,!1):o.c.mapToObject(n,(e=>!1))))}function h(e,t,n=!1,i=!0,s="all"){const c=a(e);(0,r.iA)().then((r=>{Array.isArray(e)&&0===e.length?t(!0,o.c.mapToObject(e,(()=>!1))):r?(n&&l(c,r.uid,!0).then((e=>t("all"===s?o.c.every(e,((e,t)=>t)):o.c.some(e,((e,t)=>t)),e))).catch((()=>{i||t(!1,o.c.mapToObject(c,(()=>!1)))})),n&&!i||l(c,r.uid,!1).then((e=>t("all"===s?o.c.every(e,((e,t)=>t)):o.c.some(e,((e,t)=>t)),e))).catch(console.error)):t(!1,o.c.mapToObject(c,(()=>!1)))})).catch(console.error)}},7632:(e,t,n)=>{"use strict";n.d(t,{S:()=>r,c:()=>i});class r{constructor(e,t){this.id=e,this.components=t}getComponent(e){return e instanceof r.Component?this.components.find((t=>t===e)):this.components.find((t=>t instanceof e))}hasComponent(e){return void 0!==this.getComponent(e)}satisfies(e){return!(e.id&&this.id!==e.id||e.notId&&this.id===e.notId||0===e.limit)}equals(e){return e.id===this.id}}!function(e){e.Component=class{validate(e){return this.dependencies.every((t=>e.components.some((e=>e instanceof t))))&&this.validateValues(e)}canBeRemovedFrom(e){return e.hasComponent(this.Class)&&!e.components.some((e=>e.dependencies.some((e=>this instanceof e))))}canBeAddedTo(e){return this.dependencies.every((t=>e.hasComponent(t)))&&!e.hasComponent(this.Class)}}}(r||(r={}));class i{constructor(){this.writeHandlers=[],this.deleteHandlers=[]}set onWrite(e){this.writeHandlers.push(e)}write(...e){return this.doWrite(...e).then((t=>(this.writeHandlers.forEach((t=>t(...e))),t)))}set onDelete(e){this.deleteHandlers.push(e)}delete(...e){return this.doDelete(...e).then((t=>(this.deleteHandlers.forEach((t=>t(...e))),t)))}}},2464:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r,i=n(8392),s=n(9684);!function(e){let t;!function(e){e.UPDATE_SETTINGS="UPDATE_SETTINGS",e.READ_MEMBER_ARTICLES="READ_MEMBER_ARTICLES",e.CREATE_ARTICLES="CREATE_ARTICLES",e.UPDATE_ARTICLES="UPDATE_ARTICLES",e.DELETE_ARTICLES="DELETE_ARTICLES",e.UPLOAD_FILES="UPLOAD_FILES",e.DOWNLOAD_PROTECTED_FILES="DOWNLOAD_PROTECTED_FILES",e.CREATE_IDEA_BOX_SUBMISSIONS="CREATE_IDEA_BOX_SUBMISSIONS",e.READ_IDEA_BOX_SUBMISSIONS="READ_IDEA_BOX_SUBMISSIONS",e.CREATE_EVENTS="CREATE_EVENTS",e.UPDATE_EVENTS="UPDATE_EVENTS",e.DELETE_EVENTS="DELETE_EVENTS",e.REGISTER_FOR_EVENTS="REGISTER_FOR_EVENTS",e.DEREGISTER_FOR_EVENTS="DEREGISTER_FOR_EVENTS",e.READ_EVENT_COMMENTS="READ_EVENT_COMMENTS",e.UPDATE_OWN_USER_INFO="UPDATE_OWN_USER_INFO",e.UPDATE_OWN_PERMISSIONS="UPDATE_OWN_PERMISSIONS",e.READ_OTHER_USER_INFO="READ_OTHER_USER_INFO",e.UPDATE_OTHER_USER_INFO="UPDATE_OTHER_USER_INFO",e.UPDATE_OTHER_USER_PERMISSIONS="UPDATE_OTHER_USER_PERMISSIONS",e.VIEW_ADMIN_PANEL="VIEW_ADMIN_PANEL"}(t=e.Permission||(e.Permission={})),e.ALL=Object.values(t),Object.freeze(e.ALL);const n={[t.UPDATE_SETTINGS]:"Site-instellingen aanpassen",[t.READ_MEMBER_ARTICLES]:"Berichten voor leden lezen",[t.CREATE_ARTICLES]:"Berichten plaatsen",[t.DELETE_ARTICLES]:"Berichten verwijderen",[t.UPDATE_ARTICLES]:"Berichten bewerken",[t.UPLOAD_FILES]:"Bestanden uploaden",[t.DOWNLOAD_PROTECTED_FILES]:"Beveiligde bestanden downloaden",[t.CREATE_EVENTS]:"Activiteiten toevoegen",[t.UPDATE_EVENTS]:"Activiteit-info bewerken",[t.DELETE_EVENTS]:"Activiteiten verwijderen",[t.REGISTER_FOR_EVENTS]:"Inschrijven voor activiteiten",[t.DEREGISTER_FOR_EVENTS]:"Uitschrijven van activiteiten",[t.READ_EVENT_COMMENTS]:"Inschrijvingsdetails lezen",[t.CREATE_IDEA_BOX_SUBMISSIONS]:"Ideeënbox gebruiken",[t.READ_IDEA_BOX_SUBMISSIONS]:"Ideeënbox suggesties lezen",[t.UPDATE_OWN_USER_INFO]:"Account-info van henzelf bewerken",[t.UPDATE_OWN_PERMISSIONS]:"Account-machtigingen van henzelf bewerken",[t.READ_OTHER_USER_INFO]:"Account-info van anderen zien",[t.UPDATE_OTHER_USER_INFO]:"Account-info van anderen bewerken",[t.UPDATE_OTHER_USER_PERMISSIONS]:"Account-machtigingen van anderen bewerken",[t.VIEW_ADMIN_PANEL]:"Administratie-paneel zien"};Object.freeze(n),e.translate=function(e){const t=n[e];if(void 0===t)throw new Error(`unknown permission: "${e}"`);return t},e.PRESETS={Lid:[t.READ_MEMBER_ARTICLES,t.DOWNLOAD_PROTECTED_FILES,t.REGISTER_FOR_EVENTS,t.DEREGISTER_FOR_EVENTS,t.CREATE_IDEA_BOX_SUBMISSIONS],Administrateur:[t.UPDATE_SETTINGS,t.READ_MEMBER_ARTICLES,t.CREATE_ARTICLES,t.UPDATE_ARTICLES,t.DELETE_ARTICLES,t.UPLOAD_FILES,t.DOWNLOAD_PROTECTED_FILES,t.READ_IDEA_BOX_SUBMISSIONS,t.CREATE_EVENTS,t.UPDATE_EVENTS,t.DELETE_EVENTS,t.READ_EVENT_COMMENTS,t.UPDATE_OWN_USER_INFO,t.READ_OTHER_USER_INFO,t.UPDATE_OTHER_USER_INFO,t.UPDATE_OTHER_USER_PERMISSIONS,t.VIEW_ADMIN_PANEL]},s.c.deepFreeze(e.PRESETS),e.getPreset=function(t){for(const n in e.PRESETS){const r=n;if(i.c.containSame(t,e.PRESETS[r]))return r}}}(r||(r={}));const o=r},928:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var r=n(4112),i=n(8144),s=n(1724);class o extends s.c{get(e){return o.getSubmissions({...e})}count(e){return o.getSubmissions({...e},!0)}doWrite(...e){const t=(0,r.sv)(i.AZ);for(const n of e)t.set((0,r.UN)(i.AZ,"idea-box-submissions",n.id),o.COLLECTION.converter.toFirestore(n));return t.commit().then((()=>e.length))}doDelete(...e){const t=(0,r.sv)(i.AZ);for(const n of e)t.delete((0,r.UN)(i.AZ,"idea-box-submissions",n.id));return t.commit().then((()=>e.length))}getById(e){const t=(0,r.UN)(o.COLLECTION,e);return(0,r.i4)(t).then((e=>e.exists()?e.data():void 0))}static getSubmissions(e,t=!1){const n=[];e.limit&&n.push((0,r.Yf)(e.limit)),e.id&&n.push((0,r.A9)((0,r.ET)(),"==",e.id)),e.notId&&n.push((0,r.A9)((0,r.ET)(),"!=",e.notId)),e.sortByCreatedAt&&n.push((0,r.k$)("created_at","ascending"===e.sortByCreatedAt?"asc":"desc")),e.before&&n.push((0,r.A9)("created_at","<",r.kR.fromDate(e.before))),e.after&&n.push((0,r.A9)("created_at",">",r.kR.fromDate(e.after))),void 0!==e.isAnonymous&&n.push((0,r.A9)("author",e.isAnonymous?"==":"!=","anonymous"));const i=(0,r.kt)(this.COLLECTION,...n);return t?(0,r.QL)(i).then((e=>e.data().count)):(0,r.uY)(i).then((e=>{const t=[];return e.forEach((e=>t.push(e.data()))),t}))}}o.COLLECTION=(0,r.oV)(i.AZ,"idea-box-submissions").withConverter({toFirestore:e=>({author:e.author,created_at:r.kR.fromDate(e.created_at),subject:e.subject,body:e.body}),fromFirestore(e){const t=e.data();return new s.O(e.id,t.author,t.created_at.toDate(),t.subject,t.body)}});const a=o},1724:(e,t,n)=>{"use strict";n.d(t,{O:()=>s,c:()=>o});var r=n(9684),i=n(7632);class s extends i.S{constructor(e,t,n,r,i){super(e,[]),this.author=t,this.created_at=n,this.subject=r,this.body=i}copy(){return new s(this.id,"string"==typeof this.author?this.author:{...this.author},new Date(this.created_at),this.subject,this.body)}satisfies(e){return super.satisfies(e)&&void 0!==e.before&&this.created_at<e.before&&void 0!==e.after&&e.after<this.created_at&&(!0!==e.isAnonymous||"anonymous"===this.author)&&(!1!==e.isAnonymous||"anonymous"!==this.author)}equals(e){return super.equals(e)&&r.c.deepEquals(e.author,this.author)&&e.body===this.body&&e.created_at.getTime()===this.created_at.getTime()&&e.subject===this.subject}}class o extends i.c{}},8860:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r,i=n(4112),s=n(8144),o=n(8596),a=n(9684);class c extends o.c{constructor(){super(...arguments),this.SPONSOR_LINKS_DOC=(0,i.UN)(r.COLLECTION,"sponsor-links").withConverter({toFirestore:r.ImagedLinks.to,fromFirestore:e=>r.ImagedLinks.from(e.data())}),this.SOCIAL_MEDIA_LINKS_DOC=(0,i.UN)(r.COLLECTION,"social-media-links").withConverter({toFirestore:r.ImagedLinks.to,fromFirestore:e=>r.ImagedLinks.from(e.data())}),this.DEFAULT_CATEGORY_COLORS_DOC=(0,i.UN)(r.COLLECTION,"default-category-colors"),this.LOADING_SCREEN_CONFIG_DOC=(0,i.UN)(r.COLLECTION,"loading-screen-config")}getNavbarLinks(e="/"){return(0,i.i4)(r.NAVBAR_LINKS_DOC).then((e=>{if(e.exists())return e.data();throw new r.MissingDocError("navbar-links")}))}setNavbarLinks(e){return(0,i.Sm)(r.NAVBAR_LINKS_DOC,e)}getSponsorLinks(){return(0,i.i4)(this.SPONSOR_LINKS_DOC).then((e=>{if(e.exists())return e.data();throw new r.MissingDocError("sponsor-links")}))}setSponsorLinks(e){return(0,i.Sm)(this.SPONSOR_LINKS_DOC,e)}getSocialMediaLinks(){return(0,i.i4)(this.SOCIAL_MEDIA_LINKS_DOC).then((e=>{if(e.exists())return e.data();throw new r.MissingDocError("social-media-links")}))}setSocialMediaLinks(e){return(0,i.Sm)(this.SOCIAL_MEDIA_LINKS_DOC,e)}getDefaultCategoryColors(){return(0,i.i4)(this.DEFAULT_CATEGORY_COLORS_DOC).then((e=>a.c.values(e.exists()?e.data():{}).sort()))}setDefaultCategoryColors(e){const t={};return e.forEach(((e,n)=>t[`${n}`]=e)),(0,i.Sm)(this.DEFAULT_CATEGORY_COLORS_DOC,t)}getLoadingScreenConfig(){return(0,i.i4)(this.LOADING_SCREEN_CONFIG_DOC).then((e=>a.c.values(e.exists()?e.data():{}).sort()))}setLoadingScreenConfig(e){const t={};return e.forEach(((e,n)=>t[`${n}`]=e)),(0,i.Sm)(this.LOADING_SCREEN_CONFIG_DOC,t)}}r=c,c.COLLECTION=(0,i.oV)(s.AZ,"settings"),c.NAVBAR_LINKS_DOC=(0,i.UN)(r.COLLECTION,"navbar-links").withConverter({toFirestore:e=>({links:JSON.stringify(e)}),fromFirestore:e=>JSON.parse(e.data().links)}),function(e){let t;!function(e){e.from=function(e){const t=[];for(const n in e)t.push({name:n,...e[n]});return t},e.to=function(e){const t={};for(const n of e)t[n.name]={origin:n.origin,src:n.src,href:n.href};return t}}(t=e.ImagedLinks||(e.ImagedLinks={}));class n extends Error{constructor(e){super(`setting "${e}" not found in database (missing document).`)}}e.MissingDocError=n}(c||(c={}));const l=c},8596:(e,t,n)=>{"use strict";var r;n.d(t,{C:()=>r,c:()=>i}),function(e){function t(e){const n=[];for(const r in e){const i=e[r];"string"==typeof i?n.push([r,i]):n.push(...t(i))}return n}e.search=function(e,n){return t(e).filter((e=>{const t=e[0].toLowerCase(),r=n.toLowerCase();return t.includes(r)||r.includes(t)})).sort(((e,t)=>e[0].localeCompare(t[0])))}}(r||(r={}));class i{}},9560:(e,t,n)=>{"use strict";n.d(t,{c:()=>u});var r=n(4112),i=n(5364),s=n(8144),o=n(9928),a=n(8392);const c={toFirestore:e=>({...e,joined_at:r.kR.fromDate(e.joined_at),member_until:r.kR.fromDate(e.member_until)}),fromFirestore(e){const t=e.data();return new i.K(e.id,t.joined_at.toDate(),t.member_until.toDate(),t.first_name,t.family_name,t.permissions??[])}};class l extends i.c{get(e={}){return l.getUsers({...e})}count(e){return l.getUsers({...e},!0)}getById(e){const t=(0,r.UN)(l.COLLECTION,e);return(0,r.i4)(t).then((e=>e.exists()?e.data():void 0))}getByIds(...e){if(1===e.length)return this.getById(e[0]).then((t=>{const n={};return t&&(n[e[0]]=t),n}));{const t=a.c.batch(e,l.MAX_BATCH_SIZE).map((e=>(0,r.kt)(l.COLLECTION,(0,r.A9)((0,r.ET)(),"in",e))));return Promise.all(t.map((e=>(0,r.uY)(e)))).then((e=>{const t={};for(const n of e)n.forEach((e=>{const n=e.data();t[n.id]=n}));return t}))}}doWrite(...e){const t=(0,r.sv)(s.AZ);for(const n of e)t.set((0,r.UN)(s.AZ,"users",n.id),c.toFirestore(n));return t.commit().then((()=>e.length))}doDelete(...e){const t=(0,r.sv)(s.AZ);for(const n of e)t.delete((0,r.UN)(s.AZ,"users",n.id));return t.commit().then((()=>e.length))}static getUsers(e,t=!1){const n=[];e.limit&&n.push((0,r.Yf)(e.limit)),e.id&&n.push((0,r.A9)((0,r.ET)(),"==",e.id)),e.notId&&n.push((0,r.A9)((0,r.ET)(),"!=",e.notId)),e.has_permission&&n.push((0,r.A9)("permissions","array-contains",e.has_permission)),e.is_member&&n.push((0,r.A9)("member_until",">=",r.kR.now())),e.joined_after&&n.push((0,r.A9)("joined_at",">",r.kR.fromDate(e.joined_after))),e.joined_before&&n.push((0,r.A9)("joined_at","<",r.kR.fromDate(e.joined_before)));const i=(0,r.kt)(l.COLLECTION,...n);return t?(0,r.QL)(i).then((e=>e.data().count)):(0,r.uY)(i).then((e=>{const t=[];return e.forEach((e=>t.push(e.data()))),t.forEach((e=>o.c.set(`permissions-${e.id}`,e.permissions))),t})).catch((t=>(console.log("failed to get user",e,t),t)))}}l.COLLECTION=(0,r.oV)(s.AZ,"users").withConverter(c),l.MAX_BATCH_SIZE=30;const u=l},5364:(e,t,n)=>{"use strict";n.d(t,{K:()=>s,c:()=>o});var r=n(8392),i=n(7632);class s extends i.S{constructor(e,t,n,r,i,s){super(e,[]),this.joined_at=t,this.member_until=n,this.first_name=r,this.family_name=i,this.permissions=s}get fullName(){return`${this.first_name} ${this.family_name}`}copy(){return new s(this.id,new Date(this.joined_at),new Date(this.member_until),this.first_name,this.family_name,[...this.permissions])}satisfies(e){if(!super.satisfies(e))return!1;if(e.has_permission)if(Array.isArray(e.has_permission)){if(e.has_permission.some((e=>!this.permissions.includes(e))))return!1}else if(!this.permissions.includes(e.has_permission))return!1;return!(e.is_member&&void 0===this.member_until||e.joined_after&&e.joined_after>=this.joined_at||e.joined_before&&e.joined_before<=this.joined_at)}equals(e){return super.equals(e)&&e.joined_at.getTime()===this.joined_at.getTime()&&e.first_name===this.first_name&&e.family_name===this.family_name&&r.c.containSame(e.permissions,this.permissions)}}class o extends i.c{}},8144:(e,t,n)=>{"use strict";n.d(t,{AZ:()=>u,iA:()=>d,mw:()=>p,o1:()=>f,wX:()=>h});var r=n(7088),i=n(4112),s=n(4296),o=n(8824),a=n(9928);const c={apiKey:"AIzaSyBZukBmRVOeFJPgy0u1qJlMoLeTz4TXJ0k",authDomain:"gws-website-52cf2.firebaseapp.com",projectId:"gws-website-52cf2",storageBucket:"gws-website-52cf2.appspot.com",messagingSenderId:"488447336748",appId:"1:488447336748:web:de9e194799dacf238ccc89",measurementId:"G-HX00VJ4YYY"};Object.freeze(c);const l=(0,o.mg)(c),u=(0,i.gZ)(l),h=(0,r.Iv)(l);function d(){return h.authStateReady().then((()=>h.currentUser))}function f(e,t=!1,n=!0){t&&e(!0===a.c.get("is-logged-in")),t&&!n||d().then((t=>e(null!==t)))}a.c.get("is-logged-in")||h.signOut(),h.onAuthStateChanged((e=>{null===e?(a.c.remove("is-logged-in"),a.c.remove("do-login-expiry"),a.c.remove(`permissions-${a.c.get("own-id")}`),a.c.remove("own-id")):(a.c.get("do-login-expiry")?(a.c.set("is-logged-in",!0,Date.now()+36e5),setInterval((()=>a.c.set("is-logged-in",!0,Date.now()+36e5)),3e4)):a.c.set("is-logged-in",!0),a.c.set("own-id",e.uid))}));const p=(0,s.wv)(l)},6928:(e,t,n)=>{"use strict";n.d(t,{c:()=>k});var r=n(1244),i=n(1176);const s=class{static toKebabCase(e){let t="";for(let n=0;n<e.length;n++){const r=e[n];r===r.toUpperCase()?t+="-"+r.toLowerCase():t+=r}return t}static apply(e,t){for(const n in e){const r=e[n];t.style.setProperty(this.toKebabCase(n),r)}return t}};class o{constructor(e,t){this.elementTypeSpecific={},this._classes=new Set,this._attributes={},this._children=[],this._styleMap={},this._handlers={},this._onMakeHandlers=[],this.tagName=e,this.initElem=t}id(e){return this._id=e,this}class(...e){for(const t of e)"string"==typeof t&&this._classes.add(t);return this}attr(e,t=""){return null!==t&&(this._attributes[e]=t.toString()),this}attrs(e){for(const t in e)this._attributes[t]=e[t].toString();return this}text(e){return this._text=e,this}tooltip(e){return e&&(this._tooltip=e),this}draggable(e){return this._draggable=e,this}noFocus(e=!0){return this._noFocus=e,this}canSelect(e){return!0===e?e="all":!1===e&&(e="none"),this._canSelect=e,this}html(e){return this._html=e,this}children(...e){return this._children.push(...e.filter((e=>null!==e))),this}style(e){for(const t in e){const n=e[t];void 0===n?delete this._styleMap[t]:this._styleMap[t]=n}return this}on(e,t){return this._handlers[e]=t,this}onMake(e){return this._onMakeHandlers.push(e),this}make(){const e=this.initElem?this.initElem():document.createElement(this.tagName);void 0!==this._id&&(e.id=this._id),this._classes.size>0&&e.classList.add(...this._classes);for(const t in this._attributes)e.setAttribute(t,this._attributes[t]);this._html&&(e.innerHTML=this._html),void 0!==this._text&&(e.textContent=this._text),void 0!==this._tooltip&&(e.title=this._tooltip),this._draggable&&(e.draggable=!0),this._noFocus&&e.addEventListener("mousedown",(e=>e.preventDefault())),this._canSelect&&(e.style.userSelect=this._canSelect);for(const t of this._children)if(t)if(t instanceof Node)e.appendChild(t);else if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(t instanceof o)e.appendChild(t.make());else{let n=t(e);Array.isArray(n)||(n=[n]),e.append(...o.Child.toNodes(n))}s.apply(this._styleMap,e);for(const t in this.elementTypeSpecific)e[t]=this.elementTypeSpecific[t];for(const t of Object.keys(this._handlers)){const n=t,r=this._handlers[n];e.addEventListener(n,(t=>r(t,e)))}for(const t of this._onMakeHandlers)t(e);return e}static specific(e,t,n){const r=new o(e,n);for(const e of t)Reflect.defineProperty(r,e,{writable:!1,value:t=>(r.elementTypeSpecific[e]=t,r)});return r}}!function(e){let t;!function(t){t.toNodes=function(t){const n=[];for(const r of t)r instanceof Node?n.push(r):"string"==typeof r?n.push(document.createTextNode(r)):r instanceof e&&n.push(r.make());return n}}(t=e.Child||(e.Child={}))}(o||(o={}));const a=o;class c extends o{constructor(){super("a"),this._openInNewTab=!1}href(e){return this._href=e,this}download(e=""){this._downloadLink=e}openInNewTab(e){return this._openInNewTab=e,this}make(){const e=super.make();return void 0!==this._href&&(e.href=this._href),void 0!==this._downloadLink&&(e.download=this._downloadLink),this._openInNewTab&&(e.target="_blank"),e}}class l extends o{constructor(){super("select"),this._options={}}option(e,t=e,n=!1){return this._options[e]=[t,n],this}options(e){if(Array.isArray(e))e.forEach((e=>{Array.isArray(e)?this._options[e[0]]=e:this._options[e]=[e,!1]}));else for(const t in e){const n=e[t];this._options[t]=Array.isArray(n)?n:[n,!1]}return this}value(e){return this._value=e,this}onValueChanged(e){return this._onValueChanged=e,this}make(){const e=super.make();for(const t in this._options){const n=document.createElement("option");n.value=t,n.selected=t===this._value,n.textContent=this._options[t][0],this._options[t][1]&&(n.hidden=!0),e.options.add(n)}if(window.addEventListener("change",(t=>{t.target===e&&(e.prevValue=e.value)})),this._onValueChanged){const t=this._onValueChanged;e.addEventListener("change",(()=>t(e.value,e.prevValue)))}return e}}class u extends o{constructor(){super("rich-text-input",(()=>new i.c))}value(e){return this._value=e,this}placeholder(e){return this._placeholder=e,this}compact(e=!0){return e&&super.attr("compact"),this}make(){const e=super.make();return this._value&&(e.value=this._value),this._placeholder&&(e.placeholder=this._placeholder),e}}var h=n(5245);class d extends a{constructor(){super("folder-element",(()=>new h.c))}foldDir(e){return this._foldDir=e,this}hideArrow(e=!0){return this._arrowHidden=e,this}closingDelay(e){return this._closingDelay=e,this}heading(e){return this._heading=e,this}contentPosition(e){return this._contentPosition=e,this}make(){const e=super.make();return this._foldDir&&(e.foldDir=this._foldDir),e.arrowHidden=this._arrowHidden??!1,this._closingDelay&&(e.closingDelay=this._closingDelay),this._contentPosition&&(e.contentsPosition=this._contentPosition),this._heading&&(this._heading instanceof Element||this._heading instanceof a||(this._heading=this._heading(e)),e.heading=this._heading instanceof a?this._heading.make():this._heading),e}}var f,p=n(784);!function(e){const t={button:e=>e,checkbox:e=>e,color:(...e)=>{if(1===e.length)return e[0];{const[t,n,r]=e;return`#${t.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`}},date:(...e)=>`${e[0].toString().padStart(4,"0")}-${(e[1]+1).toString().padStart(2,"0")}-${e[2].toString().padStart(2,"0")}`,"datetime-local":(...e)=>{let t;if(e[0]instanceof Date){const n=p.c.Timestamps.copy(e[0]);n.setMinutes(n.getMinutes()-n.getTimezoneOffset()),t=n.toISOString()}else t=new Date(e[0],e[1],e[2],e[3],e[4]).toISOString();return t.includes(".")?t.substring(0,t.indexOf(".")):t},email:e=>e,file:e=>e,hidden:e=>e,image:()=>"",month:(e,t)=>`${e.toString().padStart(4,"0")}-${(t+1).toString().padStart(2,"0")}`,number:e=>e.toString(),password:e=>e,radio:e=>e,range:e=>e.toString(),reset:e=>e,search:e=>e,submit:e=>e,tel:e=>e,text:e=>e,time:(e,t)=>`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`,url:e=>e,week:(e,t)=>`${e.toString().padStart(4,"0")}-W${t.toString().padStart(2,"0")}`};e.translateTypedValue=function(e,...n){return t[e](...n)}}(f||(f={}));class g extends a{constructor(e){super("input"),this.type=e}value(...e){return this._value=e,this}name(e){return this._name=e,this}disabled(e){return this._disabled=e,this}attr(e,t){return"value"===e||"onchange"===e?this:super.attr(e,t)}attrs(e){return delete e.value,delete e.onchange,super.attrs(e)}onValueChanged(e){return this._onValueChanged=e,this}make(){const e=super.make();if(e.type=this.type,void 0!==this._value){const t=f.translateTypedValue(this.type,...this._value);e.value=t}if(e.prevValue=e.value,window.addEventListener("input",(t=>{t.target===e&&(e.prevValue=e.value)})),this._onValueChanged){const t=this._onValueChanged;e.addEventListener("input",(()=>t(e.value,e.prevValue)))}return void 0!==this._name&&(e.name=this._name),this._disabled&&(e.disabled=!0),e}}class m extends g{onClick(e){return this._onClick=e,this}make(){const e=super.make();if(this._onClick){const t=this._onClick;e.addEventListener("click",(()=>t(e.value)))}return e}}class y extends g{constructor(e){super(e),this._checked=!1}checked(e){return this._checked=e,this}onCheckedChanged(e){return this._onCheckedChanged=e,this}make(){const e=super.make();if(e.checked=this._checked,e.wasChecked=e.checked,window.addEventListener("input",(t=>{t.target===e&&((e.wasChecked=e.checked)?e.setAttribute("was-checked",""):e.removeAttribute("was-checked"))})),this._onCheckedChanged){const t=this._onCheckedChanged;e.addEventListener("input",(()=>t(e.checked,e.wasChecked)))}return e}}class v extends g{constructor(e){super(e),this._step=1}min(...e){return this._min=e,this}max(...e){return this._max=e,this}step(e){return this._step=e,this}make(){const e=super.make();return void 0!==this._min&&(e.min=f.translateTypedValue(this.type,...this._min)),void 0!==this._max&&(e.max=f.translateTypedValue(this.type,...this._max)),e.step=this._step.toString(),e}}class E extends v{make(){const e=super.make();return e.prevValueAsNumber=Number.parseFloat(e.prevValue),window.addEventListener("change",(t=>{t.target===e&&(e.prevValueAsNumber=Number.parseFloat(e.prevValue))})),e}}class w extends v{make(){const e=super.make();return e.prevValueAsDate=new Date(e.prevValue),window.addEventListener("change",(t=>{t.target===e&&(e.prevValueAsDate=new Date(e.prevValue))})),e}}class _ extends g{constructor(e){super(e)}list(e){return this._list="string"==typeof e?e:e.id,this}minLength(e){return this._minLength=Math.floor(e),this}maxLength(e){return this._maxLength=Math.floor(e),this}placeholder(e){return this._placeholder=e,this}readonly(e){return this._readonly=e,this}size(e){return this._size=Math.floor(e),this}spellcheck(e){return this._spellcheck=e,this}make(){const e=super.make();return void 0!==this._list&&e.setAttribute("list",this._list),void 0!==this._minLength&&(e.minLength=this._minLength),void 0!==this._maxLength&&(e.maxLength=this._maxLength),this._placeholder&&(e.placeholder=this._placeholder),this._readonly&&(e.readOnly=this._readonly),void 0!==this._size&&(e.size=this._size),this._spellcheck&&(e.spellcheck=this._spellcheck),e}}var b=n(3236),T=n(8332);class S extends a{constructor(){super("icon-selector",(()=>new T.c)),this._options=[]}options(...e){return this._options.push(...e),e.find((e=>e[3])),this}value(e){return this._value=e,this}make(){let e=super.make();for(const t of this._options)e=e.addOption(...t);return void 0!==this._value&&(e.value=this._value),e}}var I=n(9368);class A extends a{constructor(e,t,n){super("switch-input",(()=>new I.c(e,t,n)))}}class C{static header(){return new a("header")}static footer(){return new a("footer")}static div(e,...t){const n=new a("div");return"string"==typeof e&&n.id(e),n.class(...t),n}static heading(e,t){const n=this[`h${e=r.c.clamp(Math.floor(e),1,6)}`]();return t&&n.text(t),n}static h1(e){const t=new a("h1");return e?t.text(e):t}static h2(e){const t=new a("h2");return e?t.text(e):t}static h3(e){const t=new a("h3");return e?t.text(e):t}static h4(e){const t=new a("h4");return e?t.text(e):t}static h5(e){const t=new a("h5");return e?t.text(e):t}static h6(e){const t=new a("h6");return e?t.text(e):t}static p(e){const t=new a("p");return e?t.text(e):t}static richText(e){return C.div().class("rich-text").children(...b.c.deserialize(e))}static text(e){return document.createTextNode(e??"")}static span(e){const t=new a("span");return e?t.text(e):t}static a(e,t){const n=new c;return n.onMake((e=>{e.addEventListener("click",(()=>{e.href&&!e.hasAttribute("download")&&("_blank"===e.target?open(e.href):location.href=e.href)}))})),e&&n.href(e),t?n.text(t):n}static img(e,t){const n=a.specific("img",["src","alt"],(()=>document.createElement("img")));return e&&n.src(e),t?n.alt(t):n}static label(e,t){const n=a.specific("label",["htmlFor"],(()=>document.createElement("label")));return e&&n.text(e),t&&n.htmlFor(t),n}static button(e){const t=new a("button");return e&&t.on("click",e),t}static iconButton(e,t,n){return C.p(e).class("icon","icon-button","click-action","no-margin").tooltip(n||null).noFocus().on("click",t)}static textarea(e){const t=a.specific("textarea",["value","placeholder","minLength","maxLength","readOnly","spellcheck","rows","cols"],(()=>document.createElement("textarea")));return e&&t.value(e),t}static select(e=[]){return(new l).options(e)}static option(e,t,n){const r=a.specific("option",["value","selected","hidden"],(()=>document.createElement("option")));return void 0!==e&&r.value(e),void 0!==t&&r.selected(t),void 0!==n&&r.hidden(n),r}static optgroup(e){const t=a.specific("optgroup",["label"],(()=>document.createElement("optgroup")));return void 0!==e&&t.label(e),t}static iconSelector(...e){const t=new S;return t.options(...e),t}static hr(){return new a("hr")}static br(){return new a("br")}static ul(){return a.specific("ul",[],(()=>document.createElement("ul")))}static ol(){return a.specific("ul",[],(()=>document.createElement("ol")))}static li(e){const t=a.specific("li",[],(()=>document.createElement("li")));return e&&t.text(e),t}static folderElement(e,t,n){const r=new d;return e&&r.foldDir(e),"number"==typeof t&&r.closingDelay(t),n&&r.hideArrow(n),r}}C.input={button(e,t){const n=new m("button");return void 0!==e&&n.value(e),t?n.onClick(t):n},checkbox:()=>new y("checkbox"),color(e){const t=new g("color");return e&&t.value(e),t},date(e,t,n,r){const i=new w("date");return e&&i.value(e.getFullYear(),e.getMonth(),e.getDate()),t&&i.min(t.getFullYear(),t.getMonth(),t.getDate()),n&&i.max(n.getFullYear(),n.getMonth(),n.getDate()),"number"==typeof r&&i.step(r),i},dateTimeLocal(e,t,n,r){const i=new w("datetime-local");return e instanceof Date&&i.value(e),t instanceof Date&&i.min(t),n instanceof Date&&i.max(n),"number"==typeof r&&i.step(r),i},email:()=>new _("email"),file:()=>new _("file"),image:()=>new g("image"),month(e,t){const n=new w("month");return void 0!==e&&void 0!==t?n.value(e,t):void 0!==e?n.value(e,(new Date).getMonth()):void 0!==t&&n.value((new Date).getFullYear(),t),n},number(e,t,n,r){const i=new E("number");return"number"==typeof e&&i.value(e),"number"==typeof t&&i.min(t),"number"==typeof n&&i.max(n),"number"==typeof r&&i.step(r),i},password:()=>new _("password"),radio:()=>new y("radio"),range(e,t,n,r){const i=new E("range");return"number"==typeof e?i.value(e):"number"==typeof t&&i.value(t),"number"==typeof t&&i.min(t),"number"==typeof n&&i.max(n),"number"==typeof r&&i.step(r),i},reset:()=>new m("reset"),search:()=>new _("search"),submit:()=>new m("submit"),switch:(e,t,n)=>new A(e,t,n),tel:()=>new _("tel"),text(e){const t=new _("text");return e&&t.value(e),t},time:()=>new v("time"),url(e){const t=new _("url");return e&&t.value(e),t},week(e,t){const n=new w("week");return void 0!==e&&void 0!==t?n.value(e,t):void 0!==e?n.value(e,1):void 0!==t&&n.value((new Date).getFullYear(),t),n},richText(e,t){const n=new u;return e&&n.value(e),void 0!==t&&n.compact(t),n}};const k=C},4388:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var r,i=n(9684);!function(e){let t;!function(e){e[e.DESKTOP=0]="DESKTOP",e[e.DESKTOP_SLIM=1]="DESKTOP_SLIM",e[e.SQUARE=2]="SQUARE",e[e.TABLET_PORTRAIT=3]="TABLET_PORTRAIT",e[e.MOBILE_PORTRAIT=4]="MOBILE_PORTRAIT",e[e.VERY_THIN=5]="VERY_THIN"}(t=e.Viewport||(e.Viewport={}));const n=t.DESKTOP,r={[t.DESKTOP]:{width:16,height:9},[t.DESKTOP_SLIM]:{width:4,height:3},[t.SQUARE]:{width:1,height:1},[t.TABLET_PORTRAIT]:{width:3,height:4},[t.MOBILE_PORTRAIT]:{width:10,height:16},[t.VERY_THIN]:{width:1,height:2}},s=i.c.mapToArray(r,((e,t)=>[e,matchMedia(`(max-aspect-ratio: ${t.width} / ${t.height})`)]));let o;function a(){const e=void 0!==matchMedia?s.findLast((([e,t])=>t.matches))?.[0]??n:n;if(e!==o){console.log("viewport change",o,"--\x3e",e);const t=o;o=e,c.forEach((n=>n(e,t)))}}e.getCurrent=function(){return o};const c=[];e.onChange=function(e,t=!1){c.push(e),t&&e(o,o)},e.is=function(e){return e===o},e.isAnyOf=function(...e){return e.includes(o)},e.isWiderThan=function(e){return e>o},e.isWiderOrEq=function(e){return e>=o},e.isSlimmerThan=function(e){return e<o},e.isSlimmerOrEq=function(e){return e<=o},a(),window.addEventListener("resize",(()=>a()))}(r||(r={}));const s=r},5752:(e,t,n)=>{"use strict";n.d(t,{c:()=>d});var r,i,s=n(7588),o=n.n(s),a=n(6928),c=n(9928),l=n(4388),u=n(908);!function(e){e.INFO="info",e.SUCCESS="success",e.WARNING="warning",e.ERROR="error"}(i||(i={}));class h{static get messageLimit(){return l.c.isSlimmerOrEq(l.c.Viewport.TABLET_PORTRAIT)?1:3}static createMessage(e,t,n=5e3){const r=a.c.p().text(e).class("boxed","message",t).make();return o()(r).delay(n).fadeOut(200,"swing",(function(){this.remove()})),r}static info(e,t=5e3,n){this.MESSAGE_AREA.childElementCount+1>this.messageLimit&&this.MESSAGE_AREA.lastChild?.remove(),this.MESSAGE_AREA.prepend(this.createMessage(e,r.MessageType.INFO,t)),n&&setTimeout(n,t)}static relayInfo(e,t=5e3){c.c.set("relayed-message",{type:r.MessageType.INFO,content:e,lifetime:t},Date.now()+1e4)}static success(e,t=5e3,n){this.MESSAGE_AREA.childElementCount+1>this.messageLimit&&this.MESSAGE_AREA.lastChild?.remove(),this.MESSAGE_AREA.prepend(this.createMessage(e,r.MessageType.SUCCESS,t)),n&&setTimeout(n,t)}static relaySuccess(e,t=5e3){c.c.set("relayed-message",{type:r.MessageType.SUCCESS,content:e,lifetime:t},Date.now()+1e4)}static warning(e,t=5e3,n){this.MESSAGE_AREA.childElementCount+1>this.messageLimit&&this.MESSAGE_AREA.lastChild?.remove(),this.MESSAGE_AREA.prepend(this.createMessage(e,r.MessageType.WARNING,t)),n&&setTimeout(n,t)}static relayWarning(e,t=5e3){c.c.set("relayed-message",{type:r.MessageType.WARNING,content:e,lifetime:t},Date.now()+1e4)}static error(e,t=5e3,n){this.MESSAGE_AREA.childElementCount+1>this.messageLimit&&this.MESSAGE_AREA.lastChild?.remove(),this.MESSAGE_AREA.prepend(this.createMessage(e,r.MessageType.ERROR,t)),n&&setTimeout(n,t)}static relayError(e,t=5e3){c.c.set("relayed-message",{type:r.MessageType.ERROR,content:e,lifetime:t},Date.now()+1e4)}}r=h,u.c.onDOMContentLoaded().then((()=>{r.MESSAGE_AREA=document.body.appendChild(document.createElement("div")),r.MESSAGE_AREA.id="info-messages",r.MESSAGE_AREA.classList.add("flex-rows","cross-axis-center");const e=c.c.get("relayed-message");if(e){switch(e.type){case r.MessageType.INFO:r.info(e.content,e.lifetime);break;case r.MessageType.SUCCESS:r.success(e.content,e.lifetime);break;case r.MessageType.WARNING:r.warning(e.content,e.lifetime);break;case r.MessageType.ERROR:r.error(e.content,e.lifetime)}c.c.remove("relayed-message")}})),function(e){e.MessageType=i}(h||(h={}));const d=h},8392:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});class r{static equal(e,t){return e.length===t.length&&e.every(((e,n)=>e===t[n]))}static containSame(e,t){return e.every((e=>t.includes(e)))&&t.every((t=>e.includes(t)))}static intersection(e,t){return e.filter((e=>t.includes(e)))}static union(e,t,n=!1){return n?[...e,...this.difference(t,e)]:[...e,...t]}static difference(e,t){return e.filter((e=>!t.includes(e)))}static symmetricDifference(e,t){return[...this.difference(e,t),...this.difference(t,e)]}static sortAlphabetically(e){return e.toSorted(((e,t)=>e.localeCompare(t)))}static remove(e,t,n=!1){let r=!1;if(n){let n=e.indexOf(t);for(;-1!==n;)e.splice(n,1),n=e.indexOf(t),r=!0}else{let n=e.indexOf(t);-1!==n&&(e.splice(n,1),n=e.indexOf(t),r=!0)}return r}static uniqueElements(e){const t=[...e];for(let e=0;e<t.length;e++){const n=t[e];for(let r=e+1;r<t.length;r++)for(;r<t.length&&t[r]===n;)t.splice(r,1)}return t}static batch(e,t){e=[...e];const n=[];for(;0!==e.length;)n.push(e.splice(0,t));return n}static count(e,t){let n=0;for(let r=0;r<e.length;r++)n+=t(e[r],r,e)?1:0;return n}static includesAll(e,...t){return t.every((t=>e.includes(t)))}static interlace(e,t){const n=[];for(const r of e)0!==n.length&&n.push(t),n.push(r);return n}static shuffled(e){return e.toSorted((()=>Math.random()-.5))}static pick(e){return e[Math.floor(Math.random()*e.length)]}static pickNFrom(e,t){const n=[];for(let r=0;r<e;r++)n.push(this.pick(t));return n}}},8440:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var r=n(9928),i=n(8860),s=n(1244);class o{static isHex(e){return"string"==typeof e&&e.startsWith("#")}static isRGB(e){return Array.isArray(e)&&3===e.length&&e.every((e=>0<=e&&e<=255))}static isRGBString(e){return"string"==typeof e&&e.startsWith("rgb(")&&e.endsWith(")")&&e.substring(4,e.length-1).split(", ").every(((e,t,n)=>3===n.length&&s.c.isInt(e)&&s.c.isBetween(Number.parseInt(e),0,255)))}static toRGB(e){if(this.isHex(e)){const t=Number.parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]}return this.isRGBString(e)?e.substring(4,e.length-1).split(", ").map((e=>Number.parseInt(e))):e}static toHex(e){if(this.isRGB(e)){const[t,n,r]=e;return`#${t.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}`}return this.isRGBString(e)?this.toHex(this.toRGB(e)):e}static getContrast(e,t){return[e,t]=[this.toRGB(e),this.toRGB(t)],e=[.299*e[0],.587*e[1],.114*e[2]],t=[.299*t[0],.587*t[1],.114*t[2]],((e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2)**.5}static getMostContrasting(e,...t){let n=-1,r=-1/0;return t.forEach(((t,i)=>{const s=this.getContrast(e,t);s>r&&([n,r]=[i,s])})),this.toHex(t[n])}static mix(e,t,n){e=this.toRGB(e),t=this.toRGB(t);const r=1-(n=s.c.clamp(n,0,1)),i=[Math.floor(e[0]*n+t[0]*r),Math.floor(e[1]*n+t[1]*r),Math.floor(e[2]*n+t[2]*r)];return this.toHex(i)}static getStringColor(e,t){return(t?Promise.resolve(t):o.STRING_COLORS).then((t=>{if(0===t.length)return o.DEFAULT_COLOR;{let n=0;for(let t=0;t<e.length;t++)n^=e.charCodeAt(t)<<t%8;return t[Math.abs(n)%t.length]}}))}}o.DEFAULT_COLOR="#BBBBBB",o.STRING_COLORS=r.c.getAndRefresh("default-category-colors",(new i.default).getDefaultCategoryColors()),o.PALETTES={RAINBOW:["#FF0000","#FF8700","#FFD300","#DEFF0A","#A1FF0A","#0AFF99","#0AEFFF","#147DF5","#580AFF","#BE0AFF"]};const a=o},784:(e,t,n)=>{"use strict";n.d(t,{c:()=>o});var r,i=n(9684);class s{static get FIRST(){return new Date(-864e13)}static get LAST(){return new Date(864e13)}}r=s,s.Days={firstBefore(e,t){const n=r.WEEK_DAY_INDICES[t],i=new Date(e);for(;i.getDay()!==n;)i.setDate(i.getDate()-1);return i.setHours(0,0,0,0),i},firstAfter(e,t){const n=r.WEEK_DAY_INDICES[t],i=new Date(e);for(;i.getDay()!==n;)i.setDate(i.getDate()+1);return i.setHours(0,0,0,0),i},isSame:(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),isWeekend:e=>0===e.getDay()||6===e.getDay(),isBetween:(e,t,n)=>([e,t,n]=[e,t,n].map(r.Timestamps.copy),t.setHours(0,0,0,0),n.setHours(23,59,59,999),e>=t&&e<=n),earlierThan:(e,t)=>e.getFullYear()<t.getFullYear()||e.getFullYear()===t.getFullYear()&&e.getMonth()<t.getMonth()||e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()<t.getDate(),earlierOrSame(e,t){return this.isSame(e,t)||this.earlierThan(e,t)},laterThan:(e,t)=>e.getFullYear()>t.getFullYear()||e.getFullYear()===t.getFullYear()&&e.getMonth()>t.getMonth()||e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()>t.getDate(),laterOrSame(e,t){return this.isSame(e,t)||this.laterThan(e,t)},spanInDays(e,t){e>t&&([e,t]=[t,e]);const n=new Date(e);let i=1;for(;!r.Days.isSame(n,t);)i++,n.setDate(n.getDate()+1);return i},getRange(e,t){if((e=new Date(e)).setHours(0,0,0,0),"number"==typeof t){const n=t;(t=new Date(e)).setDate(t.getDate()+n)}else t=new Date(t);if(e>t)return[];const n=[];do{n.push(new Date(e)),e.setDate(e.getDate()+1)}while(!r.Days.isSame(e,t));return n}},s.Timespans={overlap:(e,t)=>t[1]>=e[0]&&t[0]<=e[1],daysOverlap:(e,t)=>r.Days.laterOrSame(t[1],e[0])&&r.Days.earlierOrSame(t[0],e[1]),areFullDays(e,t=!1){const[n,r]=e;return!(0!==n.getHours()||0!==n.getMinutes()||0!==n.getSeconds()||t&&0!==n.getMilliseconds()||23!==r.getHours()||59!==r.getMinutes()||59!==r.getSeconds()||t&&999!==r.getMilliseconds())}},s.Timestamps={earliest(...e){let t=e[0];for(let n=1;n<e.length;n++)t=e[n]<t?e[n]:t;return t},latest(...e){let t=e[0];for(let n=1;n<e.length;n++)t=e[n]>t?e[n]:t;return t},clamp:(e,t=r.FIRST,n=r.LAST)=>e<t?new Date(t):e>n?new Date(n):new Date(e),justBefore:e=>((e=new Date(e)).setMilliseconds(e.getMilliseconds()-1),e),justAfter:e=>((e=new Date(e)).setMilliseconds(e.getMilliseconds()+1),e),fromInputs(e,t){if(e instanceof HTMLInputElement){if("date"!==e.type)throw new Error(`parameter 'date' is not a date input (is "${e.type}" instead)`);e=e.value}if(t instanceof HTMLInputElement){if("time"!==t.type)throw new Error(`parameter 'time' is not a time input (is "${t.type}" instead)`);t=t.value}let[n,r,i]=e.split("-").map((e=>Number.parseInt(e))).filter((e=>!isNaN(e)));n||(n=1970),r||(r=1),r--,i||(i=1);let[s,o,a,c]=t.split(":").map((e=>Number.parseInt(e))).filter((e=>!isNaN(e)));return s||(s=0),o||(o=0),a||(a=0),c||(c=0),new Date(n,r,i,s,o,a,c)},setInputValue(e,t){if(!this.isValid(t))throw new Error("value is invalid Date object");if((t=this.copy(t)).setMinutes(t.getMinutes()-t.getTimezoneOffset()),"datetime-local"===e.type){const n=t.toISOString();return e.value=n.includes(".")?n.substring(0,n.indexOf(".")):n}if("date"===e.type){const n=`${t.getFullYear().toString().padStart(4,"0")}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`;return e.value=n}throw new Error(`invalid input type: ${e.type}`)},copy:e=>new Date(e),isValid:e=>null!==e&&(e="string"==typeof e?new Date(e):e,!isNaN(e.getTime()))},s.DATE_FORMATS={DAY:{SHORT_NO_YEAR:(e,t="nl-NL")=>e.toLocaleDateString(t,{day:"numeric",month:"short"}),SHORT:(e,t="nl-NL")=>e.toLocaleDateString(t,{day:"numeric",month:"short",year:"numeric"}),MEDIUM:(e,t="nl-NL")=>e.toLocaleDateString(t,{dateStyle:"medium"}),LONG:(e,t="nl-NL")=>e.toLocaleDateString(t,{weekday:"long",day:"numeric",month:"long"})},TIME:{SHORT:(e,t="nl-NL")=>e.toLocaleTimeString(t,{timeStyle:"short"})},DAY_AND_TIME:{SHORT_NO_YEAR:(e,t="nl-NL")=>`${r.DATE_FORMATS.DAY.SHORT_NO_YEAR(e,t)} (${r.DATE_FORMATS.TIME.SHORT(e,t)})`,SHORT:(e,t="nl-NL")=>`${r.DATE_FORMATS.DAY.SHORT(e,t)} (${r.DATE_FORMATS.TIME.SHORT(e,t)})`},DURATION:{HOURS_AND_MINUTES:(e,t)=>{let n=t.getTime()-e.getTime();const r=Math.floor(n/36e5);return n%=36e5,`${r} uur en ${Math.round(n/6e4)} minuten`}}},i.c.deepFreeze(r.Days),i.c.deepFreeze(r.Timespans),i.c.deepFreeze(r.Timestamps),i.c.deepFreeze(r.DATE_FORMATS),function(e){e.WEEK_DAY_INDICES={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:0},Object.freeze(e.WEEK_DAY_INDICES)}(s||(s={}));const o=s},6316:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});var r=n(992);class i{static getAttrAsNumber(e,t,n=!1){const r=e.hasAttribute(t)?Number.parseFloat(e.getAttribute(t)):null;return null===r||!n&&isNaN(r)?null:r}static getAttrAs(e,t,n){if(!e.hasAttribute(t))return null;const r=e.getAttribute(t);return n?n(r)?r:null:r}static queryAncestors(e,t,n=!1){if(null===e)return[];{const r=[];n&&e instanceof Element&&e.matches(t)&&r.push(e);let i=e.parentNode;for(;null!==i;)i instanceof Element&&i.matches(t)&&r.push(i),i=i.parentNode;return r}}static isChain(e){return!!r.c.isEmpty(e)||1===e.childElementCount&&this.isChain(e.firstElementChild)}static getChainEnd(e){return r.c.isEmpty(e)?e:1===e.childElementCount?this.getChainEnd(e.firstElementChild):e}static isAtScrollTop(e,t=1){return e.scrollTop<=t}static isAtScrollBottom(e,t=1){return e.scrollHeight-e.scrollTop-e.clientHeight<=t}static isReplacedElement(e){return e instanceof HTMLIFrameElement||e instanceof HTMLVideoElement||e instanceof HTMLEmbedElement||e instanceof HTMLImageElement}static disable(e){let t=Number.parseInt(e.getAttribute("disabled")??"0");return t++,e.setAttribute("disabled",t.toString()),t}static enable(e){let t=Number.parseInt(e.getAttribute("disabled")??"0");return t--,t<=0?e.removeAttribute("disabled"):e.setAttribute("disabled",t.toString()),t}}},4440:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});class r{static setDelayedCallback(e,t){const n=this.delayedCallbacks.findIndex((t=>t[0]===e));-1!==n&&(clearTimeout(this.delayedCallbacks[n][1]),this.delayedCallbacks.splice(n,1));const r=setTimeout((()=>{e();const t=this.delayedCallbacks.findIndex((t=>t[0]===e));this.delayedCallbacks.splice(t,1)}),t);this.delayedCallbacks.push([e,r])}}r.delayedCallbacks=[];const i=r},992:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});class r{static isEmpty(e){return Array.from(e.childNodes).every((e=>e.nodeType===Node.TEXT_NODE&&0===e.textContent.length))}static empty(e,t=Node){return Array.from(e.childNodes).forEach((n=>{n instanceof t&&e.removeChild(n)})),e}static limitWords(e,t){if(e.nodeType===Node.TEXT_NODE)if(t<=0)e.textContent="";else{const n=e.textContent.split(" ",isFinite(t)?t:void 0);t-=n.length,e.textContent=n.join(" ")}else e.childNodes.forEach((e=>t=this.limitWords(e,t))),e.normalize();return t}static extractChildren(e){const t=[];for(;e.firstChild;)t.push(e.removeChild(e.firstChild));return t}static swap(e,t){const[n,r]=[document.createTextNode(""),document.createTextNode("")];e.replaceWith(n),t.replaceWith(r),n.replaceWith(t),r.replaceWith(e)}static getLeafNodes(e){if(0===e.childNodes.length)return[e];{const t=[];return e.childNodes.forEach((e=>t.push(...this.getLeafNodes(e)))),t}}static getAncestors(e){const t=[];let n=e.parentNode;for(;n;)t.push(n),n=n.parentNode;return t}static getChildIndex(e,t){let[n,r]=[e.firstChild,0];for(;null!==n;){if(n===t)return r;[n,r]=[n.nextSibling,r+1]}return-1}static whenInsertedIn(e,t){return new Promise(((n,r)=>{if(t.contains(e))n(e);else{const r=new MutationObserver((i=>{t.contains(e)&&(n(e),r.disconnect())}));r.observe(t,{childList:!0,subtree:!0})}}))}static onEach(e,t){e.childNodes.forEach((e=>this.onEach(e,t))),t(e)}static deepReplaceAll(e,t,n){if(e.nodeType===Node.TEXT_NODE){const r=e,i=r.textContent.indexOf(t);-1!==i&&r.replaceData(i,t.length,n)}else e.childNodes.forEach((e=>this.deepReplaceAll(e,t,n)))}}},1244:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});class r{static clamp(e,t=-1/0,n=1/0,r=!1){return r&&isNaN(e)?t:Math.max(t,Math.min(n,e))}static isBetween(e,t=-1/0,n=1/0,r=!0){return r?t<=e&&e<=n:t<e&&e<n}static randInt(e,t){return e>t&&([e,t]=[t,e]),Math.floor(e+Math.random()*(t-e))}static isNumber(e){return!isNaN(Number.parseFloat(e))}static isInt(e){return!isNaN(Number.parseInt(e))&&Number.parseInt(e)===Number.parseFloat(e)}static parse(e,t=0){const n=Number.parseFloat(e);return isNaN(n)?t:n}static range(e,t,n=1,r=!1){const i=[];if(n=Math.abs(n),e<t)if(r)for(let r=e;r<=t;r+=n)i.push(r);else for(let r=e;r<t;r+=n)i.push(r);else if(r)for(let r=e;r>=t;r-=n)i.push(r);else for(let r=e;r>t;r-=n)i.push(r);return i}static closest(e,t){if(0===t.length)throw new Error('parameter "options" must contain at least one element');let n=Math.abs(e-t[0]),r=t[0];for(let i=1;i<t.length;i++){const s=Math.abs(e-t[i]);s<n&&([n,r]=[s,t[i]])}return r}}},9684:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});class r{static sizeOf(e){let t=0;for(const n in e)t++;return t}static keys(e){return Object.keys(e)}static values(e){return Object.values(e)}static deepCopy(e){if("object"==typeof e){if(Array.isArray(e))return[...e].map((e=>this.deepCopy(e)));if(e instanceof Date)return new Date(e);{const t={};for(const n in e)t[n]=this.deepCopy(e[n]);return t}}return e}static deepFreeze(e){for(const t of Object.keys(e)){const n=e[t];"object"==typeof n&&this.deepFreeze(n)}Object.freeze(e)}static deepEquals(e,t){return e===t||typeof e==typeof t&&("object"==typeof e&&"object"==typeof t?null!==e&&null!==t&&(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(((e,n)=>this.deepEquals(e,t[n]))):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():Object.keys(e).every((n=>n in t&&this.deepEquals(e[n],t[n])))&&Object.keys(t).every((n=>n in e&&this.deepEquals(t[n],e[n])))):e===t)}static mapToObject(e,t){const n={};return e.forEach(((e,r,i)=>n[e]=t(e,r,i))),n}static mapToArray(e,t){const n=[];for(const r in e)n.push(t(r,e[r],e));return n}static some(e,t){for(const n in e)if(t(n,e[n],e))return!0;return!1}static every(e,t){for(const n in e)if(!t(n,e[n],e))return!1;return!0}static forEach(e,t){let n=0;for(const r in e)t(r,e[r],n,e),n++}}},8036:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});class r{static generateID(e=20,t=!1){let n="";if(t){const t=new Uint16Array(e);crypto.getRandomValues(t),t.forEach((e=>n+=this.ID_CHARS[e%this.ID_CHARS.length]))}else for(;n.length<e;)n+=this.ID_CHARS[Math.floor(Math.random()*this.ID_CHARS.length)];return n}static capitalize(e){return e.slice(0,1).toUpperCase()+e.slice(1)}static normalize(e){return e.normalize("NFD").replace(/\p{Diacritic}/gu,"").toLocaleLowerCase().trim()}}r.ID_CHARS="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";const i=r},8356:(e,t,n)=>{"use strict";n.d(t,{O:()=>r,c:()=>o});var r,i=n(784),s=n(1244);!function(e){const t=["application/x-freearc","application/x-bzip","application/x-bzip2","application/gzip","application/vnd.rar","application/x-tar","application/zip","application/x-7z-compressed"];e.fromContentType=function(e){return t.some((t=>e.startsWith(t)))?"compressed-folder":e.startsWith("application/pdf")?"pdf":e.substring(0,e.indexOf("/"))}}(r||(r={}));class o{static toURL(e){if(e instanceof URL)return e;try{return new URL(e)}catch{if(e){if(e.startsWith("/"))return new URL(location.origin+e);{e.startsWith("./")&&(e=e.substring(2));const t=location.href.substring(0,location.href.lastIndexOf("/"));return new URL(`${t}/${e}`)}}return new URL(location.href)}}static createLinkBackURL(e,t=location.href){return e=this.toURL(e),t=this.toURL(t),e.searchParams.append("return-to",t.toString()),e}static isLocal(e){try{return(e=this.toURL(e)).origin===location.origin}catch{return!1}}static getType(e){return this.getInfo(e).then((e=>e.fileType))}static getInfo(e){return new Promise(((t,n)=>{try{const o=this.toURL(e),a=new XMLHttpRequest;a.timeout=2500,a.onerror=e=>n(404===a.status?new Error("Kan bestand niet vinden",{cause:"not found"}):new Error("Er ging iets mis",{cause:"unknown"})),a.ontimeout=e=>n(new Error("Kan bestand niet vinden",{cause:"timeout"})),a.onload=()=>{if(200<=a.status&&a.status<300){const e={contentType:a.getResponseHeader("content-type"),contentLength:a.getResponseHeader("content-length"),lastModified:a.getResponseHeader("last-modified")},n=o.href,c=o.pathname.substring(o.pathname.lastIndexOf("/")+1),l=e.contentType??"unknown/unknown";let u=r.fromContentType(l);const h=e.contentLength&&s.c.isInt(e.contentLength)?Number.parseInt(e.contentLength):void 0,d=e.lastModified&&i.c.Timestamps.isValid(e.lastModified)?new Date(e.lastModified):void 0;t({href:n,name:c,contentType:l,fileType:u,size:h,lastModified:d})}else n(new Error("Er ging iets mis",{cause:"unknown"}))},a.open("HEAD",o,!0),a.send()}catch{n(new Error("URL is ongeldig",{cause:"invalid url"}))}}))}static getHashProperties(e=location){const t=e.hash.substring(1).split(",").filter((e=>0!==e.length)),n={};for(const e of t){const[t,r]=e.split("=");n[t]=r}return n}static setHashProperty(e,t){const n=this.getHashProperties(),r=n[e]??null;null===t?delete n[e]:n[e]=t;let i="#";for(const e in n)i+=(i.length>1?",":"")+`${e}=${n[e]}`;return history.replaceState(null,"",i),r}static getLinkIcon(e){try{const t=o.toURL(e);return o.isLocal(t)?["/","","/index"].includes(t.pathname)?"home":t.pathname.startsWith("/inloggen")?"login":t.pathname.startsWith("/artikel")?"newsmode":t.pathname.startsWith("/agenda")?t.searchParams.has("id")?"event_note":"calendar_month":t.pathname.startsWith("/administratiepaneel")?"admin_panel_settings":"link":"open_in_new"}catch{return"error"}}}},9796:(e,t,n)=>{"use strict";var r,i;n.d(t,{s:()=>i}),function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e[e.FULL=3]="FULL"}(r||(r={})),function(e){e.checkType=function(t){return e.LOW<=t&&t<=e.FULL},e.toString=function(t){switch(t){case e.LOW:return"low";case e.MEDIUM:return"medium";case e.HIGH:return"high";case e.FULL:return"full"}},e.fromString=function(t){switch(t){case"low":return e.LOW;case"medium":return e.MEDIUM;case"high":return e.HIGH;case"full":return e.FULL;default:return}}}(r||(r={})),function(e){e.checkType=function(e){return"firebase-storage-public"===e||"firebase-storage-protected"===e||"external"===e}}(i||(i={}))},4376:(e,t,n)=>{"use strict";n.d(t,{kx:()=>s.kx,Sg:()=>P,U5:()=>O,q4:()=>R,WE:()=>F,mg:()=>M,Kk:()=>j});var r=n(392),i=n(4212),s=n(6900);const o=(e,t)=>t.some((t=>e instanceof t));let a,c;const l=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap;let p={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||h.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function g(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(c||(c=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(y(this),e),m(l.get(this))}:function(...e){return m(t.apply(y(this),e))}:function(e,...n){const r=t.call(y(this),e,...n);return h.set(r,e.sort?e.sort():[e]),m(r)}:(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));u.set(e,t)}(e),o(e,a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,p):e);var t}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(m(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&l.set(t,e)})).catch((()=>{})),f.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=g(e);return t!==e&&(d.set(e,t),f.set(t,e)),t}const y=e=>f.get(e),v=["get","getKey","getAll","getAllKeys","count"],E=["put","add","delete","clear"],w=new Map;function _(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=E.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!v.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return w.set(t,s),s}var b;b=p,p={...b,get:(e,t,n)=>_(e,t)||b.get(e,t,n),has:(e,t)=>!!_(e,t)||b.has(e,t)};class T{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const S="@firebase/app",I="0.9.27",A=new i.YJ("@firebase/app"),C="[DEFAULT]",k={[S]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},N=new Map,D=new Map;function x(e,t){try{e.container.addComponent(t)}catch(n){A.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function R(e){const t=e.name;if(D.has(t))return A.debug(`There were multiple attempts to register component ${t}.`),!1;D.set(t,e);for(const t of N.values())x(t,e);return!0}function O(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const L=new s.UR("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class U{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.Yl("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw L.create("app-deleted",{appName:this._name})}}const P="10.8.0";function M(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const i=Object.assign({name:C,automaticDataCollectionEnabled:!1},t),o=i.name;if("string"!=typeof o||!o)throw L.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.Yd)()),!n)throw L.create("no-options");const a=N.get(o);if(a){if((0,s.IN)(n,a.options)&&(0,s.IN)(i,a.config))return a;throw L.create("duplicate-app",{appName:o})}const c=new r.op(o);for(const e of D.values())c.addComponent(e);const l=new U(n,i,c);return N.set(o,l),l}function F(e=C){const t=N.get(e);if(!t&&e===C&&(0,s.Yd)())return M();if(!t)throw L.create("no-app",{appName:e});return t}function j(e,t,n){var i;let s=null!==(i=k[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void A.warn(e.join(" "))}R(new r.Yl(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const V="firebase-heartbeat-database",B=1,q="firebase-heartbeat-store";let H=null;function $(){return H||(H=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=m(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(m(o.result),e.oldVersion,e.newVersion,m(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(V,B,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(q)}catch(e){console.warn(e)}}}).catch((e=>{throw L.create("idb-open",{originalErrorMessage:e.message})}))),H}async function z(e,t){try{const n=(await $()).transaction(q,"readwrite"),r=n.objectStore(q);await r.put(t,W(e)),await n.done}catch(e){if(e instanceof s.kx)A.warn(e.message);else{const t=L.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});A.warn(t.message)}}}function W(e){return`${e.name}!${e.options.appId}`}class G{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Y(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=K();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=K(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),X(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),X(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,s.Wg)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function K(){return(new Date).toISOString().substring(0,10)}class Y{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.yy)()&&(0,s.A3)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await $()).transaction(q),n=await t.objectStore(q).get(W(e));return await t.done,n}catch(e){if(e instanceof s.kx)A.warn(e.message);else{const t=L.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});A.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return z(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return z(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function X(e){return(0,s.Wg)(JSON.stringify({version:2,heartbeats:e})).length}R(new r.Yl("platform-logger",(e=>new T(e)),"PRIVATE")),R(new r.Yl("heartbeat",(e=>new G(e)),"PRIVATE")),j(S,I,""),j(S,I,"esm2017"),j("fire-js","")},392:(e,t,n)=>{"use strict";n.d(t,{Yl:()=>i,op:()=>a});var r=n(6900);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.o9;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=s){return this.instances.has(e)}getOptions(e=s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===s?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=s){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},4212:(e,t,n)=>{"use strict";n.d(t,{Ge:()=>i,YJ:()=>l});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},c=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class l{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}},8824:(e,t,n)=>{"use strict";n.d(t,{kx:()=>r.kx,mg:()=>r.mg});var r=n(4376);(0,r.Kk)("firebase","10.8.0","app")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(7588),t=n.n(e),r=n(5245),i=n(6928),s=n(4388),o=n(8144),a=n(3935),c=n(2464),l=n(9928),u=n(8860),h=n(8596),d=n(8828),f=n(908),p=n(992),g=n(8392);n(5752);const m=new u.default;function y(e,t){let n=!1;try{n=new URL(t).hostname!==window.location.hostname}catch(e){}return i.c.a(t).class("link").openInNewTab(n).children(i.c.h5(e).children(n?i.c.span(" open_in_new").class("icon"):null)).make()}function v(e,t=0){const n=[];for(const i in e){const s=e[i];if("string"==typeof s)n.push(y(i,s));else{const e=new r.c(i,0===t?"down":"right","absolute",200);e.append(...v(s,t+1)),n.push(e)}}return n}f.c.useDynamicContent(function(e){const n=new Date,u=1===n.getMonth()&&5===n.getDate();return l.c.getAndRefresh("navbar-links",e.getNavbarLinks()).then((e=>{let d,f,m,y;const E=i.c.header().class("page-header").children(i.c.div("header-container","flex-columns","main-axis-space-between","cross-axis-center").children(i.c.div().class("desc","flex-rows","main-axis-center").children(i.c.a("/").class("flex-columns","cross-axis-center","in-section-gap").children(i.c.h3("Den Geitenwollen Soc."),u&&i.c.h3(`${function(e){const t=["0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣"];return[...(e=Math.round(e)).toString()].map((e=>t[Number.parseInt(e)])).join("")}(n.getFullYear()-1993)}🎉`)),i.c.p("Studievereniging Sociologie Nijmegen").class("subtitle")),i.c.div().class("links","flex-columns","main-axis-center","cross-axis-baseline").children(...v(e)),i.c.div().class("quick-actions","center-content","main-axis-space-between","cross-axis-center").children(d=i.c.p("search").class("search-button","icon","click-action").on("click",((e,n)=>{n.textContent="none"===f.style.display?"search_off":"search","search_off"===n.textContent&&setTimeout((()=>y.focus()),0),t()(f).stop().slideToggle(200)})).onMake((e=>{document.body.addEventListener("click",(n=>{n.target instanceof Node&&!f.contains(n.target)&&n.target!==e&&(e.textContent="search",t()(f).stop().slideUp(200))})),s.c.onChange((()=>e.hidden=s.c.isSlimmerOrEq(s.c.Viewport.MOBILE_PORTRAIT)))})).make(),i.c.p("admin_panel_settings").class("icon","click-action").tooltip("Administratie-paneel").on("click",(()=>location.href="/administratiepaneel.html")).onMake((e=>{(0,a.kL)(c.c.Permission.VIEW_ADMIN_PANEL,(t=>e.style.display=t?"":"none"),!0,!0)})),i.c.p("login").class("icon","click-action").tooltip("Inloggen").on("click",(()=>location.href="/inloggen.html")).onMake((e=>{(0,o.o1)((t=>e.style.display=t?"none":""),!0),o.wX.onAuthStateChanged((t=>e.style.display=t?"none":""))})),i.c.p("logout").class("icon","click-action").tooltip("Uitloggen").on("click",(()=>{o.wX.signOut(),l.c.remove("is-logged-in"),l.c.remove("do-login-expiry"),l.c.remove(`permissions-${l.c.get("own-id")}`),l.c.remove("own-id"),location.reload()})).onMake((e=>{(0,o.o1)((t=>e.style.display=t?"":"none"),!0),o.wX.onAuthStateChanged((t=>e.style.display=t?"":"none"))})),i.c.p("menu").id("open-menu-button").class("icon","click-action").style({display:"none"}).on("click",(()=>{b.hasAttribute("shown")?w():(t()(_).stop().fadeIn(200),b.setAttribute("shown",""),T.textContent="menu_open",document.body.classList.add("no-scroll"))}))),f=i.c.div(void 0,"search-box","flex-columns","main-axis-space-between","cross-axis-center","section-gap").style({display:"none"}).children(m=i.c.div(void 0,"results","flex-columns","cross-axis-center","in-section-gap").children(document.createElement("p")).make(),y=i.c.input.text().placeholder("Zoeken...").class("query-input").onValueChanged((t=>{if(p.c.empty(m),t=t.trim()){const n=h.C.search(e,t);m.append(...g.c.interlace(n.map((([e,t])=>i.c.a(t,e).class("subtitle").make())),"•"))}m.appendChild(document.createElement("p"))})).make()).make()),i.c.div("sidebar-container").children(i.c.div("sidebar","links")).on("click",((e,t)=>{e.target===t&&w()}))).make();function w(){t()(_).stop().fadeOut(200),b.removeAttribute("shown"),T.textContent="menu",document.body.classList.remove("no-scroll")}const _=E.querySelector("#sidebar-container"),b=E.querySelector("#sidebar"),T=E.querySelector("#open-menu-button"),S=E.querySelector(".links"),I=E.querySelector("#sidebar"),A=Array.from(E.querySelectorAll(".links > *"));return s.c.onChange((()=>{s.c.isSlimmerOrEq(s.c.Viewport.DESKTOP_SLIM)?(I.prepend(...A),A.forEach((e=>{e instanceof r.c&&(e.foldDir="right")}))):(S.prepend(...A),w(),A.forEach((e=>{e instanceof r.c&&(e.foldDir="down")})))}),!0),E}))}(m),(e=>document.body.prepend(e))),f.c.useDynamicContent(function e(t){return f.c.markLoadStart(e),l.c.getAndRefresh("social-media-links",t.getSocialMediaLinks()).then((e=>i.c.footer().class("page-footer","flex-rows","cross-axis-center").children(i.c.h4("Je vindt ons ook op").id("link-text"),i.c.div().class("social-media-links","flex-columns","main-axis-space-between").children(...e.map((e=>i.c.a(e.href).openInNewTab(!0).children(new d.c(e.origin,e.src)).onMake((t=>{const n=t.firstElementChild;n.alt=e.name,n.classList.add("click-action")}))))),i.c.h5(`© ${(new Date).getFullYear()} Den Geitenwollen Soc.`).class("copyright-notice")).make())).finally((()=>f.c.markLoadEnd(e)))}(m),(e=>document.body.append(e)))})()})();